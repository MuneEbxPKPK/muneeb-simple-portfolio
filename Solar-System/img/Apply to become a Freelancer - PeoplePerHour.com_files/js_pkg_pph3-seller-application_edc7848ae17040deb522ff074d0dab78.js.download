(function(I,X){var aj,ad=Array.prototype.slice,T=decodeURIComponent,aq=I.param,ah,ao,ae,K,ap=I.bbq=I.bbq||{},V,L,ag,am=I.event.special,an="hashchange",Z="querystring",R="fragment",J="elemUrlAttr",af="href",N="src",ab=/^.*\?|#.*$/g,Q,M,ak,ai,W,S={};function P(a){return typeof a==="string"}function U(a){var b=ad.call(arguments,1);return function(){return a.apply(this,b.concat(ad.call(arguments)))}}function ac(a){return a.replace(M,"$2")}function Y(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function al(h,c,j,g,i){var a,d,e,b,f;if(g!==aj){e=j.match(h?M:/^([^#?]*)\??([^#]*)(#?.*)/);f=e[3]||"";if(i===2&&P(g)){d=g.replace(h?Q:ab,"")}else{b=ae(e[2]);g=P(g)?ae[h?R:Z](g):g;d=i===2?g:i===1?I.extend({},g,b):I.extend({},b,g);d=ah(d);if(h){d=d.replace(ak,T)}}a=e[1]+(h?W:d||!e[1]?"?":"")+d+f}else{a=c(j!==aj?j:location.href)}return a}aq[Z]=U(al,0,Y);aq[R]=ao=U(al,1,ac);aq.sorted=ah=function(c,b){var d=[],a={};I.each(aq(c,b).split("&"),function(e,h){var f=h.replace(/(?:%5B|=).*$/,""),g=a[f];if(!g){g=a[f]=[];d.push(f)}g.push(h)});return I.map(d.sort(),function(e){return a[e]}).join("&")};ao.noEscape=function(a){a=a||"";var b=I.map(a.split(""),encodeURIComponent);ak=new RegExp(b.join("|"),"g")};ao.noEscape(",/");ao.ajaxCrawlable=function(a){if(a!==aj){if(a){Q=/^.*(?:#!|#)/;M=/^([^#]*)(?:#!|#)?(.*)$/;W="#!"}else{Q=/^.*#/;M=/^([^#]*)#?(.*)$/;W="#"}ai=!!a}return ai};ao.ajaxCrawlable(0);I.deparam=ae=function(a,d){var b={},c={"true":!0,"false":!1,"null":null};I.each(a.replace(/\+/g," ").split("&"),function(k,f){var l=f.split("="),g=T(l[0]),m,h=b,j=0,e=g.split("]["),i=e.length-1;if(/\[/.test(e[0])&&/\]$/.test(e[i])){e[i]=e[i].replace(/\]$/,"");e=e.shift().split("[").concat(e);i=e.length-1}else{i=0}if(l.length===2){m=T(l[1]);if(d){m=m&&!isNaN(m)?+m:m==="undefined"?aj:c[m]!==aj?c[m]:m}if(i){for(;j<=i;j++){g=e[j]===""?h.length:e[j];h=h[g]=j<i?h[g]||(e[j+1]&&isNaN(e[j+1])?{}:[]):m}}else{if(I.isArray(b[g])){b[g].push(m)}else{if(b[g]!==aj){b[g]=[b[g],m]}else{b[g]=m}}}}else{if(g){b[g]=d?aj:""}}});return b};function aa(a,c,b){if(c===aj||typeof c==="boolean"){b=c;c=aq[a?R:Z]()}else{c=P(c)?c.replace(a?Q:ab,""):c}return ae(c,b)}ae[Z]=U(aa,0);ae[R]=K=U(aa,1);I[J]||(I[J]=function(a){return I.extend(S,a)})({a:af,base:af,iframe:N,img:N,input:N,form:"action",link:af,script:N});ag=I[J];function O(a,c,b,d){if(!P(b)&&typeof b!=="object"){d=b;b=c;c=aj}return this.each(function(){var e=I(this),g=c||ag()[(this.nodeName||"").toLowerCase()]||"",f=g&&e.attr(g)||"";e.attr(g,aq[a](f,b,d))})}I.fn[Z]=U(O,Z);I.fn[R]=U(O,R);ap.pushState=V=function(a,d){if(P(a)&&/^#/.test(a)&&d===aj){d=2}var b=a!==aj,c=ao(location.href,b?a:{},b?d:2);location.href=c};ap.getState=L=function(b,a){return b===aj||typeof b==="boolean"?K(b):K(a)[b]};ap.removeState=function(b){var a={};if(b!==aj){a=L();I.each(I.isArray(b)?b:arguments,function(c,d){delete a[d]})}V(a,2)};am[an]=I.extend(am[an],{add:function(c){var a;function b(e){var d=e[R]=ao();e.getState=function(g,f){return g===aj||typeof g==="boolean"?ae(d,g):ae(d,f)[g]};a.apply(this,arguments)}if(I.isFunction(c)){a=c;return b}else{a=c.handler;c.handler=b}}})})(jQuery,this);(function(j,o,r){var q="hashchange",l=document,n,m=j.event.special,k=l.documentMode,p="on"+q in o&&(k===r||k>7);function s(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}j.fn[q]=function(a){return a?this.bind(q,a):this.trigger(q)};j.fn[q].delay=50;m[q]=j.extend(m[q],{setup:function(){if(p){return false}j(n.start)},teardown:function(){if(p){return false}j(n.stop)}});n=(function(){var d={},e,a=s(),c=function(h){return h},b=c,f=c;d.start=function(){e||g()};d.stop=function(){e&&clearTimeout(e);e=r};function g(){var h=s(),i=f(a);if(h!==a){b(a=h,i);j(o).trigger(q)}else{if(i!==a){location.href=location.href.replace(/#.*/,"")+i}}e=setTimeout(g,j.fn[q].delay)}!p&&(function(){var i,h;d.start=function(){if(!i){h=j.fn[q].src;h=h&&h+s();i=j('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){h||b(s());g()}).attr("src",h||"javascript:0").insertAfter("body")[0].contentWindow;l.onpropertychange=function(){try{if(event.propertyName==="title"){i.document.title=l.title}}catch(t){}}}};d.stop=c;f=function(){return s(i.location.href)};b=function(w,z){var x=i.document,y=j.fn[q].domain;if(w!==z){x.title=l.title;x.open();y&&x.write('<script>document.domain="'+y+'"<\/script>');x.close();i.location.hash=w}}})();return d})()})(jQuery,this);jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+m.path:"";var g=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};(function(b){var a={};b.fn.yiiListView=function(c){return this.each(function(){var d=b.extend({},b.fn.yiiListView.defaults,c||{}),e=b(this),f=e.attr("id");if(d.updateSelector==undefined){d.updateSelector="#"+f+" ."+d.pagerClass.replace(/\s+/g,".")+" a, #"+f+" ."+d.sorterClass.replace(/\s+/g,".")+" a"}b.fn.yiiListView.settings[f]=d;if(d.ajaxUpdate.length>0){b(document).on("click.yiiListView",d.updateSelector,function(){if(d.enableHistory&&window.History.enabled){var g=b(this).attr("href");if(g){var h=g.split("?"),j=b.deparam.querystring("?"+(h[1]||""));delete j[d.ajaxVar];var i=b.param.querystring(h[0],j);window.History.pushState({url:i},document.title,i)}}else{b.fn.yiiListView.update(f,{url:b(this).attr("href")})}return false});if(d.enableHistory&&window.History.enabled){b(window).bind("statechange",function(){var g=window.History.getState();if(g.data.url===undefined){g.data.url=g.url}b.fn.yiiListView.update(f,g.data)})}}})};b.fn.yiiListView.defaults={ajaxUpdate:[],ajaxVar:"ajax",ajaxType:"GET",pagerClass:"pager",loadingClass:"loading",sorterClass:"sorter"};b.fn.yiiListView.settings={};b.fn.yiiListView.getKey=function(d,c){return b("#"+d+" > div.keys > span:eq("+c+")").text()};b.fn.yiiListView.getUrl=function(d){var c=b.fn.yiiListView.settings[d];return c.url||b("#"+d+" > div.keys").attr("title")};b.fn.yiiListView.update=function(f,d){var c,e=b.fn.yiiListView.settings[f];if(d&&d.error!==undefined){c=d.error;delete d.error}d=b.extend({type:e.ajaxType,url:b.fn.yiiListView.getUrl(f),success:function(h,g){b.each(e.ajaxUpdate,function(k,j){var l="#"+j;b(l).replaceWith(b(l,"<div>"+h+"</div>"))});if(e.afterAjaxUpdate!=undefined){e.afterAjaxUpdate(f,h)}},complete:function(){b("#"+f).removeClass(e.loadingClass);a[f]=null},error:function(i,k,j){var g,h;if(i.readyState===0||i.status===0){return}if(c!==undefined){g=c(i);if(g!==undefined&&!g){return}}switch(k){case"timeout":h="The request timed out!";break;case"parsererror":h="Parser error!";break;case"error":if(i.status&&!/^\s*$/.test(i.status)){h="Error "+i.status}else{h="Error"}if(i.responseText&&!/^\s*$/.test(i.responseText)){h=h+": "+i.responseText}break}if(e.ajaxUpdateError!==undefined){e.ajaxUpdateError(i,k,j,h,f)}else{if(h){alert(h)}}}},d||{});if(d.data!=undefined&&d.type=="GET"){d.url=b.param.querystring(d.url,d.data);d.data={}}if(e.ajaxVar){d.url=b.param.querystring(d.url,e.ajaxVar+"="+f)}if(a[f]!=null){a[f].abort()}b("#"+f).addClass(e.loadingClass);if(e.beforeAjaxUpdate!=undefined){e.beforeAjaxUpdate(f,d)}a[f]=b.ajax(d)}})(jQuery);(function(a){a.yii={version:"1.0",submitForm:function(d,c,g){var e=a(d).parents("form")[0];if(!e){e=document.createElement("form");e.style.display="none";d.parentNode.appendChild(e);e.method="POST"}if(typeof c=="string"&&c!=""){e.action=c}if(d.target!=null){e.target=d.target}var b=[];a.each(g,function(h,i){var f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name",h);f.setAttribute("value",i);e.appendChild(f);b.push(f)});a(e).data("submitObject",a(d));a(e).trigger("submit");a.each(b,function(){e.removeChild(this)})}}})(jQuery);(function(b){var a=function(e){var d,f=[];if(!e.length){return undefined}if(e[0].tagName.toLowerCase()==="span"){e.find(":checked").each(function(){f.push(this.value)});return f.join(",")}d=e.attr("type");if(d==="checkbox"||d==="radio"){return e.filter(":checked").val()}else{return e.val()}};b.fn.yiiactiveform=function(c){return this.each(function(){var e=b.extend({},b.fn.yiiactiveform.defaults,c||{}),d=b(this);if(e.validationUrl===undefined){e.validationUrl=d.attr("action")}b.each(e.attributes,function(h){this.value=a(d.find("#"+this.inputID));e.attributes[h]=b.extend({},{validationDelay:e.validationDelay,validateOnChange:e.validateOnChange,validateOnType:e.validateOnType,hideErrorMessage:e.hideErrorMessage,inputContainer:e.inputContainer,errorCssClass:e.errorCssClass,successCssClass:e.successCssClass,beforeValidateAttribute:e.beforeValidateAttribute,afterValidateAttribute:e.afterValidateAttribute,validatingCssClass:e.validatingCssClass,errorCallback:e.errorCallback},this)});d.data("settings",e);e.submitting=false;var g=function(i,h){if(h){i.status=2}b.each(e.attributes,function(){if(this.value!==a(d.find("#"+this.inputID))){this.status=2;h=true}});if(!h){return}if(e.timer!==undefined){clearTimeout(e.timer)}e.timer=setTimeout(function(){if(e.submitting||d.is(":hidden")){return}if(i.beforeValidateAttribute===undefined||i.beforeValidateAttribute(d,i)){b.each(e.attributes,function(){if(this.status===2){this.status=3;b.fn.yiiactiveform.getInputContainer(this,d).addClass(this.validatingCssClass)}});b.fn.yiiactiveform.validate(d,function(k){var j=false;b.each(e.attributes,function(){if(this.status===2||this.status===3){j=b.fn.yiiactiveform.updateInput(this,k,d)||j}});if(i.afterValidateAttribute!==undefined){i.afterValidateAttribute(d,i,k,j)}},e.errorCallback)}},i.validationDelay)};b.each(e.attributes,function(h,j){if(this.validateOnChange){d.find("#"+this.inputID).on("change",function(){g(j,false)}).on("blur",function(){if(j.status!==2&&j.status!==3){g(j,!j.status)}})}if(this.validateOnType){d.find("#"+this.inputID).keyup(function(){if(j.value!==a(b(this))){g(j,false)}})}});if(e.validateOnSubmit){d.on("mouseup keyup",":submit",function(){d.data("submitObject",b(this))});var f=false;d.on("submit",function(){if(f){f=false;return true}if(e.timer!==undefined){clearTimeout(e.timer)}e.submitting=true;if(e.beforeValidate===undefined||e.beforeValidate(d)){b.fn.yiiactiveform.validate(d,function(j){var h=false;b.each(e.attributes,function(){h=b.fn.yiiactiveform.updateInput(this,j,d)||h});b.fn.yiiactiveform.updateSummary(d,j);if(e.afterValidate===undefined||e.afterValidate(d,j,h)){if(!h){f=true;var i=d.data("submitObject")||d.find(":submit:first");if(i.length){i.trigger("click")}else{d.trigger("submit")}return}}e.submitting=false},e.errorCallback)}else{e.submitting=false}return false})}d.bind("reset",function(){setTimeout(function(){b.each(e.attributes,function(){this.status=0;var h=d.find("#"+this.errorID),i=b.fn.yiiactiveform.getInputContainer(this,d);i.removeClass(this.validatingCssClass+" "+this.errorCssClass+" "+this.successCssClass);h.html("").hide();this.value=a(d.find("#"+this.inputID))});d.find("label, :input").each(function(){b(this).removeClass(e.errorCss)});b("#"+e.summaryID).hide().find("ul").html("");if(e.focus!==undefined&&!window.location.hash){d.find(e.focus).trigger("focus")}},1)});if(e.focus!==undefined&&!window.location.hash){d.find(e.focus).trigger("focus")}})};b.fn.yiiactiveform.getInputContainer=function(d,c){if(d.inputContainer===undefined){return c.find("#"+d.inputID).closest("div")}else{return c.find(d.inputContainer).filter(':has("#'+d.inputID+'")')}};b.fn.yiiactiveform.updateInput=function(i,h,g){i.status=1;var d,j,c=false,f=g.find("#"+i.inputID),e=g.data("settings").errorCss;if(f.length){c=h!==null&&b.isArray(h[i.id])&&h[i.id].length>0;d=g.find("#"+i.errorID);j=b.fn.yiiactiveform.getInputContainer(i,g);j.removeClass(i.validatingCssClass+" "+i.errorCssClass+" "+i.successCssClass);j.find("label, :input").each(function(){b(this).removeClass(e)});if(c){d.html(h[i.id][0]);j.addClass(i.errorCssClass)}else{if(i.enableAjaxValidation||i.clientValidation){j.addClass(i.successCssClass)}}if(!i.hideErrorMessage){d.toggle(c)}i.value=a(f)}return c};b.fn.yiiactiveform.updateSummary=function(h,g){var e=b(h).data("settings"),f="";if(e.summaryID===undefined){return}if(g){var c=[];for(var d in e.attributes){if(e.attributes[d].summary){c.push(e.attributes[d].id)}}b.each(e.attributes,function(){if(b.inArray(this.id,c)!==-1&&b.isArray(g[this.id])){b.each(g[this.id],function(i,k){f=f+"<li>"+k+"</li>"})}})}b("#"+e.summaryID).toggle(f!=="").find("ul").html(f)};b.fn.yiiactiveform.validate=function(d,e,i){var k=b(d),f=k.data("settings"),j=false,h={};b.each(f.attributes,function(){var l,m=[];if(this.clientValidation!==undefined&&(f.submitting||this.status===2||this.status===3)){l=a(k.find("#"+this.inputID));this.clientValidation(l,m,this);if(m.length){h[this.id]=m}}if(this.enableAjaxValidation&&!m.length&&(f.submitting||this.status===2||this.status===3)){j=true}});if(!j||f.submitting&&!b.isEmptyObject(h)){if(f.submitting){setTimeout(function(){e(h)},200)}else{e(h)}return}var c=k.data("submitObject"),g="&"+f.ajaxVar+"="+k.attr("id");if(c&&c.length){g+="&"+c.attr("name")+"="+c.attr("value")}b.ajax({url:f.validationUrl,type:k.attr("method"),data:k.serialize()+g,dataType:"json",success:function(l){if(l!==null&&typeof l==="object"){b.each(f.attributes,function(){if(!this.enableAjaxValidation){delete l[this.id]}});e(b.extend({},h,l))}else{e(h)}},error:function(){if(i!==undefined){i()}}})};b.fn.yiiactiveform.getSettings=function(c){return b(c).data("settings")};b.fn.yiiactiveform.defaults={ajaxVar:"ajax",validationUrl:undefined,validationDelay:200,validateOnSubmit:false,validateOnChange:true,validateOnType:false,hideErrorMessage:false,inputContainer:undefined,errorCss:"error",errorCssClass:"error",successCssClass:"success",validatingCssClass:"validating",summaryID:undefined,timer:undefined,beforeValidateAttribute:undefined,afterValidateAttribute:undefined,beforeValidate:undefined,afterValidate:undefined,focus:undefined,attributes:[],errorCallback:undefined}})(jQuery);
/*!
 * Amplify Store - Persistent Client-Side Storage @VERSION
 * 
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 * 
 * http://amplifyjs.com
 */
(function(a,g){var b=a.store=function(i,k,e,j){var j=b.type;if(e&&e.type&&e.type in b.types){j=e.type}return b.types[j](i,k,e||{})};b.types={};b.type=null;b.addType=function(e,i){if(!b.type){b.type=e}b.types[e]=i;b[e]=function(k,l,j){j=j||{};j.type=e;return b(k,l,j)}};b.error=function(){return"amplify.store quota exceeded"};var h=/^__amplify__/;function d(e,i){b.addType(e,function(r,q,s){var k,p,l,m,n=q,j=(new Date()).getTime();if(!r){n={};m=[];l=0;try{r=i.length;while(r=i.key(l++)){if(h.test(r)){p=JSON.parse(i.getItem(r));if(p.expires&&p.expires<=j){m.push(r)}else{n[r.replace(h,"")]=p.data}}}while(r=m.pop()){i.removeItem(r)}}catch(o){}return n}r="__amplify__"+r;if(q===g){k=i.getItem(r);p=k?JSON.parse(k):{expires:-1};if(p.expires&&p.expires<=j){i.removeItem(r)}else{return p.data}}else{if(q===null){i.removeItem(r)}else{p=JSON.stringify({data:q,expires:s.expires?j+s.expires:null});try{i.setItem(r,p)}catch(o){b[e]();try{i.setItem(r,p)}catch(o){throw b.error()}}}}return n})}for(var c in {localStorage:1,sessionStorage:1}){try{if(window[c].getItem){d(c,window[c])}}catch(f){}}if(!b.types.localStorage&&window.globalStorage){try{d("globalStorage",window.globalStorage[window.location.hostname]);if(b.type==="sessionStorage"){b.type="globalStorage"}}catch(f){}}(function(){if(b.types.localStorage){return}var k=document.createElement("div"),j="amplify";k.style.display="none";document.getElementsByTagName("head")[0].appendChild(k);try{k.addBehavior("#default#userdata");k.load(j)}catch(i){k.parentNode.removeChild(k);return}b.addType("userData",function(t,s,u){k.load(j);var p,r,n,l,m,o=s,e=(new Date()).getTime();if(!t){o={};m=[];l=0;while(p=k.XMLDocument.documentElement.attributes[l++]){r=JSON.parse(p.value);if(r.expires&&r.expires<=e){m.push(p.name)}else{o[p.name]=r.data}}while(t=m.pop()){k.removeAttribute(t)}k.save(j);return o}t=t.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");t=t.replace(/^-/,"_-");if(s===g){p=k.getAttribute(t);r=p?JSON.parse(p):{expires:-1};if(r.expires&&r.expires<=e){k.removeAttribute(t)}else{return r.data}}else{if(s===null){k.removeAttribute(t)}else{n=k.getAttribute(t);r=JSON.stringify({data:s,expires:(u.expires?(e+u.expires):null)});k.setAttribute(t,r)}}try{k.save(j)}catch(q){if(n===null){k.removeAttribute(t)}else{k.setAttribute(t,n)}b.userData();try{k.setAttribute(t,r);k.save(j)}catch(q){if(n===null){k.removeAttribute(t)}else{k.setAttribute(t,n)}throw b.error()}}return o})}());(function(){var j={},e={};function i(k){return k===g?g:JSON.parse(JSON.stringify(k))}b.addType("memory",function(l,m,k){if(!l){return i(j)}if(m===g){return i(j[l])}if(e[l]){clearTimeout(e[l]);delete e[l]}if(m===null){delete j[l];return null}j[l]=m;if(k.expires){e[l]=setTimeout(function(){delete j[l];delete e[l]},k.expires)}return m})}())}(this.amplify=this.amplify||{}));window.bootbox=window.bootbox||(function init(i,c){var m={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var f={locale:"en",backdrop:true,animate:true,className:null,keyboard:false,closeButton:true,show:true,container:"body"};var h={};function p(r){var q=a[f.locale];return q?q[r]:a.en[r]}function d(s,r,t){s.preventDefault();var q=i.isFunction(t)&&t(s)===false;if(!q){r.modal("hide")}}function j(s){var q,r=0;for(q in s){r++}return r}function k(s,r){var q=0;i.each(s,function(t,u){r(t,u,q++)})}function b(q){var s;var r;if(typeof q!=="object"){throw new Error("Please supply an object of options")}if(!q.message){throw new Error("Please specify a message")}q=i.extend({},f,q);if(!q.buttons){q.buttons={}}q.backdrop=q.backdrop?"static":false;s=q.buttons;r=j(s);k(s,function(v,u,t){if(i.isFunction(u)){u=s[v]={callback:u}}if(i.type(u)!=="object"){throw new Error("button with key "+v+" must be an object")}if(!u.label){u.label=v}if(!u.className){if(r<=2&&t===r-1){u.className="btn-primary"}else{u.className="btn-default"}}});return q}function g(r,s){var t=r.length;var q={};if(t<1||t>2){throw new Error("Invalid argument length")}if(t===2||typeof r[0]==="string"){q[s[0]]=r[0];q[s[1]]=r[1]}else{q=r[0]}return q}function l(s,q,r){return i.extend(true,{},s,g(q,r))}function e(t,u,s,r){var q={className:"bootbox-"+t,buttons:o.apply(null,u)};return n(l(q,r,s),u)}function o(){var u={};for(var s=0,q=arguments.length;s<q;s++){var t=arguments[s];var r=t.toLowerCase();var v=t.toUpperCase();u[r]={label:p(v)}}return u}function n(q,s){var r={};k(s,function(t,u){r[u]=true});k(q.buttons,function(t){if(r[t]===c){throw new Error("button key "+t+" is not allowed (options are "+s.join("\n")+")")}});return q}h.alert=function(){var q;q=e("alert",["ok"],["message","callback"],arguments);if(q.callback&&!i.isFunction(q.callback)){throw new Error("alert requires callback property to be a function when provided")}q.buttons.ok.callback=q.onEscape=function(){if(i.isFunction(q.callback)){return q.callback()}return true};return h.dialog(q)};h.confirm=function(){var q;q=e("confirm",["cancel","confirm"],["message","callback"],arguments);q.buttons.cancel.callback=q.onEscape=function(){return q.callback(false)};q.buttons.confirm.callback=function(){return q.callback(true)};if(!i.isFunction(q.callback)){throw new Error("confirm requires a callback")}return h.dialog(q)};h.prompt=function(){var y;var t;var v;var q;var w;var s;var u;q=i(m.form);t={className:"bootbox-prompt",buttons:o("cancel","confirm"),value:"",inputType:"text"};y=n(l(t,arguments,["title","callback"]),["cancel","confirm"]);s=(y.show===c)?true:y.show;y.message=q;y.buttons.cancel.callback=y.onEscape=function(){return y.callback(null)};y.buttons.confirm.callback=function(){var A;switch(y.inputType){case"text":case"email":case"select":case"password":A=w.val();break;case"checkbox":var z=w.find("input:checked");A=[];k(z,function(B,C){A.push(i(C).val())});break}return y.callback(A)};y.show=false;if(!y.title){throw new Error("prompt requires a title")}if(!i.isFunction(y.callback)){throw new Error("prompt requires a callback")}if(!m.inputs[y.inputType]){throw new Error("invalid prompt type")}w=i(m.inputs[y.inputType]);switch(y.inputType){case"text":case"email":case"password":w.val(y.value);break;case"select":var r={};u=y.inputOptions||[];if(!u.length){throw new Error("prompt with select requires options")}k(u,function(z,A){var B=w;if(A.value===c||A.text===c){throw new Error("given options in wrong format")}if(A.group){if(!r[A.group]){r[A.group]=i("<optgroup/>").attr("label",A.group)}B=r[A.group]}B.append("<option value='"+A.value+"'>"+A.text+"</option>")});k(r,function(z,A){w.append(A)});w.val(y.value);break;case"checkbox":var x=i.isArray(y.value)?y.value:[y.value];u=y.inputOptions||[];if(!u.length){throw new Error("prompt with checkbox requires options")}if(!u[0].value||!u[0].text){throw new Error("given options in wrong format")}w=i("<div/>");k(u,function(z,A){var B=i(m.inputs[y.inputType]);B.find("input").attr("value",A.value);B.find("label").append(A.text);k(x,function(C,D){if(D===A.value){B.find("input").prop("checked",true)}});w.append(B)});break}if(y.placeholder){w.attr("placeholder",y.placeholder)}q.append(w);q.on("submit",function(z){z.preventDefault();v.find(".btn-primary").click()});v=h.dialog(y);v.off("shown.bs.modal");v.on("shown.bs.modal",function(){w.focus()});if(s===true){v.modal("show")}return v};h.dialog=function(s){s=b(s);var t=i(m.dialog);var q=t.find(".modal-body");var w=s.buttons;var u="";var v={onEscape:s.onEscape};k(w,function(y,x){u+="<button data-bb-handler='"+y+"' type='button' class='btn "+x.className+"'>"+x.label+"</button>";v[y]=x.callback});q.find(".bootbox-body").html(s.message);if(s.animate===true){t.addClass("fade")}if(s.className){t.addClass(s.className)}if(s.title){q.before(m.header)}if(s.closeButton){var r=i(m.closeButton);if(s.title){t.find(".modal-header").prepend(r)}else{r.css("margin-top","-10px").prependTo(q)}}if(s.title){t.find(".modal-title").html(s.title)}if(u.length){q.after(m.footer);t.find(".modal-footer").html(u)}t.on("hidden.bs.modal",function(x){if(x.target===this){t.remove()}});t.on("shown.bs.modal",function(){t.find(".btn-primary:first").focus()});t.on("escape.close.bb",function(x){if(v.onEscape){d(x,t,v.onEscape)}});t.on("click",".modal-footer button",function(y){var x=i(this).data("bb-handler");d(y,t,v[x])});t.on("click",".bootbox-close-button",function(x){d(x,t,v.onEscape)});t.on("keyup",function(x){if(x.which===27){t.trigger("escape.close.bb")}});i(s.container).append(t);t.modal({backdrop:s.backdrop,keyboard:s.keyboard||false,show:false});if(s.show){t.modal("show")}return t};h.setDefaults=function(){var q={};if(arguments.length===2){q[arguments[0]]=arguments[1]}else{q=arguments[0]}i.extend(f,q)};h.hideAll=function(){i(".bootbox").modal("hide")};var a={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};h.init=function(q){window.bootbox=init(q||i)};return h}(window.jQuery));var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
/*!
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b){var r={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(t){return !t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return typeof t==="string"},isNumber:function(t){return typeof t==="number"},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(t){return typeof t==="undefined"},bind:b.proxy,each:function(v,t){b.each(v,u);function u(w,x){return t(x,w)}},map:b.map,filter:b.grep,every:function(u,v){var t=true;if(!u){return t}b.each(u,function(w,x){if(!(t=v.call(null,x,w,u))){return false}});return !!t},some:function(u,v){var t=false;if(!u){return t}b.each(u,function(w,x){if(t=v.call(null,x,w,u)){return false}});return !!t},mixin:b.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function e(u){return b.isFunction(u)?u:t;function t(){return String(u)}},defer:function(t){setTimeout(t,0)},debounce:function(v,x,u){var w,t;return function(){var B=this,A=arguments,z,y;z=function(){w=null;if(!u){t=v.apply(B,A)}};y=u&&!w;clearTimeout(w);w=setTimeout(z,x);if(y){t=v.apply(B,A)}return t}},throttle:function(y,A){var w,v,z,t,x,u;x=0;u=function(){x=new Date();z=null;t=y.apply(w,v)};return function(){var B=new Date(),C=A-(B-x);w=this;v=arguments;if(C<=0){clearTimeout(z);z=null;x=B;t=y.apply(w,v)}else{if(!z){z=setTimeout(u,C)}}return t}},noop:function(){}};var n="0.10.2";var o=function(u){return{nonword:t,whitespace:v,obj:{nonword:w(t),whitespace:w(v)}};function v(x){return x.split(/\s+/)}function t(x){return x.split(/\W+/)}function w(y){return function x(z){return function A(B){return y(B[z])}}}}();var d=function(){function u(A){this.maxSize=A||100;this.size=0;this.hash={};this.list=new x()}r.mixin(u.prototype,{set:function z(A,D){var C=this.list.tail,B;if(this.size>=this.maxSize){this.list.remove(C);delete this.hash[C.key]}if(B=this.hash[A]){B.val=D;this.list.moveToFront(B)}else{B=new v(A,D);this.list.add(B);this.hash[A]=B;this.size++}},get:function w(A){var B=this.hash[A];if(B){this.list.moveToFront(B);return B.val}}});function x(){this.head=this.tail=null}r.mixin(x.prototype,{add:function y(A){if(this.head){A.next=this.head;this.head.prev=A}this.head=A;this.tail=this.tail||A},remove:function t(A){A.prev?A.prev.next=A.next:this.head=A.next;A.next?A.next.prev=A.prev:this.tail=A.prev},moveToFront:function(A){this.remove(A);this.add(A)}});function v(A,B){this.key=A;this.val=B;this.prev=this.next=null}return u}();var p=function(){var t,u;try{t=window.localStorage;t.setItem("~~~","!");t.removeItem("~~~")}catch(y){t=null}function w(A){this.prefix=["__",A,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(t&&window.JSON){u={_prefix:function(A){return this.prefix+A},_ttlKey:function(A){return this._prefix(A)+this.ttlKey},get:function(A){if(this.isExpired(A)){this.remove(A)}return z(t.getItem(this._prefix(A)))},set:function(B,C,A){if(r.isNumber(A)){t.setItem(this._ttlKey(B),x(v()+A))}else{t.removeItem(this._ttlKey(B))}return t.setItem(this._prefix(B),x(C))},remove:function(A){t.removeItem(this._ttlKey(A));t.removeItem(this._prefix(A));return this},clear:function(){var C,B,D=[],A=t.length;for(C=0;C<A;C++){if((B=t.key(C)).match(this.keyMatcher)){D.push(B.replace(this.keyMatcher,""))}}for(C=D.length;C--;){this.remove(D[C])}return this},isExpired:function(B){var A=z(t.getItem(this._ttlKey(B)));return r.isNumber(A)&&v()>A?true:false}}}else{u={get:r.noop,set:r.noop,remove:r.noop,clear:r.noop,isExpired:r.noop}}r.mixin(w.prototype,u);return w;function v(){return new Date().getTime()}function x(A){return JSON.stringify(r.isUndefined(A)?null:A)}function z(A){return JSON.parse(A)}}();var q=function(){var v=0,w={},t=6,z=new d(10);function A(B){B=B||{};this._send=B.transport?x(B.transport):b.ajax;this._get=B.rateLimiter?B.rateLimiter(this._get):this._get}A.setMaxPendingRequests=function u(B){t=B};A.resetCache=function y(){z=new d(10)};r.mixin(A.prototype,{_get:function(F,I,C){var H=this,G;if(G=w[F]){G.done(E).fail(D)}else{if(v<t){v++;w[F]=this._send(F,I).done(E).fail(D).always(B)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function E(J){C&&C(null,J);z.set(F,J)}function D(){C&&C(true)}function B(){v--;delete w[F];if(H.onDeckRequestArgs){H._get.apply(H,H.onDeckRequestArgs);H.onDeckRequestArgs=null}}},get:function(C,E,B){var D;if(r.isFunction(E)){B=E;E={}}if(D=z.get(C)){r.defer(function(){B&&B(null,D)})}else{this._get(C,E,B)}return !!D}});return A;function x(B){return function C(E,H){var D=b.Deferred();B(E,H,G,F);return D;function G(I){r.defer(function(){D.resolve(I)})}function F(I){r.defer(function(){D.reject(I)})}}}}();var j=function(){function t(C){C=C||{};if(!C.datumTokenizer||!C.queryTokenizer){b.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=C.datumTokenizer;this.queryTokenizer=C.queryTokenizer;this.reset()}r.mixin(t.prototype,{bootstrap:function v(C){this.datums=C.datums;this.trie=C.trie},add:function(D){var C=this;D=r.isArray(D)?D:[D];r.each(D,function(E){var G,F;G=C.datums.push(E)-1;F=x(C.datumTokenizer(E));r.each(F,function(H){var K,J,I;K=C.trie;J=H.split("");while(I=J.shift()){K=K.children[I]||(K.children[I]=A());K.ids.push(G)}})})},get:function u(E){var C=this,F,D;F=x(this.queryTokenizer(E));r.each(F,function(G){var K,J,I,H;if(D&&D.length===0){return false}K=C.trie;J=G.split("");while(K&&(I=J.shift())){K=K.children[I]}if(K&&J.length===0){H=K.ids.slice(0);D=D?y(D,H):H}else{D=[];return false}});return D?r.map(w(D),function(G){return C.datums[G]}):[]},reset:function z(){this.datums=[];this.trie=A()},serialize:function B(){return{datums:this.datums,trie:this.trie}}});return t;function x(C){C=r.filter(C,function(D){return !!D});C=r.map(C,function(D){return D.toLowerCase()});return C}function A(){return{ids:[],children:{}}}function w(F){var C={},E=[];for(var D=0;D<F.length;D++){if(!C[F[D]]){C[F[D]]=true;E.push(F[D])}}return E}function y(F,D){var C=0,E=0,H=[];F=F.sort(G);D=D.sort(G);while(C<F.length&&E<D.length){if(F[C]<D[E]){C++}else{if(F[C]>D[E]){E++}else{H.push(F[C]);C++;E++}}}return H;function G(J,I){return J-I}}}();var g=function(){return{local:v,prefetch:t,remote:u};function v(w){return w.local||null}function t(y){var x,w;w={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(x=y.prefetch||null){x=r.isString(x)?{url:x}:x;x=r.mixin(w,x);x.thumbprint=n+x.thumbprint;x.ajax.type=x.ajax.type||"GET";x.ajax.dataType=x.ajax.dataType||"json";!x.url&&b.error("prefetch requires url to be set")}return x}function u(A){var y,z;z={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(y=A.remote||null){y=r.isString(y)?{url:y}:y;y=r.mixin(z,y);y.rateLimiter=/^throttle$/i.test(y.rateLimitBy)?x(y.rateLimitWait):w(y.rateLimitWait);y.ajax.type=y.ajax.type||"GET";y.ajax.dataType=y.ajax.dataType||"json";delete y.rateLimitBy;delete y.rateLimitWait;!y.url&&b.error("remote requires url to be set")}return y;function w(B){return function(C){return r.debounce(C,B)}}function x(B){return function(C){return r.throttle(C,B)}}}}();(function(E){var t,z;t=E.Bloodhound;z={data:"data",protocol:"protocol",thumbprint:"thumbprint"};E.Bloodhound=v;function v(L){if(!L||!L.local&&!L.prefetch&&!L.remote){b.error("one of local, prefetch, or remote is required")}this.limit=L.limit||5;this.sorter=C(L.sorter);this.dupDetector=L.dupDetector||B;this.local=g.local(L);this.prefetch=g.prefetch(L);this.remote=g.remote(L);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new j({datumTokenizer:L.datumTokenizer,queryTokenizer:L.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}v.noConflict=function K(){E.Bloodhound=t;return v};v.tokenizers=o;r.mixin(v.prototype,{_loadPrefetch:function w(P){var M=this,O,L;if(O=this._readFromStorage(P.thumbprint)){this.index.bootstrap(O);L=b.Deferred().resolve()}else{L=b.ajax(P.url,P.ajax).done(N)}return L;function N(Q){M.clear();M.add(P.filter?P.filter(Q):Q);M._saveToStorage(M.index.serialize(),P.thumbprint,P.ttl)}},_getFromRemote:function y(Q,L){var P=this,N,O;Q=Q||"";O=encodeURIComponent(Q);N=this.remote.replace?this.remote.replace(this.remote.url,Q):this.remote.url.replace(this.remote.wildcard,O);return this.transport.get(N,this.remote.ajax,M);function M(R,S){R?L([]):L(P.remote.filter?P.remote.filter(S):S)}},_saveToStorage:function F(N,M,L){if(this.storage){this.storage.set(z.data,N,L);this.storage.set(z.protocol,location.protocol,L);this.storage.set(z.thumbprint,M,L)}},_readFromStorage:function J(M){var L={},N;if(this.storage){L.data=this.storage.get(z.data);L.protocol=this.storage.get(z.protocol);L.thumbprint=this.storage.get(z.thumbprint)}N=L.thumbprint!==M||L.protocol!==location.protocol;return L.data&&!N?L.data:null},_initialize:function u(){var O=this,N=this.local,L;L=this.prefetch?this._loadPrefetch(this.prefetch):b.Deferred().resolve();N&&L.done(M);this.transport=this.remote?new q(this.remote):null;return this.initPromise=L.promise();function M(){O.add(r.isFunction(N)?N():N)}},initialize:function u(L){return !this.initPromise||L?this._initialize():this.initPromise},add:function A(L){this.index.add(L)},get:function H(P,L){var N=this,O=[],M=false;O=this.index.get(P);O=this.sorter(O).slice(0,this.limit);if(O.length<this.limit&&this.transport){M=this._getFromRemote(P,Q)}if(!M){(O.length>0||!this.transport)&&L&&L(O)}function Q(S){var R=O.slice(0);r.each(S,function(U){var T;T=r.some(R,function(V){return N.dupDetector(U,V)});!T&&R.push(U);return R.length<N.limit});L&&L(N.sorter(R))}},clear:function D(){this.index.reset()},clearPrefetchCache:function x(){this.storage&&this.storage.clear()},clearRemoteCache:function G(){this.transport&&q.resetCache()},ttAdapter:function I(){return r.bind(this.get,this)}});return v;function C(M){return r.isFunction(M)?L:N;function L(O){return O.sort(M)}function N(O){return O}}function B(){return false}})(this);var i={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'};var h={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(r.isMsie()){r.mixin(h.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(r.isMsie()&&r.isMsie()<=7){r.mixin(h.input,{marginTop:"-1px"})}var a=function(){var u="typeahead:";function t(v){if(!v||!v.el){b.error("EventBus initialized without el")}this.$el=b(v.el)}r.mixin(t.prototype,{trigger:function(w){var v=[].slice.call(arguments,1);this.$el.trigger(u+w,v)}});return t}();var f=function(){var v=/\s+/,z=t();return{onSync:A,onAsync:u,off:w,trigger:x};function B(H,F,D,E){var G;if(!D){return this}F=F.split(v);D=E?C(D,E):D;this._callbacks=this._callbacks||{};while(G=F.shift()){this._callbacks[G]=this._callbacks[G]||{sync:[],async:[]};this._callbacks[G][H].push(D)}return this}function u(F,D,E){return B.call(this,"async",F,D,E)}function A(F,D,E){return B.call(this,"sync",F,D,E)}function w(D){var E;if(!this._callbacks){return this}D=D.split(v);while(E=D.shift()){delete this._callbacks[E]}return this}function x(E){var F,G,D,H,I;if(!this._callbacks){return this}E=E.split(v);D=[].slice.call(arguments,1);while((F=E.shift())&&(G=this._callbacks[F])){H=y(G.sync,this,[F].concat(D));I=y(G.async,this,[F].concat(D));H()&&z(I)}return this}function y(G,F,E){return D;function D(){var I;for(var H=0;!I&&H<G.length;H+=1){I=G[H].apply(F,E)===false}return !I}}function t(){var E;if(window.setImmediate){E=function F(G){setImmediate(function(){G()})}}else{E=function D(G){setTimeout(function(){G()},0)}}return E}function C(E,D){return E.bind?E.bind(D):function(){E.apply(D,[].slice.call(arguments,0))}}}();var c=function(w){var v={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function u(A){var x;A=r.mixin({},v,A);if(!A.node||!A.pattern){return}A.pattern=r.isArray(A.pattern)?A.pattern:[A.pattern];x=t(A.pattern,A.caseSensitive,A.wordsOnly);y(A.node,z);function z(D){var C,B;if(C=x.exec(D.data)){wrapperNode=w.createElement(A.tagName);A.className&&(wrapperNode.className=A.className);B=D.splitText(C.index);B.splitText(C[0].length);wrapperNode.appendChild(B.cloneNode(true));D.parentNode.replaceChild(wrapperNode,B)}return !!C}function y(E,F){var C,D=3;for(var B=0;B<E.childNodes.length;B++){C=E.childNodes[B];if(C.nodeType===D){B+=F(C)?1:0}else{y(C,F)}}}};function t(z,x,C){var B=[],A;for(var y=0;y<z.length;y++){B.push(r.escapeRegExChars(z[y]))}A=C?"\\b("+B.join("|")+")\\b":"("+B.join("|")+")";return x?new RegExp(A):new RegExp(A,"i")}}(window.document);var l=function(){var P;P={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function M(Y){var W=this,X,T,V,U;Y=Y||{};if(!Y.input){b.error("input is missing")}X=r.bind(this._onBlur,this);T=r.bind(this._onFocus,this);V=r.bind(this._onKeydown,this);U=r.bind(this._onInput,this);this.$hint=b(Y.hint);this.$input=b(Y.input).on("blur.tt",X).on("focus.tt",T).on("keydown.tt",V);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=r.noop}if(!r.isMsie()){this.$input.on("input.tt",U)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(Z){if(P[Z.which||Z.keyCode]){return}r.defer(r.bind(W._onInput,W,Z))})}this.query=this.$input.val();this.$overflowHelper=F(this.$input)}M.normalizeQuery=function(T){return(T||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};r.mixin(M.prototype,f,{_onBlur:function D(){this.resetInputValue();this.trigger("blurred")},_onFocus:function x(){this.trigger("focused")},_onKeydown:function R(T){var U=P[T.which||T.keyCode];this._managePreventDefault(U,T);if(U&&this._shouldTrigger(U,T)){this.trigger(U+"Keyed",T)}},_onInput:function u(){this._checkInputValue()},_managePreventDefault:function z(X,W){var V,U,T;switch(X){case"tab":U=this.getHint();T=this.getInputValue();V=U&&U!==T&&!G(W);break;case"up":case"down":V=!G(W);break;default:V=false}V&&W.preventDefault()},_shouldTrigger:function S(V,U){var T;switch(V){case"tab":T=!G(U);break;default:T=true}return T},_checkInputValue:function A(){var T,U,V;T=this.getInputValue();U=C(T,this.query);V=U?this.query.length!==T.length:false;if(!U){this.trigger("queryChanged",this.query=T)}else{if(V){this.trigger("whitespaceChanged",this.query)}}},focus:function I(){this.$input.focus()},blur:function N(){this.$input.blur()},getQuery:function K(){return this.query},setQuery:function J(T){this.query=T},getInputValue:function y(){return this.$input.val()},setInputValue:function B(U,T){this.$input.val(U);T?this.clearHint():this._checkInputValue()},resetInputValue:function w(){this.setInputValue(this.query,true)},getHint:function v(){return this.$hint.val()},setHint:function O(T){this.$hint.val(T)},clearHint:function E(){this.setHint("")},clearHintIfInvalid:function t(){var W,V,T,U;W=this.getInputValue();V=this.getHint();T=W!==V&&V.indexOf(W)===0;U=W!==""&&T&&!this.hasOverflow();!U&&this.clearHint()},getLanguageDirection:function H(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function L(){var T=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=T},isCursorAtEnd:function(){var U,V,T;U=this.$input.val().length;V=this.$input[0].selectionStart;if(r.isNumber(V)){return V===U}else{if(document.selection){T=document.selection.createRange();T.moveStart("character",-U);return U===T.text.length}}return true},destroy:function Q(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return M;function F(T){return b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:T.css("font-family"),fontSize:T.css("font-size"),fontStyle:T.css("font-style"),fontVariant:T.css("font-variant"),fontWeight:T.css("font-weight"),wordSpacing:T.css("word-spacing"),letterSpacing:T.css("letter-spacing"),textIndent:T.css("text-indent"),textRendering:T.css("text-rendering"),textTransform:T.css("text-transform")}).insertAfter(T)}function C(U,T){return M.normalizeQuery(U)===M.normalizeQuery(T)}function G(T){return T.altKey||T.ctrlKey||T.metaKey||T.shiftKey}}();var s=function(){var u="ttDataset",I="ttValue",C="ttDatum";function t(J){J=J||{};J.templates=J.templates||{};if(!J.source){b.error("missing source")}if(J.name&&!w(J.name)){b.error("invalid dataset name: "+J.name)}this.query=null;this.highlight=!!J.highlight;this.name=J.name||r.getUniqueId();this.source=J.source;this.displayFn=x(J.display||J.displayKey);this.templates=y(J.templates,this.displayFn);this.$el=b(i.dataset.replace("%CLASS%",this.name))}t.extractDatasetName=function G(J){return b(J).data(u)};t.extractValue=function D(J){return b(J).data(I)};t.extractDatum=function D(J){return b(J).data(C)};r.mixin(t.prototype,f,{_render:function v(P,J){if(!this.$el){return}var O=this,L;this.$el.empty();L=J&&J.length;if(!L&&this.templates.empty){this.$el.html(K()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}else{if(L){this.$el.html(Q()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}}this.trigger("rendered");function K(){return O.templates.empty({query:P,isEmpty:true})}function Q(){var S,R;S=b(i.suggestions).css(h.suggestions);R=r.map(J,T);S.append.apply(S,R);O.highlight&&c({node:S[0],pattern:P});return S;function T(U){var V;V=b(i.suggestion).append(O.templates.suggestion(U)).data(u,O.name).data(I,O.displayFn(U)).data(C,U);V.children().each(function(){b(this).css(h.suggestionChild)});return V}}function N(){return O.templates.header({query:P,isEmpty:!L})}function M(){return O.templates.footer({query:P,isEmpty:!L})}},getRoot:function E(){return this.$el},update:function z(L){var K=this;this.query=L;this.canceled=false;this.source(L,J);function J(M){if(!K.canceled&&L===K.query){K._render(L,M)}}},cancel:function H(){this.canceled=true},clear:function B(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function A(){return this.$el.is(":empty")},destroy:function F(){this.$el=null}});return t;function x(J){J=J||"value";return r.isFunction(J)?J:K;function K(L){return L[J]}}function y(K,L){return{empty:K.empty&&r.templatify(K.empty),header:K.header&&r.templatify(K.header),footer:K.footer&&r.templatify(K.footer),suggestion:K.suggestion||J};function J(M){return"<p>"+L(M)+"</p>"}}function w(J){return/^[_a-zA-Z0-9-]+$/.test(J)}}();var m=function(){function M(V){var T=this,R,U,S;V=V||{};if(!V.menu){b.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=r.map(V.datasets,D);R=r.bind(this._onSuggestionClick,this);U=r.bind(this._onSuggestionMouseEnter,this);S=r.bind(this._onSuggestionMouseLeave,this);this.$menu=b(V.menu).on("click.tt",".tt-suggestion",R).on("mouseenter.tt",".tt-suggestion",U).on("mouseleave.tt",".tt-suggestion",S);r.each(this.datasets,function(W){T.$menu.append(W.getRoot());W.onSync("rendered",T._onRendered,T)})}r.mixin(M.prototype,f,{_onSuggestionClick:function L(R){this.trigger("suggestionClicked",b(R.currentTarget))},_onSuggestionMouseEnter:function t(R){this._removeCursor();this._setCursor(b(R.currentTarget),true)},_onSuggestionMouseLeave:function G(){this._removeCursor()},_onRendered:function z(){this.isEmpty=r.every(this.datasets,R);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function R(S){return S.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function y(){return this.$menu.find(".tt-suggestion")},_getCursor:function w(){return this.$menu.find(".tt-cursor").first()},_setCursor:function O(S,R){S.first().addClass("tt-cursor");!R&&this.trigger("cursorMoved")},_removeCursor:function v(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function u(R){var T,S,V,U;if(!this.isOpen){return}S=this._getCursor();T=this._getSuggestions();this._removeCursor();V=T.index(S)+R;V=(V+1)%(T.length+1)-1;if(V===-1){this.trigger("cursorRemoved");return}else{if(V<-1){V=T.length-1}}this._setCursor(U=T.eq(V));this._ensureVisible(U)},_ensureVisible:function K(U){var R,T,S,V;R=U.position().top;T=R+U.outerHeight(true);S=this.$menu.scrollTop();V=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(R<0){this.$menu.scrollTop(S+R)}else{if(V<T){this.$menu.scrollTop(S+(T-V))}}},close:function H(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function F(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function P(R){this.$menu.css(R==="ltr"?h.ltr:h.rtl)},moveCursorUp:function A(){this._moveCursor(-1)},moveCursorDown:function Q(){this._moveCursor(+1)},getDatumForSuggestion:function C(S){var R=null;if(S.length){R={raw:s.extractDatum(S),value:s.extractValue(S),datasetName:s.extractDatasetName(S)}}return R},getDatumForCursor:function x(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function J(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function B(R){r.each(this.datasets,S);function S(T){T.update(R)}},empty:function E(){r.each(this.datasets,R);this.isEmpty=true;function R(S){S.clear()}},isVisible:function I(){return this.isOpen&&!this.isEmpty},destroy:function N(){this.$menu.off(".tt");this.$menu=null;r.each(this.datasets,R);function R(S){S.destroy()}}});return M;function D(R){return new s(R)}}();var k=function(){var U="ttAttrs";function E(aa){var Z,ab,Y;aa=aa||{};if(!aa.input){b.error("missing input")}this.isActivated=false;this.autoselect=!!aa.autoselect;this.minLength=r.isNumber(aa.minLength)?aa.minLength:1;this.$node=H(aa.input,aa.withHint);Z=this.$node.find(".tt-dropdown-menu");ab=this.$node.find(".tt-input");Y=this.$node.find(".tt-hint");ab.on("blur.tt",function(ad){var af,ae,ac;af=document.activeElement;ae=Z.is(af);ac=Z.has(af).length>0;if(r.isMsie()&&(ae||ac)){ad.preventDefault();ad.stopImmediatePropagation();r.defer(function(){ab.focus()})}});Z.on("mousedown.tt",function(ac){ac.preventDefault()});this.eventBus=aa.eventBus||new a({el:ab});this.dropdown=new m({menu:Z,datasets:aa.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new l({input:ab,hint:Y}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}r.mixin(E.prototype,{_onSuggestionClicked:function v(aa,Z){var Y;if(Y=this.dropdown.getDatumForSuggestion(Z)){this._select(Y)}},_onCursorMoved:function P(){var Y=this.dropdown.getDatumForCursor();this.input.setInputValue(Y.value,true);this.eventBus.trigger("cursorchanged",Y.raw,Y.datasetName)},_onCursorRemoved:function y(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function L(){this._updateHint()},_onOpened:function w(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function B(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function N(){this.isActivated=true;this.dropdown.open()},_onBlurred:function O(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function J(Z,Y){var aa,ab;aa=this.dropdown.getDatumForCursor();ab=this.dropdown.getDatumForTopSuggestion();if(aa){this._select(aa);Y.preventDefault()}else{if(this.autoselect&&ab){this._select(ab);Y.preventDefault()}}},_onTabKeyed:function X(aa,Z){var Y;if(Y=this.dropdown.getDatumForCursor()){this._select(Y);Z.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function S(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function u(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function z(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function W(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function K(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function G(Z,Y){this.input.clearHintIfInvalid();Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function T(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function R(){var Y;if(this.dir!==(Y=this.input.getLanguageDirection())){this.dir=Y;this.$node.css("direction",Y);this.dropdown.setLanguageDirection(Y)}},_updateHint:function M(){var Z,ad,ac,ab,Y,aa;Z=this.dropdown.getDatumForTopSuggestion();if(Z&&this.dropdown.isVisible()&&!this.input.hasOverflow()){ad=this.input.getInputValue();ac=l.normalizeQuery(ad);ab=r.escapeRegExChars(ac);Y=new RegExp("^(?:"+ab+")(.+$)","i");aa=Y.exec(Z.value);aa?this.input.setHint(ad+aa[1]):this.input.clearHint()}else{this.input.clearHint()}},_autocomplete:function V(aa){var ac,ab,Y,Z;ac=this.input.getHint();ab=this.input.getQuery();Y=aa||this.input.isCursorAtEnd();if(ac&&ab!==ac&&Y){Z=this.dropdown.getDatumForTopSuggestion();Z&&this.input.setInputValue(Z.value);this.eventBus.trigger("autocompleted",Z.raw,Z.datasetName)}},_select:function I(Y){this.input.setQuery(Y.value);this.input.setInputValue(Y.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",Y.raw,Y.datasetName);this.dropdown.close();r.defer(r.bind(this.dropdown.empty,this.dropdown))},open:function D(){this.dropdown.open()},close:function F(){this.dropdown.close()},setVal:function t(Y){if(this.isActivated){this.input.setInputValue(Y)}else{this.input.setQuery(Y);this.input.setInputValue(Y,true)}this._setLanguageDirection()},getVal:function C(){return this.input.getQuery()},destroy:function Q(){this.input.destroy();this.dropdown.destroy();x(this.$node);this.$node=null}});return E;function H(Y,ad){var ae,aa,ac,Z;ae=b(Y);aa=b(i.wrapper).css(h.wrapper);ac=b(i.dropdown).css(h.dropdown);Z=ae.clone().css(h.hint).css(A(ae));Z.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",true).attr({autocomplete:"off",spellcheck:"false"});ae.data(U,{dir:ae.attr("dir"),autocomplete:ae.attr("autocomplete"),spellcheck:ae.attr("spellcheck"),style:ae.attr("style")});ae.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(ad?h.input:h.inputWithNoHint);try{!ae.attr("dir")&&ae.attr("dir","auto")}catch(ab){}return ae.wrap(aa).parent().prepend(ad?Z:null).append(ac)}function A(Y){return{backgroundAttachment:Y.css("background-attachment"),backgroundClip:Y.css("background-clip"),backgroundColor:Y.css("background-color"),backgroundImage:Y.css("background-image"),backgroundOrigin:Y.css("background-origin"),backgroundPosition:Y.css("background-position"),backgroundRepeat:Y.css("background-repeat"),backgroundSize:Y.css("background-size")}}function x(Y){var Z=Y.find(".tt-input");r.each(Z.data(U),function(ab,aa){r.isUndefined(ab)?Z.removeAttr(aa):Z.attr(aa,ab)});Z.detach().removeData(U).removeClass("tt-input").insertAfter(Y);Y.remove()}}();(function(){var v,t,w;v=b.fn.typeahead;t="ttTypeahead";w={initialize:function x(E,D){D=r.isArray(D)?D:[].slice.call(arguments,1);E=E||{};return this.each(C);function C(){var H=b(this),F,G;r.each(D,function(I){I.highlight=!!E.highlight});G=new k({input:H,eventBus:F=new a({el:H}),withHint:r.isUndefined(E.hint)?true:!!E.hint,minLength:E.minLength,autoselect:E.autoselect,datasets:D});H.data(t,G)}},open:function y(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.open()}}},close:function B(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.close()}}},val:function u(C){return !arguments.length?E(this.first()):this.each(D);function D(){var G=b(this),F;if(F=G.data(t)){F.setVal(C)}}function E(H){var G,F;if(G=H.data(t)){F=G.getVal()}return F}},destroy:function A(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.destroy();E.removeData(t)}}}};b.fn.typeahead=function(C){if(w[C]){return w[C].apply(this,[].slice.call(arguments,1))}else{return w.initialize.apply(this,arguments)}};b.fn.typeahead.noConflict=function z(){b.fn.typeahead=v;return this}})()})(window.jQuery);var TemplateEngine={};(function(a){a.compile=function(b){return{render:function(d){var c=b.replace(/\{\{(\w+)\}\}/g,function(e,f){return d[f]});c=c.replace(/\{\{(\w+)\.(\w+)\}\}/g,function(f,e,g){if(typeof e!=undefined&&typeof g!=undefined&&typeof d[e][g]!=undefined){return d[e][g]}});return c}}};a.init=function(){return a}}(TemplateEngine||{}));
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
;if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(b){function a(){var e=document.createElement("bootstrap");var d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in d){if(e.style[c]!==undefined){return{end:d[c]}}}return false}b.fn.emulateTransitionEnd=function(e){var d=false;var c=this;b(this).one("bsTransitionEnd",function(){d=true});var f=function(){if(!d){b(c).trigger(b.support.transition.end)}};setTimeout(f,e);return this};b(function(){b.support.transition=a();if(!b.support.transition){return}b.event.special.bsTransitionEnd={bindType:b.support.transition.end,delegateType:b.support.transition.end,handle:function(c){if(b(c.target).is(this)){return c.handleObj.handler.apply(this,arguments)}}}})}(jQuery);+function(e){var d='[data-dismiss="alert"]';var b=function(f){e(f).on("click",d,this.close)};b.VERSION="3.2.0";b.prototype.close=function(j){var i=e(this);var g=i.attr("data-target");if(!g){g=i.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}var h=e(g);if(j){j.preventDefault()}if(!h.length){h=i.hasClass("alert")?i:i.parent()}h.trigger(j=e.Event("close.bs.alert"));if(j.isDefaultPrevented()){return}h.removeClass("in");function f(){h.detach().trigger("closed.bs.alert").remove()}e.support.transition&&h.hasClass("fade")?h.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()};function c(f){return this.each(function(){var h=e(this);var g=h.data("bs.alert");if(!g){h.data("bs.alert",(g=new b(this)))}if(typeof f=="string"){g[f].call(h)}})}var a=e.fn.alert;e.fn.alert=c;e.fn.alert.Constructor=b;e.fn.alert.noConflict=function(){e.fn.alert=a;return this};e(document).on("click.bs.alert.data-api",d,b.prototype.close)}(jQuery);+function(d){var b=function(f,e){this.$element=d(f);this.options=d.extend({},b.DEFAULTS,e);this.isLoading=false};b.VERSION="3.2.0";b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(g){var i="disabled";var e=this.$element;var h=e.is("input")?"val":"html";var f=e.data();g=g+"Text";if(f.resetText==null){e.data("resetText",e[h]())}e[h](f[g]==null?this.options[g]:f[g]);setTimeout(d.proxy(function(){if(g=="loadingText"){this.isLoading=true;e.addClass(i).attr(i,i)}else{if(this.isLoading){this.isLoading=false;e.removeClass(i).removeAttr(i)}}},this),0)};b.prototype.toggle=function(){var f=true;var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var g=this.$element.find("input");if(g.prop("type")=="radio"){if(g.prop("checked")&&this.$element.hasClass("active")){f=false}else{e.find(".active").removeClass("active")}}if(f){g.prop("checked",!this.$element.hasClass("active")).trigger("change")}}if(f){this.$element.toggleClass("active")}};function c(e){return this.each(function(){var h=d(this);var g=h.data("bs.button");var f=typeof e=="object"&&e;if(!g){h.data("bs.button",(g=new b(this,f)))}if(e=="toggle"){g.toggle()}else{if(e){g.setState(e)}}})}var a=d.fn.button;d.fn.button=c;d.fn.button.Constructor=b;d.fn.button.noConflict=function(){d.fn.button=a;return this};d(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(g){var f=d(g.target);if(!f.hasClass("btn")){f=f.closest(".btn")}c.call(f,"toggle");g.preventDefault()})}(jQuery);+function(c){var d=function(f,e){this.$element=c(f).on("keydown.bs.carousel",c.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=e;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter.bs.carousel",c.proxy(this.pause,this)).on("mouseleave.bs.carousel",c.proxy(this.cycle,this))};d.VERSION="3.2.0";d.DEFAULTS={interval:5000,pause:"hover",wrap:true};d.prototype.keydown=function(f){switch(f.which){case 37:this.prev();break;case 39:this.next();break;default:return}f.preventDefault()};d.prototype.cycle=function(f){f||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval));return this};d.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};d.prototype.to=function(g){var f=this;var e=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(g>(this.$items.length-1)||g<0){return}if(this.sliding){return this.$element.one("slid.bs.carousel",function(){f.to(g)})}if(e==g){return this.pause().cycle()}return this.slide(g>e?"next":"prev",c(this.$items[g]))};d.prototype.pause=function(f){f||(this.paused=true);if(this.$element.find(".next, .prev").length&&c.support.transition){this.$element.trigger(c.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};d.prototype.next=function(){if(this.sliding){return}return this.slide("next")};d.prototype.prev=function(){if(this.sliding){return}return this.slide("prev")};d.prototype.slide=function(m,h){var p=this.$element.find(".item.active");var f=h||p[m]();var k=this.interval;var n=m=="next"?"left":"right";var i=m=="next"?"first":"last";var j=this;if(!f.length){if(!this.options.wrap){return}f=this.$element.find(".item")[i]()}if(f.hasClass("active")){return(this.sliding=false)}var l=f[0];var e=c.Event("slide.bs.carousel",{relatedTarget:l,direction:n});this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.sliding=true;k&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var g=c(this.$indicators.children()[this.getItemIndex(f)]);g&&g.addClass("active")}var o=c.Event("slid.bs.carousel",{relatedTarget:l,direction:n});if(c.support.transition&&this.$element.hasClass("slide")){f.addClass(m);f[0].offsetWidth;p.addClass(n);f.addClass(n);p.one("bsTransitionEnd",function(){f.removeClass([m,n].join(" ")).addClass("active");p.removeClass(["active",n].join(" "));j.sliding=false;setTimeout(function(){j.$element.trigger(o)},0)}).emulateTransitionEnd(p.css("transition-duration").slice(0,-1)*1000)}else{p.removeClass("active");f.addClass("active");this.sliding=false;this.$element.trigger(o)}k&&this.cycle();return this};function b(e){return this.each(function(){var i=c(this);var h=i.data("bs.carousel");var f=c.extend({},d.DEFAULTS,i.data(),typeof e=="object"&&e);var g=typeof e=="string"?e:f.slide;if(!h){i.data("bs.carousel",(h=new d(this,f)))}if(typeof e=="number"){h.to(e)}else{if(g){h[g]()}else{if(f.interval){h.pause().cycle()}}}})}var a=c.fn.carousel;c.fn.carousel=b;c.fn.carousel.Constructor=d;c.fn.carousel.noConflict=function(){c.fn.carousel=a;return this};c(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(k){var g;var j=c(this);var f=c(j.attr("data-target")||(g=j.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""));if(!f.hasClass("carousel")){return}var h=c.extend({},f.data(),j.data());var i=j.attr("data-slide-to");if(i){h.interval=false}b.call(f,h);if(i){f.data("bs.carousel").to(i)}k.preventDefault()});c(window).on("load",function(){c('[data-ride="carousel"]').each(function(){var e=c(this);b.call(e,e.data())})})}(jQuery);+function(c){var d=function(f,e){this.$element=c(f);this.options=c.extend({},d.DEFAULTS,e);this.transitioning=null;if(this.options.parent){this.$parent=c(this.options.parent)}if(this.options.toggle){this.toggle()}};d.VERSION="3.2.0";d.DEFAULTS={toggle:true};d.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};d.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return}var f=c.Event("show.bs.collapse");this.$element.trigger(f);if(f.isDefaultPrevented()){return}var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var g=i.data("bs.collapse");if(g&&g.transitioning){return}b.call(i,"hide");g||i.data("bs.collapse",null)}var j=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[j](0);this.transitioning=1;var e=function(){this.$element.removeClass("collapsing").addClass("collapse in")[j]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!c.support.transition){return e.call(this)}var h=c.camelCase(["scroll",j].join("-"));this.$element.one("bsTransitionEnd",c.proxy(e,this)).emulateTransitionEnd(350)[j](this.$element[0][h])};d.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return}var f=c.Event("hide.bs.collapse");this.$element.trigger(f);if(f.isDefaultPrevented()){return}var g=this.dimension();this.$element[g](this.$element[g]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var e=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!c.support.transition){return e.call(this)}this.$element[g](0).one("bsTransitionEnd",c.proxy(e,this)).emulateTransitionEnd(350)};d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};function b(e){return this.each(function(){var h=c(this);var g=h.data("bs.collapse");var f=c.extend({},d.DEFAULTS,h.data(),typeof e=="object"&&e);if(!g&&f.toggle&&e=="show"){e=!e}if(!g){h.data("bs.collapse",(g=new d(this,f)))}if(typeof e=="string"){g[e]()}})}var a=c.fn.collapse;c.fn.collapse=b;c.fn.collapse.Constructor=d;c.fn.collapse.noConflict=function(){c.fn.collapse=a;return this};c(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(k){var f;var m=c(this);var l=m.attr("data-target")||k.preventDefault()||(f=m.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"");var g=c(l);var i=g.data("bs.collapse");var j=i?"toggle":m.data();var n=m.attr("data-parent");var h=n&&c(n);if(!i||!i.transitioning){if(h){h.find('[data-toggle="collapse"][data-parent="'+n+'"]').not(m).addClass("collapsed")}m[g.hasClass("in")?"addClass":"removeClass"]("collapsed")}b.call(g,j)})}(jQuery);+function(h){var e=".dropdown-backdrop";var b='[data-toggle="dropdown"]';var a=function(i){h(i).on("click.bs.dropdown",this.toggle)};a.VERSION="3.2.0";a.prototype.toggle=function(m){var l=h(this);if(l.is(".disabled, :disabled")){return}var k=f(l);var j=k.hasClass("open");d();if(!j){if("ontouchstart" in document.documentElement&&!k.closest(".navbar-nav").length){h('<div class="dropdown-backdrop"/>').insertAfter(h(this)).on("click",d)}var i={relatedTarget:this};k.trigger(m=h.Event("show.bs.dropdown",i));if(m.isDefaultPrevented()){return}l.trigger("focus");k.toggleClass("open").trigger("shown.bs.dropdown",i)}return false};a.prototype.keydown=function(m){if(!/(38|40|27)/.test(m.keyCode)){return}var l=h(this);m.preventDefault();m.stopPropagation();if(l.is(".disabled, :disabled")){return}var k=f(l);var j=k.hasClass("open");if(!j||(j&&m.keyCode==27)){if(m.which==27){k.find(b).trigger("focus")}return l.trigger("click")}var n=" li:not(.divider):visible a";var o=k.find('[role="menu"]'+n+', [role="listbox"]'+n);if(!o.length){return}var i=o.index(o.filter(":focus"));if(m.keyCode==38&&i>0){i--}if(m.keyCode==40&&i<o.length-1){i++}if(!~i){i=0}o.eq(i).trigger("focus")};function d(i){if(i&&i.which===3){return}h(e).remove();h(b).each(function(){var k=f(h(this));var j={relatedTarget:this};if(!k.hasClass("open")){return}k.trigger(i=h.Event("hide.bs.dropdown",j));if(i.isDefaultPrevented()){return}k.removeClass("open").trigger("hidden.bs.dropdown",j)})}function f(k){var i=k.attr("data-target");if(!i){i=k.attr("href");i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var j=i&&h(i);return j&&j.length?j:k.parent()}function g(i){return this.each(function(){var k=h(this);var j=k.data("bs.dropdown");if(!j){k.data("bs.dropdown",(j=new a(this)))}if(typeof i=="string"){j[i].call(k)}})}var c=h.fn.dropdown;h.fn.dropdown=g;h.fn.dropdown.Constructor=a;h.fn.dropdown.noConflict=function(){h.fn.dropdown=c;return this};h(document).on("click.bs.dropdown.data-api",d).on("click.bs.dropdown.data-api",".dropdown form",function(i){i.stopPropagation()}).on("click.bs.dropdown.data-api",b,a.prototype.toggle).on("keydown.bs.dropdown.data-api",b+', [role="menu"], [role="listbox"]',a.prototype.keydown)}(jQuery);+function(d){var b=function(f,e){this.options=e;this.$body=d(document.body);this.$element=d(f);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};b.VERSION="3.2.0";b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};b.prototype.show=function(h){var f=this;var g=d.Event("show.bs.modal",{relatedTarget:h});this.$element.trigger(g);if(this.isShown||g.isDefaultPrevented()){return}this.isShown=true;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',d.proxy(this.hide,this));this.backdrop(function(){var j=d.support.transition&&f.$element.hasClass("fade");if(!f.$element.parent().length){f.$element.appendTo(f.$body)}f.$element.show().scrollTop(0);if(j){f.$element[0].offsetWidth}f.$element.addClass("in").attr("aria-hidden",false);f.enforceFocus();var i=d.Event("shown.bs.modal",{relatedTarget:h});j?f.$element.find(".modal-dialog").one("bsTransitionEnd",function(){f.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):f.$element.trigger("focus").trigger(i)})};b.prototype.hide=function(f){if(f){f.preventDefault()}f=d.Event("hide.bs.modal");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.$body.removeClass("modal-open");this.resetScrollbar();this.escape();d(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");d.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",d.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};b.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",d.proxy(function(f){if(this.$element[0]!==f.target&&!this.$element.has(f.target).length){this.$element.trigger("focus")}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",d.proxy(function(f){f.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}}};b.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(i){var h=this;var f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=d.support.transition&&f;this.$backdrop=d('<div class="modal-backdrop '+f+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",d.proxy(function(j){if(j.target!==j.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(e){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!i){return}e?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(150):i()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){h.removeBackdrop();i&&i()};d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}else{if(i){i()}}}};b.prototype.checkScrollbar=function(){if(document.body.clientWidth>=window.innerWidth){return}this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar()};b.prototype.setScrollbar=function(){var e=parseInt((this.$body.css("padding-right")||0),10);if(this.scrollbarWidth){this.$body.css("padding-right",e+this.scrollbarWidth)}};b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};b.prototype.measureScrollbar=function(){var f=document.createElement("div");f.className="modal-scrollbar-measure";this.$body.append(f);var e=f.offsetWidth-f.clientWidth;this.$body[0].removeChild(f);return e};function c(e,f){return this.each(function(){var i=d(this);var h=i.data("bs.modal");var g=d.extend({},b.DEFAULTS,i.data(),typeof e=="object"&&e);if(!h){i.data("bs.modal",(h=new b(this,g)))}if(typeof e=="string"){h[e](f)}else{if(g.show){h.show(f)}}})}var a=d.fn.modal;d.fn.modal=c;d.fn.modal.Constructor=b;d.fn.modal.noConflict=function(){d.fn.modal=a;return this};d(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(j){var i=d(this);var g=i.attr("href");var f=d(i.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,"")));var h=f.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(g)&&g},f.data(),i.data());if(i.is("a")){j.preventDefault()}f.one("show.bs.modal",function(e){if(e.isDefaultPrevented()){return}f.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});c.call(f,h,this)})}(jQuery);+function(d){var c=function(f,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",f,e)};c.VERSION="3.2.0";c.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};c.prototype.init=function(l,j,g){this.enabled=true;this.type=l;this.$element=d(j);this.options=this.getOptions(g);this.$viewport=this.options.viewport&&d(this.options.viewport.selector||this.options.viewport);var k=this.options.trigger.split(" ");for(var h=k.length;h--;){var f=k[h];if(f=="click"){this.$element.on("click."+this.type,this.options.selector,d.proxy(this.toggle,this))}else{if(f!="manual"){var m=f=="hover"?"mouseenter":"focusin";var e=f=="hover"?"mouseleave":"focusout";this.$element.on(m+"."+this.type,this.options.selector,d.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,d.proxy(this.leave,this))}}}this.options.selector?(this._options=d.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(e){e=d.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};c.prototype.getDelegateOptions=function(){var e={};var f=this.getDefaults();this._options&&d.each(this._options,function(g,h){if(f[g]!=h){e[g]=h}});return e};c.prototype.enter=function(f){var e=f instanceof this.constructor?f:d(f.currentTarget).data("bs."+this.type);if(!e){e=new this.constructor(f.currentTarget,this.getDelegateOptions());d(f.currentTarget).data("bs."+this.type,e)}clearTimeout(e.timeout);e.hoverState="in";if(!e.options.delay||!e.options.delay.show){return e.show()}e.timeout=setTimeout(function(){if(e.hoverState=="in"){e.show()}},e.options.delay.show)};c.prototype.leave=function(f){var e=f instanceof this.constructor?f:d(f.currentTarget).data("bs."+this.type);if(!e){e=new this.constructor(f.currentTarget,this.getDelegateOptions());d(f.currentTarget).data("bs."+this.type,e)}clearTimeout(e.timeout);e.hoverState="out";if(!e.options.delay||!e.options.delay.hide){return e.hide()}e.timeout=setTimeout(function(){if(e.hoverState=="out"){e.hide()}},e.options.delay.hide)};c.prototype.show=function(){var q=d.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(q);var r=d.contains(document.documentElement,this.$element[0]);if(q.isDefaultPrevented()||!r){return}var p=this;var n=this.tip();var h=this.getUID(this.type);this.setContent();n.attr("id",h);this.$element.attr("aria-describedby",h);if(this.options.animation){n.addClass("fade")}var l=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement;var t=/\s?auto?\s?/i;var u=t.test(l);if(u){l=l.replace(t,"")||"top"}n.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this);this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition();var f=n[0].offsetWidth;var o=n[0].offsetHeight;if(u){var j=l;var k=this.$element.parent();var m=this.getPosition(k);l=l=="bottom"&&s.top+s.height+o-m.scroll>m.height?"top":l=="top"&&s.top-m.scroll-o<0?"bottom":l=="right"&&s.right+f>m.width?"left":l=="left"&&s.left-f<m.left?"right":l;n.removeClass(j).addClass(l)}var i=this.getCalculatedOffset(l,s,f,o);this.applyPlacement(i,l);var g=function(){p.$element.trigger("shown.bs."+p.type);p.hoverState=null};d.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}};c.prototype.applyPlacement=function(k,l){var m=this.tip();var g=m[0].offsetWidth;var q=m[0].offsetHeight;var f=parseInt(m.css("margin-top"),10);var i=parseInt(m.css("margin-left"),10);if(isNaN(f)){f=0}if(isNaN(i)){i=0}k.top=k.top+f;k.left=k.left+i;d.offset.setOffset(m[0],d.extend({using:function(r){m.css({top:Math.round(r.top),left:Math.round(r.left)})}},k),0);m.addClass("in");var e=m[0].offsetWidth;var n=m[0].offsetHeight;if(l=="top"&&n!=q){k.top=k.top+q-n}var p=this.getViewportAdjustedDelta(l,k,e,n);if(p.left){k.left+=p.left}else{k.top+=p.top}var h=p.left?p.left*2-g+e:p.top*2-q+n;var j=p.left?"left":"top";var o=p.left?"offsetWidth":"offsetHeight";m.offset(k);this.replaceArrow(h,m[0][o],j)};c.prototype.replaceArrow=function(g,f,e){this.arrow().css(e,g?(50*(1-g/f)+"%"):"")};c.prototype.setContent=function(){var f=this.tip();var e=this.getTitle();f.find(".tooltip-inner")[this.options.html?"html":"text"](e);f.removeClass("fade in top bottom left right")};c.prototype.hide=function(){var g=this;var i=this.tip();var h=d.Event("hide.bs."+this.type);this.$element.removeAttr("aria-describedby");function f(){if(g.hoverState!="in"){i.detach()}g.$element.trigger("hidden.bs."+g.type)}this.$element.trigger(h);if(h.isDefaultPrevented()){return}i.removeClass("in");d.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(150):f();this.hoverState=null;return this};c.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof(e.attr("data-original-title"))!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(f){f=f||this.$element;var g=f[0];var e=g.tagName=="BODY";return d.extend({},(typeof g.getBoundingClientRect=="function")?g.getBoundingClientRect():null,{scroll:e?document.documentElement.scrollTop||document.body.scrollTop:f.scrollTop(),width:e?d(window).width():f.outerWidth(),height:e?d(window).height():f.outerHeight()},e?{top:0,left:0}:f.offset())};c.prototype.getCalculatedOffset=function(e,h,f,g){return e=="bottom"?{top:h.top+h.height,left:h.left+h.width/2-f/2}:e=="top"?{top:h.top-g,left:h.left+h.width/2-f/2}:e=="left"?{top:h.top+h.height/2-g/2,left:h.left-f}:{top:h.top+h.height/2-g/2,left:h.left+h.width}};c.prototype.getViewportAdjustedDelta=function(h,k,e,j){var m={top:0,left:0};if(!this.$viewport){return m}var g=this.options.viewport&&this.options.viewport.padding||0;var l=this.getPosition(this.$viewport);if(/right|left/.test(h)){var n=k.top-g-l.scroll;var i=k.top+g-l.scroll+j;if(n<l.top){m.top=l.top-n}else{if(i>l.top+l.height){m.top=l.top+l.height-i}}}else{var o=k.left-g;var f=k.left+g+e;if(o<l.left){m.left=l.left-o}else{if(f>l.width){m.left=l.left+l.width-f}}}return m};c.prototype.getTitle=function(){var g;var e=this.$element;var f=this.options;g=e.attr("data-original-title")||(typeof f.title=="function"?f.title.call(e[0]):f.title);return g};c.prototype.getUID=function(e){do{e+=~~(Math.random()*1000000)}while(document.getElementById(e));return e};c.prototype.tip=function(){return(this.$tip=this.$tip||d(this.options.template))};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow"))};c.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};c.prototype.enable=function(){this.enabled=true};c.prototype.disable=function(){this.enabled=false};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(g){var f=this;if(g){f=d(g.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(g.currentTarget,this.getDelegateOptions());d(g.currentTarget).data("bs."+this.type,f)}}f.tip().hasClass("in")?f.leave(f):f.enter(f)};c.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.tooltip");var f=typeof e=="object"&&e;if(!g&&e=="destroy"){return}if(!g){h.data("bs.tooltip",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.tooltip;d.fn.tooltip=b;d.fn.tooltip.Constructor=c;d.fn.tooltip.noConflict=function(){d.fn.tooltip=a;return this}}(jQuery);+function(d){var c=function(f,e){this.init("popover",f,e)};if(!d.fn.tooltip){throw new Error("Popover requires tooltip.js")}c.VERSION="3.2.0";c.DEFAULTS=d.extend({},d.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=d.extend({},d.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=function(){var g=this.tip();var f=this.getTitle();var e=this.getContent();g.find(".popover-title")[this.options.html?"html":"text"](f);g.find(".popover-content").empty()[this.options.html?(typeof e=="string"?"html":"append"):"text"](e);g.removeClass("fade top bottom left right in");if(!g.find(".popover-title").html()){g.find(".popover-title").hide()}};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var e=this.$element;var f=this.options;return e.attr("data-content")||(typeof f.content=="function"?f.content.call(e[0]):f.content)};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".arrow"))};c.prototype.tip=function(){if(!this.$tip){this.$tip=d(this.options.template)}return this.$tip};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.popover");var f=typeof e=="object"&&e;if(!g&&e=="destroy"){return}if(!g){h.data("bs.popover",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.popover;d.fn.popover=b;d.fn.popover.Constructor=c;d.fn.popover.noConflict=function(){d.fn.popover=a;return this}}(jQuery);+function(d){function c(f,e){var g=d.proxy(this.process,this);this.$body=d("body");this.$scrollElement=d(f).is("body")?d(window):d(f);this.options=d.extend({},c.DEFAULTS,e);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",g);this.refresh();this.process()}c.VERSION="3.2.0";c.DEFAULTS={offset:10};c.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};c.prototype.refresh=function(){var e="offset";var g=0;if(!d.isWindow(this.$scrollElement[0])){e="position";g=this.$scrollElement.scrollTop()}this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();var f=this;this.$body.find(this.selector).map(function(){var i=d(this);var h=i.data("target")||i.attr("href");var j=/^#./.test(h)&&d(h);return(j&&j.length&&j.is(":visible")&&[[j[e]().top+g,h]])||null}).sort(function(i,h){return i[0]-h[0]}).each(function(){f.offsets.push(this[0]);f.targets.push(this[1])})};c.prototype.process=function(){var k=this.$scrollElement.scrollTop()+this.options.offset;var g=this.getScrollHeight();var j=this.options.offset+g-this.$scrollElement.height();var h=this.offsets;var e=this.targets;var l=this.activeTarget;var f;if(this.scrollHeight!=g){this.refresh()}if(k>=j){return l!=(f=e[e.length-1])&&this.activate(f)}if(l&&k<=h[0]){return l!=(f=e[0])&&this.activate(f)}for(f=h.length;f--;){l!=e[f]&&k>=h[f]&&(!h[f+1]||k<=h[f+1])&&this.activate(e[f])}};c.prototype.activate=function(g){this.activeTarget=g;d(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var e=this.selector+'[data-target="'+g+'"],'+this.selector+'[href="'+g+'"]';var f=d(e).parents("li").addClass("active");if(f.parent(".dropdown-menu").length){f=f.closest("li.dropdown").addClass("active")}f.trigger("activate.bs.scrollspy")};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.scrollspy");var f=typeof e=="object"&&e;if(!g){h.data("bs.scrollspy",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.scrollspy;d.fn.scrollspy=b;d.fn.scrollspy.Constructor=c;d.fn.scrollspy.noConflict=function(){d.fn.scrollspy=a;return this};d(window).on("load.bs.scrollspy.data-api",function(){d('[data-spy="scroll"]').each(function(){var e=d(this);b.call(e,e.data())})})}(jQuery);+function(d){var b=function(e){this.element=d(e)};b.VERSION="3.2.0";b.prototype.show=function(){var k=this.element;var h=k.closest("ul:not(.dropdown-menu)");var g=k.data("target");if(!g){g=k.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}if(k.parent("li").hasClass("active")){return}var i=h.find(".active:last a")[0];var j=d.Event("show.bs.tab",{relatedTarget:i});k.trigger(j);if(j.isDefaultPrevented()){return}var f=d(g);this.activate(k.closest("li"),h);this.activate(f,f.parent(),function(){k.trigger({type:"shown.bs.tab",relatedTarget:i})})};b.prototype.activate=function(g,f,j){var e=f.find("> .active");var i=j&&d.support.transition&&e.hasClass("fade");function h(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");g.addClass("active");if(i){g[0].offsetWidth;g.addClass("in")}else{g.removeClass("fade")}if(g.parent(".dropdown-menu")){g.closest("li.dropdown").addClass("active")}j&&j()}i?e.one("bsTransitionEnd",h).emulateTransitionEnd(150):h();e.removeClass("in")};function c(e){return this.each(function(){var g=d(this);var f=g.data("bs.tab");if(!f){g.data("bs.tab",(f=new b(this)))}if(typeof e=="string"){f[e]()}})}var a=d.fn.tab;d.fn.tab=c;d.fn.tab.Constructor=b;d.fn.tab.noConflict=function(){d.fn.tab=a;return this};d(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(f){f.preventDefault();c.call(d(this),"show")})}(jQuery);+function(d){var c=function(f,e){this.options=d.extend({},c.DEFAULTS,e);this.$target=d(this.options.target).on("scroll.bs.affix.data-api",d.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",d.proxy(this.checkPositionWithEventLoop,this));this.$element=d(f);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};c.VERSION="3.2.0";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(c.RESET).addClass("affix");var f=this.$target.scrollTop();var e=this.$element.offset();return(this.pinnedOffset=e.top-f)};c.prototype.checkPositionWithEventLoop=function(){setTimeout(d.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var n=d(document).height();var f=this.$target.scrollTop();var k=this.$element.offset();var i=this.options.offset;var g=i.top;var h=i.bottom;if(typeof i!="object"){h=g=i}if(typeof g=="function"){g=i.top(this.$element)}if(typeof h=="function"){h=i.bottom(this.$element)}var j=this.unpin!=null&&(f+this.unpin<=k.top)?false:h!=null&&(k.top+this.$element.height()>=n-h)?"bottom":g!=null&&(f<=g)?"top":false;if(this.affixed===j){return}if(this.unpin!=null){this.$element.css("top","")}var m="affix"+(j?"-"+j:"");var l=d.Event(m+".bs.affix");this.$element.trigger(l);if(l.isDefaultPrevented()){return}this.affixed=j;this.unpin=j=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(m).trigger(d.Event(m.replace("affix","affixed")));if(j=="bottom"){this.$element.offset({top:n-this.$element.height()-h})}};function b(e){return this.each(function(){var h=d(this);var g=h.data("bs.affix");var f=typeof e=="object"&&e;if(!g){h.data("bs.affix",(g=new c(this,f)))}if(typeof e=="string"){g[e]()}})}var a=d.fn.affix;d.fn.affix=b;d.fn.affix.Constructor=c;d.fn.affix.noConflict=function(){d.fn.affix=a;return this};d(window).on("load",function(){d('[data-spy="affix"]').each(function(){var f=d(this);var e=f.data();e.offset=e.offset||{};if(e.offsetBottom){e.offset.bottom=e.offsetBottom}if(e.offsetTop){e.offset.top=e.offsetTop}b.call(f,e)})})}(jQuery);+function(e){e.fn.modal.Constructor.prototype.addClass=function(f){e(this.$element).addClass(f);return this};e.fn.modal.Constructor.prototype.removeClass=function(f){e(this.$element).removeClass(f);return this};e.fn.modal.Constructor.prototype.loading=function(f){f=f||{};c();a(this).loader("open",e.extend(true,{},{top:150},f));return this};e.fn.modal.Constructor.prototype.append=function(f){this.stopLoading();e(f).appendTo(this.$element)};e.fn.modal.Constructor.prototype.stopLoading=function(){c();a(this).loader("close")};e.fn.modal.Constructor.prototype.content=function(f){this.stopLoading();a(this).html(f);return this};e.fn.modal.Constructor.prototype.title=function(f){b(this).html(f);return this};function d(f,h){h=h||"body";var g=e(f.$element).find(".modal-"+h);if(!g.length){throw"Modal panic: Modal "+h+" cannot be found"}return g}function a(f){return d(f,"body")}function b(f){var g="title";return d(f,g)}function c(){if(!e.fn.loader){throw"Modal panic: Loader plugin not found"}}}(jQuery);(function(H){var V,aK="2.8.4",ba=typeof global!=="undefined"?global:this,av,ad=Math.round,aP=Object.prototype.hasOwnProperty,ak,A=0,j=1,a2=2,z=3,aH=4,x=5,Z=6,at={},aV=[],au=(typeof module!=="undefined"&&module&&module.exports),e=/^\/?Date\((\-?\d+)/i,bd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,aM=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ay=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,aj=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,k=/\d\d?/,al=/\d{1,3}/,I=/\d{1,4}/,bj=/[+\-]?\d{1,6}/,a8=/\d+/,N=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,r=/Z|[\+\-]\d\d:?\d\d/gi,n=/T/i,v=/[\+\-]?\d+/,aX=/[\+\-]?\d+(\.\d{1,3})?/,ai=/\d/,u=/\d\d/,bc=/\d{3}/,aW=/\d{4}/,ap=/[+-]?\d{6}/,ag=/[+-]?\d+/,aT=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aa="YYYY-MM-DDTHH:mm:ssZ",bb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],L=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ah=/([\+\-]|\d\d)/gi,aO="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),G={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},f={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},a7={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ar={},B={s:45,m:45,h:22,d:26,M:11},a1="DDD w W M D d".split(" "),aw="M D H h m s w W".split(" "),a3={M:function(){return this.month()+1},MMM:function(i){return this.localeData().monthsShort(this,i)},MMMM:function(i){return this.localeData().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.localeData().weekdaysMin(this,i)},ddd:function(i){return this.localeData().weekdaysShort(this,i)},dddd:function(i){return this.localeData().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return O(this.year()%100,2)},YYYY:function(){return O(this.year(),4)},YYYYY:function(){return O(this.year(),5)},YYYYYY:function(){var bp=this.year(),i=bp>=0?"+":"-";return i+O(Math.abs(bp),6)},gg:function(){return O(this.weekYear()%100,2)},gggg:function(){return O(this.weekYear(),4)},ggggg:function(){return O(this.weekYear(),5)},GG:function(){return O(this.isoWeekYear()%100,2)},GGGG:function(){return O(this.isoWeekYear(),4)},GGGGG:function(){return O(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return Q(this.milliseconds()/100)},SS:function(){return O(Q(this.milliseconds()/10),2)},SSS:function(){return O(this.milliseconds(),3)},SSSS:function(){return O(this.milliseconds(),3)},Z:function(){var bp=-this.zone(),i="+";if(bp<0){bp=-bp;i="-"}return i+O(Q(bp/60),2)+":"+O(Q(bp)%60,2)},ZZ:function(){var bp=-this.zone(),i="+";if(bp<0){bp=-bp;i="-"}return i+O(Q(bp/60),2)+O(Q(bp)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},a={},ab=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function aY(bp,i,bq){switch(arguments.length){case 2:return bp!=null?bp:i;case 3:return bp!=null?bp:i!=null?i:bq;default:throw new Error("Implement me")}}function a4(bp,i){return aP.call(bp,i)}function an(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function bo(i){if(V.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+i)}}function bm(bp,i){var bq=true;return aI(function(){if(bq){bo(bp);bq=false}return i.apply(this,arguments)},i)}function g(i,bp){if(!a[i]){bo(bp);a[i]=true}}function S(bp,i){return function(bq){return O(bp.call(this,bq),i)}}function l(i,bp){return function(bq){return this.localeData().ordinal(i.call(this,bq),bp)}}while(a1.length){ak=a1.pop();a3[ak+"o"]=l(a3[ak],ak)}while(aw.length){ak=aw.pop();a3[ak+ak]=S(a3[ak],2)}a3.DDDD=S(a3.DDD,3);function af(){}function P(bp,i){if(i!==false){bg(bp)}aR(this,bp);this._d=new Date(+bp._d)}function am(bt){var bv=o(bt),bu=bv.year||0,bp=bv.quarter||0,bq=bv.month||0,i=bv.week||0,by=bv.day||0,bw=bv.hour||0,bs=bv.minute||0,bx=bv.second||0,br=bv.millisecond||0;this._milliseconds=+br+bx*1000+bs*60000+bw*3600000;this._days=+by+i*7;this._months=+bq+bp*3+bu*12;this._data={};this._locale=V.localeData();this._bubble()}function aI(bq,bp){for(var br in bp){if(a4(bp,br)){bq[br]=bp[br]}}if(a4(bp,"toString")){bq.toString=bp.toString}if(a4(bp,"valueOf")){bq.valueOf=bp.valueOf}return bq}function aR(bt,bs){var bp,br,bq;if(typeof bs._isAMomentObject!=="undefined"){bt._isAMomentObject=bs._isAMomentObject}if(typeof bs._i!=="undefined"){bt._i=bs._i}if(typeof bs._f!=="undefined"){bt._f=bs._f}if(typeof bs._l!=="undefined"){bt._l=bs._l}if(typeof bs._strict!=="undefined"){bt._strict=bs._strict}if(typeof bs._tzm!=="undefined"){bt._tzm=bs._tzm}if(typeof bs._isUTC!=="undefined"){bt._isUTC=bs._isUTC}if(typeof bs._offset!=="undefined"){bt._offset=bs._offset}if(typeof bs._pf!=="undefined"){bt._pf=bs._pf}if(typeof bs._locale!=="undefined"){bt._locale=bs._locale}if(aV.length>0){for(bp in aV){br=aV[bp];bq=bs[br];if(typeof bq!=="undefined"){bt[br]=bq}}}return bt}function p(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function O(bs,br,bq){var bp=""+Math.abs(bs),i=bs>=0;while(bp.length<br){bp="0"+bp}return(i?(bq?"+":""):"-")+bp}function d(bq,i){var bp={milliseconds:0,months:0};bp.months=i.month()-bq.month()+(i.year()-bq.year())*12;if(bq.clone().add(bp.months,"M").isAfter(i)){--bp.months}bp.milliseconds=+i-+(bq.clone().add(bp.months,"M"));return bp}function ac(bq,i){var bp;i=C(i,bq);if(bq.isBefore(i)){bp=d(bq,i)}else{bp=d(i,bq);bp.milliseconds=-bp.milliseconds;bp.months=-bp.months}return bp}function W(bp,i){return function(bt,bs){var br,bq;if(bs!==null&&!isNaN(+bs)){g(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period).");bq=bt;bt=bs;bs=bq}bt=typeof bt==="string"?+bt:bt;br=V.duration(bt,bs);K(this,br,bp);return this}}function K(bq,bt,bs,br){var bp=bt._milliseconds,bu=bt._days,i=bt._months;br=br==null?true:br;if(bp){bq._d.setTime(+bq._d+bp*bs)}if(bu){aZ(bq,"Date",bn(bq,"Date")+bu*bs)}if(i){bi(bq,bn(bq,"Month")+i*bs)}if(br){V.updateOffset(bq,bu||i)}}function b(i){return Object.prototype.toString.call(i)==="[object Array]"}function h(i){return Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date}function a0(bu,bt,bq){var bp=Math.min(bu.length,bt.length),br=Math.abs(bu.length-bt.length),bv=0,bs;for(bs=0;bs<bp;bs++){if((bq&&bu[bs]!==bt[bs])||(!bq&&Q(bu[bs])!==Q(bt[bs]))){bv++}}return bv+br}function a6(bp){if(bp){var i=bp.toLowerCase().replace(/(.)s$/,"$1");bp=f[bp]||a7[i]||i}return bp}function o(bq){var bp={},i,br;for(br in bq){if(a4(bq,br)){i=a6(br);if(i){bp[i]=bq[br]}}}return bp}function aE(bp){var i,bq;if(bp.indexOf("week")===0){i=7;bq="day"}else{if(bp.indexOf("month")===0){i=12;bq="month"}else{return}}V[bp]=function(bv,bs){var bu,br,bw=V._locale[bp],bt=[];if(typeof bv==="number"){bs=bv;bv=H}br=function(by){var bx=V().utc().set(bq,by);return bw.call(V._locale,bx,bv||"")};if(bs!=null){return br(bs)}else{for(bu=0;bu<i;bu++){bt.push(br(bu))}return bt}}}function Q(i){var bq=+i,bp=0;if(bq!==0&&isFinite(bq)){if(bq>=0){bp=Math.floor(bq)}else{bp=Math.ceil(bq)}}return bp}function be(i,bp){return new Date(Date.UTC(i,bp+1,0)).getUTCDate()}function aN(i,bq,bp){return F(V([i,11,31+bq-bp]),bq,bp).week}function a9(i){return aS(i)?366:365}function aS(i){return(i%4===0&&i%100!==0)||i%400===0}function bg(i){var bp;if(i._a&&i._pf.overflow===-2){bp=i._a[j]<0||i._a[j]>11?j:i._a[a2]<1||i._a[a2]>be(i._a[A],i._a[j])?a2:i._a[z]<0||i._a[z]>24||(i._a[z]===24&&(i._a[aH]!==0||i._a[x]!==0||i._a[Z]!==0))?z:i._a[aH]<0||i._a[aH]>59?aH:i._a[x]<0||i._a[x]>59?x:i._a[Z]<0||i._a[Z]>999?Z:-1;if(i._pf._overflowDayOfYear&&(bp<A||bp>a2)){bp=a2}i._pf.overflow=bp}}function aJ(i){if(i._isValid==null){i._isValid=!isNaN(i._d.getTime())&&i._pf.overflow<0&&!i._pf.empty&&!i._pf.invalidMonth&&!i._pf.nullInput&&!i._pf.invalidFormat&&!i._pf.userInvalidated;if(i._strict){i._isValid=i._isValid&&i._pf.charsLeftOver===0&&i._pf.unusedTokens.length===0&&i._pf.bigHour===H}}return i._isValid}function aU(i){return i?i.toLowerCase().replace("_","-"):i}function aB(bu){var bs=0,bq,bt,bp,br;while(bs<bu.length){br=aU(bu[bs]).split("-");bq=br.length;bt=aU(bu[bs+1]);bt=bt?bt.split("-"):null;while(bq>0){bp=c(br.slice(0,bq).join("-"));if(bp){return bp}if(bt&&bt.length>=bq&&a0(br,bt,true)>=bq-1){break}bq--}bs++}return null}function c(i){var bq=null;if(!at[i]&&au){try{bq=V.locale();require("./locale/"+i);V.locale(bq)}catch(bp){}}return at[i]}function C(i,bp){var bq,br;if(bp._isUTC){bq=bp.clone();br=(V.isMoment(i)||h(i)?+i:+V(i))-(+bq);bq._d.setTime(+bq._d+br);V.updateOffset(bq,false);return bq}else{return V(i).local()}}aI(af.prototype,{set:function(bp){var br,bq;for(bq in bp){br=bp[bq];if(typeof br==="function"){this[bq]=br}else{this["_"+bq]=br}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(bq,bu,bp){var br,bt,bs;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(br=0;br<12;br++){bt=V.utc([2000,br]);if(bp&&!this._longMonthsParse[br]){this._longMonthsParse[br]=new RegExp("^"+this.months(bt,"").replace(".","")+"$","i");this._shortMonthsParse[br]=new RegExp("^"+this.monthsShort(bt,"").replace(".","")+"$","i")}if(!bp&&!this._monthsParse[br]){bs="^"+this.months(bt,"")+"|^"+this.monthsShort(bt,"");this._monthsParse[br]=new RegExp(bs.replace(".",""),"i")}if(bp&&bu==="MMMM"&&this._longMonthsParse[br].test(bq)){return br}else{if(bp&&bu==="MMM"&&this._shortMonthsParse[br].test(bq)){return br}else{if(!bp&&this._monthsParse[br].test(bq)){return br}}}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(bs){var bp,br,bq;if(!this._weekdaysParse){this._weekdaysParse=[]}for(bp=0;bp<7;bp++){if(!this._weekdaysParse[bp]){br=V([2000,1]).day(bp);bq="^"+this.weekdays(br,"")+"|^"+this.weekdaysShort(br,"")+"|^"+this.weekdaysMin(br,"");this._weekdaysParse[bp]=new RegExp(bq.replace(".",""),"i")}if(this._weekdaysParse[bp].test(bs)){return bp}}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(bp){var i=this._longDateFormat[bp];if(!i&&this._longDateFormat[bp.toUpperCase()]){i=this._longDateFormat[bp.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(bq){return bq.slice(1)});this._longDateFormat[bp]=i}return i},isPM:function(i){return((i+"").toLowerCase().charAt(0)==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,bp,bq){if(i>11){return bq?"pm":"PM"}else{return bq?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(bq,br,bp){var i=this._calendar[bq];return typeof i==="function"?i.apply(br,[bp]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(br,bq,bp,bs){var i=this._relativeTime[bp];return(typeof i==="function")?i(br,bq,bp,bs):i.replace(/%d/i,br)},pastFuture:function(bq,i){var bp=this._relativeTime[bq>0?"future":"past"];return typeof bp==="function"?bp(i):bp.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(i){return i},postformat:function(i){return i},week:function(i){return F(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function aq(i){if(i.match(/\[[\s\S]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function w(br){var bs=br.match(ay),bp,bq;for(bp=0,bq=bs.length;bp<bq;bp++){if(a3[bs[bp]]){bs[bp]=a3[bs[bp]]}else{bs[bp]=aq(bs[bp])}}return function(bt){var i="";for(bp=0;bp<bq;bp++){i+=bs[bp] instanceof Function?bs[bp].call(bt,br):bs[bp]}return i}}function ax(i,bp){if(!i.isValid()){return i.localeData().invalidDate()}bp=bk(bp,i.localeData());if(!ar[bp]){ar[bp]=w(bp)}return ar[bp](i)}function bk(bs,bp){var bq=5;function br(i){return bp.longDateFormat(i)||i}aj.lastIndex=0;while(bq>=0&&aj.test(bs)){bs=bs.replace(aj,br);aj.lastIndex=0;bq-=1}return bs}function aC(br,bq){var bp,i=bq._strict;switch(br){case"Q":return ai;case"DDDD":return bc;case"YYYY":case"GGGG":case"gggg":return i?aW:I;case"Y":case"G":case"g":return ag;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?ap:bj;case"S":if(i){return ai}case"SS":if(i){return u}case"SSS":if(i){return bc}case"DDD":return al;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return N;case"a":case"A":return bq._locale._meridiemParse;case"x":return v;case"X":return aX;case"Z":case"ZZ":return r;case"T":return n;case"SSSS":return a8;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?u:k;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return k;case"Do":return i?bq._locale._ordinalParse:bq._locale._ordinalParseLenient;default:bp=new RegExp(bh(aG(br.replace("\\","")),"i"));return bp}}function D(bp){bp=bp||"";var i=(bp.match(r)||[]),bs=i[i.length-1]||[],br=(bs+"").match(ah)||["-",0,0],bq=+(br[1]*60)+Q(br[2]);return br[0]==="+"?-bq:bq}function aF(bs,bq,br){var bp,i=br._a;switch(bs){case"Q":if(bq!=null){i[j]=(Q(bq)-1)*3}break;case"M":case"MM":if(bq!=null){i[j]=Q(bq)-1}break;case"MMM":case"MMMM":bp=br._locale.monthsParse(bq,bs,br._strict);if(bp!=null){i[j]=bp}else{br._pf.invalidMonth=bq}break;case"D":case"DD":if(bq!=null){i[a2]=Q(bq)}break;case"Do":if(bq!=null){i[a2]=Q(parseInt(bq.match(/\d{1,2}/)[0],10))}break;case"DDD":case"DDDD":if(bq!=null){br._dayOfYear=Q(bq)}break;case"YY":i[A]=V.parseTwoDigitYear(bq);break;case"YYYY":case"YYYYY":case"YYYYYY":i[A]=Q(bq);break;case"a":case"A":br._isPm=br._locale.isPM(bq);break;case"h":case"hh":br._pf.bigHour=true;case"H":case"HH":i[z]=Q(bq);break;case"m":case"mm":i[aH]=Q(bq);break;case"s":case"ss":i[x]=Q(bq);break;case"S":case"SS":case"SSS":case"SSSS":i[Z]=Q(("0."+bq)*1000);break;case"x":br._d=new Date(Q(bq));break;case"X":br._d=new Date(parseFloat(bq)*1000);break;case"Z":case"ZZ":br._useUTC=true;br._tzm=D(bq);break;case"dd":case"ddd":case"dddd":bp=br._locale.weekdaysParse(bq);if(bp!=null){br._w=br._w||{};br._w.d=bp}else{br._pf.invalidWeekday=bq}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":bs=bs.substr(0,1);case"gggg":case"GGGG":case"GGGGG":bs=bs.substr(0,2);if(bq){br._w=br._w||{};br._w[bs]=Q(bq)}break;case"gg":case"GG":br._w=br._w||{};br._w[bs]=V.parseTwoDigitYear(bq)}}function X(bq){var i,bs,br,bt,bv,bu,bp;i=bq._w;if(i.GG!=null||i.W!=null||i.E!=null){bv=1;bu=4;bs=aY(i.GG,bq._a[A],F(V(),1,4).year);br=aY(i.W,1);bt=aY(i.E,1)}else{bv=bq._locale._week.dow;bu=bq._locale._week.doy;bs=aY(i.gg,bq._a[A],F(V(),bv,bu).year);br=aY(i.w,1);if(i.d!=null){bt=i.d;if(bt<bv){++br}}else{if(i.e!=null){bt=i.e+bv}else{bt=bv}}}bp=y(bs,br,bt,bu,bv);bq._a[A]=bp.year;bq._dayOfYear=bp.dayOfYear}function ao(bt){var bu,bs,br=[],bq,bp;if(bt._d){return}bq=q(bt);if(bt._w&&bt._a[a2]==null&&bt._a[j]==null){X(bt)}if(bt._dayOfYear){bp=aY(bt._a[A],bq[A]);if(bt._dayOfYear>a9(bp)){bt._pf._overflowDayOfYear=true}bs=M(bp,0,bt._dayOfYear);bt._a[j]=bs.getUTCMonth();bt._a[a2]=bs.getUTCDate()}for(bu=0;bu<3&&bt._a[bu]==null;++bu){bt._a[bu]=br[bu]=bq[bu]}for(;bu<7;bu++){bt._a[bu]=br[bu]=(bt._a[bu]==null)?(bu===2?1:0):bt._a[bu]}if(bt._a[z]===24&&bt._a[aH]===0&&bt._a[x]===0&&bt._a[Z]===0){bt._nextDay=true;bt._a[z]=0}bt._d=(bt._useUTC?M:az).apply(null,br);if(bt._tzm!=null){bt._d.setUTCMinutes(bt._d.getUTCMinutes()+bt._tzm)}if(bt._nextDay){bt._a[z]=24}}function aL(bp){var i;if(bp._d){return}i=o(bp._i);bp._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];ao(bp)}function q(bp){var i=new Date();if(bp._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}else{return[i.getFullYear(),i.getMonth(),i.getDate()]}}function U(br){if(br._f===V.ISO_8601){aA(br);return}br._a=[];br._pf.empty=true;var bu=""+br._i,bt,bq,bx,bs,bw,bp=bu.length,bv=0;bx=bk(br._f,br._locale).match(ay)||[];for(bt=0;bt<bx.length;bt++){bs=bx[bt];bq=(bu.match(aC(bs,br))||[])[0];if(bq){bw=bu.substr(0,bu.indexOf(bq));if(bw.length>0){br._pf.unusedInput.push(bw)}bu=bu.slice(bu.indexOf(bq)+bq.length);bv+=bq.length}if(a3[bs]){if(bq){br._pf.empty=false}else{br._pf.unusedTokens.push(bs)}aF(bs,bq,br)}else{if(br._strict&&!bq){br._pf.unusedTokens.push(bs)}}}br._pf.charsLeftOver=bp-bv;if(bu.length>0){br._pf.unusedInput.push(bu)}if(br._pf.bigHour===true&&br._a[z]<=12){br._pf.bigHour=H}if(br._isPm&&br._a[z]<12){br._a[z]+=12}if(br._isPm===false&&br._a[z]===12){br._a[z]=0}ao(br);bg(br)}function aG(i){return i.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(bp,bt,bs,br,bq){return bt||bs||br||bq})}function bh(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a5(bp){var bt,br,bs,bq,bu;if(bp._f.length===0){bp._pf.invalidFormat=true;bp._d=new Date(NaN);return}for(bq=0;bq<bp._f.length;bq++){bu=0;bt=aR({},bp);if(bp._useUTC!=null){bt._useUTC=bp._useUTC}bt._pf=an();bt._f=bp._f[bq];U(bt);if(!aJ(bt)){continue}bu+=bt._pf.charsLeftOver;bu+=bt._pf.unusedTokens.length*10;bt._pf.score=bu;if(bs==null||bu<bs){bs=bu;br=bt}}aI(bp,br||bt)}function aA(bs){var bt,bp,br=bs._i,bq=aT.exec(br);if(bq){bs._pf.iso=true;for(bt=0,bp=bb.length;bt<bp;bt++){if(bb[bt][1].exec(br)){bs._f=bb[bt][0]+(bq[6]||" ");break}}for(bt=0,bp=L.length;bt<bp;bt++){if(L[bt][1].exec(br)){bs._f+=L[bt][0];break}}if(br.match(r)){bs._f+="Z"}U(bs)}else{bs._isValid=false}}function m(i){aA(i);if(i._isValid===false){delete i._isValid;V.createFromInputFallback(i)}}function J(bp,bs){var br=[],bq;for(bq=0;bq<bp.length;++bq){br.push(bs(bp[bq],bq))}return br}function T(bq){var bp=bq._i,i;if(bp===H){bq._d=new Date()}else{if(h(bp)){bq._d=new Date(+bp)}else{if((i=e.exec(bp))!==null){bq._d=new Date(+i[1])}else{if(typeof bp==="string"){m(bq)}else{if(b(bp)){bq._a=J(bp.slice(0),function(br){return parseInt(br,10)});ao(bq)}else{if(typeof(bp)==="object"){aL(bq)}else{if(typeof(bp)==="number"){bq._d=new Date(bp)}else{V.createFromInputFallback(bq)}}}}}}}}function az(bv,i,bt,bs,bu,br,bq){var bp=new Date(bv,i,bt,bs,bu,br,bq);if(bv<1970){bp.setFullYear(bv)}return bp}function M(bp){var i=new Date(Date.UTC.apply(null,arguments));if(bp<1970){i.setUTCFullYear(bp)}return i}function bf(bp,i){if(typeof bp==="string"){if(!isNaN(bp)){bp=parseInt(bp,10)}else{bp=i.weekdaysParse(bp);if(typeof bp!=="number"){return null}}}return bp}function aQ(bp,br,bq,bs,i){return i.relativeTime(br||1,!!bq,bp,bs)}function E(bs,bp,bw){var bq=V.duration(bs).abs(),bx=ad(bq.as("s")),br=ad(bq.as("m")),bv=ad(bq.as("h")),by=ad(bq.as("d")),i=ad(bq.as("M")),bt=ad(bq.as("y")),bu=bx<B.s&&["s",bx]||br===1&&["m"]||br<B.m&&["mm",br]||bv===1&&["h"]||bv<B.h&&["hh",bv]||by===1&&["d"]||by<B.d&&["dd",by]||i===1&&["M"]||i<B.M&&["MM",i]||bt===1&&["y"]||["yy",bt];bu[2]=bp;bu[3]=+bs>0;bu[4]=bw;return aQ.apply({},bu)}function F(bs,bq,bt){var bp=bt-bq,i=bt-bs.day(),br;if(i>bp){i-=7}if(i<bp-7){i+=7}br=V(bs).add(i,"d");return{week:Math.ceil(br.dayOfYear()/7),year:br.year()}}function y(bs,br,bt,bv,i){var bu=M(bs,0,1).getUTCDay(),bq,bp;bu=bu===0?7:bu;bt=bt!=null?bt:i;bq=i-bu+(bu>bv?7:0)-(bu<i?7:0);bp=7*(br-1)+(bt-i)+bq+1;return{year:bp>0?bs:bs-1,dayOfYear:bp>0?bp:a9(bs-1)+bp}}function R(bp){var i=bp._i,br=bp._f,bq;bp._locale=bp._locale||V.localeData(bp._l);if(i===null||(br===H&&i==="")){return V.invalid({nullInput:true})}if(typeof i==="string"){bp._i=i=bp._locale.preparse(i)}if(V.isMoment(i)){return new P(i,true)}else{if(br){if(b(br)){a5(bp)}else{U(bp)}}else{T(bp)}}bq=new P(bp);if(bq._nextDay){bq.add(1,"d");bq._nextDay=H}return bq}V=function(bq,br,i,bp){var bs;if(typeof(i)==="boolean"){bp=i;i=H}bs={};bs._isAMomentObject=true;bs._i=bq;bs._f=br;bs._l=i;bs._strict=bp;bs._isUTC=false;bs._pf=an();return R(bs)};V.suppressDeprecationWarnings=false;V.createFromInputFallback=bm("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(i){i._d=new Date(i._i+(i._useUTC?" UTC":""))});function aD(br,bs){var bq,bp;if(bs.length===1&&b(bs[0])){bs=bs[0]}if(!bs.length){return V()}bq=bs[0];for(bp=1;bp<bs.length;++bp){if(bs[bp][br](bq)){bq=bs[bp]}}return bq}V.min=function(){var i=[].slice.call(arguments,0);return aD("isBefore",i)};V.max=function(){var i=[].slice.call(arguments,0);return aD("isAfter",i)};V.utc=function(bq,br,i,bp){var bs;if(typeof(i)==="boolean"){bp=i;i=H}bs={};bs._isAMomentObject=true;bs._useUTC=true;bs._isUTC=true;bs._l=i;bs._i=bq;bs._f=br;bs._strict=bp;bs._pf=an();return R(bs).utc()};V.unix=function(i){return V(i*1000)};V.duration=function(bq,bu){var bv=bq,bt=null,bp,bs,br,i;if(V.isDuration(bq)){bv={ms:bq._milliseconds,d:bq._days,M:bq._months}}else{if(typeof bq==="number"){bv={};if(bu){bv[bu]=bq}else{bv.milliseconds=bq}}else{if(!!(bt=bd.exec(bq))){bp=(bt[1]==="-")?-1:1;bv={y:0,d:Q(bt[a2])*bp,h:Q(bt[z])*bp,m:Q(bt[aH])*bp,s:Q(bt[x])*bp,ms:Q(bt[Z])*bp}}else{if(!!(bt=aM.exec(bq))){bp=(bt[1]==="-")?-1:1;br=function(bx){var bw=bx&&parseFloat(bx.replace(",","."));return(isNaN(bw)?0:bw)*bp};bv={y:br(bt[2]),M:br(bt[3]),d:br(bt[4]),h:br(bt[5]),m:br(bt[6]),s:br(bt[7]),w:br(bt[8])}}else{if(typeof bv==="object"&&("from" in bv||"to" in bv)){i=ac(V(bv.from),V(bv.to));bv={};bv.ms=i.milliseconds;bv.M=i.months}}}}}bs=new am(bv);if(V.isDuration(bq)&&a4(bq,"_locale")){bs._locale=bq._locale}return bs};V.version=aK;V.defaultFormat=aa;V.ISO_8601=function(){};V.momentProperties=aV;V.updateOffset=function(){};V.relativeTimeThreshold=function(i,bp){if(B[i]===H){return false}if(bp===H){return B[i]}B[i]=bp;return true};V.lang=bm("moment.lang is deprecated. Use moment.locale instead.",function(i,bp){return V.locale(i,bp)});V.locale=function(bp,i){var bq;if(bp){if(typeof(i)!=="undefined"){bq=V.defineLocale(bp,i)}else{bq=V.localeData(bp)}if(bq){V.duration._locale=V._locale=bq}}return V._locale._abbr};V.defineLocale=function(bp,i){if(i!==null){i.abbr=bp;if(!at[bp]){at[bp]=new af()}at[bp].set(i);V.locale(bp);return at[bp]}else{delete at[bp];return null}};V.langData=bm("moment.langData is deprecated. Use moment.localeData instead.",function(i){return V.localeData(i)});V.localeData=function(bp){var i;if(bp&&bp._locale&&bp._locale._abbr){bp=bp._locale._abbr}if(!bp){return V._locale}if(!b(bp)){i=c(bp);if(i){return i}bp=[bp]}return aB(bp)};V.isMoment=function(i){return i instanceof P||(i!=null&&a4(i,"_isAMomentObject"))};V.isDuration=function(i){return i instanceof am};for(ak=ab.length-1;ak>=0;--ak){aE(ab[ak])}V.normalizeUnits=function(i){return a6(i)};V.invalid=function(bp){var i=V.utc(NaN);if(bp!=null){aI(i._pf,bp)}else{i._pf.userInvalidated=true}return i};V.parseZone=function(){return V.apply(null,arguments).parseZone()};V.parseTwoDigitYear=function(i){return Q(i)+(Q(i)>68?1900:2000)};aI(V.fn=P.prototype,{clone:function(){return V(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var i=V(this).utc();if(0<i.year()&&i.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return ax(i,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return ax(i,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){return aJ(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&a0(this._a,(this._isUTC?V.utc(this._a):V(this._a)).toArray())>0}return false},parsingFlags:function(){return aI({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(i){return this.zone(0,i)},local:function(i){if(this._isUTC){this.zone(0,i);this._isUTC=false;if(i){this.add(this._dateTzOffset(),"m")}}return this},format:function(bp){var i=ax(this,bp||V.defaultFormat);return this.localeData().postformat(i)},add:W(1,"add"),subtract:W(-1,"subtract"),diff:function(bs,br,i){var bu=C(bs,this),bp=(this.zone()-bu.zone())*60000,bv,bq,bt;br=a6(br);if(br==="year"||br==="month"){bv=(this.daysInMonth()+bu.daysInMonth())*43200000;bq=((this.year()-bu.year())*12)+(this.month()-bu.month());bt=(this-V(this).startOf("month"))-(bu-V(bu).startOf("month"));bt-=((this.zone()-V(this).startOf("month").zone())-(bu.zone()-V(bu).startOf("month").zone()))*60000;bq+=bt/bv;if(br==="year"){bq=bq/12}}else{bv=(this-bu);bq=br==="second"?bv/1000:br==="minute"?bv/60000:br==="hour"?bv/3600000:br==="day"?(bv-bp)/86400000:br==="week"?(bv-bp)/604800000:bv}return i?bq:p(bq)},from:function(bp,i){return V.duration({to:this,from:bp}).locale(this.locale()).humanize(!i)},fromNow:function(i){return this.from(V(),i)},calendar:function(bs){var bp=bs||V(),i=C(bp,this).startOf("day"),br=this.diff(i,"days",true),bq=br<-6?"sameElse":br<-1?"lastWeek":br<0?"lastDay":br<1?"sameDay":br<2?"nextDay":br<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(bq,this,V(bp)))},isLeapYear:function(){return aS(this.year())},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(bp){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(bp!=null){bp=bf(bp,this.localeData());return this.add(bp-i,"d")}else{return i}},month:t("Month",true),startOf:function(i){i=a6(i);switch(i){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}else{if(i==="isoWeek"){this.isoWeekday(1)}}if(i==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(i){i=a6(i);if(i===H||i==="millisecond"){return this}return this.startOf(i).add(1,(i==="isoWeek"?"week":i)).subtract(1,"ms")},isAfter:function(bp,i){var bq;i=a6(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){bp=V.isMoment(bp)?bp:V(bp);return +this>+bp}else{bq=V.isMoment(bp)?+bp:+V(bp);return bq<+this.clone().startOf(i)}},isBefore:function(bp,i){var bq;i=a6(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){bp=V.isMoment(bp)?bp:V(bp);return +this<+bp}else{bq=V.isMoment(bp)?+bp:+V(bp);return +this.clone().endOf(i)<bq}},isSame:function(bp,i){var bq;i=a6(i||"millisecond");if(i==="millisecond"){bp=V.isMoment(bp)?bp:V(bp);return +this===+bp}else{bq=+V(bp);return +(this.clone().startOf(i))<=bq&&bq<=+(this.clone().endOf(i))}},min:bm("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(i){i=V.apply(null,arguments);return i<this?this:i}),max:bm("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(i){i=V.apply(null,arguments);return i>this?this:i}),zone:function(i,br){var bq=this._offset||0,bp;if(i!=null){if(typeof i==="string"){i=D(i)}if(Math.abs(i)<16){i=i*60}if(!this._isUTC&&br){bp=this._dateTzOffset()}this._offset=i;this._isUTC=true;if(bp!=null){this.subtract(bp,"m")}if(bq!==i){if(!br||this._changeInProgress){K(this,V.duration(bq-i,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;V.updateOffset(this,true);this._changeInProgress=null}}}}else{return this._isUTC?bq:this._dateTzOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else{if(typeof this._i==="string"){this.zone(this._i)}}return this},hasAlignedHourOffset:function(i){if(!i){i=0}else{i=V(i).zone()}return(this.zone()-i)%60===0},daysInMonth:function(){return be(this.year(),this.month())},dayOfYear:function(i){var bp=ad((V(this).startOf("day")-V(this).startOf("year"))/86400000)+1;return i==null?bp:this.add((i-bp),"d")},quarter:function(i){return i==null?Math.ceil((this.month()+1)/3):this.month((i-1)*3+this.month()%3)},weekYear:function(i){var bp=F(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return i==null?bp:this.add((i-bp),"y")},isoWeekYear:function(i){var bp=F(this,1,4).year;return i==null?bp:this.add((i-bp),"y")},week:function(i){var bp=this.localeData().week(this);return i==null?bp:this.add((i-bp)*7,"d")},isoWeek:function(i){var bp=F(this,1,4).week;return i==null?bp:this.add((i-bp)*7,"d")},weekday:function(i){var bp=(this.day()+7-this.localeData()._week.dow)%7;return i==null?bp:this.add(i-bp,"d")},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},isoWeeksInYear:function(){return aN(this.year(),1,4)},weeksInYear:function(){var i=this.localeData()._week;return aN(this.year(),i.dow,i.doy)},get:function(i){i=a6(i);return this[i]()},set:function(i,bp){i=a6(i);if(typeof this[i]==="function"){this[i](bp)}return this},locale:function(bp){var i;if(bp===H){return this._locale._abbr}else{i=V.localeData(bp);if(i!=null){this._locale=i}return this}},lang:bm("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(i){if(i===H){return this.localeData()}else{return this.locale(i)}}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}});function bi(i,bp){var bq;if(typeof bp==="string"){bp=i.localeData().monthsParse(bp);if(typeof bp!=="number"){return i}}bq=Math.min(i.date(),be(i.year(),bp));i._d["set"+(i._isUTC?"UTC":"")+"Month"](bp,bq);return i}function bn(bp,i){return bp._d["get"+(bp._isUTC?"UTC":"")+i]()}function aZ(bp,i,bq){if(i==="Month"){return bi(bp,bq)}else{return bp._d["set"+(bp._isUTC?"UTC":"")+i](bq)}}function t(i,bp){return function(bq){if(bq!=null){aZ(this,i,bq);V.updateOffset(this,bp);return this}else{return bn(this,i)}}}V.fn.millisecond=V.fn.milliseconds=t("Milliseconds",false);V.fn.second=V.fn.seconds=t("Seconds",false);V.fn.minute=V.fn.minutes=t("Minutes",false);V.fn.hour=V.fn.hours=t("Hours",true);V.fn.date=t("Date",true);V.fn.dates=bm("dates accessor is deprecated. Use date instead.",t("Date",true));V.fn.year=t("FullYear",true);V.fn.years=bm("years accessor is deprecated. Use year instead.",t("FullYear",true));V.fn.days=V.fn.day;V.fn.months=V.fn.month;V.fn.weeks=V.fn.week;V.fn.isoWeeks=V.fn.isoWeek;V.fn.quarters=V.fn.quarter;V.fn.toJSON=V.fn.toISOString;function s(i){return i*400/146097}function bl(i){return i*146097/400}aI(V.duration.fn=am.prototype,{_bubble:function(){var bq=this._milliseconds,bv=this._days,i=this._months,bt=this._data,bu,bs,bp,br=0;bt.milliseconds=bq%1000;bu=p(bq/1000);bt.seconds=bu%60;bs=p(bu/60);bt.minutes=bs%60;bp=p(bs/60);bt.hours=bp%24;bv+=p(bp/24);br=p(s(bv));bv-=p(bl(br));i+=p(bv/30);bv%=30;br+=p(i/12);i%=12;bt.days=bv;bt.months=i;bt.years=br},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return p(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+Q(this._months/12)*31536000000},humanize:function(bp){var i=E(this,!bp,this.localeData());if(bp){i=this.localeData().pastFuture(+this,i)}return this.localeData().postformat(i)},add:function(i,bq){var bp=V.duration(i,bq);this._milliseconds+=bp._milliseconds;this._days+=bp._days;this._months+=bp._months;this._bubble();return this},subtract:function(i,bq){var bp=V.duration(i,bq);this._milliseconds-=bp._milliseconds;this._days-=bp._days;this._months-=bp._months;this._bubble();return this},get:function(i){i=a6(i);return this[i.toLowerCase()+"s"]()},as:function(bp){var bq,i;bp=a6(bp);if(bp==="month"||bp==="year"){bq=this._days+this._milliseconds/86400000;i=this._months+s(bq)*12;return bp==="month"?i:i/12}else{bq=this._days+Math.round(bl(this._months/12));switch(bp){case"week":return bq/7+this._milliseconds/604800000;case"day":return bq+this._milliseconds/86400000;case"hour":return bq*24+this._milliseconds/3600000;case"minute":return bq*24*60+this._milliseconds/60000;case"second":return bq*24*60*60+this._milliseconds/1000;case"millisecond":return Math.floor(bq*24*60*60*1000)+this._milliseconds;default:throw new Error("Unknown unit "+bp)}}},lang:V.fn.lang,locale:V.fn.locale,toIsoString:bm("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var br=Math.abs(this.years()),i=Math.abs(this.months()),bt=Math.abs(this.days()),bp=Math.abs(this.hours()),bq=Math.abs(this.minutes()),bs=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(br?br+"Y":"")+(i?i+"M":"")+(bt?bt+"D":"")+((bp||bq||bs)?"T":"")+(bp?bp+"H":"")+(bq?bq+"M":"")+(bs?bs+"S":"")},localeData:function(){return this._locale}});V.duration.fn.toString=V.duration.fn.toISOString;function ae(i){V.duration.fn[i]=function(){return this._data[i]}}for(ak in G){if(a4(G,ak)){ae(ak.toLowerCase())}}V.duration.fn.asMilliseconds=function(){return this.as("ms")};V.duration.fn.asSeconds=function(){return this.as("s")};V.duration.fn.asMinutes=function(){return this.as("m")};V.duration.fn.asHours=function(){return this.as("h")};V.duration.fn.asDays=function(){return this.as("d")};V.duration.fn.asWeeks=function(){return this.as("weeks")};V.duration.fn.asMonths=function(){return this.as("M")};V.duration.fn.asYears=function(){return this.as("y")};V.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(bq){var i=bq%10,bp=(Q(bq%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return bq+bp}});function Y(i){if(typeof ender!=="undefined"){return}av=ba.moment;if(i){ba.moment=bm("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",V)}else{ba.moment=V}}if(au){module.exports=V}else{if(typeof define==="function"&&define.amd){define("moment",function(bp,i,bq){if(bq.config&&bq.config()&&bq.config().noGlobal===true){ba.moment=av}return V});Y(true)}else{Y()}}}).call(this);(function(a,b){if(typeof exports==="object"){b(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],b)}else{b(a)}}}(this,function(y){var n="1.1.1";function g(z){this._targetElement=z;this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:true,exitOnOverlayClick:true,showStepNumbers:true,keyboardNavigation:true,showButtons:true,showBullets:true,showProgress:false,scrollToElement:true,overlayOpacity:0.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:false}}function o(K){var B=[],O=this;if(this._options.steps){for(var F=0,M=this._options.steps.length;F<M;F++){var L=p(this._options.steps[F]);L.step=B.length+1;if(typeof(L.element)==="string"){L.element=document.querySelector(L.element)}if(typeof(L.element)==="undefined"||L.element==null){var P=document.querySelector(".introjsFloatingElement");if(P==null){P=document.createElement("div");P.className="introjsFloatingElement";document.body.appendChild(P)}L.element=P;L.position="floating"}if(L.element!=null){B.push(L)}}}else{var G=K.querySelectorAll("*[data-intro]");if(G.length<1){return false}for(var F=0,C=G.length;F<C;F++){var H=G[F];var A=parseInt(H.getAttribute("data-step"),10);if(A>0){B[A-1]={element:H,intro:H.getAttribute("data-intro"),step:parseInt(H.getAttribute("data-step"),10),tooltipClass:H.getAttribute("data-tooltipClass"),highlightClass:H.getAttribute("data-highlightClass"),position:H.getAttribute("data-position")||this._options.tooltipPosition}}}var D=0;for(var F=0,C=G.length;F<C;F++){var H=G[F];if(H.getAttribute("data-step")==null){while(true){if(typeof B[D]=="undefined"){break}else{D++}}B[D]={element:H,intro:H.getAttribute("data-intro"),step:D+1,tooltipClass:H.getAttribute("data-tooltipClass"),highlightClass:H.getAttribute("data-highlightClass"),position:H.getAttribute("data-position")||this._options.tooltipPosition}}}}var J=[];for(var I=0;I<B.length;I++){B[I]&&J.push(B[I])}B=J;B.sort(function(Q,z){return Q.step-z.step});O._introItems=B;if(m.call(O,K)){x.call(O);var N=K.querySelector(".introjs-skipbutton"),E=K.querySelector(".introjs-nextbutton");O._onKeyDown=function(Q){if(Q.keyCode===27&&O._options.exitOnEsc==true){if(O._introExitCallback!=undefined){O._introExitCallback.call(O)}q.call(O,K)}else{if(Q.keyCode===37){i.call(O)}else{if(Q.keyCode===39){x.call(O)}else{if(Q.keyCode===13){var z=Q.target||Q.srcElement;if(z&&z.className.indexOf("introjs-prevbutton")>0){i.call(O)}else{if(z&&z.className.indexOf("introjs-skipbutton")>0){if(O._introItems.length-1==O._currentStep&&typeof(O._introCompleteCallback)==="function"){O._introCompleteCallback.call(O)}if(O._introExitCallback!=undefined){O._introExitCallback.call(O)}q.call(O,K)}else{x.call(O)}}if(Q.preventDefault){Q.preventDefault()}else{Q.returnValue=false}}}}}};O._onResize=function(z){d.call(O,document.querySelector(".introjs-helperLayer"));d.call(O,document.querySelector(".introjs-tooltipReferenceLayer"))};if(window.addEventListener){if(this._options.keyboardNavigation){window.addEventListener("keydown",O._onKeyDown,true)}window.addEventListener("resize",O._onResize,true)}else{if(document.attachEvent){if(this._options.keyboardNavigation){document.attachEvent("onkeydown",O._onKeyDown)}document.attachEvent("onresize",O._onResize)}}}return false}function p(A){if(A==null||typeof(A)!="object"||typeof(A.nodeType)!="undefined"){return A}var z={};for(var B in A){if(typeof(jQuery)!="undefined"&&A[B] instanceof jQuery){z[B]=A[B]}else{z[B]=p(A[B])}}return z}function k(z){this._currentStep=z-2;if(typeof(this._introItems)!=="undefined"){x.call(this)}}function x(){this._direction="forward";if(typeof(this._currentStep)==="undefined"){this._currentStep=0}else{++this._currentStep}if((this._introItems.length)<=this._currentStep){if(typeof(this._introCompleteCallback)==="function"){this._introCompleteCallback.call(this)}q.call(this,this._targetElement);return}var z=this._introItems[this._currentStep];if(typeof(this._introBeforeChangeCallback)!=="undefined"){this._introBeforeChangeCallback.call(this,z.element)}s.call(this,z)}function i(){this._direction="backward";if(this._currentStep===0){return false}var z=this._introItems[--this._currentStep];if(typeof(this._introBeforeChangeCallback)!=="undefined"){this._introBeforeChangeCallback.call(this,z.element)}s.call(this,z)}function q(F){var H=F.querySelector(".introjs-overlay");if(H==null){return}H.style.opacity=0;setTimeout(function(){if(H.parentNode){H.parentNode.removeChild(H)}},500);var z=F.querySelector(".introjs-helperLayer");if(z){z.parentNode.removeChild(z)}var G=F.querySelector(".introjs-tooltipReferenceLayer");if(G){G.parentNode.removeChild(G)}var E=F.querySelector(".introjs-disableInteraction");if(E){E.parentNode.removeChild(E)}var A=document.querySelector(".introjsFloatingElement");if(A){A.parentNode.removeChild(A)}var B=document.querySelector(".introjs-showElement");if(B){B.className=B.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"")}var C=document.querySelectorAll(".introjs-fixParent");if(C&&C.length>0){for(var D=C.length-1;D>=0;D--){C[D].className=C[D].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"")}}if(window.removeEventListener){window.removeEventListener("keydown",this._onKeyDown,true)}else{if(document.detachEvent){document.detachEvent("onkeydown",this._onKeyDown)}}this._currentStep=undefined}function e(D,K,I,H){var A="",E,F,L,G,B;K.style.top=null;K.style.right=null;K.style.bottom=null;K.style.left=null;K.style.marginLeft=null;K.style.marginTop=null;I.style.display="inherit";if(typeof(H)!="undefined"&&H!=null){H.style.top=null;H.style.left=null}if(!this._introItems[this._currentStep]){return}E=this._introItems[this._currentStep];if(typeof(E.tooltipClass)==="string"){A=E.tooltipClass}else{A=this._options.tooltipClass}K.className=("introjs-tooltip "+A).replace(/^\s+|\s+$/g,"");B=this._introItems[this._currentStep].position;if((B=="auto"||this._options.tooltipPosition=="auto")){if(B!="floating"){B=a.call(this,D,K,B)}}L=h(D);F=h(K);G=u();switch(B){case"top":I.className="introjs-arrow bottom";var C=15;j(L,C,F,G,K);K.style.bottom=(L.height+20)+"px";break;case"right":K.style.left=(L.width+20)+"px";if(L.top+F.height>G.height){I.className="introjs-arrow left-bottom";K.style.top="-"+(F.height-L.height-20)+"px"}else{I.className="introjs-arrow left"}break;case"left":if(this._options.showStepNumbers==true){K.style.top="15px"}if(L.top+F.height>G.height){K.style.top="-"+(F.height-L.height-20)+"px";I.className="introjs-arrow right-bottom"}else{I.className="introjs-arrow right"}K.style.right=(L.width+20)+"px";break;case"floating":I.style.display="none";K.style.left="50%";K.style.top="50%";K.style.marginLeft="-"+(F.width/2)+"px";K.style.marginTop="-"+(F.height/2)+"px";if(typeof(H)!="undefined"&&H!=null){H.style.left="-"+((F.width/2)+18)+"px";H.style.top="-"+((F.height/2)+18)+"px"}break;case"bottom-right-aligned":I.className="introjs-arrow top-right";var J=0;v(L,J,F,K);K.style.top=(L.height+20)+"px";break;case"bottom-middle-aligned":I.className="introjs-arrow top-middle";var z=L.width/2-F.width/2;if(v(L,z,F,K)){K.style.right=null;j(L,z,F,G,K)}K.style.top=(L.height+20)+"px";break;case"bottom-left-aligned":case"bottom":default:I.className="introjs-arrow top";var C=0;j(L,C,F,G,K);K.style.top=(L.height+20)+"px";break}}function j(D,B,C,z,A){if(D.left+B+C.width>z.width){A.style.left=(z.width-C.width-D.left)+"px";return false}A.style.left=B+"px";return true}function v(C,A,B,z){if(C.left+C.width-A-B.width<0){z.style.left=(-C.left)+"px";return false}z.style.right=A+"px";return true}function a(C,F,D){var A=this._options.positionPrecedence.slice();var E=u();var G=h(F).height+10;var B=h(F).width+20;var H=h(C);var z="floating";if(H.left+B>E.width||((H.left+(H.width/2))-B)<0){w(A,"bottom");w(A,"top")}else{if((H.height+H.top+G)>E.height){w(A,"bottom")}if(H.top-G<0){w(A,"top")}}if(H.width+H.left+B>E.width){w(A,"right")}if(H.left-B<0){w(A,"left")}if(A.length>0){z=A[0]}if(D&&D!="auto"){if(A.indexOf(D)>-1){z=D}}return z}function w(z,A){if(z.indexOf(A)>-1){z.splice(z.indexOf(A),1)}}function d(z){if(z){if(!this._introItems[this._currentStep]){return}var A=this._introItems[this._currentStep],B=h(A.element),C=10;if(A.position=="floating"){C=0}z.setAttribute("style","width: "+(B.width+C)+"px; height:"+(B.height+C)+"px; top:"+(B.top-5)+"px;left: "+(B.left-5)+"px;")}}function c(){var z=document.querySelector(".introjs-disableInteraction");if(z===null){z=document.createElement("div");z.className="introjs-disableInteraction";this._targetElement.appendChild(z)}d.call(this,z)}function s(D){if(typeof(this._introChangeCallback)!=="undefined"){this._introChangeCallback.call(this,D.element)}var M=this,aa=document.querySelector(".introjs-helperLayer"),Z=document.querySelector(".introjs-tooltipReferenceLayer"),af="introjs-helperLayer",ab=h(D.element);if(typeof(D.highlightClass)==="string"){af+=(" "+D.highlightClass)}if(typeof(this._options.highlightClass)==="string"){af+=(" "+this._options.highlightClass)}if(aa!=null){var am=Z.querySelector(".introjs-helperNumberLayer"),ah=Z.querySelector(".introjs-tooltiptext"),K=Z.querySelector(".introjs-arrow"),aj=Z.querySelector(".introjs-tooltip"),ae=Z.querySelector(".introjs-skipbutton"),A=Z.querySelector(".introjs-prevbutton"),F=Z.querySelector(".introjs-nextbutton");aa.className=af;aj.style.opacity=0;aj.style.display="none";if(am!=null){var H=this._introItems[(D.step-2>=0?D.step-2:0)];if(H!=null&&(this._direction=="forward"&&H.position=="floating")||(this._direction=="backward"&&D.position=="floating")){am.style.opacity=0}}d.call(M,aa);d.call(M,Z);var C=document.querySelectorAll(".introjs-fixParent");if(C&&C.length>0){for(var ak=C.length-1;ak>=0;ak--){C[ak].className=C[ak].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"")}}var L=document.querySelector(".introjs-showElement");L.className=L.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");if(M._lastShowElementTimer){clearTimeout(M._lastShowElementTimer)}M._lastShowElementTimer=setTimeout(function(){if(am!=null){am.innerHTML=D.step}ah.innerHTML=D.intro;aj.style.display="block";e.call(M,D.element,aj,K,am);Z.querySelector(".introjs-bullets li > a.active").className="";Z.querySelector('.introjs-bullets li > a[data-stepnumber="'+D.step+'"]').className="active";Z.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+b.call(M)+"%;");aj.style.opacity=1;if(am){am.style.opacity=1}if(F.tabIndex===-1){ae.focus()}else{F.focus()}},350)}else{var E=document.createElement("div"),V=document.createElement("div"),J=document.createElement("div"),B=document.createElement("div"),Q=document.createElement("div"),ad=document.createElement("div"),ag=document.createElement("div"),W=document.createElement("div");E.className=af;V.className="introjs-tooltipReferenceLayer";d.call(M,E);d.call(M,V);this._targetElement.appendChild(E);this._targetElement.appendChild(V);J.className="introjs-arrow";Q.className="introjs-tooltiptext";Q.innerHTML=D.intro;ad.className="introjs-bullets";if(this._options.showBullets===false){ad.style.display="none"}var T=document.createElement("ul");for(var ak=0,N=this._introItems.length;ak<N;ak++){var O=document.createElement("li");var G=document.createElement("a");G.onclick=function(){M.goToStep(this.getAttribute("data-stepnumber"))};if(ak===(D.step-1)){G.className="active"}G.href="javascript:void(0);";G.innerHTML="&nbsp;";G.setAttribute("data-stepnumber",this._introItems[ak].step);O.appendChild(G);T.appendChild(O)}ad.appendChild(T);ag.className="introjs-progress";if(this._options.showProgress===false){ag.style.display="none"}var Y=document.createElement("div");Y.className="introjs-progressbar";Y.setAttribute("style","width:"+b.call(this)+"%;");ag.appendChild(Y);W.className="introjs-tooltipbuttons";if(this._options.showButtons===false){W.style.display="none"}B.className="introjs-tooltip";B.appendChild(Q);B.appendChild(ad);B.appendChild(ag);if(this._options.showStepNumbers==true){var R=document.createElement("span");R.className="introjs-helperNumberLayer";R.innerHTML=D.step;V.appendChild(R)}B.appendChild(J);V.appendChild(B);var F=document.createElement("a");F.onclick=function(){if(M._introItems.length-1!=M._currentStep){x.call(M)}};F.href="javascript:void(0);";F.innerHTML=this._options.nextLabel;var A=document.createElement("a");A.onclick=function(){if(M._currentStep!=0){i.call(M)}};A.href="javascript:void(0);";A.innerHTML=this._options.prevLabel;var ae=document.createElement("a");ae.className="introjs-button introjs-skipbutton";ae.href="javascript:void(0);";ae.innerHTML=this._options.skipLabel;ae.onclick=function(){if(M._introItems.length-1==M._currentStep&&typeof(M._introCompleteCallback)==="function"){M._introCompleteCallback.call(M)}if(M._introItems.length-1!=M._currentStep&&typeof(M._introExitCallback)==="function"){M._introExitCallback.call(M)}q.call(M,M._targetElement)};W.appendChild(ae);if(this._introItems.length>1){W.appendChild(A);W.appendChild(F)}B.appendChild(W);e.call(M,D.element,B,J,R)}if(this._options.disableInteraction===true){c.call(M)}A.removeAttribute("tabIndex");F.removeAttribute("tabIndex");if(this._currentStep==0&&this._introItems.length>1){A.className="introjs-button introjs-prevbutton introjs-disabled";A.tabIndex="-1";F.className="introjs-button introjs-nextbutton";ae.innerHTML=this._options.skipLabel}else{if(this._introItems.length-1==this._currentStep||this._introItems.length==1){ae.innerHTML=this._options.doneLabel;A.className="introjs-button introjs-prevbutton";F.className="introjs-button introjs-nextbutton introjs-disabled";F.tabIndex="-1"}else{A.className="introjs-button introjs-prevbutton";F.className="introjs-button introjs-nextbutton";ae.innerHTML=this._options.skipLabel}}F.focus();D.element.className+=" introjs-showElement";var S=r(D.element,"position");if(S!=="absolute"&&S!=="relative"){D.element.className+=" introjs-relativePosition"}var ai=D.element.parentNode;while(ai!=null){if(ai.tagName.toLowerCase()==="body"){break}var P=r(ai,"z-index");var al=parseFloat(r(ai,"opacity"));var U=r(ai,"transform")||r(ai,"-webkit-transform")||r(ai,"-moz-transform")||r(ai,"-ms-transform")||r(ai,"-o-transform");if(/[0-9]+/.test(P)||al<1||(U!=="none"&&U!==undefined)){ai.className+=" introjs-fixParent"}ai=ai.parentNode}if(!l(D.element)&&this._options.scrollToElement===true){var X=D.element.getBoundingClientRect(),ac=u().height,I=X.bottom-(X.bottom-X.top),z=X.bottom-ac;if(I<0||D.element.clientHeight>ac){window.scrollBy(0,I-30)}else{window.scrollBy(0,z+100)}}if(typeof(this._introAfterChangeCallback)!=="undefined"){this._introAfterChangeCallback.call(this,D.element)}}function r(z,A){var B="";if(z.currentStyle){B=z.currentStyle[A]}else{if(document.defaultView&&document.defaultView.getComputedStyle){B=document.defaultView.getComputedStyle(z,null).getPropertyValue(A)}}if(B&&B.toLowerCase){return B.toLowerCase()}else{return B}}function u(){if(window.innerWidth!=undefined){return{width:window.innerWidth,height:window.innerHeight}}else{var z=document.documentElement;return{width:z.clientWidth,height:z.clientHeight}}}function l(z){var A=z.getBoundingClientRect();return(A.top>=0&&A.left>=0&&(A.bottom+80)<=window.innerHeight&&A.right<=window.innerWidth)}function m(C){var z=document.createElement("div"),D="",A=this;z.className="introjs-overlay";if(C.tagName.toLowerCase()==="body"){D+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;";z.setAttribute("style",D)}else{var B=h(C);if(B){D+="width: "+B.width+"px; height:"+B.height+"px; top:"+B.top+"px;left: "+B.left+"px;";z.setAttribute("style",D)}}C.appendChild(z);z.onclick=function(){if(A._options.exitOnOverlayClick==true){if(A._introExitCallback!=undefined){A._introExitCallback.call(A)}q.call(A,C)}};setTimeout(function(){D+="opacity: "+A._options.overlayOpacity.toString()+";";z.setAttribute("style",D)},10);return true}function h(B){var C={};C.width=B.offsetWidth;C.height=B.offsetHeight;var A=0;var z=0;while(B&&!isNaN(B.offsetLeft)&&!isNaN(B.offsetTop)){A+=B.offsetLeft;z+=B.offsetTop;B=B.offsetParent}C.top=z;C.left=A;return C}function b(){var z=parseInt((this._currentStep+1),10);return((z/this._introItems.length)*100)}function f(C,B){var A={};for(var z in C){A[z]=C[z]}for(var z in B){A[z]=B[z]}return A}var t=function(A){if(typeof(A)==="object"){return new g(A)}else{if(typeof(A)==="string"){var z=document.querySelector(A);if(z){return new g(z)}else{throw new Error("There is no element with given selector.")}}else{return new g(document.body)}}};t.version=n;t.fn=g.prototype={clone:function(){return new g(this)},setOption:function(z,A){this._options[z]=A;return this},setOptions:function(z){this._options=f(this._options,z);return this},start:function(){o.call(this,this._targetElement);return this},goToStep:function(z){k.call(this,z);return this},nextStep:function(){x.call(this);return this},previousStep:function(){i.call(this);return this},exit:function(){q.call(this,this._targetElement);return this},refresh:function(){d.call(this,document.querySelector(".introjs-helperLayer"));d.call(this,document.querySelector(".introjs-tooltipReferenceLayer"));return this},onbeforechange:function(z){if(typeof(z)==="function"){this._introBeforeChangeCallback=z}else{throw new Error("Provided callback for onbeforechange was not a function")}return this},onchange:function(z){if(typeof(z)==="function"){this._introChangeCallback=z}else{throw new Error("Provided callback for onchange was not a function.")}return this},onafterchange:function(z){if(typeof(z)==="function"){this._introAfterChangeCallback=z}else{throw new Error("Provided callback for onafterchange was not a function")}return this},oncomplete:function(z){if(typeof(z)==="function"){this._introCompleteCallback=z}else{throw new Error("Provided callback for oncomplete was not a function.")}return this},onexit:function(z){if(typeof(z)==="function"){this._introExitCallback=z}else{throw new Error("Provided callback for onexit was not a function.")}return this}};y.introJs=t;return t}));
/*! nouislider - 10.1.0 - 2017-07-28 13:09:54 */
;!function(b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():window.noUiSlider=b()}(function(){function a3(b){return"object"==typeof b&&"function"==typeof b.to&&"function"==typeof b.from}function a2(b){b.parentElement.removeChild(b)}function a1(b){b.preventDefault()}function a0(b){return b.filter(function(c){return !this[c]&&(this[c]=!0)},{})}function aZ(d,c){return Math.round(d/c)*c}function aY(h,g){var l=h.getBoundingClientRect(),k=h.ownerDocument,j=k.documentElement,i=aP(k);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),g?l.top+i.y-j.clientTop:l.left+i.x-j.clientLeft}function aX(b){return"number"==typeof b&&!isNaN(b)&&isFinite(b)}function aW(e,d,f){f>0&&(aS(e,d),setTimeout(function(){aR(e,d)},f))}function aV(b){return Math.max(Math.min(b,100),0)}function aU(b){return Array.isArray(b)?b:[b]}function aT(d){d=String(d);var c=d.split(".");return c.length>1?c[1].length:0}function aS(d,c){d.classList?d.classList.add(c):d.className+=" "+c}function aR(d,c){d.classList?d.classList.remove(c):d.className=d.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")}function aQ(d,c){return d.classList?d.classList.contains(c):new RegExp("\\b"+c+"\\b").test(d.className)}function aP(e){var d=void 0!==window.pageXOffset,f="CSS1Compat"===(e.compatMode||"");return{x:d?window.pageXOffset:f?e.documentElement.scrollLeft:e.body.scrollLeft,y:d?window.pageYOffset:f?e.documentElement.scrollTop:e.body.scrollTop}}function aO(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function aN(){var d=!1;try{var c=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("test",null,c)}catch(d){}return d}function aM(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function aL(d,c){return 100/(c-d)}function aK(d,c){return 100*c/(d[1]-d[0])}function aJ(d,c){return aK(d,d[0]<0?c+Math.abs(d[0]):c-d[0])}function aI(d,c){return c*(d[1]-d[0])/100+d[0]}function aH(e,d){for(var f=1;e>=d[f];){f+=1}return f}function aG(j,i,p){if(p>=j.slice(-1)[0]){return 100}var o,n,m,l,k=aH(p,j);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],m+aJ([o,n],p)/aL(m,l)}function aF(j,i,p){if(p>=100){return j.slice(-1)[0]}var o,n,m,l,k=aH(p,i);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],aI([o,n],(p-m)*aL(m,l))}function aE(i,e,n,m){if(100===m){return m}var l,k,j=aH(m,i);return n?(l=i[j-1],k=i[j],m-l>(k-l)/2?k:l):e[j-1]?i[j-1]+aZ(m-i[j-1],e[j-1]):m}function aB(f,e,h){var g;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e)){throw new Error("noUiSlider ("+a4+"): 'range' contains invalid value.")}if(g="min"===f?0:"max"===f?100:parseFloat(f),!aX(g)||!aX(e[0])){throw new Error("noUiSlider ("+a4+"): 'range' value isn't numeric.")}h.xPct.push(g),h.xVal.push(e[0]),g?h.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(h.xSteps[0]=e[1]),h.xHighestCompleteStep.push(0)}function aA(h,g,l){if(!g){return !0}l.xSteps[h]=aK([l.xVal[h],l.xVal[h+1]],g)/aL(l.xPct[h],l.xPct[h+1]);var k=(l.xVal[h+1]-l.xVal[h])/l.xNumSteps[h],j=Math.ceil(Number(k.toFixed(3))-1),i=l.xVal[h]+l.xNumSteps[h]*j;l.xHighestCompleteStep[h]=i}function az(g,f,j){this.xPct=[],this.xVal=[],this.xSteps=[j||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=f;var i,h=[];for(i in g){g.hasOwnProperty(i)&&h.push([g[i],i])}for(h.length&&"object"==typeof h[0][0]?h.sort(function(d,c){return d[0][0]-c[0][0]}):h.sort(function(d,c){return d[0]-c[0]}),i=0;i<h.length;i++){aB(h[i][1],h[i][0],this)}for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++){aA(i,this.xNumSteps[i],this)}}function ay(a){if(a3(a)){return !0}throw new Error("noUiSlider ("+a4+"): 'format' requires 'to' and 'from' methods.")}function ax(d,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'step' is not numeric.")}d.singleStep=c}function aw(d,c){if("object"!=typeof c||Array.isArray(c)){throw new Error("noUiSlider ("+a4+"): 'range' is not an object.")}if(void 0===c.min||void 0===c.max){throw new Error("noUiSlider ("+a4+"): Missing 'min' or 'max' in 'range'.")}if(c.min===c.max){throw new Error("noUiSlider ("+a4+"): 'range' 'min' and 'max' cannot be equal.")}d.spectrum=new az(c,d.snap,d.singleStep)}function av(d,c){if(c=aU(c),!Array.isArray(c)||!c.length){throw new Error("noUiSlider ("+a4+"): 'start' option is incorrect.")}d.handles=c.length,d.start=c}function au(d,c){if(d.snap=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'snap' option must be a boolean.")}}function at(d,c){if(d.animate=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'animate' option must be a boolean.")}}function ar(d,c){if(d.animationDuration=c,"number"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'animationDuration' option must be a number.")}}function aq(f,e){var h,g=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(h=1;h<f.handles;h++){g.push(e)}g.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==f.handles+1){throw new Error("noUiSlider ("+a4+"): 'connect' option doesn't match handle count.")}g=e}f.connect=g}function ap(d,c){switch(c){case"horizontal":d.ort=0;break;case"vertical":d.ort=1;break;default:throw new Error("noUiSlider ("+a4+"): 'orientation' option is invalid.")}}function ao(d,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'margin' option must be numeric.")}if(0!==c&&(d.margin=d.spectrum.getMargin(c),!d.margin)){throw new Error("noUiSlider ("+a4+"): 'margin' option is only supported on linear sliders.")}}function an(d,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'limit' option must be numeric.")}if(d.limit=d.spectrum.getMargin(c),!d.limit||d.handles<2){throw new Error("noUiSlider ("+a4+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}}function am(d,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'padding' option must be numeric.")}if(0!==c){if(d.padding=d.spectrum.getMargin(c),!d.padding){throw new Error("noUiSlider ("+a4+"): 'padding' option is only supported on linear sliders.")}if(d.padding<0){throw new Error("noUiSlider ("+a4+"): 'padding' option must be a positive number.")}if(d.padding>=50){throw new Error("noUiSlider ("+a4+"): 'padding' option must be less than half the range.")}}}function al(d,c){switch(c){case"ltr":d.dir=0;break;case"rtl":d.dir=1;break;default:throw new Error("noUiSlider ("+a4+"): 'direction' option was not recognized.")}}function ak(i,h){if("string"!=typeof h){throw new Error("noUiSlider ("+a4+"): 'behaviour' must be a string containing options.")}var n=h.indexOf("tap")>=0,m=h.indexOf("drag")>=0,l=h.indexOf("fixed")>=0,k=h.indexOf("snap")>=0,j=h.indexOf("hover")>=0;if(l){if(2!==i.handles){throw new Error("noUiSlider ("+a4+"): 'fixed' behaviour must be used with 2 handles")}ao(i,i.start[1]-i.start[0])}i.events={tap:n||k,drag:m,fixed:l,snap:k,hover:j}}function aj(d,c){if(d.multitouch=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'multitouch' option must be a boolean.")}}function ai(e,d){if(!1!==d){if(!0===d){e.tooltips=[];for(var f=0;f<e.handles;f++){e.tooltips.push(!0)}}else{if(e.tooltips=aU(d),e.tooltips.length!==e.handles){throw new Error("noUiSlider ("+a4+"): must pass a formatter for all handles.")}e.tooltips.forEach(function(b){if("boolean"!=typeof b&&("object"!=typeof b||"function"!=typeof b.to)){throw new Error("noUiSlider ("+a4+"): 'tooltips' must be passed a formatter or 'false'.")}})}}}function ah(d,c){d.ariaFormat=c,ay(c)}function ag(d,c){d.format=c,ay(c)}function af(d,c){if(void 0!==c&&"string"!=typeof c&&!1!==c){throw new Error("noUiSlider ("+a4+"): 'cssPrefix' must be a string or `false`.")}d.cssPrefix=c}function ae(e,d){if(void 0!==d&&"object"!=typeof d){throw new Error("noUiSlider ("+a4+"): 'cssClasses' must be an object.")}if("string"==typeof e.cssPrefix){e.cssClasses={};for(var f in d){d.hasOwnProperty(f)&&(e.cssClasses[f]=e.cssPrefix+d[f])}}else{e.cssClasses=d}}function ad(d,c){if(!0!==c&&!1!==c){throw new Error("noUiSlider ("+a4+"): 'useRequestAnimationFrame' option should be true (default) or false.")}d.useRequestAnimationFrame=c}function ac(g){var f={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:aC,format:aC},j={step:{r:!1,t:ax},start:{r:!0,t:av},connect:{r:!0,t:aq},direction:{r:!0,t:al},snap:{r:!1,t:au},animate:{r:!1,t:at},animationDuration:{r:!1,t:ar},range:{r:!0,t:aw},orientation:{r:!1,t:ap},margin:{r:!1,t:ao},limit:{r:!1,t:an},padding:{r:!1,t:am},behaviour:{r:!0,t:ak},multitouch:{r:!0,t:aj},ariaFormat:{r:!1,t:ah},format:{r:!1,t:ag},tooltips:{r:!1,t:ai},cssPrefix:{r:!1,t:af},cssClasses:{r:!1,t:ae},useRequestAnimationFrame:{r:!1,t:ad}},i={connect:!1,direction:"ltr",behaviour:"tap",multitouch:!1,orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};g.format&&!g.ariaFormat&&(g.ariaFormat=g.format),Object.keys(j).forEach(function(a){if(void 0===g[a]&&void 0===i[a]){if(j[a].r){throw new Error("noUiSlider ("+a4+"): '"+a+"' is required.")}return !0}j[a].t(f,void 0===g[a]?i[a]:g[a])}),f.pips=g.pips;var h=[["left","top"],["right","bottom"]];return f.style=h[f.dir][f.ort],f.styleOposite=h[f.dir?0:1][f.ort],f}function ab(bQ,bP,bO){function bN(g,e){var k=Y.createElement("div");return e&&aS(k,e),g.appendChild(k),k}function bK(g,e){var s=bN(g,bP.cssClasses.origin),k=bN(s,bP.cssClasses.handle);return k.setAttribute("data-handle",e),k.setAttribute("tabindex","0"),k.setAttribute("role","slider"),k.setAttribute("aria-orientation",bP.ort?"vertical":"horizontal"),0===e?aS(k,bP.cssClasses.handleLower):e===bP.handles-1&&aS(k,bP.cssClasses.handleUpper),s}function bJ(g,e){return !!e&&bN(g,bP.cssClasses.connect)}function bH(g,e){bz=[],bq=[],bq.push(bJ(e,g[0]));for(var k=0;k<bP.handles;k++){bz.push(bK(e,k)),bI[k]=k,bq.push(bJ(e,g[k+1]))}}function bG(e){aS(e,bP.cssClasses.target),0===bP.dir?aS(e,bP.cssClasses.ltr):aS(e,bP.cssClasses.rtl),0===bP.ort?aS(e,bP.cssClasses.horizontal):aS(e,bP.cssClasses.vertical),c=bN(e,bP.cssClasses.base)}function bE(g,e){return !!bP.tooltips[e]&&bN(g.firstChild,bP.cssClasses.tooltip)}function bD(){var e=bz.map(bE);b("update",function(a,s,k){if(e[s]){var g=a[s];!0!==bP.tooltips[s]&&(g=bP.tooltips[s].to(k[s])),e[s].innerHTML=g}})}function bB(){b("update",function(g,e,t,s,k){bI.forEach(function(v){var u=bz[v],z=q(m,v,0,!0,!0,!0),y=q(m,v,100,!0,!0,!0),x=k[v],w=bP.ariaFormat.to(t[v]);u.children[0].setAttribute("aria-valuemin",z.toFixed(1)),u.children[0].setAttribute("aria-valuemax",y.toFixed(1)),u.children[0].setAttribute("aria-valuenow",x.toFixed(1)),u.children[0].setAttribute("aria-valuetext",w)})})}function bA(k,g,v){if("range"===k||"steps"===k){return p.xVal}if("count"===k){if(!g){throw new Error("noUiSlider ("+a4+"): 'values' required for mode 'count'.")}var u,t=100/(g-1),s=0;for(g=[];(u=s++*t)<=100;){g.push(u)}k="positions"}return"positions"===k?g.map(function(e){return p.fromStepping(v?p.getStep(e):e)}):"values"===k?v?g.map(function(e){return p.fromStepping(p.getStep(p.toStepping(e)))}):g:void 0}function bm(B,A,z){function y(g,e){return(g+e).toFixed(7)/1}var x={},w=p.xVal[0],v=p.xVal[p.xVal.length-1],u=!1,t=!1,s=0;return z=a0(z.slice().sort(function(g,e){return g-e})),z[0]!==w&&(z.unshift(w),u=!0),z[z.length-1]!==v&&(z.push(v),t=!0),z.forEach(function(I,H){var G,F,E,D,C,k,e,a,M,L,K=I,J=z[H+1];if("steps"===A&&(G=p.xNumSteps[H]),G||(G=J-K),!1!==K&&void 0!==J){for(G=Math.max(G,1e-7),F=K;F<=J;F=y(F,G)){for(D=p.toStepping(F),C=D-s,a=C/B,M=Math.round(a),L=C/M,E=1;E<=M;E+=1){k=s+E*L,x[k.toFixed(5)]=["x",0]}e=z.indexOf(F)>-1?1:"steps"===A?2:0,!H&&u&&(e=0),F===J&&t||(x[D.toFixed(5)]=[F,e]),s=D}}}),x}function bl(z,y,x){function w(A,g){var D=g===bP.cssClasses.value,C=D?k:e,B=D?t:s;return g+" "+C[bP.ort]+" "+B[A]}function v(g,B){B[1]=B[1]&&y?y(B[0],B[1]):B[1];var A=bN(u,!1);A.className=w(B[1],bP.cssClasses.marker),A.style[bP.style]=g+"%",B[1]&&(A=bN(u,!1),A.className=w(B[1],bP.cssClasses.value),A.style[bP.style]=g+"%",A.innerText=x.to(B[0]))}var u=Y.createElement("div"),t=[bP.cssClasses.valueNormal,bP.cssClasses.valueLarge,bP.cssClasses.valueSub],s=[bP.cssClasses.markerNormal,bP.cssClasses.markerLarge,bP.cssClasses.markerSub],k=[bP.cssClasses.valueHorizontal,bP.cssClasses.valueVertical],e=[bP.cssClasses.markerHorizontal,bP.cssClasses.markerVertical];return aS(u,bP.cssClasses.pips),aS(u,0===bP.ort?bP.cssClasses.pipsHorizontal:bP.cssClasses.pipsVertical),Object.keys(z).forEach(function(a){v(a,z[a])}),u}function bk(){bC&&(a2(bC),bC=null)}function bj(z){bk();var y=z.mode,x=z.density||1,w=z.filter||!1,v=z.values||!1,u=z.stepped||!1,t=bA(y,v,u),s=bm(x,y,t),k=z.format||{to:Math.round};return bC=bs.appendChild(bl(s,w,k))}function bi(){var g=c.getBoundingClientRect(),e="offset"+["Width","Height"][bP.ort];return 0===bP.ort?g.width||c[e]:g.height||c[e]}function bh(k,e,v,u){var t=function(a){return !bs.hasAttribute("disabled")&&(!aQ(bs,bP.cssClasses.tap)&&(!!(a=bg(a,u.pageOffset,u.target||e))&&(!(k===br.start&&void 0!==a.buttons&&a.buttons>1)&&((!u.hover||!a.buttons)&&(bF||a.preventDefault(),a.calcPoint=a.points[bP.ort],void v(a,u))))))},s=[];return k.split(" ").forEach(function(g){e.addEventListener(g,t,!!bF&&{passive:!0}),s.push([g,t])}),s}function bg(B,A,z){var y,x,w=0===B.type.indexOf("touch"),v=0===B.type.indexOf("mouse"),u=0===B.type.indexOf("pointer");if(0===B.type.indexOf("MSPointer")&&(u=!0),w&&bP.multitouch){var t=function(g){return g.target===z||z.contains(g.target)};if("touchstart"===B.type){var s=Array.prototype.filter.call(B.touches,t);if(s.length>1){return !1}y=s[0].pageX,x=s[0].pageY}else{var e=Array.prototype.find.call(B.changedTouches,t);if(!e){return !1}y=e.pageX,x=e.pageY}}else{if(w){if(B.touches.length>1){return !1}y=B.changedTouches[0].pageX,x=B.changedTouches[0].pageY}}return A=A||aP(Y),(v||u)&&(y=B.clientX+A.x,x=B.clientY+A.y),B.pageOffset=A,B.points=[y,x],B.cursor=v||u,B}function bf(g){var e=g-aY(c,bP.ort),k=100*e/bi();return bP.dir?100-k:k}function be(g){var e=100,k=!1;return bz.forEach(function(t,s){if(!t.hasAttribute("disabled")){var a=Math.abs(m[s]-g);a<e&&(k=s,e=a)}}),k}function bd(s,k,y,x){var w=y.slice(),v=[!s,s],u=[s,!s];x=x.slice(),s&&x.reverse(),x.length>1?x.forEach(function(e,z){var g=q(w,e,w[e]+k,v[z],u[z],!1);!1===g?k=0:(k=g-w[e],w[e]=g)}):v=u=[!0];var t=!1;x.forEach(function(e,g){t=j(e,y[e]+k,v[g],u[g])||t}),t&&x.forEach(function(e){bc("update",e),bc("slide",e)})}function bc(g,e,k){Object.keys(bu).forEach(function(s){var a=s.split(".")[0];g===a&&bu[s].forEach(function(t){t.call(f,bL.map(bP.format.to),e,bL.slice(),k||!1,m.slice())})})}function bb(g,e){"mouseout"===g.type&&"HTML"===g.target.nodeName&&null===g.relatedTarget&&a8(g,e)}function a9(g,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===g.buttons&&0!==e.buttonsProperty){return a8(g,e)}var k=(bP.dir?-1:1)*(g.calcPoint-e.startCalcPoint);bd(k>0,100*k/e.baseSize,e.locations,e.handleNumbers)}function a8(g,e){e.handle&&(aR(e.handle,bP.cssClasses.active),bt-=1),e.listeners.forEach(function(k){bM.removeEventListener(k[0],k[1])}),0===bt&&(aR(bs,bP.cssClasses.drag),l(),g.cursor&&(bv.style.cursor="",bv.removeEventListener("selectstart",a1))),e.handleNumbers.forEach(function(k){bc("change",k),bc("set",k),bc("end",k)})}function a7(k,e){var x;if(1===e.handleNumbers.length){var w=bz[e.handleNumbers[0]];if(w.hasAttribute("disabled")){return !1}x=w.children[0],bt+=1,aS(x,bP.cssClasses.active)}k.stopPropagation();var v=[],u=bh(br.move,bM,a9,{target:k.target,handle:x,listeners:v,startCalcPoint:k.calcPoint,baseSize:bi(),pageOffset:k.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:k.buttons,locations:m.slice()}),t=bh(br.end,bM,a8,{target:k.target,handle:x,listeners:v,handleNumbers:e.handleNumbers}),s=bh("mouseout",bM,bb,{target:k.target,handle:x,listeners:v,handleNumbers:e.handleNumbers});v.push.apply(v,u.concat(t,s)),k.cursor&&(bv.style.cursor=getComputedStyle(k.target).cursor,bz.length>1&&aS(bs,bP.cssClasses.drag),bv.addEventListener("selectstart",a1,!1)),e.handleNumbers.forEach(function(g){bc("start",g)})}function a6(g){g.stopPropagation();var e=bf(g.calcPoint),k=be(e);if(!1===k){return !1}bP.events.snap||aW(bs,bP.cssClasses.tap,bP.animationDuration),j(k,e,!0,!0),l(),bc("slide",k,!0),bc("update",k,!0),bc("change",k,!0),bc("set",k,!0),bP.events.snap&&a7(g,{handleNumbers:[k]})}function a5(g){var e=bf(g.calcPoint),s=p.getStep(e),k=p.fromStepping(s);Object.keys(bu).forEach(function(t){"hover"===t.split(".")[0]&&bu[t].forEach(function(u){u.call(f,k)})})}function r(e){e.fixed||bz.forEach(function(k,g){bh(br.start,k.children[0],a7,{handleNumbers:[g]})}),e.tap&&bh(br.start,c,a6,{}),e.hover&&bh(br.move,c,a5,{hover:!0}),e.drag&&bq.forEach(function(a,u){if(!1!==a&&0!==u&&u!==bq.length-1){var t=bz[u-1],s=bz[u],k=[a];aS(a,bP.cssClasses.draggable),e.fixed&&(k.push(t.children[0]),k.push(s.children[0])),k.forEach(function(g){bh(br.start,g,a7,{handles:[t,s],handleNumbers:[u-1,u]})})}})}function q(k,e,v,u,t,s){return bz.length>1&&(u&&e>0&&(v=Math.max(v,k[e-1]+bP.margin)),t&&e<bz.length-1&&(v=Math.min(v,k[e+1]-bP.margin))),bz.length>1&&bP.limit&&(u&&e>0&&(v=Math.min(v,k[e-1]+bP.limit)),t&&e<bz.length-1&&(v=Math.max(v,k[e+1]-bP.limit))),bP.padding&&(0===e&&(v=Math.max(v,bP.padding)),e===bz.length-1&&(v=Math.min(v,100-bP.padding))),v=p.getStep(v),!((v=aV(v))===k[e]&&!s)&&v}function o(e){return e+"%"}function n(g,e){m[g]=e,bL[g]=p.fromStepping(e);var k=function(){bz[g].style[bP.style]=o(e),h(g),h(g+1)};window.requestAnimationFrame&&bP.useRequestAnimationFrame?window.requestAnimationFrame(k):k()}function l(){bI.forEach(function(g){var e=m[g]>50?-1:1,k=3+(bz.length+e*g);bz[g].childNodes[0].style.zIndex=k})}function j(g,e,s,k){return !1!==(e=q(m,g,e,s,k,!1))&&(n(g,e),!0)}function h(g){if(bq[g]){var e=0,k=100;0!==g&&(e=m[g-1]),g!==bq.length-1&&(k=m[g]),bq[g].style[bP.style]=o(e),bq[g].style[bP.styleOposite]=o(100-k)}}function d(g,e){null!==g&&!1!==g&&("number"==typeof g&&(g=String(g)),!1===(g=bP.format.from(g))||isNaN(g)||j(e,p.toStepping(g),!1,!1))}function bw(g,e){var s=aU(g),k=void 0===m[0];e=void 0===e||!!e,s.forEach(d),bP.animate&&!k&&aW(bs,bP.cssClasses.tap,bP.animationDuration),bI.forEach(function(t){j(t,m[t],!0,!1)}),l(),bI.forEach(function(t){bc("update",t),null!==s[t]&&e&&bc("set",t)})}function bn(e){bw(bP.start,e)}function bR(){var e=bL.map(bP.format.to);return 1===e.length?e[0]:e}function bx(){for(var e in bP.cssClasses){bP.cssClasses.hasOwnProperty(e)&&aR(bs,bP.cssClasses[e])}for(;bs.firstChild;){bs.removeChild(bs.firstChild)}delete bs.noUiSlider}function bo(){return m.map(function(s,k){var x=p.getNearbySteps(s),w=bL[k],v=x.thisStep.step,u=null;!1!==v&&w+v>x.stepAfter.startValue&&(v=x.stepAfter.startValue-w),u=w>x.thisStep.startValue?x.thisStep.step:!1!==x.stepBefore.step&&w-x.stepBefore.highestStep,100===s?v=null:0===s&&(u=null);var t=p.countStepDecimals();return null!==v&&!1!==v&&(v=Number(v.toFixed(t))),null!==u&&!1!==u&&(u=Number(u.toFixed(t))),[u,v]})}function b(g,e){bu[g]=bu[g]||[],bu[g].push(e),"update"===g.split(".")[0]&&bz.forEach(function(s,k){bc("update",k)})}function by(g){var e=g&&g.split(".")[0],k=e&&g.substring(e.length);Object.keys(bu).forEach(function(s){var u=s.split(".")[0],t=s.substring(u.length);e&&e!==u||k&&k!==t||delete bu[s]})}function bp(g,e){var t=bR(),s=["margin","limit","padding","range","animate","snap","step","format"];s.forEach(function(a){void 0!==g[a]&&(bO[a]=g[a])});var k=ac(bO);s.forEach(function(a){void 0!==g[a]&&(bP[a]=k[a])}),p=k.spectrum,bP.margin=k.margin,bP.limit=k.limit,bP.padding=k.padding,bP.pips&&bj(bP.pips),m=[],bw(g.start||t,e)}var c,bz,bq,f,bC,br=aO(),i=aM(),bF=i&&aN(),bs=bQ,m=[],bI=[],bt=0,p=bP.spectrum,bL=[],bu={},Y=bQ.ownerDocument,bM=Y.documentElement,bv=Y.body;if(bs.noUiSlider){throw new Error("noUiSlider ("+a4+"): Slider was already initialized.")}return bG(bs),bH(bP.connect,c),f={destroy:bx,steps:bo,on:b,off:by,get:bR,set:bw,reset:bn,__moveHandles:function(g,e,k){bd(g,e,m,k)},options:bO,updateOptions:bp,target:bs,removePips:bk,pips:bj},r(bP.events),bw(bP.start),bP.pips&&bj(bP.pips),bP.tooltips&&bD(),bB(),f}function aD(f,e){if(!f||!f.nodeName){throw new Error("noUiSlider ("+a4+"): create requires a single element, got: "+f)}var h=ac(e,f),g=ab(f,h,e);return f.noUiSlider=g,g}var a4="10.1.0";az.prototype.getMargin=function(d){var c=this.xNumSteps[0];if(c&&d/c%1!=0){throw new Error("noUiSlider ("+a4+"): 'limit', 'margin' and 'padding' must be divisible by step.")}return 2===this.xPct.length&&aK(this.xVal,d)},az.prototype.toStepping=function(b){return b=aG(this.xVal,this.xPct,b)},az.prototype.fromStepping=function(b){return aF(this.xVal,this.xPct,b)},az.prototype.getStep=function(b){return b=aE(this.xPct,this.xSteps,this.snap,b)},az.prototype.getNearbySteps=function(d){var c=aH(d,this.xPct);return{stepBefore:{startValue:this.xVal[c-2],step:this.xNumSteps[c-2],highestStep:this.xHighestCompleteStep[c-2]},thisStep:{startValue:this.xVal[c-1],step:this.xNumSteps[c-1],highestStep:this.xHighestCompleteStep[c-1]},stepAfter:{startValue:this.xVal[c-0],step:this.xNumSteps[c-0],highestStep:this.xHighestCompleteStep[c-0]}}},az.prototype.countStepDecimals=function(){var b=this.xNumSteps.map(aT);return Math.max.apply(null,b)},az.prototype.convert=function(b){return this.getStep(this.toStepping(b))};var aC={to:function(b){return void 0!==b&&b.toFixed(2)},from:Number};return{version:a4,create:aD}});(function(a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports==="object"){module.exports=a()}else{window.wNumb=a()}}})(function(){var l=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function b(m){return m.split("").reverse().join("")}function g(m,n){return m.substring(0,n.length)===n}function c(m,n){return m.slice(-1*n.length)===n}function h(o,n,m){if((o[n]||o[m])&&o[n]===o[m]){throw new Error(n)}}function d(m){return typeof m==="number"&&isFinite(m)}function a(m,n){m=m.toString().split("e");m=Math.round(+(m[0]+"e"+(m[1]?+m[1]+n:n)));m=m.toString().split("e");return(+(m[0]+"e"+(m[1]?+m[1]-n:-n))).toFixed(n)}function f(D,v,t,z,m,B,p,s,A,w,C,u){var y=u,r,o,x,n="",q="";if(B){u=B(u)}if(!d(u)){return false}if(D!==false&&parseFloat(u.toFixed(D))===0){u=0}if(u<0){r=true;u=Math.abs(u)}if(D!==false){u=a(u,D)}u=u.toString();if(u.indexOf(".")!==-1){o=u.split(".");x=o[0];if(t){n=t+o[1]}}else{x=u}if(v){x=b(x).match(/.{1,3}/g);x=b(x.join(b(v)))}if(r&&s){q+=s}if(z){q+=z}if(r&&A){q+=A}q+=x;q+=n;if(m){q+=m}if(w){q=w(q,y)}return q}function i(n,z,q,t,A,u,o,r,p,y,x,w){var v=w,s,m="";if(x){w=x(w)}if(!w||typeof w!=="string"){return false}if(r&&g(w,r)){w=w.replace(r,"");s=true}if(t&&g(w,t)){w=w.replace(t,"")}if(p&&g(w,p)){w=w.replace(p,"");s=true}if(A&&c(w,A)){w=w.slice(0,-1*A.length)}if(z){w=w.split(z).join("")}if(q){w=w.replace(q,".")}if(s){m+="-"}m+=w;m=m.replace(/[^0-9\.\-.]/g,"");if(m===""){return false}m=Number(m);if(o){m=o(m)}if(!d(m)){return false}return m}function k(p){var o,n,q,m={};if(p.suffix===undefined){p.suffix=p.postfix}for(o=0;o<l.length;o+=1){n=l[o];q=p[n];if(q===undefined){if(n==="negative"&&!m.negativeBefore){m[n]="-"}else{if(n==="mark"&&m.thousand!=="."){m[n]="."}else{m[n]=false}}}else{if(n==="decimals"){if(q>=0&&q<8){m[n]=q}else{throw new Error(n)}}else{if(n==="encoder"||n==="decoder"||n==="edit"||n==="undo"){if(typeof q==="function"){m[n]=q}else{throw new Error(n)}}else{if(typeof q==="string"){m[n]=q}else{throw new Error(n)}}}}}h(m,"mark","thousand");h(m,"prefix","negative");h(m,"prefix","negativeBefore");return m}function e(o,q,m){var p,n=[];for(p=0;p<l.length;p+=1){n.push(o[l[p]])}n.push(m);return q.apply("",n)}function j(m){if(!(this instanceof j)){return new j(m)}if(typeof m!=="object"){return}m=k(m);this.to=function(n){return e(m,f,n)};this.from=function(n){return e(m,i,n)}}return j});(function(c,a){var d=c.History=c.History||{},b=c.jQuery;if(typeof d.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...")}d.Adapter={bind:function(g,f,h){b(g).bind(f,h)},trigger:function(g,f,h){b(g).trigger(f,h)},extractEventData:function(h,j,g){var f=j&&j.originalEvent&&j.originalEvent[h]||g&&g[h]||a;return f},onDomLoad:function(f){b(f)}},typeof d.init!="undefined"&&d.init()})(window),function(x,C){var k=x.console||C,b=x.document,q=x.navigator,D=!1,j=x.setTimeout,B=x.clearTimeout,A=x.setInterval,w=x.clearInterval,m=x.JSON,z=x.alert,v=x.History=x.History||{},g=x.history;try{D=x.sessionStorage,D.setItem("TEST","1"),D.removeItem("TEST")}catch(y){D=!1}m.stringify=m.stringify||m.encode,m.parse=m.parse||m.decode;if(typeof v.init!="undefined"){throw new Error("History.js Core has already been loaded...")}v.init=function(a){return typeof v.Adapter=="undefined"?!1:(typeof v.initCore!="undefined"&&v.initCore(),typeof v.initHtml4!="undefined"&&v.initHtml4(),!0)},v.initCore=function(e){if(typeof v.initCore.initialized!="undefined"){return !1}v.initCore.initialized=!0,v.options=v.options||{},v.options.hashChangeInterval=v.options.hashChangeInterval||100,v.options.safariPollInterval=v.options.safariPollInterval||500,v.options.doubleCheckInterval=v.options.doubleCheckInterval||500,v.options.disableSuid=v.options.disableSuid||!1,v.options.storeInterval=v.options.storeInterval||1000,v.options.busyDelay=v.options.busyDelay||250,v.options.debug=v.options.debug||!1,v.options.initialTitle=v.options.initialTitle||b.title,v.options.html4Mode=v.options.html4Mode||!1,v.options.delayInit=v.options.delayInit||!1,v.intervalList=[],v.clearAllIntervals=function(){var f,d=v.intervalList;if(typeof d!="undefined"&&d!==null){for(f=0;f<d.length;f++){w(d[f])}v.intervalList=null}},v.debug=function(){(v.options.debug||!1)&&v.log.apply(v,arguments)},v.log=function(){var E=typeof k!="undefined"&&typeof k.log!="undefined"&&typeof k.log.apply!="undefined",n=b.getElementById("log"),l,p,F,h,d;E?(h=Array.prototype.slice.call(arguments),l=h.shift(),typeof k.debug!="undefined"?k.debug.apply(k,[l,h]):k.log.apply(k,[l,h])):l="\n"+arguments[0]+"\n";for(p=1,F=arguments.length;p<F;++p){d=arguments[p];if(typeof d=="object"&&typeof m!="undefined"){try{d=m.stringify(d)}catch(r){}}l+="\n"+d+"\n"}return n?(n.value+=l+"\n-----\n",n.scrollTop=n.scrollHeight-n.clientHeight):E||z(l),!0},v.getInternetExplorerMajorVersion=function(){var d=v.getInternetExplorerMajorVersion.cached=typeof v.getInternetExplorerMajorVersion.cached!="undefined"?v.getInternetExplorerMajorVersion.cached:function(){var h=3,f=b.createElement("div"),i=f.getElementsByTagName("i");while((f.innerHTML="<!--[if gt IE "+ ++h+"]><i></i><![endif]-->")&&i[0]){}return h>4?h:!1}();return d},v.isInternetExplorer=function(){var d=v.isInternetExplorer.cached=typeof v.isInternetExplorer.cached!="undefined"?v.isInternetExplorer.cached:Boolean(v.getInternetExplorerMajorVersion());return d},v.options.html4Mode?v.emulated={pushState:!0,hashChange:!0}:v.emulated={pushState:!Boolean(x.history&&x.history.pushState&&x.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(q.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(q.userAgent)),hashChange:Boolean(!("onhashchange" in x||"onhashchange" in b)||v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<8)},v.enabled=!v.emulated.pushState,v.bugs={setHash:Boolean(!v.emulated.pushState&&q.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(q.userAgent)),safariPoll:Boolean(!v.emulated.pushState&&q.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(q.userAgent)),ieDoubleCheck:Boolean(v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<7)},v.isEmptyObject=function(f){for(var d in f){if(f.hasOwnProperty(d)){return !1}}return !0},v.cloneObject=function(f){var d,h;return f?(d=m.stringify(f),h=m.parse(d)):h={},h},v.getRootUrl=function(){var d=b.location.protocol+"//"+(b.location.hostname||b.location.host);if(b.location.port||!1){d+=":"+b.location.port}return d+="/",d},v.getBaseHref=function(){var f=b.getElementsByTagName("base"),d=null,h="";return f.length===1&&(d=f[0],h=d.href.replace(/[^\/]+$/,"")),h=h.replace(/\/+$/,""),h&&(h+="/"),h},v.getBaseUrl=function(){var d=v.getBaseHref()||v.getBasePageUrl()||v.getRootUrl();return d},v.getPageUrl=function(){var f=v.getState(!1,!1),d=(f||{}).url||v.getLocationHref(),h;return h=d.replace(/\/+$/,"").replace(/[^\/]+$/,function(l,i,o){return/\./.test(l)?l:l+"/"}),h},v.getBasePageUrl=function(){var d=v.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(h,f,i){return/[^\/]$/.test(h)?"":h}).replace(/\/+$/,"")+"/";return d},v.getFullUrl=function(h,d){var i=h,f=h.substring(0,1);return d=typeof d=="undefined"?!0:d,/[a-z]+\:\/\//.test(h)||(f==="/"?i=v.getRootUrl()+h.replace(/^\/+/,""):f==="#"?i=v.getPageUrl().replace(/#.*/,"")+h:f==="?"?i=v.getPageUrl().replace(/[\?#].*/,"")+h:d?i=v.getBaseUrl()+h.replace(/^(\.\/)+/,""):i=v.getBasePageUrl()+h.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},v.getShortUrl=function(h){var d=h,i=v.getBaseUrl(),f=v.getRootUrl();return v.emulated.pushState&&(d=d.replace(i,"")),d=d.replace(f,"/"),v.isTraditionalAnchor(d)&&(d="./"+d),d=d.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),d},v.getLocationHref=function(d){return d=d||b,d.URL===d.location.href?d.location.href:d.location.href===decodeURIComponent(d.URL)?d.URL:d.location.hash&&decodeURIComponent(d.location.href.replace(/^[^#]+/,""))===d.location.hash?d.location.href:d.URL.indexOf("#")==-1&&d.location.href.indexOf("#")!=-1?d.location.href:d.URL||d.location.href},v.store={},v.idToState=v.idToState||{},v.stateToId=v.stateToId||{},v.urlToId=v.urlToId||{},v.storedStates=v.storedStates||[],v.savedStates=v.savedStates||[],v.normalizeStore=function(){v.store.idToState=v.store.idToState||{},v.store.urlToId=v.store.urlToId||{},v.store.stateToId=v.store.stateToId||{}},v.getState=function(f,d){typeof f=="undefined"&&(f=!0),typeof d=="undefined"&&(d=!0);var h=v.getLastSavedState();return !h&&d&&(h=v.createStateObject()),f&&(h=v.cloneObject(h),h.url=h.cleanUrl||h.url),h},v.getIdByState=function(f){var d=v.extractId(f.url),h;if(!d){h=v.getStateString(f);if(typeof v.stateToId[h]!="undefined"){d=v.stateToId[h]}else{if(typeof v.store.stateToId[h]!="undefined"){d=v.store.stateToId[h]}else{for(;;){d=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof v.idToState[d]=="undefined"&&typeof v.store.idToState[d]=="undefined"){break}}v.stateToId[h]=d,v.idToState[d]=f}}}return d},v.normalizeState=function(f){var d,h;if(!f||typeof f!="object"){f={}}if(typeof f.normalized!="undefined"){return f}if(!f.data||typeof f.data!="object"){f.data={}}return d={},d.normalized=!0,d.title=f.title||"",d.url=v.getFullUrl(f.url?f.url:v.getLocationHref()),d.hash=v.getShortUrl(d.url),d.data=v.cloneObject(f.data),d.id=v.getIdByState(d),d.cleanUrl=d.url.replace(/\??\&_suid.*/,""),d.url=d.cleanUrl,h=!v.isEmptyObject(d.data),(d.title||h)&&v.options.disableSuid!==!0&&(d.hash=v.getShortUrl(d.url).replace(/\??\&_suid.*/,""),/\?/.test(d.hash)||(d.hash+="?"),d.hash+="&_suid="+d.id),d.hashedUrl=v.getFullUrl(d.hash),(v.emulated.pushState||v.bugs.safariPoll)&&v.hasUrlDuplicate(d)&&(d.url=d.hashedUrl),d},v.createStateObject=function(h,d,i){var f={data:h,title:d,url:i};return f=v.normalizeState(f),f},v.getStateById=function(d){d=String(d);var f=v.idToState[d]||v.store.idToState[d]||C;return f},v.getStateString=function(h){var d,i,f;return d=v.normalizeState(h),i={data:d.data,title:h.title,url:h.url},f=m.stringify(i),f},v.getStateId=function(f){var d,h;return d=v.normalizeState(f),h=d.id,h},v.getHashByState=function(f){var d,h;return d=v.normalizeState(f),h=d.hash,h},v.extractId=function(l){var f,o,h,d;return l.indexOf("#")!=-1?d=l.split("#")[0]:d=l,o=/(.*)\&_suid=([0-9]+)$/.exec(d),h=o?o[1]||l:l,f=o?String(o[2]||""):"",f||!1},v.isTraditionalAnchor=function(f){var d=!/[\/\?\.]/.test(f);return d},v.extractState=function(l,f){var o=null,h,d;return f=f||!1,h=v.extractId(l),h&&(o=v.getStateById(h)),o||(d=v.getFullUrl(l),h=v.getIdByUrl(d)||!1,h&&(o=v.getStateById(h)),!o&&f&&!v.isTraditionalAnchor(l)&&(o=v.createStateObject(null,null,d))),o},v.getIdByUrl=function(d){var f=v.urlToId[d]||v.store.urlToId[d]||C;return f},v.getLastSavedState=function(){return v.savedStates[v.savedStates.length-1]||C},v.getLastStoredState=function(){return v.storedStates[v.storedStates.length-1]||C},v.hasUrlDuplicate=function(f){var d=!1,h;return h=v.extractState(f.url),d=h&&h.id!==f.id,d},v.storeState=function(d){return v.urlToId[d.url]=d.id,v.storedStates.push(v.cloneObject(d)),d},v.isLastSavedState=function(l){var f=!1,o,h,d;return v.savedStates.length&&(o=l.id,h=v.getLastSavedState(),d=h.id,f=o===d),f},v.saveState=function(d){return v.isLastSavedState(d)?!1:(v.savedStates.push(v.cloneObject(d)),!0)},v.getStateByIndex=function(f){var d=null;return typeof f=="undefined"?d=v.savedStates[v.savedStates.length-1]:f<0?d=v.savedStates[v.savedStates.length+f]:d=v.savedStates[f],d},v.getCurrentIndex=function(){var d=null;return v.savedStates.length<1?d=0:d=v.savedStates.length-1,d},v.getHash=function(f){var d=v.getLocationHref(f),h;return h=v.getHashByUrl(d),h},v.unescapeHash=function(f){var d=v.normalizeHash(f);return d=decodeURIComponent(d),d},v.normalizeHash=function(f){var d=f.replace(/[^#]*#/,"").replace(/#.*/,"");return d},v.setHash=function(h,f){var l,d;return f!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.setHash,args:arguments,queue:f}),!1):(v.busy(!0),l=v.extractState(h,!0),l&&!v.emulated.pushState?v.pushState(l.data,l.title,l.url,!1):v.getHash()!==h&&(v.bugs.setHash?(d=v.getPageUrl(),v.pushState(null,null,d+"#"+h,!1)):b.location.hash=h),v)},v.escapeHash=function(d){var f=v.normalizeHash(d);return f=x.encodeURIComponent(f),v.bugs.hashEscape||(f=f.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),f},v.getHashByUrl=function(f){var d=String(f).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return d=v.unescapeHash(d),d},v.setTitle=function(h){var f=h.title,l;f||(l=v.getStateByIndex(0),l&&l.url===h.url&&(f=l.title||v.options.initialTitle));try{b.getElementsByTagName("title")[0].innerHTML=f.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(d){}return b.title=f,v},v.queues=[],v.busy=function(f){typeof f!="undefined"?v.busy.flag=f:typeof v.busy.flag=="undefined"&&(v.busy.flag=!1);if(!v.busy.flag){B(v.busy.timeout);var d=function(){var i,l,h;if(v.busy.flag){return}for(i=v.queues.length-1;i>=0;--i){l=v.queues[i];if(l.length===0){continue}h=l.shift(),v.fireQueueItem(h),v.busy.timeout=j(d,v.options.busyDelay)}};v.busy.timeout=j(d,v.options.busyDelay)}return v.busy.flag},v.busy.flag=!1,v.fireQueueItem=function(d){return d.callback.apply(d.scope||v,d.args||[])},v.pushQueue=function(d){return v.queues[d.queue||0]=v.queues[d.queue||0]||[],v.queues[d.queue||0].push(d),v},v.queue=function(f,d){return typeof f=="function"&&(f={callback:f}),typeof d!="undefined"&&(f.queue=d),v.busy()?v.pushQueue(f):v.fireQueueItem(f),v},v.clearQueue=function(){return v.busy.flag=!1,v.queues=[],v},v.stateChanged=!1,v.doubleChecker=!1,v.doubleCheckComplete=function(){return v.stateChanged=!0,v.doubleCheckClear(),v},v.doubleCheckClear=function(){return v.doubleChecker&&(B(v.doubleChecker),v.doubleChecker=!1),v},v.doubleCheck=function(d){return v.stateChanged=!1,v.doubleCheckClear(),v.bugs.ieDoubleCheck&&(v.doubleChecker=j(function(){return v.doubleCheckClear(),v.stateChanged||d(),!0},v.options.doubleCheckInterval)),v},v.safariStatePoll=function(){var d=v.extractState(v.getLocationHref()),f;if(!v.isLastSavedState(d)){return f=d,f||(f=v.createStateObject()),v.Adapter.trigger(x,"popstate"),v}return},v.back=function(d){return d!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.back,args:arguments,queue:d}),!1):(v.busy(!0),v.doubleCheck(function(){v.back(!1)}),g.go(-1),!0)},v.forward=function(d){return d!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.forward,args:arguments,queue:d}),!1):(v.busy(!0),v.doubleCheck(function(){v.forward(!1)}),g.go(1),!0)},v.go=function(f,d){var h;if(f>0){for(h=1;h<=f;++h){v.forward(d)}}else{if(!(f<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.")}for(h=-1;h>=f;--h){v.back(d)}}return v};if(v.emulated.pushState){var c=function(){};v.pushState=v.pushState||c,v.replaceState=v.replaceState||c}else{v.onPopState=function(f,u){var l=!1,d=!1,h,p;return v.doubleCheckComplete(),h=v.getHash(),h?(p=v.extractState(h||v.getLocationHref(),!0),p?v.replaceState(p.data,p.title,p.url,!1):(v.Adapter.trigger(x,"anchorchange"),v.busy(!1)),v.expectedStateId=!1,!1):(l=v.Adapter.extractEventData("state",f,u)||!1,l?d=v.getStateById(l):v.expectedStateId?d=v.getStateById(v.expectedStateId):d=v.extractState(v.getLocationHref()),d||(d=v.createStateObject(null,null,v.getLocationHref())),v.expectedStateId=!1,v.isLastSavedState(d)?(v.busy(!1),!1):(v.storeState(d),v.saveState(d),v.setTitle(d),v.Adapter.trigger(x,"statechange"),v.busy(!1),!0))},v.Adapter.bind(x,"popstate",v.onPopState),v.pushState=function(f,o,l,d){if(v.getHashByUrl(l)&&v.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(d!==!1&&v.busy()){return v.pushQueue({scope:v,callback:v.pushState,args:arguments,queue:d}),!1}v.busy(!0);var h=v.createStateObject(f,o,l);return v.isLastSavedState(h)?v.busy(!1):(v.storeState(h),v.expectedStateId=h.id,g.pushState(h.id,h.title,h.url),v.Adapter.trigger(x,"popstate")),!0},v.replaceState=function(f,o,l,d){if(v.getHashByUrl(l)&&v.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(d!==!1&&v.busy()){return v.pushQueue({scope:v,callback:v.replaceState,args:arguments,queue:d}),!1}v.busy(!0);var h=v.createStateObject(f,o,l);return v.isLastSavedState(h)?v.busy(!1):(v.storeState(h),v.expectedStateId=h.id,g.replaceState(h.id,h.title,h.url),v.Adapter.trigger(x,"popstate")),!0}}if(D){try{v.store=m.parse(D.getItem("History.store"))||{}}catch(a){v.store={}}v.normalizeStore()}else{v.store={},v.normalizeStore()}v.Adapter.bind(x,"unload",v.clearAllIntervals),v.saveState(v.storeState(v.extractState(v.getLocationHref(),!0))),D&&(v.onUnload=function(){var l,f,o;try{l=m.parse(D.getItem("History.store"))||{}}catch(h){l={}}l.idToState=l.idToState||{},l.urlToId=l.urlToId||{},l.stateToId=l.stateToId||{};for(f in v.idToState){if(!v.idToState.hasOwnProperty(f)){continue}l.idToState[f]=v.idToState[f]}for(f in v.urlToId){if(!v.urlToId.hasOwnProperty(f)){continue}l.urlToId[f]=v.urlToId[f]}for(f in v.stateToId){if(!v.stateToId.hasOwnProperty(f)){continue}l.stateToId[f]=v.stateToId[f]}v.store=l,v.normalizeStore(),o=m.stringify(l);try{D.setItem("History.store",o)}catch(d){if(d.code!==DOMException.QUOTA_EXCEEDED_ERR){throw d}D.length&&(D.removeItem("History.store"),D.setItem("History.store",o))}},v.intervalList.push(A(v.onUnload,v.options.storeInterval)),v.Adapter.bind(x,"beforeunload",v.onUnload),v.Adapter.bind(x,"unload",v.onUnload));if(!v.emulated.pushState){v.bugs.safariPoll&&v.intervalList.push(A(v.safariStatePoll,v.options.safariPollInterval));if(q.vendor==="Apple Computer, Inc."||(q.appCodeName||"")==="Mozilla"){v.Adapter.bind(x,"hashchange",function(){v.Adapter.trigger(x,"popstate")}),v.getHash()&&v.Adapter.onDomLoad(function(){v.Adapter.trigger(x,"hashchange")})}}},(!v.options||!v.options.delayInit)&&v.init()}(window);"use strict";jQuery.base64=(function(f){var d="=",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="1.0";function g(l,k){var j=b.indexOf(l.charAt(k));if(j===-1){throw"Cannot decode base64"}return j}function a(m){var o=0,l,n,k=m.length,j=[];m=String(m);if(k===0){return m}if(k%4!==0){throw"Cannot decode base64"}if(m.charAt(k-1)===d){o=1;if(m.charAt(k-2)===d){o=2}k-=4}for(l=0;l<k;l+=4){n=(g(m,l)<<18)|(g(m,l+1)<<12)|(g(m,l+2)<<6)|g(m,l+3);j.push(String.fromCharCode(n>>16,(n>>8)&255,n&255))}switch(o){case 1:n=(g(m,l)<<18)|(g(m,l+1)<<12)|(g(m,l+2)<<6);j.push(String.fromCharCode(n>>16,(n>>8)&255));break;case 2:n=(g(m,l)<<18)|(g(m,l+1)<<12);j.push(String.fromCharCode(n>>16));break}return j.join("")}function e(l,k){var j=l.charCodeAt(k);if(j>255){throw"INVALID_CHARACTER_ERR: DOM Exception 5"}return j}function h(m){if(arguments.length!==1){throw"SyntaxError: exactly one argument required"}m=String(m);var l,n,j=[],k=m.length-m.length%3;if(m.length===0){return m}for(l=0;l<k;l+=3){n=(e(m,l)<<16)|(e(m,l+1)<<8)|e(m,l+2);j.push(b.charAt(n>>18));j.push(b.charAt((n>>12)&63));j.push(b.charAt((n>>6)&63));j.push(b.charAt(n&63))}switch(m.length-k){case 1:n=e(m,l)<<16;j.push(b.charAt(n>>18)+b.charAt((n>>12)&63)+d+d);break;case 2:n=(e(m,l)<<16)|(e(m,l+1)<<8);j.push(b.charAt(n>>18)+b.charAt((n>>12)&63)+b.charAt((n>>6)&63)+d);break}return j.join("")}return{decode:a,encode:h,VERSION:c}}(jQuery));(function(a,b){if(typeof define==="function"&&define.amd){define(["moment","jquery","exports"],function(h,g,f){a.daterangepicker=b(a,f,h,g)})}else{if(typeof exports!=="undefined"){var d=require("moment");var e;try{e=require("jquery")}catch(c){e=window.jQuery;if(!e){throw new Error("jQuery dependency not found")}}b(a,exports,d,e)}else{a.daterangepicker=b(a,{},a.moment,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(b,c,e,d){var a=function(i,h,f){this.parentEl="body";this.element=d(i);this.isShowing=false;var g='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>';if(typeof h!=="object"||h===null){h={}}this.parentEl=(typeof h==="object"&&h.parentEl&&d(h.parentEl).length)?d(h.parentEl):d(this.parentEl);this.container=d(g).appendTo(this.parentEl);this.setOptions(h,f);var j=this.container;d.each(this.buttonClasses,function(k,l){j.find("button").addClass(l)});this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel);this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel);if(this.applyClass.length){this.container.find(".applyBtn").addClass(this.applyClass)}if(this.cancelClass.length){this.container.find(".cancelBtn").addClass(this.cancelClass)}this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",".prev",d.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",d.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",d.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",d.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",d.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",d.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",d.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",d.proxy(this.updateTime,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",d.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",d.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",d.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",d.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",d.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",d.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",d.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",d.proxy(this.updateFormInputs,this));if(this.element.is("input")){this.element.on({"click.daterangepicker":d.proxy(this.show,this),"focus.daterangepicker":d.proxy(this.show,this),"keyup.daterangepicker":d.proxy(this.updateFromControl,this)})}else{this.element.on("click.daterangepicker",d.proxy(this.toggle,this))}};a.prototype={constructor:a,setOptions:function(p,o){this.startDate=e().startOf("day");this.endDate=e().endOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.singleDatePicker=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right")){this.opens="left"}this.buttonClasses=["btn","btn-small btn-sm"];this.applyClass="btn-success";this.cancelClass="btn-default";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:e.weekdaysMin(),monthNames:e.monthsShort(),firstDay:e.localeData()._week.dow};this.cb=function(){};if(typeof p.format==="string"){this.format=p.format}if(typeof p.separator==="string"){this.separator=p.separator}if(typeof p.startDate==="string"){this.startDate=e(p.startDate,this.format)}if(typeof p.endDate==="string"){this.endDate=e(p.endDate,this.format)}if(typeof p.minDate==="string"){this.minDate=e(p.minDate,this.format)}if(typeof p.maxDate==="string"){this.maxDate=e(p.maxDate,this.format)}if(typeof p.startDate==="object"){this.startDate=e(p.startDate)}if(typeof p.endDate==="object"){this.endDate=e(p.endDate)}if(typeof p.minDate==="object"){this.minDate=e(p.minDate)}if(typeof p.maxDate==="object"){this.maxDate=e(p.maxDate)}if(typeof p.applyClass==="string"){this.applyClass=p.applyClass}if(typeof p.cancelClass==="string"){this.cancelClass=p.cancelClass}if(typeof p.dateLimit==="object"){this.dateLimit=p.dateLimit}if(typeof p.locale==="object"){if(typeof p.locale.daysOfWeek==="object"){this.locale.daysOfWeek=p.locale.daysOfWeek.slice()}if(typeof p.locale.monthNames==="object"){this.locale.monthNames=p.locale.monthNames.slice()}if(typeof p.locale.firstDay==="number"){this.locale.firstDay=p.locale.firstDay}if(typeof p.locale.applyLabel==="string"){this.locale.applyLabel=p.locale.applyLabel}if(typeof p.locale.cancelLabel==="string"){this.locale.cancelLabel=p.locale.cancelLabel}if(typeof p.locale.fromLabel==="string"){this.locale.fromLabel=p.locale.fromLabel}if(typeof p.locale.toLabel==="string"){this.locale.toLabel=p.locale.toLabel}if(typeof p.locale.weekLabel==="string"){this.locale.weekLabel=p.locale.weekLabel}if(typeof p.locale.customRangeLabel==="string"){this.locale.customRangeLabel=p.locale.customRangeLabel}}if(typeof p.opens==="string"){this.opens=p.opens}if(typeof p.showWeekNumbers==="boolean"){this.showWeekNumbers=p.showWeekNumbers}if(typeof p.buttonClasses==="string"){this.buttonClasses=[p.buttonClasses]}if(typeof p.buttonClasses==="object"){this.buttonClasses=p.buttonClasses}if(typeof p.showDropdowns==="boolean"){this.showDropdowns=p.showDropdowns}if(typeof p.singleDatePicker==="boolean"){this.singleDatePicker=p.singleDatePicker;if(this.singleDatePicker){this.endDate=this.startDate.clone()}}if(typeof p.timePicker==="boolean"){this.timePicker=p.timePicker}if(typeof p.timePickerIncrement==="number"){this.timePickerIncrement=p.timePickerIncrement}if(typeof p.timePicker12Hour==="boolean"){this.timePicker12Hour=p.timePicker12Hour}if(this.locale.firstDay!=0){var j=this.locale.firstDay;while(j>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());j--}}var f,i,k;if(typeof p.startDate==="undefined"&&typeof p.endDate==="undefined"){if(d(this.element).is("input[type=text]")){var g=d(this.element).val();var m=g.split(this.separator);f=i=null;if(m.length==2){f=e(m[0],this.format);i=e(m[1],this.format)}else{if(this.singleDatePicker){f=e(g,this.format);i=e(g,this.format)}}if(f!==null&&i!==null){this.startDate=f;this.endDate=i}}}if(typeof p.ranges==="object"){for(k in p.ranges){f=e(p.ranges[k][0]);i=e(p.ranges[k][1]);if(this.minDate&&f.isBefore(this.minDate)){f=e(this.minDate)}if(this.maxDate&&i.isAfter(this.maxDate)){i=e(this.maxDate)}if((this.minDate&&i.isBefore(this.minDate))||(this.maxDate&&f.isAfter(this.maxDate))){continue}this.ranges[k]=[f,i]}var l="<ul>";for(k in this.ranges){l+="<li>"+k+"</li>"}l+="<li>"+this.locale.customRangeLabel+"</li>";l+="</ul>";this.container.find(".ranges ul").remove();this.container.find(".ranges").prepend(l)}if(typeof o==="function"){this.cb=o}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.endOf("day")}if(this.singleDatePicker){this.opens="right";this.container.addClass("single");this.container.find(".calendar.right").show();this.container.find(".calendar.left").hide();if(!this.timePicker){this.container.find(".ranges").hide()}else{this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide()}if(!this.container.find(".calendar.right").hasClass("single")){this.container.find(".calendar.right").addClass("single")}}else{this.container.removeClass("single");this.container.find(".calendar.right").removeClass("single");this.container.find(".ranges").show()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.oldChosenLabel=this.chosenLabel;this.leftCalendar={month:e([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]};this.rightCalendar={month:e([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};if(this.opens=="right"){var h=this.container.find(".calendar.left");var n=this.container.find(".calendar.right");if(n.hasClass("single")){n.removeClass("single");h.addClass("single")}h.removeClass("left").addClass("right");n.removeClass("right").addClass("left");if(this.singleDatePicker){h.show();n.hide()}}if(typeof p.ranges==="undefined"&&!this.singleDatePicker){this.container.addClass("show-calendar")}this.container.addClass("opens"+this.opens);this.updateView();this.updateCalendars()},setStartDate:function(f){if(typeof f==="string"){this.startDate=e(f,this.format)}if(typeof f==="object"){this.startDate=e(f)}if(!this.timePicker){this.startDate=this.startDate.startOf("day")}this.oldStartDate=this.startDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},setEndDate:function(f){if(typeof f==="string"){this.endDate=e(f,this.format)}if(typeof f==="object"){this.endDate=e(f)}if(!this.timePicker){this.endDate=this.endDate.endOf("day")}this.oldEndDate=this.endDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}if(!this.element.val().length){return}var g=this.element.val().split(this.separator),h=null,f=null;if(g.length===2){h=e(g[0],this.format);f=e(g[1],this.format)}if(this.singleDatePicker||h===null||f===null){h=e(this.element.val(),this.format);f=h}if(f.isBefore(h)){return}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.startDate=h;this.endDate=f;if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.updateCalendars()},notify:function(){this.updateView();this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var f={top:0,left:0};var g=d(window).width();if(!this.parentEl.is("body")){f={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};g=this.parentEl[0].clientWidth+this.parentEl.offset().left}if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight()-f.top,right:g-this.element.offset().left-this.element.outerWidth(),left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-f.top,left:this.element.offset().left-f.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>d(window).width()){this.container.css({left:"auto",right:0})}}},toggle:function(f){if(this.element.hasClass("active")){this.hide()}else{this.show()}},show:function(f){if(this.isShowing){return}this.element.addClass("active");this.container.show();this.move();this._outsideClickProxy=d.proxy(function(g){this.outsideClick(g)},this);d(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);this.isShowing=true;this.element.trigger("show.daterangepicker",this)},outsideClick:function(g){var f=d(g.target);if(f.closest(this.element).length||f.closest(this.container).length||f.closest(".calendar-date").length){return}this.hide()},hide:function(f){if(!this.isShowing){return}d(document).off("mousedown.daterangepicker").off("click.daterangepicker","[data-toggle=dropdown]").off("focusin.daterangepicker");this.element.removeClass("active");this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.isShowing=false;this.element.trigger("hide.daterangepicker",this)},enterRange:function(h){var f=h.target.innerHTML;if(f==this.locale.customRangeLabel){this.updateView()}else{var g=this.ranges[f];this.container.find("input[name=daterangepicker_start]").val(g[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(g[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(j){var h=d(j.target);var g=e(h.val(),this.format);if(!g.isValid()){return}var f,i;if(h.attr("name")==="daterangepicker_start"){f=g;i=this.endDate}else{f=this.startDate;i=g}this.setCustomDates(f,i)},inputsKeydown:function(f){if(f.keyCode===13){this.inputsChanged(f);this.notify()}},updateInputText:function(){if(this.element.is("input")&&!this.singleDatePicker){this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))}else{if(this.element.is("input")){this.element.val(this.endDate.format(this.format))}}},clickRange:function(h){var f=h.target.innerHTML;this.chosenLabel=f;if(f==this.locale.customRangeLabel){this.showCalendars()}else{var g=this.ranges[f];this.startDate=g[0];this.endDate=g[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.endOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText();this.hideCalendars();this.hide();this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(g){var f=d(g.target).parents(".calendar");if(f.hasClass("left")){this.leftCalendar.month.subtract(1,"month")}else{this.rightCalendar.month.subtract(1,"month")}this.updateCalendars()},clickNext:function(g){var f=d(g.target).parents(".calendar");if(f.hasClass("left")){this.leftCalendar.month.add(1,"month")}else{this.rightCalendar.month.add(1,"month")}this.updateCalendars()},hoverDate:function(h){var j=d(h.target).attr("data-title");var i=j.substr(1,1);var f=j.substr(3,1);var g=d(h.target).parents(".calendar");if(g.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[i][f].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[i][f].format(this.format))}},setCustomDates:function(f,g){this.chosenLabel=this.locale.customRangeLabel;if(f.isAfter(g)){var h=this.endDate.diff(this.startDate);g=e(f).add(h,"ms")}this.startDate=f;this.endDate=g;this.updateView();this.updateCalendars()},clickDate:function(l){var m=d(l.target).attr("data-title");var n=m.substr(1,1);var i=m.substr(3,1);var g=d(l.target).parents(".calendar");var h,k;if(g.hasClass("left")){h=this.leftCalendar.calendar[n][i];k=this.endDate;if(typeof this.dateLimit==="object"){var f=e(h).add(this.dateLimit).startOf("day");if(k.isAfter(f)){k=f}}}else{h=this.startDate;k=this.rightCalendar.calendar[n][i];if(typeof this.dateLimit==="object"){var j=e(k).subtract(this.dateLimit).startOf("day");if(h.isBefore(j)){h=j}}}if(this.singleDatePicker&&g.hasClass("left")){k=h.clone()}else{if(this.singleDatePicker&&g.hasClass("right")){h=k.clone()}}g.find("td").removeClass("active");d(l.target).addClass("active");this.setCustomDates(h,k);if(!this.timePicker){k.endOf("day")}if(this.singleDatePicker&&!this.timePicker){this.clickApply()}},clickApply:function(f){this.updateInputText();this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(f){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.chosenLabel=this.oldChosenLabel;this.updateView();this.updateCalendars();this.hide();this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(i){var k=d(i.target).closest(".calendar").hasClass("left"),j=k?"left":"right",h=this.container.find(".calendar."+j);var g=parseInt(h.find(".monthselect").val(),10);var f=h.find(".yearselect").val();this[j+"Calendar"].month.month(g).year(f);this.updateCalendars()},updateTime:function(j){var i=d(j.target).closest(".calendar"),l=i.hasClass("left");var g=parseInt(i.find(".hourselect").val(),10);var k=parseInt(i.find(".minuteselect").val(),10);if(this.timePicker12Hour){var h=i.find(".ampmselect").val();if(h==="PM"&&g<12){g+=12}if(h==="AM"&&g===12){g=0}}if(l){var m=this.startDate.clone();m.hour(g);m.minute(k);this.startDate=m;this.leftCalendar.month.hour(g).minute(k)}else{var f=this.endDate.clone();f.hour(g);f.minute(k);this.endDate=f;this.rightCalendar.month.hour(g).minute(k)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right");this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate));this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate));this.container.find(".ranges li").removeClass("active");var f=true;var h=0;for(var g in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[g][0])&&this.endDate.isSame(this.ranges[g][1])){f=false;this.chosenLabel=this.container.find(".ranges li:eq("+h+")").addClass("active").html()}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[g][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[g][1].format("YYYY-MM-DD")){f=false;this.chosenLabel=this.container.find(".ranges li:eq("+h+")").addClass("active").html()}}h++}if(f){this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html();this.showCalendars()}},buildCalendar:function(w,r,m,t,j){var g=e([r,w]).daysInMonth();var q=e([r,w,1]);var k=e([r,w,g]);var o=e(q).subtract(1,"month").month();var h=e(q).subtract(1,"month").year();var f=e([h,o]).daysInMonth();var u=q.day();var v;var s=[];s.firstDay=q;s.lastDay=k;for(v=0;v<6;v++){s[v]=[]}var p=f-u+this.locale.firstDay+1;if(p>f){p-=7}if(u==this.locale.firstDay){p=f-6}var x=e([h,o,p,12,t]);var l,n;for(v=0,l=0,n=0;v<42;v++,l++,x=e(x).add(24,"hour")){if(v>0&&l%7===0){l=0;n++}s[n][l]=x.clone().hour(m);x.hour(12)}return s},renderDropdowns:function(k,j,f){var o=k.month();var i='<select class="monthselect">';var g=false;var s=false;for(var h=0;h<12;h++){if((!g||h>=j.month())&&(!s||h<=f.month())){i+="<option value='"+h+"'"+(h===o?" selected='selected'":"")+">"+this.locale.monthNames[h]+"</option>"}}i+="</select>";var n=k.year();var l=(f&&f.year())||(n+5);var r=(j&&j.year())||(n-50);var q='<select class="yearselect">';for(var p=r;p<=l;p++){q+='<option value="'+p+'"'+(p===n?' selected="selected"':"")+">"+p+"</option>"}q+="</select>";return i+q},renderCalendar:function(p,n,m,g){var s='<div class="calendar-date">';s+='<table class="table-condensed">';s+="<thead>";s+="<tr>";if(this.showWeekNumbers){s+="<th></th>"}if(!m||m.isBefore(p.firstDay)){s+='<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>'}else{s+="<th></th>"}var j=this.locale.monthNames[p[1][1].month()]+p[1][1].format(" YYYY");if(this.showDropdowns){j=this.renderDropdowns(p[1][1],m,g)}s+='<th colspan="5" class="month">'+j+"</th>";if(!g||g.isAfter(p.lastDay)){s+='<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>'}else{s+="<th></th>"}s+="</tr>";s+="<tr>";if(this.showWeekNumbers){s+='<th class="week">'+this.locale.weekLabel+"</th>"}d.each(this.locale.daysOfWeek,function(v,i){s+="<th>"+i+"</th>"});s+="</tr>";s+="</thead>";s+="<tbody>";for(var u=0;u<6;u++){s+="<tr>";if(this.showWeekNumbers){s+='<td class="week">'+p[u][0].week()+"</td>"}for(var k=0;k<7;k++){var r="available ";r+=(p[u][k].month()==p[1][1].month())?"":"off";if((m&&p[u][k].isBefore(m,"day"))||(g&&p[u][k].isAfter(g,"day"))){r=" off disabled "}else{if(p[u][k].format("YYYY-MM-DD")==n.format("YYYY-MM-DD")){r+=" active ";if(p[u][k].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){r+=" start-date "}if(p[u][k].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){r+=" end-date "}}else{if(p[u][k]>=this.startDate&&p[u][k]<=this.endDate){r+=" in-range ";if(p[u][k].isSame(this.startDate)){r+=" start-date "}if(p[u][k].isSame(this.endDate)){r+=" end-date "}}}}var t="r"+u+"c"+k;s+='<td class="'+r.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+t+'">'+p[u][k].date()+"</td>"}s+="</tr>"}s+="</tbody>";s+="</table>";s+="</div>";var o;if(this.timePicker){s+='<div class="calendar-time">';s+='<select class="hourselect">';var h=0;var l=23;var f=n.hour();if(this.timePicker12Hour){h=1;l=12;if(f>=12){f-=12}if(f===0){f=12}}for(o=h;o<=l;o++){if(o==f){s+='<option value="'+o+'" selected="selected">'+o+"</option>"}else{s+='<option value="'+o+'">'+o+"</option>"}}s+="</select> : ";s+='<select class="minuteselect">';for(o=0;o<60;o+=this.timePickerIncrement){var q=o;if(q<10){q="0"+q}if(o==n.minute()){s+='<option value="'+o+'" selected="selected">'+q+"</option>"}else{s+='<option value="'+o+'">'+q+"</option>"}}s+="</select> ";if(this.timePicker12Hour){s+='<select class="ampmselect">';if(n.hour()>=12){s+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>'}else{s+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>'}s+="</select>"}s+="</div>"}return s},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData("daterangepicker")}};d.fn.daterangepicker=function(g,f){this.each(function(){var h=d(this);if(h.data("daterangepicker")){h.data("daterangepicker").remove()}h.data("daterangepicker",new a(h,g,f))});return this}}));(function(j,d){if(j.fn.dotdotdot){return}j.fn.dotdotdot=function(x){if(this.length==0){j.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){j(this).dotdotdot(x)})}var t=this;if(t.data("dotdotdot")){t.trigger("destroy.dot")}t.data("dotdotdot-style",t.attr("style")||"");t.css("word-wrap","break-word");if(t.css("white-space")==="nowrap"){t.css("white-space","normal")}t.bind_events=function(){t.bind("update.dot",function(A,C){A.preventDefault();A.stopPropagation();v.maxHeight=(typeof v.height=="number")?v.height:q(t);v.maxHeight+=v.tolerance;if(typeof C!="undefined"){if(typeof C=="string"||C instanceof HTMLElement){C=j("<div />").append(C).contents()}if(C instanceof j){y=C}}u=t.wrapInner('<div class="dotdotdot" />').children();u.contents().detach().end().append(y.clone(true)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var B=false,z=false;if(s.afterElement){B=s.afterElement.clone(true);B.show();s.afterElement.detach()}if(m(u,v)){if(v.wrap=="children"){z=c(u,v,B)}else{z=o(u,t,u,v,B)}}u.replaceWith(u.contents());u=null;if(j.isFunction(v.callback)){v.callback.call(t[0],z,y)}s.isTruncated=z;return z}).bind("isTruncated.dot",function(A,z){A.preventDefault();A.stopPropagation();if(typeof z=="function"){z.call(t[0],s.isTruncated)}return s.isTruncated}).bind("originalContent.dot",function(A,z){A.preventDefault();A.stopPropagation();if(typeof z=="function"){z.call(t[0],y)}return y}).bind("destroy.dot",function(z){z.preventDefault();z.stopPropagation();t.unwatch().unbind_events().contents().detach().end().append(y).attr("style",t.data("dotdotdot-style")||"").data("dotdotdot",false)});return t};t.unbind_events=function(){t.unbind(".dot");return t};t.watch=function(){t.unwatch();if(v.watch=="window"){var B=j(window),A=B.width(),z=B.height();B.bind("resize.dot"+s.dotId,function(){if(A!=B.width()||z!=B.height()||!v.windowResizeFix){A=B.width();z=B.height();if(r){clearInterval(r)}r=setTimeout(function(){t.trigger("update.dot")},10)}})}else{w=l(t);r=setInterval(function(){var C=l(t);if(w.width!=C.width||w.height!=C.height){t.trigger("update.dot");w=l(t)}},100)}return t};t.unwatch=function(){j(window).unbind("resize.dot"+s.dotId);if(r){clearInterval(r)}return t};var y=t.contents(),v=j.extend(true,{},j.fn.dotdotdot.defaults,x),s={},w={},r=null,u=null;if(!(v.lastCharacter.remove instanceof Array)){v.lastCharacter.remove=j.fn.dotdotdot.defaultArrays.lastCharacter.remove}if(!(v.lastCharacter.noEllipsis instanceof Array)){v.lastCharacter.noEllipsis=j.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis}s.afterElement=b(v.after,t);s.isTruncated=false;s.dotId=n++;t.data("dotdotdot",true).bind_events().trigger("update.dot");if(v.watch){t.watch()}return t};j.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:true,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true};j.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","\u3000",",",";",".","!","?"],noEllipsis:[]}};j.fn.dotdotdot.debug=function(r){};var n=1;function c(u,y,x){var w=u.children(),r=false;u.empty();for(var t=0,s=w.length;t<s;t++){var v=w.eq(t);u.append(v);if(x){u.append(x)}if(m(u,y)){v.remove();r=true;break}else{if(x){x.detach()}}}return r}function o(s,t,y,x,w){var r=false;var v="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";var u="script";s.contents().detach().each(function(){var A=this,z=j(A);if(typeof A=="undefined"||(A.nodeType==3&&j.trim(A.data).length==0)){return true}else{if(z.is(u)){s.append(z)}else{if(r){return true}else{s.append(z);if(w){s[s.is(v)?"after":"append"](w)}if(m(y,x)){if(A.nodeType==3){r=e(z,t,y,x,w)}else{r=o(z,t,y,x,w)}if(!r){z.detach();r=true}}if(!r){if(w){w.detach()}}}}}});return r}function e(t,v,G,w,s){var D=t[0];if(!D){return false}var z=i(D),r=(z.indexOf(" ")!==-1)?" ":"\u3000",B=(w.wrap=="letter")?"":r,E=z.split(B),A=-1,H=-1,C=0,u=E.length-1;if(w.fallbackToLetter&&C==0&&u==0){B="";E=z.split(B);u=E.length-1}while(C<=u&&!(C==0&&u==0)){var x=Math.floor((C+u)/2);if(x==H){break}H=x;a(D,E.slice(0,H+1).join(B)+w.ellipsis);if(!m(G,w)){A=H;C=H}else{u=H;if(w.fallbackToLetter&&C==0&&u==0){B="";E=E[0].split(B);A=-1;H=-1;C=0;u=E.length-1}}}if(A!=-1&&!(E.length==1&&E[0].length==0)){z=g(E.slice(0,A+1).join(B),w);a(D,z)}else{var y=t.parent();t.detach();var F=(s&&s.closest(y).length)?s.length:0;if(y.contents().length>F){D=f(y.contents().eq(-1-F),v)}else{D=f(y,v,true);if(!F){y.detach()}}if(D){z=g(i(D),w);a(D,z);if(F&&s){j(D).parent().append(s)}}}return true}function m(s,r){return s.innerHeight()>r.maxHeight}function g(r,s){while(j.inArray(r.slice(-1),s.lastCharacter.remove)>-1){r=r.slice(0,-1)}if(j.inArray(r.slice(-1),s.lastCharacter.noEllipsis)<0){r+=s.ellipsis}return r}function l(r){return{width:r.innerWidth(),height:r.innerHeight()}}function a(s,r){if(s.innerText){s.innerText=r}else{if(s.nodeValue){s.nodeValue=r}else{if(s.textContent){s.textContent=r}}}}function i(r){if(r.innerText){return r.innerText}else{if(r.nodeValue){return r.nodeValue}else{if(r.textContent){return r.textContent}else{return""}}}}function k(r){do{r=r.previousSibling}while(r&&r.nodeType!==1&&r.nodeType!==3);return r}function f(s,v,r){var u=s&&s[0],t;if(u){if(!r){if(u.nodeType===3){return u}if(j.trim(s.text())){return f(s.contents().last(),v)}}t=k(u);while(!t){s=s.parent();if(s.is(v)||!s.length){return false}t=k(s[0])}if(t){return f(j(t),v)}}return false}function b(r,s){if(!r){return false}if(typeof r==="string"){r=j(r,s);return(r.length)?r:false}return !r.jquery?false:r}function q(u){var v=u.innerHeight(),t=["paddingTop","paddingBottom"];for(var w=0,s=t.length;w<s;w++){var r=parseInt(u.css(t[w]),10);if(isNaN(r)){r=0}v-=r}return v}var p=j.fn.html;j.fn.html=function(r){if(r!=d&&!j.isFunction(r)&&this.data("dotdotdot")){return this.trigger("update",[r])}return p.apply(this,arguments)};var h=j.fn.text;j.fn.text=function(r){if(r!=d&&!j.isFunction(r)&&this.data("dotdotdot")){r=j("<div />").text(r).html();return this.trigger("update",[r])}return h.apply(this,arguments)}})(jQuery);
/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
;(function(l,o,i,e){var p=i("html"),d=i(l),a=i(o),q=i.fancybox=function(){q.open.apply(this,arguments)},k=navigator.userAgent.match(/msie/i),c=null,f=o.createTouch!==e,j=function(r){return r&&r.hasOwnProperty&&r instanceof i},b=function(r){return r&&i.type(r)==="string"},m=function(r){return b(r)&&r.indexOf("%")>0},h=function(r){return(r&&!(r.style.overflow&&r.style.overflow==="hidden")&&((r.clientWidth&&r.scrollWidth>r.clientWidth)||(r.clientHeight&&r.scrollHeight>r.clientHeight)))},n=function(t,s){var r=parseInt(t,10)||0;if(s&&m(t)){r=q.getViewport()[s]/100*r}return Math.ceil(r)},g=function(r,s){return n(r,s)+"px"};i.extend(q,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!f,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(k?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(s,r){if(!s){return}if(!i.isPlainObject(r)){r={}}if(false===q.close(true)){return}if(!i.isArray(s)){s=j(s)?i(s).get():[s]}i.each(s,function(x,y){var w={},t,B,z,A,v,C,u;if(i.type(y)==="object"){if(y.nodeType){y=i(y)}if(j(y)){w={href:y.data("fancybox-href")||y.attr("href"),title:i("<div/>").text(y.data("fancybox-title")||y.attr("title")).html(),isDom:true,element:y};if(i.metadata){i.extend(true,w,y.metadata())}}else{w=y}}t=r.href||w.href||(b(y)?y:null);B=r.title!==e?r.title:w.title||"";z=r.content||w.content;A=z?"html":(r.type||w.type);if(!A&&w.isDom){A=y.data("fancybox-type");if(!A){v=y.prop("class").match(/fancybox\.(\w+)/);A=v?v[1]:null}}if(b(t)){if(!A){if(q.isImage(t)){A="image"}else{if(q.isSWF(t)){A="swf"}else{if(t.charAt(0)==="#"){A="inline"}else{if(b(y)){A="html";z=y}}}}}if(A==="ajax"){C=t.split(/\s+/,2);t=C.shift();u=C.shift()}}if(!z){if(A==="inline"){if(t){z=i(b(t)?t.replace(/.*(?=#[^\s]+$)/,""):t)}else{if(w.isDom){z=y}}}else{if(A==="html"){z=t}else{if(!A&&!t&&w.isDom){A="inline";z=y}}}}i.extend(w,{href:t,type:A,content:z,title:B,selector:u});s[x]=w});q.opts=i.extend(true,{},q.defaults,r);if(r.keys!==e){q.opts.keys=r.keys?i.extend({},q.defaults.keys,r.keys):false}q.group=s;return q._start(q.opts.index)},cancel:function(){var r=q.coming;if(r&&false===q.trigger("onCancel")){return}q.hideLoading();if(!r){return}if(q.ajaxLoad){q.ajaxLoad.abort()}q.ajaxLoad=null;if(q.imgPreload){q.imgPreload.onload=q.imgPreload.onerror=null}if(r.wrap){r.wrap.stop(true,true).trigger("onReset").remove()}q.coming=null;if(!q.current){q._afterZoomOut(r)}},close:function(r){q.cancel();if(false===q.trigger("beforeClose")){return}q.unbindEvents();if(!q.isActive){return}if(!q.isOpen||r===true){i(".fancybox-wrap").stop(true).trigger("onReset").remove();q._afterZoomOut()}else{q.isOpen=q.isOpened=false;q.isClosing=true;i(".fancybox-item, .fancybox-nav").remove();q.wrap.stop(true,true).removeClass("fancybox-opened");q.transitions[q.current.closeMethod]()}},play:function(t){var r=function(){clearTimeout(q.player.timer)},v=function(){r();if(q.current&&q.player.isActive){q.player.timer=setTimeout(q.next,q.current.playSpeed)}},s=function(){r();a.unbind(".player");q.player.isActive=false;q.trigger("onPlayEnd")},u=function(){if(q.current&&(q.current.loop||q.current.index<q.group.length-1)){q.player.isActive=true;a.bind({"onCancel.player beforeClose.player":s,"onUpdate.player":v,"beforeLoad.player":r});v();q.trigger("onPlayStart")}};if(t===true||(!q.player.isActive&&t!==false)){u()}else{s()}},next:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.next}q.jumpto(r.index+1,s,"next")}},prev:function(s){var r=q.current;if(r){if(!b(s)){s=r.direction.prev}q.jumpto(r.index-1,s,"prev")}},jumpto:function(s,u,r){var t=q.current;if(!t){return}s=n(s);q.direction=u||t.direction[(s>=t.index?"next":"prev")];q.router=r||"jumpto";if(t.loop){if(s<0){s=t.group.length+(s%t.group.length)}s=s%t.group.length}if(t.group[s]!==e){q.cancel();q._start(s)}},reposition:function(u,r){var t=q.current,s=t?t.wrap:null,v;if(s){v=q._getPosition(r);if(u&&u.type==="scroll"){delete v.position;s.stop(true,true).animate(v,200)}else{s.css(v);t.pos=i.extend({},t.dim,v)}}},update:function(t){var r=(t&&t.originalEvent&&t.originalEvent.type),s=!r||r==="orientationchange";if(s){clearTimeout(c);c=null}if(!q.isOpen||c){return}c=setTimeout(function(){var u=q.current;if(!u||q.isClosing){return}q.wrap.removeClass("fancybox-tmp");if(s||r==="load"||(r==="resize"&&u.autoResize)){q._setDimension()}if(!(r==="scroll"&&u.canShrink)){q.reposition(t)}q.trigger("onUpdate");c=null},(s&&!f?0:300))},toggle:function(r){if(q.isOpen){q.current.fitToView=i.type(r)==="boolean"?r:!q.current.fitToView;if(f){q.wrap.removeAttr("style").addClass("fancybox-tmp");q.trigger("onUpdate")}q.update()}},hideLoading:function(){a.unbind(".loading");i("#fancybox-loading").remove()},showLoading:function(){var s,r;q.hideLoading();s=i('<div id="fancybox-loading"><div></div></div>').click(q.cancel).appendTo("body");a.bind("keydown.loading",function(t){if((t.which||t.keyCode)===27){t.preventDefault();q.cancel()}});if(!q.defaults.fixed){r=q.getViewport();s.css({position:"absolute",top:(r.h*0.5)+r.y,left:(r.w*0.5)+r.x})}q.trigger("onLoading")},getViewport:function(){var r=(q.current&&q.current.locked)||false,s={x:d.scrollLeft(),y:d.scrollTop()};if(r&&r.length){s.w=r[0].clientWidth;s.h=r[0].clientHeight}else{s.w=f&&l.innerWidth?l.innerWidth:d.width();s.h=f&&l.innerHeight?l.innerHeight:d.height()}return s},unbindEvents:function(){if(q.wrap&&j(q.wrap)){q.wrap.unbind(".fb")}a.unbind(".fb");d.unbind(".fb")},bindEvents:function(){var s=q.current,r;if(!s){return}d.bind("orientationchange.fb"+(f?"":" resize.fb")+(s.autoCenter&&!s.locked?" scroll.fb":""),q.update);r=s.keys;if(r){a.bind("keydown.fb",function(v){var t=v.which||v.keyCode,u=v.target||v.srcElement;if(t===27&&q.coming){return false}if(!v.ctrlKey&&!v.altKey&&!v.shiftKey&&!v.metaKey&&!(u&&(u.type||i(u).is("[contenteditable]")))){i.each(r,function(w,x){if(s.group.length>1&&x[t]!==e){q[w](x[t]);v.preventDefault();return false}if(i.inArray(t,x)>-1){q[w]();v.preventDefault();return false}})}})}if(i.fn.mousewheel&&s.mouseWheel){q.wrap.bind("mousewheel.fb",function(y,z,u,t){var x=y.target||null,v=i(x),w=false;while(v.length){if(w||v.is(".fancybox-skin")||v.is(".fancybox-wrap")){break}w=h(v[0]);v=i(v).parent()}if(z!==0&&!w){if(q.group.length>1&&!s.canShrink){if(t>0||u>0){q.prev(t>0?"down":"left")}else{if(t<0||u<0){q.next(t<0?"up":"right")}}y.preventDefault()}}})}},trigger:function(s,u){var r,t=u||q.coming||q.current;if(t){if(i.isFunction(t[s])){r=t[s].apply(t,Array.prototype.slice.call(arguments,1))}if(r===false){return false}if(t.helpers){i.each(t.helpers,function(w,v){if(v&&q.helpers[w]&&i.isFunction(q.helpers[w][s])){q.helpers[w][s](i.extend(true,{},q.helpers[w].defaults,v),t)}})}}a.trigger(s)},isImage:function(r){return b(r)&&r.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(r){return b(r)&&r.match(/\.(swf)((\?|#).*)?$/i)},_start:function(s){var t={},x,r,u,v,w;s=n(s);x=q.group[s]||null;if(!x){return false}t=i.extend(true,{},q.opts,x);v=t.margin;w=t.padding;if(i.type(v)==="number"){t.margin=[v,v,v,v]}if(i.type(w)==="number"){t.padding=[w,w,w,w]}if(t.modal){i.extend(true,t,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(t.autoSize){t.autoWidth=t.autoHeight=true}if(t.width==="auto"){t.autoWidth=true}if(t.height==="auto"){t.autoHeight=true}t.group=q.group;t.index=s;q.coming=t;if(false===q.trigger("beforeLoad")){q.coming=null;return}u=t.type;r=t.href;if(!u){q.coming=null;if(q.current&&q.router&&q.router!=="jumpto"){q.current.index=s;return q[q.router](q.direction)}return false}q.isActive=true;if(u==="image"||u==="swf"){t.autoHeight=t.autoWidth=false;t.scrolling="visible"}if(u==="image"){t.aspectRatio=true}if(u==="iframe"&&f){t.scrolling="scroll"}t.wrap=i(t.tpl.wrap).addClass("fancybox-"+(f?"mobile":"desktop")+" fancybox-type-"+u+" fancybox-tmp "+t.wrapCSS).appendTo(t.parent||"body");i.extend(t,{skin:i(".fancybox-skin",t.wrap),outer:i(".fancybox-outer",t.wrap),inner:i(".fancybox-inner",t.wrap)});i.each(["Top","Right","Bottom","Left"],function(z,y){t.skin.css("padding"+y,g(t.padding[z]))});q.trigger("onReady");if(u==="inline"||u==="html"){if(!t.content||!t.content.length){return q._error("content")}}else{if(!r){return q._error("href")}}if(u==="image"){q._loadImage()}else{if(u==="ajax"){q._loadAjax()}else{if(u==="iframe"){q._loadIframe()}else{q._afterLoad()}}}},_error:function(r){i.extend(q.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:r,content:q.coming.tpl.error});q._afterLoad()},_loadImage:function(){var r=q.imgPreload=new Image();r.onload=function(){this.onload=this.onerror=null;q.coming.width=this.width/q.opts.pixelRatio;q.coming.height=this.height/q.opts.pixelRatio;q._afterLoad()};r.onerror=function(){this.onload=this.onerror=null;q._error("image")};r.src=q.coming.href;if(r.complete!==true){q.showLoading()}},_loadAjax:function(){var r=q.coming;q.showLoading();q.ajaxLoad=i.ajax(i.extend({},r.ajax,{url:r.href,error:function(s,t){if(q.coming&&t!=="abort"){q._error("ajax",s)}else{q.hideLoading()}},success:function(s,t){if(t==="success"){r.content=s;q._afterLoad()}}}))},_loadIframe:function(){var r=q.coming,s=i(r.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",f?"auto":r.iframe.scrolling).attr("src",r.href);i(r.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}});if(r.iframe.preload){q.showLoading();s.one("load",function(){i(this).data("ready",1);if(!f){i(this).bind("load.fb",q.update)}i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();q._afterLoad()})}r.content=s.appendTo(r.inner);if(!r.iframe.preload){q._afterLoad()}},_preloadImages:function(){var w=q.group,v=q.current,r=w.length,t=v.preload?Math.min(v.preload,r-1):0,u,s;for(s=1;s<=t;s+=1){u=w[(v.index+s)%r];if(u.type==="image"&&u.href){new Image().src=u.href}}},_afterLoad:function(){var s=q.coming,u=q.current,z="fancybox-placeholder",w,x,y,t,r,v;q.hideLoading();if(!s||q.isActive===false){return}if(false===q.trigger("afterLoad",s,u)){s.wrap.stop(true).trigger("onReset").remove();q.coming=null;return}if(u){q.trigger("beforeChange",u);u.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}q.unbindEvents();w=s;x=s.content;y=s.type;t=s.scrolling;i.extend(q,{wrap:w.wrap,skin:w.skin,outer:w.outer,inner:w.inner,current:w,previous:u});r=w.href;switch(y){case"inline":case"ajax":case"html":if(w.selector){x=i("<div>").html(x).find(w.selector)}else{if(j(x)){if(!x.data(z)){x.data(z,i('<div class="'+z+'"></div>').insertAfter(x).hide())}x=x.show().detach();w.wrap.bind("onReset",function(){if(i(this).find(x).length){x.hide().replaceAll(x.data(z)).data(z,false)}})}}break;case"image":x=w.tpl.image.replace(/\{href\}/g,r);break;case"swf":x='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+r+'"></param>';v="";i.each(w.swf,function(A,B){x+='<param name="'+A+'" value="'+B+'"></param>';v+=" "+A+'="'+B+'"'});x+='<embed src="'+r+'" type="application/x-shockwave-flash" width="100%" height="100%"'+v+"></embed></object>";break}if(!(j(x)&&x.parent().is(w.inner))){w.inner.append(x)}q.trigger("beforeShow");w.inner.css("overflow",t==="yes"?"scroll":(t==="no"?"hidden":t));q._setDimension();q.reposition();q.isOpen=false;q.coming=null;q.bindEvents();if(!q.isOpened){i(".fancybox-wrap").not(w.wrap).stop(true).trigger("onReset").remove()}else{if(u.prevMethod){q.transitions[u.prevMethod]()}}q.transitions[q.isOpened?w.nextMethod:w.openMethod]();q._preloadImages()},_setDimension:function(){var U=q.getViewport(),Q=0,W=false,Y=false,C=q.wrap,O=q.skin,Z=q.inner,L=q.current,M=L.width,J=L.height,F=L.minWidth,y=L.minHeight,S=L.maxWidth,K=L.maxHeight,E=L.scrolling,w=L.scrollOutside?L.scrollbarWidth:0,I=L.margin,x=n(I[1]+I[3]),v=n(I[0]+I[2]),t,s,P,R,H,G,N,A,z,V,u,X,r,B,D;C.add(O).add(Z).width("auto").height("auto").removeClass("fancybox-tmp");t=n(O.outerWidth(true)-O.width());s=n(O.outerHeight(true)-O.height());P=x+t;R=v+s;H=m(M)?(U.w-P)*n(M)/100:M;G=m(J)?(U.h-R)*n(J)/100:J;if(L.type==="iframe"){B=L.content;if(L.autoHeight&&B.data("ready")===1){try{if(B[0].contentWindow.document.location){Z.width(H).height(9999);D=B.contents().find("body");if(w){D.css("overflow-x","hidden")}G=D.outerHeight(true)}}catch(T){}}}else{if(L.autoWidth||L.autoHeight){Z.addClass("fancybox-tmp");if(!L.autoWidth){Z.width(H)}if(!L.autoHeight){Z.height(G)}if(L.autoWidth){H=Z.width()}if(L.autoHeight){G=Z.height()}Z.removeClass("fancybox-tmp")}}M=n(H);J=n(G);z=H/G;F=n(m(F)?n(F,"w")-P:F);S=n(m(S)?n(S,"w")-P:S);y=n(m(y)?n(y,"h")-R:y);K=n(m(K)?n(K,"h")-R:K);N=S;A=K;if(L.fitToView){S=Math.min(U.w-P,S);K=Math.min(U.h-R,K)}X=U.w-x;r=U.h-v;if(L.aspectRatio){if(M>S){M=S;J=n(M/z)}if(J>K){J=K;M=n(J*z)}if(M<F){M=F;J=n(M/z)}if(J<y){J=y;M=n(J*z)}}else{M=Math.max(F,Math.min(M,S));if(L.autoHeight&&L.type!=="iframe"){Z.width(M);J=Z.height()}J=Math.max(y,Math.min(J,K))}if(L.fitToView){Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();if(L.aspectRatio){while((V>X||u>r)&&M>F&&J>y){if(Q++>19){break}J=Math.max(y,Math.min(K,J-10));M=n(J*z);if(M<F){M=F;J=n(M/z)}if(M>S){M=S;J=n(M/z)}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height()}}else{M=Math.max(F,Math.min(M,M-(V-X)));J=Math.max(y,Math.min(J,J-(u-r)))}}if(w&&E==="auto"&&J<G&&(M+t+w)<X){M+=w}Z.width(M).height(J);C.width(M+t);V=C.width();u=C.height();W=(V>X||u>r)&&M>F&&J>y;Y=L.aspectRatio?(M<N&&J<A&&M<H&&J<G):((M<N||J<A)&&(M<H||J<G));i.extend(L,{dim:{width:g(V),height:g(u)},origWidth:H,origHeight:G,canShrink:W,canExpand:Y,wPadding:t,hPadding:s,wrapSpace:u-O.outerHeight(true),skinSpace:O.height()-J});if(!B&&L.autoHeight&&J>y&&J<K&&!Y){Z.height("auto")}},_getPosition:function(t){var x=q.current,s=q.getViewport(),v=x.margin,u=q.wrap.width()+v[1]+v[3],r=q.wrap.height()+v[0]+v[2],w={position:"absolute",top:v[0],left:v[3]};if(x.autoCenter&&x.fixed&&!t&&r<=s.h&&u<=s.w){w.position="fixed"}else{if(!x.locked){w.top+=s.y;w.left+=s.x}}w.top=g(Math.max(w.top,w.top+((s.h-r)*x.topRatio)));w.left=g(Math.max(w.left,w.left+((s.w-u)*x.leftRatio)));return w},_afterZoomIn:function(){var r=q.current;if(!r){return}q.isOpen=q.isOpened=true;q.wrap.css("overflow","visible").addClass("fancybox-opened");q.update();if(r.closeClick||(r.nextClick&&q.group.length>1)){q.inner.css("cursor","pointer").bind("click.fb",function(s){if(!i(s.target).is("a")&&!i(s.target).parent().is("a")){s.preventDefault();q[r.closeClick?"close":"next"]()}})}if(r.closeBtn){i(r.tpl.closeBtn).appendTo(q.skin).bind("click.fb",function(s){s.preventDefault();q.close()})}if(r.arrows&&q.group.length>1){if(r.loop||r.index>0){i(r.tpl.prev).appendTo(q.outer).bind("click.fb",q.prev)}if(r.loop||r.index<q.group.length-1){i(r.tpl.next).appendTo(q.outer).bind("click.fb",q.next)}}q.trigger("afterShow");if(!r.loop&&r.index===r.group.length-1){q.play(false)}else{if(q.opts.autoPlay&&!q.player.isActive){q.opts.autoPlay=false;q.play(true)}}},_afterZoomOut:function(r){r=r||q.current;i(".fancybox-wrap").trigger("onReset").remove();i.extend(q,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});q.trigger("afterClose",r)}});q.transitions={getOrigPosition:function(){var u=q.current,s=u.element,x=u.orig,w={},r=50,y=50,v=u.hPadding,z=u.wPadding,t=q.getViewport();if(!x&&u.isDom&&s.is(":visible")){x=s.find("img:first");if(!x.length){x=s}}if(j(x)){w=x.offset();if(x.is("img")){r=x.outerWidth();y=x.outerHeight()}}else{w.top=t.y+(t.h-y)*u.topRatio;w.left=t.x+(t.w-r)*u.leftRatio}if(q.wrap.css("position")==="fixed"||u.locked){w.top-=t.y;w.left-=t.x}w={top:g(w.top-v*u.topRatio),left:g(w.left-z*u.leftRatio),width:g(r+z),height:g(y+v)};return w},step:function(s,t){var v,x,y,r=t.prop,u=q.current,w=u.wrapSpace,z=u.skinSpace;if(r==="width"||r==="height"){v=t.end===t.start?1:(s-t.start)/(t.end-t.start);if(q.isClosing){v=1-v}x=r==="width"?u.wPadding:u.hPadding;y=s-x;q.skin[r](n(r==="width"?y:y-(w*v)));q.inner[r](n(r==="width"?y:y-(w*v)-(z*v)))}},zoomIn:function(){var v=q.current,s=v.pos,t=v.openEffect,u=t==="elastic",r=i.extend({opacity:1},s);delete r.position;if(u){s=this.getOrigPosition();if(v.openOpacity){s.opacity=0.1}}else{if(t==="fade"){s.opacity=0.1}}q.wrap.css(s).animate(r,{duration:t==="none"?0:v.openSpeed,easing:v.openEasing,step:u?this.step:null,complete:q._afterZoomIn})},zoomOut:function(){var u=q.current,s=u.closeEffect,t=s==="elastic",r={opacity:0.1};if(t){r=this.getOrigPosition();if(u.closeOpacity){r.opacity=0.1}}q.wrap.animate(r,{duration:s==="none"?0:u.closeSpeed,easing:u.closeEasing,step:t?this.step:null,complete:q._afterZoomOut})},changeIn:function(){var w=q.current,t=w.nextEffect,s=w.pos,r={opacity:1},v=q.direction,x=200,u;s.opacity=0.1;if(t==="elastic"){u=v==="down"||v==="up"?"top":"left";if(v==="down"||v==="right"){s[u]=g(n(s[u])-x);r[u]="+="+x+"px"}else{s[u]=g(n(s[u])+x);r[u]="-="+x+"px"}}if(t==="none"){q._afterZoomIn()}else{q.wrap.css(s).animate(r,{duration:w.nextSpeed,easing:w.nextEasing,complete:q._afterZoomIn})}},changeOut:function(){var t=q.previous,s=t.prevEffect,r={opacity:0.1},u=q.direction,v=200;if(s==="elastic"){r[u==="down"||u==="up"?"top":"left"]=(u==="up"||u==="left"?"-":"+")+"="+v+"px"}t.wrap.animate(r,{duration:s==="none"?0:t.prevSpeed,easing:t.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}};q.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!f,fixed:true},overlay:null,fixed:false,el:i("html"),create:function(s){var r;s=i.extend({},this.defaults,s);if(this.overlay){this.close()}r=q.coming?q.coming.parent:s.parent;this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(r&&r.lenth?r:"body");this.fixed=false;if(s.fixed&&q.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(s){var r=this;s=i.extend({},this.defaults,s);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(s)}if(!this.fixed){d.bind("resize.overlay",i.proxy(this.update,this));this.update()}if(s.closeClick){this.overlay.bind("click.overlay",function(t){if(i(t.target).hasClass("fancybox-overlay")){if(q.isActive){q.close()}else{r.close()}return false}})}this.overlay.css(s.css).show()},close:function(){d.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){i(".fancybox-margin").removeClass("fancybox-margin");this.el.removeClass("fancybox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}i(".fancybox-overlay").remove().hide();i.extend(this,{overlay:null,fixed:false})},update:function(){var s="100%",r;this.overlay.width(s).height("100%");if(k){r=Math.max(o.documentElement.offsetWidth,o.body.offsetWidth);if(a.width()>r){s=a.width()}}else{if(a.width()>d.width()){s=a.width()}}this.overlay.width(s).height(a.height())},onReady:function(s,t){var r=this.overlay;i(".fancybox-overlay").stop(true,true);if(!r){this.create(s)}if(s.locked&&this.fixed&&t.fixed){t.locked=this.overlay.append(t.wrap);t.fixed=false}if(s.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(r,s){if(s.locked&&!this.el.hasClass("fancybox-lock")){if(this.fixPosition!==false){i("*").filter(function(){return(i(this).css("position")==="fixed"&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin")}this.el.addClass("fancybox-margin");this.scrollV=d.scrollTop();this.scrollH=d.scrollLeft();this.el.addClass("fancybox-lock");d.scrollTop(this.scrollV).scrollLeft(this.scrollH)}this.open(r)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(r){if(this.overlay&&!q.coming){this.overlay.fadeOut(r.speedOut,i.proxy(this.close,this))}}};q.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(s){var u=q.current,w=u.title,r=s.type,v,t;if(i.isFunction(w)){w=w.call(u.element,u)}if(!b(w)||i.trim(w)===""){return}v=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+w+"</div>");switch(r){case"inside":t=q.skin;break;case"outside":t=q.wrap;break;case"over":t=q.inner;break;default:t=q.skin;v.appendTo("body");if(k){v.width(v.width())}v.wrapInner('<span class="child"></span>');q.current.margin[2]+=Math.abs(n(v.css("margin-bottom")));break}v[(s.position==="top"?"prependTo":"appendTo")](t)}};i.fn.fancybox=function(t){var s,u=i(this),r=this.selector||"",v=function(z){var y=i(this).blur(),w=s,x,A;if(!(z.ctrlKey||z.altKey||z.shiftKey||z.metaKey)&&!y.is(".fancybox-wrap")){x=t.groupAttr||"data-fancybox-group";A=y.attr(x);if(!A){x="rel";A=y.get(0)[x]}if(A&&A!==""&&A!=="nofollow"){y=r.length?i(r):u;y=y.filter("["+x+'="'+A+'"]');w=y.index(this)}t.index=w;if(q.open(y,t)!==false){z.preventDefault()}}};t=t||{};s=t.index||0;if(!r||t.live===false){u.unbind("click.fb-start").bind("click.fb-start",v)}else{a.undelegate(r,"click.fb-start").delegate(r+":not('.fancybox-item, .fancybox-nav')","click.fb-start",v)}this.filter("[data-fancybox-start=1]").trigger("click");return this};a.ready(function(){if(i.scrollbarWidth===e){i.scrollbarWidth=function(){var s=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=s.children(),r=t.innerWidth()-t.height(99).innerWidth();s.remove();return r}}if(i.support.fixedPosition===e){i.support.fixedPosition=(function(){var s=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),r=(s[0].offsetTop===20||s[0].offsetTop===15);s.remove();return r}())}i.extend(q.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")})});a.load(function(){var s,r;s=i(l).width();p.addClass("fancybox-lock-test");r=i(l).width();p.removeClass("fancybox-lock-test");i("<style type='text/css'>.fancybox-margin{margin-right:"+(r-s)+"px !important;}</style>").appendTo("head")})}(window,document,jQuery));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.keepInView=function(b){return this.each(function(g,c){var c=a(c),i=c.clone(true),f=a('<div class="keepInViewMarker"></div>');c.before(f);if(!b){b={}}var e=f.offset().top,m=j(),k=l();function d(){c.before(i);var n={W:i.outerWidth(),H:i.outerHeight(),P:i.css("padding")};i.remove();return n}function l(n){if(n==undefined){n=d()}return{display:"block",height:n.H,padding:n.P,position:"relative",top:"initial",width:n.W,zIndex:"initial"}}function j(p){if(p==undefined){p=d()}var o=a.extend({},b,{height:p.H,position:"fixed",top:0,width:p.W,zIndex:1001});var n=parseInt(o.height);if(o.padding!==undefined){n+=2*parseInt(o.padding);n=n+"px"}else{if(o.paddingTop!==undefined){n+=parseInt(o.paddingTop)}if(o.paddingBottom!==undefined){n+=parseInt(o.paddingBottom)}n=n+"px"}o.height=n;return o}var h=function(o){var n="stickyElem",q=(o.data&&o.data.forceReload);if(q){var p=d();k=l(p);m=j(p)}if(a(window).scrollTop()>e){if(!c.hasClass(n)||q){c.addClass(n).css(m)}}else{if(c.hasClass(n)||q){c.removeClass(n).css(k)}}};a(window).on("resize.sticky",{forceReload:true},h).on("scroll.sticky",h).trigger("scroll")})}}));
/*!jQuery Knob*/
(function(d){var b={},a=Math.max,c=Math.min;b.c={};b.c.d=d(document);b.c.t=function(f){return f.originalEvent.touches.length-1};b.o=function(){var e=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.run=function(){var f=function(i,h){var g;for(g in h){e.o[g]=h[g]}e.init();e._configure()._draw()};if(this.$.data("kontroled")){return}this.$.data("kontroled",true);this.extend();this.o=d.extend({min:this.$.data("min")||0,max:this.$.data("max")||100,stopper:true,readOnly:this.$.data("readonly"),cursor:(this.$.data("cursor")===true&&30)||this.$.data("cursor")||0,thickness:this.$.data("thickness")||0.35,width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inline:false,draw:null,change:null,cancel:null,release:null},this.o);if(this.$.is("fieldset")){this.v={};this.i=this.$.find("input");this.i.each(function(g){var h=d(this);e.i[g]=h;e.v[g]=h.val();h.bind("change",function(){var i={};i[g]=h.val();e.val(i)})});this.$.find("legend").remove()}else{this.i=this.$;this.v=this.$.val();(this.v=="")&&(this.v=this.o.min);this.$.bind("change",function(){e.val(e.$.val())})}(!this.o.displayInput)&&this.$.hide();this.$c=d('<canvas width="'+this.o.width+'px" height="'+this.o.height+'px"></canvas>');this.c=this.$c[0].getContext("2d");this.$.wrap(d('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>')).before(this.$c);if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv)}else{this.cv=this.v}this.$.bind("configure",f).parent().bind("configure",f);this._listen()._configure()._xy().init();this.isInit=true;this._draw();return this};this._draw=function(){var f=true,g=document.createElement("canvas");g.width=e.o.width;g.height=e.o.height;e.g=g.getContext("2d");e.clear();e.dH&&(f=e.dH());(f!==false)&&e.draw();e.c.drawImage(g,0,0);g=null};this._touch=function(f){var g=function(i){var h=e.xy2val(i.originalEvent.touches[e.t].pageX,i.originalEvent.touches[e.t].pageY);if(h==e.cv){return}if(e.cH&&(e.cH(h)===false)){return}e.change(h);e._draw()};this.t=b.c.t(f);g(f);b.c.d.bind("touchmove.k",g).bind("touchend.k",function(){b.c.d.unbind("touchmove.k touchend.k");if(e.rH&&(e.rH(e.cv)===false)){return}e.val(e.cv)});return this};this._mouse=function(g){var f=function(i){var h=e.xy2val(i.pageX,i.pageY);if(h==e.cv){return}if(e.cH&&(e.cH(h)===false)){return}e.change(h);e._draw()};f(g);b.c.d.bind("mousemove.k",f).bind("keyup.k",function(h){if(h.keyCode===27){b.c.d.unbind("mouseup.k mousemove.k keyup.k");if(e.eH&&(e.eH()===false)){return}e.cancel()}}).bind("mouseup.k",function(h){b.c.d.unbind("mousemove.k mouseup.k keyup.k");if(e.rH&&(e.rH(e.cv)===false)){return}e.val(e.cv)});return this};this._xy=function(){var f=this.$c.offset();this.x=f.left;this.y=f.top;return this};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(f){f.preventDefault();e._xy()._mouse(f)}).bind("touchstart",function(f){f.preventDefault();e._xy()._touch(f)});this.listen()}else{this.$.attr("readonly","readonly")}return this};this._configure=function(){if(this.o.draw){this.dH=this.o.draw}if(this.o.change){this.cH=this.o.change}if(this.o.cancel){this.eH=this.o.cancel}if(this.o.release){this.rH=this.o.release}if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6")}else{this.fgColor=this.o.fgColor}return this};this._clear=function(){this.$c[0].width=this.$c[0].width};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(f){};this.val=function(f){};this.xy2val=function(f,g){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(i,f){var g;i=i.substring(1,7);g=[parseInt(i.substring(0,2),16),parseInt(i.substring(2,4),16),parseInt(i.substring(4,6),16)];return"rgba("+g[0]+","+g[1]+","+g[2]+","+f+")"};this.copy=function(j,h){for(var g in j){h[g]=j[g]}}};b.Dial=function(){b.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=d.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:true},this.o)};this.val=function(e){if(null!=e){this.cv=this.o.stopper?a(c(e,this.o.max),this.o.min):e;this.v=this.cv;this.$.val(this.v);this._draw()}else{return this.v}};this.xy2val=function(e,h){var f,g;f=Math.atan2(e-(this.x+this.w2),-(h-this.y-this.w2))-this.angleOffset;if(this.angleArc!=this.PI2&&(f<0)&&(f>-0.5)){f=0}else{if(f<0){f+=this.PI2}}g=~~(0.5+(f*(this.o.max-this.o.min)/this.angleArc))+this.o.min;this.o.stopper&&(g=a(c(g,this.o.max),this.o.min));return g};this.listen=function(){var f=this,j=function(o){o.preventDefault();var n=o.originalEvent,l=n.detail||n.wheelDeltaX,k=n.detail||n.wheelDeltaY,m=parseInt(f.$.val())+(l>0||k>0?1:l<0||k<0?-1:0);if(f.cH&&(f.cH(m)===false)){return}f.val(m)},h,i,e=1,g={37:-1,38:1,39:1,40:-1};this.$.bind("keydown",function(m){var l=m.keyCode;if(l>=96&&l<=105){l=m.keyCode=l-48}h=parseInt(String.fromCharCode(l));if(isNaN(h)){(l!==13)&&(l!==8)&&(l!==9)&&(l!==189)&&m.preventDefault();if(d.inArray(l,[37,38,39,40])>-1){m.preventDefault();var k=parseInt(f.$.val())+g[l]*e;f.o.stopper&&(k=a(c(k,f.o.max),f.o.min));f.change(k);f._draw();i=window.setTimeout(function(){e*=2},30)}}}).bind("keyup",function(k){if(isNaN(h)){if(i){window.clearTimeout(i);i=null;e=1;f.val(f.$.val())}}else{(f.$.val()>f.o.max&&f.$.val(f.o.max))||(f.$.val()<f.o.min&&f.$.val(f.o.min))}});this.$c.bind("mousewheel DOMMouseScroll",j);this.$.bind("mousewheel DOMMouseScroll",j)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max){this.v=this.o.min}this.$.val(this.v);this.w2=this.o.width/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2;this.lineWidth=this.xy*this.o.thickness;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var e=a(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:((this.o.width/2+4)>>0)+"px",height:((this.o.width/3)>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":((this.o.width/3)>>0)+"px","margin-left":"-"+((this.o.width*3/4+2)>>0)+"px",border:0,background:"none",font:"bold "+((this.o.width/e)>>0)+"px Arial","text-align":"center",color:this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(e){this.cv=e;this.$.val(e)};this.angle=function(e){return(e-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.draw=function(){var k=this.g,f=this.angle(this.cv),g=this.startAngle,h=g+f,e,i,j=1;k.lineWidth=this.lineWidth;this.o.cursor&&(g=h-this.cursorExt)&&(h=h+this.cursorExt);k.beginPath();k.strokeStyle=this.o.bgColor;k.arc(this.xy,this.xy,this.radius,this.endAngle,this.startAngle,true);k.stroke();if(this.o.displayPrevious){i=this.startAngle+this.angle(this.v);e=this.startAngle;this.o.cursor&&(e=i-this.cursorExt)&&(i=i+this.cursorExt);k.beginPath();k.strokeStyle=this.pColor;k.arc(this.xy,this.xy,this.radius,e,i,false);k.stroke();j=(this.cv==this.v)}k.beginPath();k.strokeStyle=j?this.o.fgColor:this.fgColor;k.arc(this.xy,this.xy,this.radius,g,h,false);k.stroke()};this.cancel=function(){this.val(this.v)}};d.fn.dial=d.fn.knob=function(e){return this.each(function(){var f=new b.Dial();f.o=e;f.$=d(this);f.run()}).parent()}})(jQuery);if($.fn&&$.fn.dialog){$.fn.extend($.ui.dialog.prototype,{_parentInit:$.ui.dialog.prototype._init,uiDialogExtClasses:{spinner:"ui-dialog-spinner"},_init:function(){this._parentInit();if(typeof(this.options.spinnerOnAjax)=="undefined"){this.options.spinnerOnAjax=true}},content:function(a){$(this.element).html(a);var b=$(a).attr("title")||$(a).data("title");$(this.element).dialog("option","title",b);$(this.element).dialog("option","position","center")},append:function(a){$(a).appendTo($(this.element))},title:function(a){$(this.uiDialogTitlebar).children(".ui-dialog-title").html(a)},loading:function(e){var b=$(this.element).css("padding-left");var c=$(this.element).css("padding-top");var a=$(this.element).width();var d=$(this.element).height();if(a<this.options.minWidth){a=this.options.minWidth}if(a<this.options.width){a=this.options.width}if(d<this.options.minWidth){d=this.options.minHeight}if(d<this.options.width){d=this.options.height}e=$.extend({},{title:"Loading",spinnerClass:this.uiDialogExtClasses.spinner},e);if(this.options.spinnerOnAjax){var f=$("<div title='Processing...'><div class='"+e.spinnerClass+"' style='min-width: "+a+"px; min-height: "+d+"px;'></div></div>");$(this.element).dialog("content",f)}},ajax:function(c){var b=$(this.element);b.dialog("loading");var a=c.success?c.success:null;var d=c.error?c.error:null;c.success=function(f){try{$.parseJSON(f)}catch(e){b.dialog("content",f)}if(a){a(f)}};c.error=function(g){try{if(typeof(g)=="object"){b.dialog("content",g.responseText)}else{var f=$.parseJSON(g);b.dialog("content",f.responseText)}}catch(e){if(typeof(g)!==object){b.dialog("content",g)}}if(d){d(g)}};$.ajax(c)}})}(function(a,d){if(a.ui&&a.ui.dialog&&a.browser.webkit){a.ui.dialog.overlay.events=a.map("focus,keydown,keypress".split(","),function(e){return e+".dialog-overlay"}).join(" ")}var b=a.ui.dialog.prototype.open;a.ui.dialog.prototype.open=function(){a("html").css("overflow-y","hidden");var g=a(this.uiDialog),f=g.parent(".ui-dialog-wrapper");if(f.length===0){g.wrap('<div class="ui-dialog-wrapper" tabindex="-2"></div>').show()}else{f.show()}b.apply(this,arguments);var e=parseInt(g.css("z-index"),10);if(!isNaN(e)){g.parent(".ui-dialog-wrapper").css("z-index",e);g.css("z-index",(e+1))}};var c=a.ui.dialog.prototype.close;a.ui.dialog.prototype.close=function(){a("html").css("overflow-y","initial");var e=a(this.uiDialog).parent(".ui-dialog-wrapper");c.apply(this,arguments);if(e.length&&!e.find(".ui-dialog").length){e.remove()}else{e.hide()}}}(jQuery));(function(c){var b={left:"50%",top:100,smartPositioning:true,smartPositioningOptions:{minimumHeight:450,loadingHeigth:120},modal:true,loaderStyle:{},blockerStyle:{background:"#fff",opacity:0.8},text:"",textStyle:{color:"#565656",fontWeight:"bold"},zIndex:4,loaderClass:"loader",blockerClass:"blocker",textClass:"loader-text",additionalLoaderClass:"",additionalBlockClass:""};var a;c.fn.loader=function(e,n){a=c.extend({},b,n);var j=c(this);j.children("."+a.loaderClass).remove();j.children("."+a.blockerClass).remove();if(e=="open"){if(a.smartPositioning&&j.height()<a.smartPositioningOptions.minimumHeight){a.top=((j.height()-a.smartPositioningOptions.loadingHeigth)/2)}var i=a.top;a.top=a.top+"px";if(j.css("position")!="absolute"&&j.css("position")!="fixed"){j.css({position:"relative"})}var l=c("<div></div>");l.addClass(a.loaderClass).css({zIndex:a.zIndex+1,position:"absolute",textAlign:"center",cursor:"wait"}).css(a.loaderStyle).addClass(a.additionalLoaderClass);var k="50%";var d="50%";if(a.top.length!=0){k=a.top;d=a.left.length!=0?a.left:d}else{if(a.left.length!=0){d=a.left;k=a.left.top!=0?a.top:k;l.css({backgroundPosition:d+" "+k})}}l.css({backgroundPosition:d+" "+k});j.append(l);if(a.text.length!=0){var m=c("<div></div>").html(a.text).addClass(a.textClass).css({position:"absolute"}).css(a.textStyle);l.append(m);m.css({left:((j.width()-m.width())/2),top:(i-m.height()-10)})}if(a.modal){var g=c.extend(true,{},a.blockerStyle);if(typeof g!="undefined"){var h=g.opacity;delete g.opacity}var f=c("<div></div>");f.addClass(a.blockerClass);f.css({position:"absolute",top:"0px",left:"0px",zIndex:a.zIndex,width:"100%",height:"100%",cursor:"wait"}).css(g);f.addClass(a.additionalBlockClass);if(typeof h!="undefined"){f.fadeTo(0,h)}j.append(f)}}return j.each(function(){})}})(jQuery);(function(d){var k=false;var i={identifier:null,input:null,target:{label:"Extra notes",hidden:false},hideButton:{labelHide:"&laquo; Switch to short form",labelShow:"&raquo; Switch to long form",classButton:false,active:false,toggle:true},format:{label:"DETAILS",labelDelimeter:": ",rowDelimeter:"\n",emptyValue:"not set"},prefix:"mergeinput-",classSuccess:"success",classError:"error",callback:{init:function(s,t){},show:function(s,t){s.stop(true,true).show("slow",function(){d(this).css({overflow:"inherit"})})},showTarget:function(s,t){s.filter(":hidden").stop(true,true).show("slow",function(){d(this).css({overflow:"inherit"})})},hide:function(s,t){s.stop(true,true).hide("slow");s.children().remove();e("Input deactivation completed")},hideTarget:function(s,t){s.filter(":visible").val("").stop(true,true).hide("slow")},initHideButton:function(s,u){var t=d("<div></div>").html(u.hideButton.labelHide).css({cursor:"pointer"});if(u.hideButton.classButton){t.addClass(u.hideButton.classButton)}t.on("click.mergeinput",function(){u.callback.clickHideButton(s,u)});s.prepend(t)},initShowButton:function(s,u){var t=d("<div></div>").html(u.hideButton.labelShow).css({cursor:"pointer"});if(u.hideButton.classButton){t.addClass(u.hideButton.classButton)}t.on("click.mergeinput",function(){u.callback.clickShowButton(s,u)});s.prepend(t)},clickHideButton:function(s,t){s.data(t.prefix+"id",null);t.callback.setactive(s,false);s.children().remove();if(t.target.hidden){t.callback.showTarget(d(t.target.selector),t)}t.callback.reset(s,t);if(t.hideButton.toggle){t.callback.initShowButton(s,t)}},clickShowButton:function(s,t){s.mergeinput("init",t)},reset:function(s,t){s.data(t.prefix+"id",null);if(d.yvalidate.isNotEmpty(t.target.selector)&&d(t.target.selector).length>0){d(t.target.selector).data(t.prefix+"set",null)}},focus:function(t,u){var s=d(this);if(u.classSuccess){s.removeClass(u.classSuccess)}if(u.classError){s.removeClass(u.classError)}},tip:function(v,t,s,u,w){t.append(v)},error:function(t,s,u){alert(s)},format:function(u,v){var s="";if(d.yvalidate.isString(v.format.label)){s+=v.format.label+v.format.rowDelimeter;d.each(v.format.label,function(){s+="-"});s+=v.format.rowDelimeter}if(d.yvalidate.isNotEmpty(v.target.selector)&&d(v.target.selector).length>0&&!v.target.hidden){var t=d("<div></div>").html(v.target.label).clone().children().remove().end().text().trim();u.mergeinputtarget={label:t,value:d(v.target.selector).val()}}d.each(u,function(x,w){if(w.value!==false){s+=o(w.label)+": "+w.value+v.format.rowDelimeter}});return s},setactive:function(s,t){s.data("active",t)}}};var p;d.fn.mergeinput=function(v,u){var t=d(this);var s=s;if(d.isFunction(n[v])){s=n[v].call(this,t,u)}return d.inArray(v,["validate","values","formattedValues","isActive"])!==-1?s:t};var n={init:function(s,t){p=l(t);r(s,false);e(p);if(!h()){return}if(d.yvalidate.isNotEmpty(p.target.selector)&&d(p.target.selector).length>0&&d(p.target.selector).data(p.prefix+"set")){return}r(s,true);if(s.data(p.prefix+"id")&&p.identifier&&s.data(p.prefix+"id")==p.identifier){return}var u=true;if(p.startHidden){r(s,false);u=false;delete p.startHidden;s.children().remove()}if(p.hideButton.active&&u){p.callback.initHideButton(s,p)}if(u){a(s);p.callback.init(s,p)}if(p.hideButton.active){if(u){p.callback.initHideButton(s,p)}else{p.callback.initShowButton(s,p)}}if(p.target.hidden){p.callback.hideTarget(d(p.target.selector),p)}},validate:function(s){if(!m(s)){return e("Plugin not initialised.")}return j(s)},values:function(s){if(!m(s)){return e("Plugin not initialised.")}return b(s)},formattedValues:function(s){if(!m(s)){return e("Plugin not initialised.")}return p.callback.format(b(s),p)},setTargetWithFormattedValues:function(s){if(!m(s)){return e("Plugin not initialised.")}if(d.yvalidate.isNotEmpty(p.target.selector)&&d(p.target.selector).length>0&&!d(p.target.selector).data(p.prefix+"set")){d(p.target.selector).val(p.callback.format(b(s),p)).data(p.prefix+"set",true);if(p.target.hidden){p.callback.showTarget(d(p.target.selector),p)}}else{return e("Target selector is not valid.")}},hide:function(s){if(!m(s)){return}r(s,false);s.data(p.prefix+"id",null);p.callback.hide(s,p);if(p.target.hidden){p.callback.showTarget(d(p.target.selector),p)}},reset:function(s){p.callback.reset(s,p)},isActive:function(s,t){return m(s)}};var l=function(s){d.each(["callback","target","hideButton","format"],function(u,t){if(s[t]){s[t]=d.extend(true,{},i[t],s[t])}});return d.extend(true,{},i,s)};var m=function(s,t){return(typeof s.data("active")!="undefined")&&s.data("active")?true:false};var r=function(s,t){s.data("active",t)};var h=function(){var s=true;if(!f(d.yvalidate.exists(p.input,"Input param"))){return false}if(!f(d.yvalidate.isObject(p.input,"Input param"))){s=false}d.each(p.input,function(t,u){if(!q(t,u,'Input item "'+t+'": ')){s=false}});if(!f(d.yvalidate.isObject(p.target,"Target param"))){s=false}if(!f(d.yvalidate.exists(p.target.selector,"Target param: selector "))){s=false}if(d.yvalidate.exists(p.target.label)&&!f(d.yvalidate.isString(p.target.label,"Target param: label "))){s=false}if(!f(d.yvalidate.isObject(p.callback,"Callback param"))){s=false}else{d.each(p.callback,function(t,u){if(!f(d.yvalidate.isFunction(u,'Callback param "'+t+'": '))){s=false}})}if(s){e("Plugin initialised successfully")}return s};var q=function(u,w,s){var v=true;if(!f(d.yvalidate.isObject(w,s))){v=false}if(u.indexOf("spacer")==0){p.input[u].type=w.type="spacer"}var t=["text","dropdown","checkbox","textarea","spacer"];if(!f(d.yvalidate.exists(w.type,s+"type"))){v=false}else{if(!f(d.yvalidate.inArray(w.type,t,s+"type"))){v=false}}if(w.type==="dropdown"){if(!f(d.yvalidate.exists(w.values,s+"values"))){v=false}else{if(d.yvalidate.exists(w.values)&&!f(d.yvalidate.isObject(w.values,s+"values"))){v=false}}if(d.yvalidate.exists(w.emptyValue)&&!f(d.yvalidate.isString(w.emptyValue,s+"emptyValue"))){v=false}}if(w.type==="checkbox"){if(!f(d.yvalidate.exists(w.values,s+"values"))){v=false}else{if(d.yvalidate.exists(w.values)&&!f(d.yvalidate.isObject(w.values,s+"values"))){v=false}}if(d.yvalidate.exists(w.emptyValue)&&!f(d.yvalidate.isString(w.emptyValue,s+"emptyValue"))){v=false}d.each(w.values,function(y,x){if(d.yvalidate.isString(x)){x={label:x,value:x}}if(!f(d.yvalidate.exists(x.label,s+"values"))){v=false}if(!f(d.yvalidate.exists(x.value,s+"values"))){v=false}if(d.yvalidate.exists(x.checkClass)&&!f(d.yvalidate.isString(x.checkClass,s+"emptyValue"))){v=false}if(d.yvalidate.exists(x.labelClass)&&!f(d.yvalidate.isString(x.labelClass,s+"emptyValue"))){v=false}})}if(d.yvalidate.exists(w.label)&&!f(d.yvalidate.isString(w.label,s+"label"))){v=false}if(d.yvalidate.exists(w.value)&&!f(d.yvalidate.isString(w.value,s+"value"))){v=false}if(d.yvalidate.exists(w.wrapperClass)&&!f(d.yvalidate.isString(w.wrapperClass,s+"wrapperClass"))){v=false}if(d.yvalidate.exists(w.labelClass)&&!f(d.yvalidate.isString(w.labelClass,s+"labelClass"))){v=false}if(d.yvalidate.exists(w.inputClass)&&!f(d.yvalidate.isString(w.inputClass,s+"inputClass"))){v=false}if(d.yvalidate.exists(w.tip)&&!f(d.yvalidate.isString(w.tip,s+"tip"))){v=false}if(d.yvalidate.exists(w.placeholder)&&!f(d.yvalidate.isString(w.placeholder,s+"placeholder"))){v=false}if(d.yvalidate.exists(w.validation)){if(!f(d.yvalidate.isObject(w.validation,s+"validation"))){v=false}else{d.each(w.validation,function(y,x){if(!g(y,x,s+"validation")){v=false}})}}if(w.type==="spacer"){if(d.yvalidate.exists(w.css)&&!f(d.yvalidate.isString(w.css,s+"css"))){v=false}if(d.yvalidate.exists(w.cssClass)&&!f(d.yvalidate.isString(w.cssClass,s+"class"))){v=false}}return v};var g=function(v,t,s){var u=true;if(!f(d.yvalidate.isFunction(d.yvalidate[v],s+"type"))){u=false}if(d.yvalidate.inArray(v,["isLessThan","isMoreThan","isLessCharThan","isMoreCharThan"])){if(!d.yvalidate.isInt(t,s+" "+v)){u=false}}else{if(v==="isNotEmpty"){if(!f(d.yvalidate.isBoolean(t,s+" "+v))){u=false}}}return u};var a=function(s){var t=d("<div></div>");d.each(p.input,function(x,y){var z=d("<div></div>");var w;var v;var u=p.prefix+x;if(y.type==="spacer"){if(y.css){z.css(y.css)}if(y.wrapperClass){z.addClass(y.wrapperClass)}if(y.cssClass){z.addClass(y.cssClass)}z.addClass(p.prefix+"spacer")}else{if(y.label){w=d("<label>").html(y.label)}if(y.type==="text"){v=d("<input>").attr("type","text");if(y.value){v.val(y.value)}if(y.placeholder){v.attr("placeholder",y.placeholder)}}else{if(y.type==="textarea"){v=d("<textarea></textarea>").attr("rows",7);if(y.value){v.html(y.value)}if(y.placeholder){v.attr("placeholder",y.placeholder)}}else{if(y.type==="dropdown"){v=d("<select></select>");if(y.emptyValue){v.append(d("<option></option>").val("").html(y.emptyValue))}d.each(y.values,function(C,B){var A=d("<option></option>").val(B).html(B);if(y.value===B){A.attr("selected","selected")}v.append(A)})}else{if(y.type==="checkbox"){v=d("<div></div>");d.each(y.values,function(E,C){var D=c(C.value);var B=d('<input type="checkbox"></checkbox>').val(C.value).attr("name",C.value).attr("id",D);var A=d("<label></label>").attr("for",D).html(C.label);if(y.value===C.value){B.attr("checked","checked");B.addClass("selected")}if(C.checkClass){B.addClass(C.checkClass)}if(C.labelClass){A.addClass(C.labelClass)}B.on("change",function(H){H.preventDefault();var G=d(this);var F=G.siblings('label[for="'+G.attr("id")+'"]');if(G.is(":checked")){F.addClass("selected")}else{F.removeClass("selected")}});A.on("click",function(F){F.preventDefault();B.click()});v.append(B).append(A);if(C.breakline){v.append("<br>")}})}}}}v.addClass(u).on("focus.mergeinput",function(){var A=d(this);p.callback.focus(A,p)});if(y.wrapperClass){z.addClass(y.wrapperClass)}if(v&&y.inputClass){v.addClass(y.inputClass)}if(y.tip){p.callback.tip(y.tip,w,v,y.type,p)}if(w&&y.labelClass){w.addClass(y.labelClass)}if(v&&s.find("."+u).length>0&&s.find("."+u).val().length>0){v.val(s.find("."+u).val())}z.append(w).append(v)}t.append(z)});s.hide("fast");s.children().remove();if(p.identifier){s.data(p.prefix+"id",p.identifier)}s.append(t.children());p.callback.show(s,p);e("Input initialisation completed")};var j=function(s){var t=false;d.each(p.input,function(x,A){var u="."+p.prefix+x;var w=s.find(u);w.val(d.trim(w.val()));var y=/<(\w+)[^>]*>.*<\/\1>/gi;var v=A.label;if(typeof v!="undefined"){v=v.replace(y,"").trim()}var z=w.val();if(A.validation){d.each(A.validation,function(C,D){var B=false;if(C=="isNotEmpty"&&A.type=="dropdown"&&!d.yvalidate.inArray(z,A.values)){B=d.yvalidate.isNotEmpty("",v)}else{if(d.yvalidate.inArray(C,["inArray","isLessThan","isMoreThan","isLessCharThan","isMoreCharThan"])){B=d.yvalidate[C].call(this,z,D,v)}else{B=d.yvalidate[C].call(this,z,v)}}if(B===true){if(p.classSuccess){w.addClass(p.classSuccess)}}else{if(p.classError){w.addClass(p.classError)}p.callback.error(w,B,p);t=true;return false}})}});return !t};var b=function(s){var t={};d.each(p.input,function(x,z){if(z.type!="spacer"){var u="."+p.prefix+x;var w=s.find(u);var y;if(z.type=="checkbox"){y=[];d.each(w.find(":checked"),function(A,B){y.push(d(B).val())});y=y.join(", ")}else{y=w.val()}var v=d("<div></div>").html(z.label).clone().children().remove().end().text().trim();if(d.yvalidate.isNotEmpty(y)&&(!z.ignoreValues||d.inArray(y,z.ignoreValues)==-1)){t[x]={label:v,value:y}}}});return t};function f(s){if(s===true){return true}e(s);return false}function e(s){if(k){console.log("MERGE INPUT - ",s)}return false}function o(s){return s.charAt(0).toUpperCase()+s.slice(1)}function c(s){return s.replace("[]","").replace("][","_").replace("[","_").replace("]","").replace(" ","_")}})(jQuery);(function(b){function a(d){this.input=d;if(d.attr("type")=="password"){this.handlePassword()}b(d[0].form).submit(function(){if(d.hasClass("placeholder")&&d[0].value==d.attr("placeholder")){d[0].value=""}})}a.prototype={show:function(f){if(this.input[0].value===""||(f&&this.valueIsPlaceholder())){if(this.isPassword){try{this.input[0].setAttribute("type","text")}catch(d){this.input.before(this.fakePassword.show()).hide()}}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")){this.input.removeClass("placeholder");this.input[0].value="";if(this.isPassword){try{this.input[0].setAttribute("type","password")}catch(d){}this.input.show();this.input[0].focus()}}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var d=this.input;d.attr("realType","password");this.isPassword=true;if(b.browser.msie&&d[0].outerHTML){var e=b(d[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=e.val(d.attr("placeholder")).addClass("placeholder").focus(function(){d.trigger("focus");b(this).hide()});b(d[0].form).submit(function(){e.remove();d.show()})}}};var c=!!("placeholder" in document.createElement("input"));b.fn.placeholder=function(){return c?this:this.each(function(){var d=b(this);if(typeof d.attr("placeholder")=="undefined"){return}var e=new a(d);e.show(true);d.focus(function(){e.hide()});d.blur(function(){e.show(false)});if(b.browser.msie){b(window).load(function(){if(d.val()){d.removeClass("placeholder")}e.show(true)});d.focus(function(){if(this.value==""){var f=this.createTextRange();f.collapse(true);f.moveStart("character",0);f.select()}})}})}})(jQuery);!function(bb,aT){function a0(d,b){for(var f,a=[],c=0;c<d.length;++c){if(f=aU[d[c]]||aZ(d[c]),!f){throw"module definition dependecy not found: "+d[c]}a.push(f)}b.apply(null,a)}function a6(c,a,b){if("string"!=typeof c){throw"invalid module definition, module id must be defined and be a string"}if(a===aT){throw"invalid module definition, dependencies must be specified"}if(b===aT){throw"invalid module definition, definition function must be specified"}a0(a,function(){aU[c]=b.apply(null,arguments)})}function aV(a){return !!aU[a]}function aZ(b){for(var d=bb,a=b.split(/[.\/]/),c=0;c<a.length;++c){if(!d[a[c]]){return}d=d[a[c]]}return d}function bf(g){for(var d=0;d<g.length;d++){for(var e=bb,f=g[d],b=f.split(/[.\/]/),c=0;c<b.length-1;++c){e[b[c]]===aT&&(e[b[c]]={}),e=e[b[c]]}e[b[b.length-1]]=aU[f]}}var aU={},aS="moxie/core/utils/Basic",bd="moxie/core/I18n",a2="moxie/core/utils/Mime",bc="moxie/core/utils/Env",ba="moxie/core/utils/Dom",a7="moxie/core/Exceptions",aY="moxie/core/EventTarget",a1="moxie/core/utils/Encode",a8="moxie/runtime/Runtime",aR="moxie/runtime/RuntimeClient",aO="moxie/file/Blob",aQ="moxie/file/File",aA="moxie/file/FileInput",bg="moxie/file/FileDrop",aP="moxie/runtime/RuntimeTarget",be="moxie/file/FileReader",aj="moxie/core/utils/Url",ag="moxie/file/FileReaderSync",aE="moxie/xhr/FormData",ai="moxie/xhr/XMLHttpRequest",an="moxie/runtime/Transporter",av="moxie/image/Image",aB="moxie/runtime/html5/Runtime",ao="moxie/runtime/html5/file/Blob",aq="moxie/core/utils/Events",ap="moxie/runtime/html5/file/FileInput",aC="moxie/runtime/html5/file/FileDrop",az="moxie/runtime/html5/file/FileReader",aw="moxie/runtime/html5/xhr/XMLHttpRequest",am="moxie/runtime/html5/utils/BinaryReader",a3="moxie/runtime/html5/image/JPEGHeaders",af="moxie/runtime/html5/image/ExifParser",aD="moxie/runtime/html5/image/JPEG",aN="moxie/runtime/html5/image/PNG",ay="moxie/runtime/html5/image/ImageInfo",aW="moxie/runtime/html5/image/MegaPixel",ac="moxie/runtime/html5/image/Image",a5="moxie/runtime/flash/Runtime",ae="moxie/runtime/flash/file/Blob",ad="moxie/runtime/flash/file/FileInput",ab="moxie/runtime/flash/file/FileReader",aM="moxie/runtime/flash/file/FileReaderSync",au="moxie/runtime/flash/xhr/XMLHttpRequest",aa="moxie/runtime/flash/runtime/Transporter",ar="moxie/runtime/flash/image/Image",al="moxie/runtime/silverlight/Runtime",aX="moxie/runtime/silverlight/file/Blob",a9="moxie/runtime/silverlight/file/FileInput",a4="moxie/runtime/silverlight/file/FileDrop",aH="moxie/runtime/silverlight/file/FileReader",aK="moxie/runtime/silverlight/file/FileReaderSync",aJ="moxie/runtime/silverlight/xhr/XMLHttpRequest",ah="moxie/runtime/silverlight/runtime/Transporter",ax="moxie/runtime/silverlight/image/Image",aL="moxie/runtime/html4/Runtime",aF="moxie/runtime/html4/file/FileInput",aI="moxie/runtime/html4/file/FileReader",ak="moxie/runtime/html4/xhr/XMLHttpRequest",aG="moxie/runtime/html4/image/Image";a6(aS,[],function(){var p=function(c){var a;return c===a?"undefined":null===c?"null":c.nodeType?"node":{}.toString.call(c).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},y=function(a){var c;return h(arguments,function(e,d){d>0&&h(e,function(i,f){i!==c&&(p(a[f])===p(i)&&~w(p(i),["array","object"])?y(a[f],i):a[f]=i)})}),a},h=function(s,f){var A,d,l,u;if(s){try{A=s.length}catch(c){A=u}if(A===u){for(d in s){if(s.hasOwnProperty(d)&&f(s[d],d)===!1){return}}}else{for(l=0;A>l;l++){if(f(s[l],l)===!1){return}}}}},k=function(a){var c;if(!a||"object"!==p(a)){return !0}for(c in a){return !1}return !0},b=function(c,f){function a(i){"function"===p(c[i])&&c[i](function(l){++i<e&&!l?a(i):f(l)})}var d=0,e=c.length;"function"!==p(f)&&(f=function(){}),c&&c.length||f(),a(d)},g=function(f,c){var a=0,d=f.length,l=new Array(d);h(f,function(i,o){i(function(r){if(r){return c(r)}var n=[].slice.call(arguments);n.shift(),l[o]=n,a++,a===d&&(l.unshift(null),c.apply(this,l))})})},w=function(d,c){if(c){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(c,d)}for(var f=0,a=c.length;a>f;f++){if(c[f]===d){return f}}}return -1},z=function(c,e){var a=[];"array"!==p(c)&&(c=[c]),"array"!==p(e)&&(e=[e]);for(var d in c){-1===w(c[d],e)&&a.push(c[d])}return a.length?a:!1},x=function(d,c){var a=[];return h(d,function(f){-1!==w(f,c)&&a.push(f)}),a.length?a:null},v=function(c){var a,d=[];for(a=0;a<c.length;a++){d[a]=c[a]}return d},j=function(){var a=0;return function(d){var e=(new Date).getTime().toString(32),c;for(c=0;5>c;c++){e+=Math.floor(65535*Math.random()).toString(32)}return(d||"o_")+e+(a++).toString(32)}}(),q=function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},m=function(c){if("string"!=typeof c){return c}var a={t:1099511627776,g:1073741824,m:1048576,k:1024},d;return c=/^([0-9]+)([mgk]?)$/.exec(c.toLowerCase().replace(/[^0-9mkg]/g,"")),d=c[2],c=+c[1],a.hasOwnProperty(d)&&(c*=a[d]),c};return{guid:j,typeOf:p,extend:y,each:h,isEmptyObj:k,inSeries:b,inParallel:g,inArray:w,arrayDiff:z,arrayIntersect:x,toArray:v,trim:q,parseSizeStr:m}}),a6(bd,[aS],function(b){var a={};return{addI18n:function(c){return b.extend(a,c)},translate:function(c){return a[c]||c},_:function(c){return this.translate(c)},sprintf:function(c){var d=[].slice.call(arguments,1);return c.replace(/%[a-z]/g,function(){var e=d.shift();return"undefined"!==b.typeOf(e)?e:""})}}}),a6(a2,[aS,bd],function(c,b){var d="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",a={mimes:{},extensions:{},addMimeType:function(j){var g=j.split(/,/),k,f,h;for(k=0;k<g.length;k+=2){for(h=g[k+1].split(/ /),f=0;f<h.length;f++){this.mimes[h[f]]=g[k]}this.extensions[g[k]]=h}},extList2mimes:function(h,m){var g=this,k,l,e,j,f=[];for(l=0;l<h.length;l++){for(k=h[l].extensions.split(/\s*,\s*/),e=0;e<k.length;e++){if("*"===k[e]){return[]}if(j=g.mimes[k[e]]){-1===c.inArray(j,f)&&f.push(j)}else{if(!m||!/^\w+$/.test(k[e])){return[]}f.push("."+k[e])}}}return f},mimes2exts:function(f){var g=this,e=[];return c.each(f,function(h){if("*"===h){return e=[],!1}var i=h.match(/^(\w+)\/(\*|\w+)$/);i&&("*"===i[2]?c.each(g.extensions,function(k,j){new RegExp("^"+i[1]+"/").test(j)&&[].push.apply(e,g.extensions[j])}):g.extensions[h]&&[].push.apply(e,g.extensions[h]))}),e},mimes2extList:function(g){var e=[],f=[];return"string"===c.typeOf(g)&&(g=c.trim(g).split(/\s*,\s*/)),f=this.mimes2exts(g),e.push({title:b.translate("Files"),extensions:f.length?f.join(","):"*"}),e.mimes=g,e},getFileExtension:function(g){var f=g&&g.match(/\.([^.]+)$/);return f?f[1].toLowerCase():""},getFileMime:function(f){return this.mimes[this.getFileExtension(f)]||""}};return a.addMimeType(d),a}),a6(bc,[aS],function(d){function b(l,q,j){var k=0,g=0,h=0,m={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},v=function(i){return i=(""+i).replace(/[_\-+]/g,"."),i=i.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),i.length?i.split("."):[-8]},p=function(i){return i?isNaN(i)?m[i]||-7:parseInt(i,10):0};for(l=v(l),q=v(q),g=Math.max(l.length,q.length),k=0;g>k;k++){if(l[k]!=q[k]){if(l[k]=p(l[k]),q[k]=p(q[k]),l[k]<q[k]){h=-1;break}if(l[k]>q[k]){h=1;break}}}if(!j){return h}switch(j){case">":case"gt":return h>0;case">=":case"ge":return h>=0;case"<=":case"le":return 0>=h;case"==":case"=":case"eq":return 0===h;case"<>":case"!=":case"ne":return 0!==h;case"":case"<":case"lt":return 0>h;default:return null}}var f=function(N){var A="",G="?",J="function",C="undefined",F="object",Q="major",B="model",x="name",P="type",I="vendor",O="version",M="architecture",K="console",D="mobile",H="tablet",L={has:function(h,g){return -1!==g.toLowerCase().indexOf(h.toLowerCase())},lowerize:function(g){return g.toLowerCase()}},q={rgx:function(){for(var E,g=0,w,R,y,v,i,r,o=arguments;g<o.length;g+=2){var m=o[g],e=o[g+1];if(typeof E===C){E={};for(y in e){v=e[y],typeof v===F?E[v[0]]=N:E[v]=N}}for(w=R=0;w<m.length;w++){if(i=m[w].exec(this.getUA())){for(y=0;y<e.length;y++){r=i[++R],v=e[y],typeof v===F&&v.length>0?2==v.length?E[v[0]]=typeof v[1]==J?v[1].call(this,r):v[1]:3==v.length?E[v[0]]=typeof v[1]!==J||v[1].exec&&v[1].test?r?r.replace(v[1],v[2]):N:r?v[1].call(this,r,v[2]):N:4==v.length&&(E[v[0]]=r?v[3].call(this,r.replace(v[1],v[2])):N):E[v]=r?r:N}break}}if(i){break}}return E},str:function(h,g){for(var l in g){if(typeof g[l]===F&&g[l].length>0){for(var e=0;e<g[l].length;e++){if(L.has(g[l][e],h)){return l===G?N:l}}}else{if(L.has(g[l],h)){return l===G?N:l}}}return h}},j={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},k={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[x,O,Q],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[x,"Opera"],O,Q],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[x,O,Q],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[x,"IE"],O,Q],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[x,"Yandex"],O,Q],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[x,/_/g," "],O,Q],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[x,O,Q],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[x,"Dolphin"],O,Q],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[x,"Chrome"],O,Q],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[x,"Android Browser"],O,Q],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[O,Q,[x,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[O,Q,x],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[x,[Q,q.str,j.browser.oldsafari.major],[O,q.str,j.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[x,O,Q],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[x,"Netscape"],O,Q],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[x,O,Q]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[x,O],[/rv\:([\w\.]+).*(gecko)/i],[O,x]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[x,[O,q.str,j.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[x,"Windows"],[O,q.str,j.os.windows.version]],[/\((bb)(10);/i],[[x,"BlackBerry"],O],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[x,O],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[x,"Symbian"],O],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[x,"Firefox OS"],O],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[x,O],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[x,"Chromium OS"],O],[/(sunos)\s?([\w\.]+\d)*/i],[[x,"Solaris"],O],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[x,O],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[x,"iOS"],[O,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[x,[O,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[x,O]]},z=function(g){var h=g||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:A);this.getBrowser=function(){return q.rgx.apply(this,k.browser)},this.getEngine=function(){return q.rgx.apply(this,k.engine)},this.getOS=function(){return q.rgx.apply(this,k.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return h},this.setUA=function(i){return h=i,this},this.setUA(h)};return(new z).getResult()}(),a=function(){var e={define_property:function(){return !1}(),create_canvas:function(){var g=document.createElement("canvas");return !(!g.getContext||!g.getContext("2d"))}(),return_response_type:function(h){try{if(-1!==d.inArray(h,["","text","document"])){return !0}if(window.XMLHttpRequest){var j=new XMLHttpRequest;if(j.open("get","/"),"responseType" in j){return j.responseType=h,j.responseType!==h?!1:!0}}}catch(g){}return !1},use_data_uri:function(){var g=new Image;return g.onload=function(){e.use_data_uri=1===g.width&&1===g.height},setTimeout(function(){g.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==c.browser||c.version>=9)},use_data_uri_of:function(g){return e.use_data_uri&&33000>g||e.use_data_uri_over32kb()},use_fileinput:function(){var g=document.createElement("input");return g.setAttribute("type","file"),!g.disabled}};return function(h){var g=[].slice.call(arguments);return g.shift(),"function"===d.typeOf(e[h])?e[h].apply(this,g):!!e[h]}}(),c={can:a,browser:f.browser.name,version:parseFloat(f.browser.major),os:f.os.name,osVersion:f.os.version,verComp:b,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return c.OS=c.os,c}),a6(ba,[bc],function(h){var d=function(a){return"string"!=typeof a?a:document.getElementById(a)},k=function(i,a){if(!i.className){return !1}var l=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return l.test(i.className)},c=function(i,a){k(i,a)||(i.className=i.className?i.className.replace(/\s+$/,"")+" "+a:a)},g=function(i,a){if(i.className){var l=new RegExp("(^|\\s+)"+a+"(\\s+|$)");i.className=i.className.replace(l,function(o,m,p){return" "===m&&" "===p?" ":""})}},j=function(i,a){return i.currentStyle?i.currentStyle[a]:window.getComputedStyle?window.getComputedStyle(i,null)[a]:void 0},b=function(x,m){function p(u){var o,z,a=0,s=0;return u&&(z=u.getBoundingClientRect(),o="CSS1Compat"===y.compatMode?y.documentElement:y.body,a=z.left+o.scrollLeft,s=z.top+o.scrollTop),{x:a,y:s}}var e=0,l=0,v,y=document,w,q;if(x=x,m=m||y.body,x&&x.getBoundingClientRect&&"IE"===h.browser&&(!y.documentMode||y.documentMode<8)){return w=p(x),q=p(m),{x:w.x-q.x,y:w.y-q.y}}for(v=x;v&&v!=m&&v.nodeType;){e+=v.offsetLeft||0,l+=v.offsetTop||0,v=v.offsetParent}for(v=x.parentNode;v&&v!=m&&v.nodeType;){e-=v.scrollLeft||0,l-=v.scrollTop||0,v=v.parentNode}return{x:e,y:l}},f=function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}};return{get:d,hasClass:k,addClass:c,removeClass:g,getStyle:j,getPos:b,getSize:f}}),a6(a7,[aS],function(b){function a(d,c){var f;for(f in d){if(d[f]===c){return f}}return null}return{RuntimeError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": RuntimeError "+this.code}var c={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return b.extend(d,c),d.prototype=Error.prototype,d}(),OperationNotAllowedException:function(){function c(d){this.code=d,this.name="OperationNotAllowedException"}return b.extend(c,{NOT_ALLOWED_ERR:1}),c.prototype=Error.prototype,c}(),ImageError:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": ImageError "+this.code}var c={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return b.extend(d,c),d.prototype=Error.prototype,d}(),FileException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": FileException "+this.code}var c={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return b.extend(d,c),d.prototype=Error.prototype,d}(),DOMException:function(){function d(f){this.code=f,this.name=a(c,f),this.message=this.name+": DOMException "+this.code}var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return b.extend(d,c),d.prototype=Error.prototype,d}(),EventException:function(){function c(d){this.code=d,this.name="EventException"}return b.extend(c,{UNSPECIFIED_EVENT_TYPE_ERR:0}),c.prototype=Error.prototype,c}()}}),a6(aY,[a7,aS],function(b,a){function c(){var d={};a.extend(this,{uid:null,init:function(){this.uid||(this.uid=a.guid("uid_"))},addEventListener:function(k,g,j,l){var f=this,h;return k=a.trim(k),/\s/.test(k)?void a.each(k.split(/\s+/),function(i){f.addEventListener(i,g,j,l)}):(k=k.toLowerCase(),j=parseInt(j,10)||0,h=d[this.uid]&&d[this.uid][k]||[],h.push({fn:g,priority:j,scope:l||this}),d[this.uid]||(d[this.uid]={}),void (d[this.uid][k]=h))},hasEventListener:function(f){return f?!(!d[this.uid]||!d[this.uid][f]):!!d[this.uid]},removeEventListener:function(h,f){h=h.toLowerCase();var g=d[this.uid]&&d[this.uid][h],j;if(g){if(f){for(j=g.length-1;j>=0;j--){if(g[j].fn===f){g.splice(j,1);break}}}else{g=[]}g.length||(delete d[this.uid][h],a.isEmptyObj(d[this.uid])&&delete d[this.uid])}},removeAllEventListeners:function(){d[this.uid]&&delete d[this.uid]},dispatchEvent:function(h){var e,f,m,p,n={},k=!0,g;if("string"!==a.typeOf(h)){if(p=h,"string"!==a.typeOf(p.type)){throw new b.EventException(b.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}h=p.type,p.total!==g&&p.loaded!==g&&(n.total=p.total,n.loaded=p.loaded),n.async=p.async||!1}if(-1!==h.indexOf("::")?!function(i){e=i[0],h=i[1]}(h.split("::")):e=this.uid,h=h.toLowerCase(),f=d[e]&&d[e][h]){f.sort(function(l,i){return i.priority-l.priority}),m=[].slice.call(arguments),m.shift(),n.type=h,m.unshift(n);var j=[];a.each(f,function(i){m[0].target=i.scope,j.push(n.async?function(l){setTimeout(function(){l(i.fn.apply(i.scope,m)===!1)},1)}:function(l){l(i.fn.apply(i.scope,m)===!1)})}),j.length&&a.inSeries(j,function(i){k=!i})}return k},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(g){var h;"array"!==a.typeOf(g)&&(g=[g]);for(var f=0;f<g.length;f++){h="on"+g[f],"function"===a.typeOf(this[h])?this.addEventListener(g[f],this[h]):"undefined"===a.typeOf(this[h])&&(this[h]=null)}}})}return c.instance=new c,c}),a6(a1,[],function(){var c=function(f){return unescape(encodeURIComponent(f))},b=function(f){return decodeURIComponent(escape(f))},d=function(z,q){if("function"==typeof window.atob){return q?b(window.atob(z)):window.atob(z)}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g,k,C,E,D,B,v,A,y=0,x=0,j="",t=[];if(!z){return z}z+="";do{E=w.indexOf(z.charAt(y++)),D=w.indexOf(z.charAt(y++)),B=w.indexOf(z.charAt(y++)),v=w.indexOf(z.charAt(y++)),A=E<<18|D<<12|B<<6|v,g=A>>16&255,k=A>>8&255,C=255&A,t[x++]=64==B?String.fromCharCode(g):64==v?String.fromCharCode(g,k):String.fromCharCode(g,k,C)}while(y<z.length);return j=t.join(""),q?b(j):j},a=function(F,q){if(q&&c(F),"function"==typeof window.btoa){return window.btoa(F)}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,k,D,G,E,C,w,B,A=0,y=0,j="",v=[];if(!F){return F}do{e=F.charCodeAt(A++),k=F.charCodeAt(A++),D=F.charCodeAt(A++),B=e<<16|k<<8|D,G=B>>18&63,E=B>>12&63,C=B>>6&63,w=63&B,v[y++]=x.charAt(G)+x.charAt(E)+x.charAt(C)+x.charAt(w)}while(A<F.length);j=v.join("");var z=F.length%3;return(z?j.slice(0,z-3):j)+"===".slice(z||3)};return{utf8_encode:c,utf8_decode:b,atob:d,btoa:a}}),a6(a8,[aS,ba,aY],function(d,b,g){function a(h,e,o,q,p){var m=this,i,k=d.guid(e+"_"),j=p||"browser";h=h||{},f[k]=this,o=d.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},o),h.preferred_caps&&(j=a.getMode(q,h.preferred_caps,j)),i=function(){var l={};return{exec:function(u,v,s,t){return i[v]&&(l[u]||(l[u]={context:this,instance:new i[v]}),l[u].instance[s])?l[u].instance[s].apply(this,t):void 0},removeInstance:function(n){delete l[n]},removeAllInstances:function(){var r=this;d.each(l,function(s,n){"function"===d.typeOf(s.instance.destroy)&&s.instance.destroy.call(s.context),r.removeInstance(n)})}}}(),d.extend(this,{initialized:!1,uid:k,type:e,mode:a.getMode(q,h.required_caps,j),shimid:k+"_container",clients:0,options:h,can:function(l,v){var s=arguments[2]||o;if("string"===d.typeOf(l)&&"undefined"===d.typeOf(v)&&(l=a.parseCaps(l)),"object"===d.typeOf(l)){for(var u in l){if(!this.can(u,l[u],s)){return !1}}return !0}return"function"===d.typeOf(s[l])?s[l].call(this,v):v===s[l]},getShimContainer:function(){var r,l=b.get(this.shimid);return l||(r=this.options.container?b.get(this.options.container):document.body,l=document.createElement("div"),l.id=this.shimid,l.className="moxie-shim moxie-shim-"+this.type,d.extend(l.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),r.appendChild(l),r=null),l},getShim:function(){return i},shimExec:function(r,l){var s=[].slice.call(arguments,2);return m.getShim().exec.call(this,this.uid,r,l,s)},exec:function(r,l){var s=[].slice.call(arguments,2);return m[r]&&m[r][l]?m[r][l].apply(this,s):m.shimExec.apply(this,arguments)},destroy:function(){if(m){var l=b.get(this.shimid);l&&l.parentNode.removeChild(l),i&&i.removeAllInstances(),this.unbindAll(),delete f[this.uid],this.uid=null,k=m=i=l=null}}}),this.mode&&h.required_caps&&!this.can(h.required_caps)&&(this.mode=!1)}var c={},f={};return a.order="html5,flash,silverlight,html4",a.getRuntime=function(h){return f[h]?f[h]:!1},a.addConstructor=function(i,h){h.prototype=g.instance,c[i]=h},a.getConstructor=function(h){return c[h]||null},a.getInfo=function(i){var h=a.getRuntime(i);return h?{uid:h.uid,type:h.type,mode:h.mode,can:function(){return h.can.apply(h,arguments)}}:null},a.parseCaps=function(e){var h={};return"string"!==d.typeOf(e)?e||{}:(d.each(e.split(","),function(i){h[i]=!0}),h)},a.can=function(j,h){var l,i=a.getConstructor(j),k;return i?(l=new i({required_caps:h}),k=l.mode,l.destroy(),!!k):!1},a.thatCan=function(j,h){var k=(h||a.order).split(/\s*,\s*/);for(var i in k){if(a.can(k[i],j)){return k[i]}}return null},a.getMode=function(h,k,e){var j=null;if("undefined"===d.typeOf(e)&&(e="browser"),k&&!d.isEmptyObj(h)){if(d.each(k,function(p,l){if(h.hasOwnProperty(l)){var m=h[l](p);if("string"==typeof m&&(m=[m]),j){if(!(j=d.arrayIntersect(j,m))){return j=!1}}else{j=m}}}),j){return -1!==d.inArray(e,j)?e:j[0]}if(j===!1){return !1}}return e},a.capTrue=function(){return !0},a.capFalse=function(){return !1},a.capTest=function(h){return function(){return !!h}},a}),a6(aR,[a7,aS,a8],function(c,b,d){return function a(){var e;b.extend(this,{connectRuntime:function(h){function i(k){var l,j;return k.length?(l=k.shift(),(j=d.getConstructor(l))?(e=new j(h),e.bind("Init",function(){e.initialized=!0,setTimeout(function(){e.clients++,f.trigger("RuntimeInit",e)},1)}),e.bind("Error",function(){e.destroy(),i(k)}),e.mode?void e.init():void e.trigger("Error")):void i(k)):(f.trigger("RuntimeError",new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)),void (e=null))}var f=this,g;if("string"===b.typeOf(h)?g=h:"string"===b.typeOf(h.ruid)&&(g=h.ruid),g){if(e=d.getRuntime(g)){return e.clients++,e}throw new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)}i((h.runtime_order||d.order).split(/\s*,\s*/))},getRuntime:function(){return e&&e.uid?e:(e=null,null)},disconnectRuntime:function(){e&&--e.clients<=0&&(e.destroy(),e=null)}})}}),a6(aO,[aS,a1,aR],function(d,b,f){function a(h,e){function g(j,m,l){var i,k=c[this.uid];return"string"===d.typeOf(k)&&k.length?(i=new a(null,{type:l,size:m-j}),i.detach(k.substr(j,i.size)),i):null}f.call(this),h&&this.connectRuntime(h),e?"string"===d.typeOf(e)&&(e={data:e}):e={},d.extend(this,{uid:e.uid||d.guid("uid_"),ruid:h,size:e.size||0,type:e.type||"",slice:function(j,i,k){return this.isDetached()?g.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),j,i,k)},getSource:function(){return c[this.uid]?c[this.uid]:null},detach:function(i){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),i=i||"";var j=i.match(/^data:([^;]*);base64,/);j&&(this.type=j[1],i=b.atob(i.substring(i.indexOf("base64,")+7))),this.size=i.length,c[this.uid]=i},isDetached:function(){return !this.ruid&&"string"===d.typeOf(c[this.uid])},destroy:function(){this.detach(),delete c[this.uid]}}),e.data?this.detach(e.data):c[this.uid]=e}var c={};return a}),a6(aQ,[aS,a2,aO],function(c,b,d){function a(f,h){var j,e;if(h||(h={}),e=h.type&&""!==h.type?h.type:b.getFileMime(h.name),h.name){j=h.name.replace(/\\/g,"/"),j=j.substr(j.lastIndexOf("/")+1)}else{var g=e.split("/")[0];j=c.guid((""!==g?g:"file")+"_"),b.extensions[e]&&(j+="."+b.extensions[e][0])}d.apply(this,arguments),c.extend(this,{type:e||"",name:j||c.guid("file_"),lastModifiedDate:h.lastModifiedDate||(new Date).toLocaleString()})}return a.prototype=d.prototype,a}),a6(aA,[aS,a2,ba,a7,aY,bd,aQ,a8,aR],function(j,q,f,h,b,d,m,v,p){function k(e){var n=this,l,i,a;if(-1!==j.inArray(j.typeOf(e),["string","node"])&&(e={browse_button:e}),i=f.get(e.browse_button),!i){throw new h.DOMException(h.DOMException.NOT_FOUND_ERR)}a={accept:[{title:d.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:i.parentNode||document.body},e=j.extend({},a,e),"string"==typeof e.required_caps&&(e.required_caps=v.parseCaps(e.required_caps)),"string"==typeof e.accept&&(e.accept=q.mimes2extList(e.accept)),l=f.get(e.container),l||(l=document.body),"static"===f.getStyle(l,"position")&&(l.style.position="relative"),l=i=null,p.call(n),j.extend(n,{uid:j.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){n.convertEventPropsToHandlers(g),n.bind("RuntimeInit",function(o,c){n.ruid=c.uid,n.shimid=c.shimid,n.bind("Ready",function(){n.trigger("Refresh")},999),n.bind("Change",function(){var r=c.exec.call(n,"FileInput","getFiles");n.files=[],j.each(r,function(s){return 0===s.size?!0:void n.files.push(new m(n.ruid,s))})},999),n.bind("Refresh",function(){var u,x,r,w;r=f.get(e.browse_button),w=f.get(c.shimid),r&&(u=f.getPos(r,f.get(e.container)),x=f.getSize(r),w&&j.extend(w.style,{top:u.y+"px",left:u.x+"px",width:x.w+"px",height:x.h+"px"})),w=r=null}),c.exec.call(n,"FileInput","init",e)}),n.connectRuntime(j.extend({},e,{required_caps:{select_file:!0}}))},disable:function(c){var o=this.getRuntime();o&&o.exec.call(this,"FileInput","disable","undefined"===j.typeOf(c)?!0:c)},refresh:function(){n.trigger("Refresh")},destroy:function(){var c=this.getRuntime();c&&(c.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===j.typeOf(this.files)&&j.each(this.files,function(o){o.destroy()}),this.files=null}})}var g=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return k.prototype=b.instance,k}),a6(bg,[bd,ba,a7,aS,aQ,aR,aY,a2],function(h,m,f,g,b,d,k,p){function l(i){var c=this,e;"string"==typeof i&&(i={drop_zone:i}),e={accept:[{title:h.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?g.extend({},e,i):e,i.container=m.get(i.drop_zone)||document.body,"static"===m.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=p.mimes2extList(i.accept)),d.call(c),g.extend(c,{uid:g.guid("uid_"),ruid:null,files:null,init:function(){c.convertEventPropsToHandlers(j),c.bind("RuntimeInit",function(n,a){c.ruid=a.uid,c.bind("Drop",function(){var o=a.exec.call(c,"FileDrop","getFiles");c.files=[],g.each(o,function(q){c.files.push(new b(c.ruid,q))})},999),a.exec.call(c,"FileDrop","init",i),c.dispatchEvent("ready")}),c.connectRuntime(i)},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var j=["ready","dragenter","dragleave","drop","error"];return l.prototype=k.instance,l}),a6(aP,[aS,aR,aY],function(c,b,d){function a(){this.uid=c.guid("uid_"),b.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return a.prototype=d.instance,a}),a6(be,[aS,a1,a7,aY,aO,aQ,aP],function(g,k,d,f,b,c,h){function l(){function a(r,o){function n(i){e.readyState=l.DONE,e.error=i,e.trigger("error"),s()}function s(){m.destroy(),m=null,e.trigger("loadend")}function q(i){m.bind("Error",function(v,u){n(u)}),m.bind("Progress",function(t){e.result=i.exec.call(m,"FileReader","getResult"),e.trigger(t)}),m.bind("Load",function(t){e.readyState=l.DONE,e.result=i.exec.call(m,"FileReader","getResult"),e.trigger(t),s()}),i.exec.call(m,"FileReader","read",r,o)}if(m=new h,this.convertEventPropsToHandlers(j),this.readyState===l.LOADING){return n(new d.DOMException(d.DOMException.INVALID_STATE_ERR))}if(this.readyState=l.LOADING,this.trigger("loadstart"),o instanceof b){if(o.isDetached()){var p=o.getSource();switch(r){case"readAsText":case"readAsBinaryString":this.result=p;break;case"readAsDataURL":this.result="data:"+o.type+";base64,"+k.btoa(p)}this.readyState=l.DONE,this.trigger("load"),s()}else{q(m.connectRuntime(o.ruid))}}else{n(new d.DOMException(d.DOMException.NOT_FOUND_ERR))}}var e=this,m;g.extend(this,{uid:g.guid("uid_"),readyState:l.EMPTY,result:null,error:null,readAsBinaryString:function(i){a.call(this,"readAsBinaryString",i)},readAsDataURL:function(i){a.call(this,"readAsDataURL",i)},readAsText:function(i){a.call(this,"readAsText",i)},abort:function(){this.result=null,-1===g.inArray(this.readyState,[l.EMPTY,l.DONE])&&(this.readyState===l.LOADING&&(this.readyState=l.DONE),m&&m.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),m&&(m.getRuntime().exec.call(this,"FileReader","destroy"),m.disconnectRuntime()),e=m=null}})}var j=["loadstart","progress","load","abort","error","loadend"];return l.EMPTY=0,l.LOADING=1,l.DONE=2,l.prototype=f.instance,l}),a6(aj,[],function(){var b=function(l,f){for(var g=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],d=g.length,e={http:80,https:443},j={},m=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,k=m.exec(l||"");d--;){k[d]&&(j[g[d]]=k[d])}if(!j.scheme){f&&"string"!=typeof f||(f=b(f||document.location.href)),j.scheme=f.scheme,j.host=f.host,j.port=f.port;var h="";/^[^\/]/.test(j.path)&&(h=f.path,/(\/|\/[^\.]+)$/.test(h)?h+="/":h=h.replace(/\/[^\/]+$/,"/")),j.path=h+(j.path||"")}return j.port||(j.port=e[j.scheme]||80),j.port=parseInt(j.port,10),j.path||(j.path="/"),delete j.source,j},a=function(e){var f={http:80,https:443},d=b(e);return d.scheme+"://"+d.host+(d.port!==f[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},c=function(d){function e(f){return[f.scheme,f.host,f.port].join("/")}return"string"==typeof d&&(d=b(d)),e(b())===e(d)};return{parseUrl:b,resolveUrl:a,hasSameOrigin:c}}),a6(ag,[aS,aR,a1],function(b,a,c){return function(){function d(l,h){if(!h.isDetached()){var g=this.connectRuntime(h.ruid).exec.call(this,"FileReaderSync","read",l,h);return this.disconnectRuntime(),g}var k=h.getSource();switch(l){case"readAsBinaryString":return k;case"readAsDataURL":return"data:"+h.type+";base64,"+c.btoa(k);case"readAsText":for(var m="",f=0,j=k.length;j>f;f++){m+=String.fromCharCode(k[f])}return m}}a.call(this),b.extend(this,{uid:b.guid("uid_"),readAsBinaryString:function(f){return d.call(this,"readAsBinaryString",f)},readAsDataURL:function(f){return d.call(this,"readAsDataURL",f)},readAsText:function(f){return d.call(this,"readAsText",f)}})}}),a6(aE,[a7,aS,aO],function(c,b,d){function a(){var g,f=[];b.extend(this,{append:function(i,j){var e=this,h=b.typeOf(j);j instanceof d?g={name:i,value:j}:"array"===h?(i+="[]",b.each(j,function(k){e.append(i,k)})):"object"===h?b.each(j,function(l,k){e.append(i+"["+k+"]",l)}):"null"===h||"undefined"===h||"number"===h&&isNaN(j)?e.append(i,"false"):f.push({name:i,value:j.toString()})},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return g&&g.value||null},getBlobName:function(){return g&&g.name||null},each:function(e){b.each(f,function(h){e(h.value,h.name)}),g&&e(g.value,g.name)},destroy:function(){g=null,f=[]}})}return a}),a6(ai,[aS,a7,aY,a1,aj,a8,aP,aO,ag,aE,bc,a2],function(G,k,z,C,w,y,J,q,j,I,B,H){function F(){this.uid=G.guid("uid_")}function D(){function bh(n,g){return o.hasOwnProperty(n)?1===arguments.length?B.can("define_property")?o[n]:K[n]:void (B.can("define_property")?o[n]=g:K[n]=g):void 0}function V(n){function g(){bi&&(bi.destroy(),bi=null),u.dispatchEvent("loadend"),u=null}function v(L){bi.bind("LoadStart",function(M){bh("readyState",D.LOADING),u.dispatchEvent("readystatechange"),u.dispatchEvent(M),p&&u.upload.dispatchEvent(M)}),bi.bind("Progress",function(M){bh("readyState")!==D.LOADING&&(bh("readyState",D.LOADING),u.dispatchEvent("readystatechange")),u.dispatchEvent(M)}),bi.bind("UploadProgress",function(M){p&&u.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:M.total,loaded:M.loaded})}),bi.bind("Load",function(M){bh("readyState",D.DONE),bh("status",Number(L.exec.call(bi,"XMLHttpRequest","getStatus")||0)),bh("statusText",x[bh("status")]||""),bh("response",L.exec.call(bi,"XMLHttpRequest","getResponse",bh("responseType"))),~G.inArray(bh("responseType"),["text",""])?bh("responseText",bh("response")):"document"===bh("responseType")&&bh("responseXML",bh("response")),a=L.exec.call(bi,"XMLHttpRequest","getAllResponseHeaders"),u.dispatchEvent("readystatechange"),bh("status")>0?(p&&u.upload.dispatchEvent(M),u.dispatchEvent(M)):(i=!0,u.dispatchEvent("error")),g()}),bi.bind("Abort",function(M){u.dispatchEvent(M),g()}),bi.bind("Error",function(M){i=!0,bh("readyState",D.DONE),u.dispatchEvent("readystatechange"),X=!0,u.dispatchEvent(M),g()}),L.exec.call(bi,"XMLHttpRequest","send",{url:W,method:bl,async:t,user:bk,password:e,headers:r,mimeType:at,encoding:c,responseType:u.responseType,withCredentials:u.withCredentials,options:f},n)}var u=this;l=(new Date).getTime(),bi=new J,"string"==typeof f.required_caps&&(f.required_caps=y.parseCaps(f.required_caps)),f.required_caps=G.extend({},f.required_caps,{return_response_type:u.responseType}),n instanceof I&&(f.required_caps.send_multipart=!0),m||(f.required_caps.do_cors=!0),f.ruid?v(bi.connectRuntime(f)):(bi.bind("RuntimeInit",function(M,L){v(L)}),bi.bind("RuntimeError",function(M,L){u.dispatchEvent("RuntimeError",L)}),bi.connectRuntime(f))}function bj(){bh("responseText",""),bh("responseXML",null),bh("response",null),bh("status",0),bh("statusText",""),l=Y=null}var K=this,o={timeout:0,readyState:D.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},t=!0,W,bl,r={},bk,e,c=null,at=null,d=!1,h=!1,p=!1,X=!1,i=!1,m=!1,l,Y,Q=null,s=null,f={},bi,a="",Z;G.extend(this,o,{uid:G.guid("uid_"),upload:new F,open:function(M,n,L,v,N){var g;if(!M||!n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(M)||C.utf8_encode(M)!==M){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(~G.inArray(M.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(bl=M.toUpperCase()),~G.inArray(bl,["CONNECT","TRACE","TRACK"])){throw new k.DOMException(k.DOMException.SECURITY_ERR)}if(n=C.utf8_encode(n),g=w.parseUrl(n),m=w.hasSameOrigin(g),W=w.resolveUrl(n),(v||N)&&!m){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}if(bk=v||g.user,e=N||g.pass,t=L||!0,t===!1&&(bh("timeout")||bh("withCredentials")||""!==bh("responseType"))){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}d=!t,h=!1,r={},bj.call(this),bh("readyState",D.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(n,u){var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(bh("readyState")!==D.OPENED||h){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(n)||C.utf8_encode(n)!==n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}return n=G.trim(n).toLowerCase(),~G.inArray(n,g)||/^(proxy\-|sec\-)/.test(n)?!1:(r[n]?r[n]+=", "+u:r[n]=u,!0)},getAllResponseHeaders:function(){return a||""},getResponseHeader:function(g){return g=g.toLowerCase(),i||~G.inArray(g,["set-cookie","set-cookie2"])?null:a&&""!==a&&(Z||(Z={},G.each(a.split(/\r\n/),function(u){var v=u.split(/:\s+/);2===v.length&&(v[0]=G.trim(v[0]),Z[v[0].toLowerCase()]={header:v[0],value:G.trim(v[1])})})),Z.hasOwnProperty(g))?Z[g].header+": "+Z[g].value:null},overrideMimeType:function(g){var n,u;if(~G.inArray(bh("readyState"),[D.LOADING,D.DONE])){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(g=G.trim(g.toLowerCase()),/;/.test(g)&&(n=g.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(g=n[1],n[2]&&(u=n[2])),!H.mimes[g]){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}Q=g,s=u},send:function(v,g){if(f="string"===G.typeOf(g)?{ruid:g}:g?g:{},this.convertEventPropsToHandlers(A),this.upload.convertEventPropsToHandlers(A),this.readyState!==D.OPENED||h){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(v instanceof q){f.ruid=v.ruid,at=v.type||"application/octet-stream"}else{if(v instanceof I){if(v.hasBlob()){var u=v.getBlob();f.ruid=u.ruid,at=u.type||"application/octet-stream"}}else{"string"==typeof v&&(c="UTF-8",at="text/plain;charset=UTF-8",v=C.utf8_encode(v))}}this.withCredentials||(this.withCredentials=f.required_caps&&f.required_caps.send_browser_cookies&&!m),p=!d&&this.upload.hasEventListener(),i=!1,X=!v,d||(h=!0),V.call(this,v)},abort:function(){if(i=!0,d=!1,~G.inArray(bh("readyState"),[D.UNSENT,D.OPENED,D.DONE])){bh("readyState",D.UNSENT)}else{if(bh("readyState",D.DONE),h=!1,!bi){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}bi.getRuntime().exec.call(bi,"XMLHttpRequest","abort",X),X=!0}},destroy:function(){bi&&("function"===G.typeOf(bi.destroy)&&bi.destroy(),bi=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var x={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};F.prototype=z.instance;var A=["loadstart","progress","abort","error","load","timeout","loadend"],E=1,b=2;return D.UNSENT=0,D.OPENED=1,D.HEADERS_RECEIVED=2,D.LOADING=3,D.DONE=4,D.prototype=z.instance,D}),a6(an,[aS,a1,aR,aY],function(d,b,f,a){function c(){function h(){g=k=0,m=this.result=null}function e(o,r){var l=this;p=r,l.bind("TransportingProgress",function(i){k=i.loaded,g>k&&-1===d.inArray(l.state,[c.IDLE,c.DONE])&&n.call(l)},999),l.bind("TransportingComplete",function(){k=g,l.state=c.DONE,m=null,l.result=p.exec.call(l,"Transporter","getAsBlob",o||"")},999),l.state=c.BUSY,l.trigger("TransportingStarted"),n.call(l)}function n(){var o=this,r,l=g-k;j>l&&(j=l),r=b.btoa(m.substr(k,j)),p.exec.call(o,"Transporter","receive",r,g)}var q,p,m,g,k,j;f.call(this),d.extend(this,{uid:d.guid("uid_"),state:c.IDLE,result:null,transport:function(o,v,s){var i=this;if(s=d.extend({chunk_size:204798},s),(q=s.chunk_size%3)&&(s.chunk_size+=3-q),j=s.chunk_size,h.call(this),m=o,g=o.length,"string"===d.typeOf(s)||s.ruid){e.call(i,v,this.connectRuntime(s))}else{var l=function(u,r){i.unbind("RuntimeInit",l),e.call(i,v,r)};this.bind("RuntimeInit",l),this.connectRuntime(s)}},abort:function(){var i=this;i.state=c.IDLE,p&&(p.exec.call(i,"Transporter","clear"),i.trigger("TransportingAborted")),h.call(i)},destroy:function(){this.unbindAll(),p=null,this.disconnectRuntime(),h.call(this)}})}return c.IDLE=0,c.BUSY=1,c.DONE=2,c.prototype=a.instance,c}),a6(av,[aS,ba,a7,ag,ai,a8,aR,an,bc,aY,aO,aQ,a1],function(x,C,k,q,b,j,A,D,B,z,m,y,w){function v(){function e(c){c||(c=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=c.size,this.width=c.width,this.height=c.height,this.type=c.type,this.meta=c.meta,""===this.name&&(this.name=c.name)}function h(l){var c=x.typeOf(l);try{if(l instanceof v){if(!l.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}a.apply(this,arguments)}else{if(l instanceof m){if(!~x.inArray(l.type,["image/jpeg","image/png"])){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}f.apply(this,arguments)}else{if(-1!==x.inArray(c,["blob","file"])){h.call(this,new y(null,l),arguments[1])}else{if("string"===c){/^data:[^;]*;base64,/.test(l)?h.call(this,new m(null,{data:l}),arguments[1]):d.apply(this,arguments)}else{if("node"!==c||"img"!==l.nodeName.toLowerCase()){throw new k.DOMException(k.DOMException.TYPE_MISMATCH_ERR)}h.call(this,l.src,arguments[1])}}}}}catch(n){this.trigger("error",n.code)}}function a(l,o){var c=this.connectRuntime(l.ruid);this.ruid=c.uid,c.exec.call(this,"Image","loadFromImage",l,"undefined"===x.typeOf(o)?!0:o)}function f(l,p){function c(i){o.ruid=i.uid,i.exec.call(o,"Image","loadFromBlob",l)}var o=this;o.name=l.name||"",l.isDetached()?(this.bind("RuntimeInit",function(n,i){c(i)}),p&&"string"==typeof p.required_caps&&(p.required_caps=j.parseCaps(p.required_caps)),this.connectRuntime(x.extend({required_caps:{access_image_binary:!0,resize_image:!0}},p))):c(this.connectRuntime(l.ruid))}function d(o,l){var p=this,c;c=new b,c.open("get",o),c.responseType="blob",c.onprogress=function(i){p.trigger(i)},c.onload=function(){f.call(p,c.response,!0)},c.onerror=function(i){p.trigger(i)},c.onloadend=function(){c.destroy()},c.bind("RuntimeError",function(n,i){p.trigger("RuntimeError",i)}),c.send(null,l)}A.call(this),x.extend(this,{uid:x.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){e.call(this)},999),this.convertEventPropsToHandlers(g),h.apply(this,arguments)},downsize:function(l){var c={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};l="object"==typeof l?x.extend(c,l):x.extend(c,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>v.MAX_RESIZE_WIDTH||this.height>v.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}this.getRuntime().exec.call(this,"Image","downsize",l.width,l.height,l.crop,l.preserveHeaders)}catch(n){this.trigger("error",n.code)}},crop:function(i,c,l){this.downsize(i,c,!0,l)},getAsCanvas:function(){if(!B.can("create_canvas")){throw new k.RuntimeError(k.RuntimeError.NOT_SUPPORTED_ERR)}var c=this.connectRuntime(this.ruid);return c.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return i||(i="image/jpeg"),"image/jpeg"!==i||c||(c=90),this.getRuntime().exec.call(this,"Image","getAsBlob",i,c)},getAsDataURL:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return this.getRuntime().exec.call(this,"Image","getAsDataURL",i,c)},getAsBinaryString:function(i,c){var l=this.getAsDataURL(i,c);return w.atob(l.substring(l.indexOf("base64,")+7))},embed:function(F){function n(){if(B.can("create_canvas")){var c=K.getAsCanvas();if(c){return F.appendChild(c),c=null,K.destroy(),void t.trigger("embedded")}}var i=K.getAsDataURL(I,E);if(!i){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}if(B.can("use_data_uri_of",i.length)){F.innerHTML='<img src="'+i+'" width="'+K.width+'" height="'+K.height+'" />',K.destroy(),t.trigger("embedded")}else{var l=new D;l.bind("TransportingComplete",function(){M=t.connectRuntime(this.result.ruid),t.bind("Embedded",function(){x.extend(M.getShimContainer().style,{top:"0px",left:"0px",width:K.width+"px",height:K.height+"px"}),M=null},999),M.exec.call(t,"ImageView","display",this.result.uid,u,G),K.destroy()}),l.transport(w.atob(i.substring(i.indexOf("base64,")+7)),I,x.extend({},s,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:F}))}}var t=this,K,I,E,H,s=arguments[1]||{},u=this.width,G=this.height,M;try{if(!(F=C.get(F))){throw new k.DOMException(k.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>v.MAX_RESIZE_WIDTH||this.height>v.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}if(I=s.type||this.type||"image/jpeg",E=s.quality||90,H="undefined"!==x.typeOf(s.crop)?s.crop:!1,s.width){u=s.width,G=s.height||u}else{var J=C.getSize(F);J.w&&J.h&&(u=J.w,G=J.h)}return K=new v,K.bind("Resize",function(){n.call(t)}),K.bind("Load",function(){K.downsize(u,G,H,!1)}),K.clone(this,!1),K}catch(L){this.trigger("error",L.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var g=["progress","load","error","resize","embedded"];return v.MAX_RESIZE_WIDTH=6500,v.MAX_RESIZE_HEIGHT=6500,v.prototype=z.instance,v}),a6(aB,[aS,a7,a8,bc],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue,l=g.extend({access_binary:i(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return k.can("access_binary")&&!!b.Image},display_media:i(c.can("create_canvas")||c.can("use_data_uri_over32kb")),do_cors:i(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:i(function(){var m=document.createElement("div");return("draggable" in m||"ondragstart" in m&&"ondrop" in m)&&("IE"!==c.browser||c.version>9)}()),filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),return_response_headers:a,return_response_type:function(m){return"json"===m&&window.JSON?!0:c.can("return_response_type",m)},return_status_code:a,report_upload_progress:i(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return k.can("access_binary")&&c.can("create_canvas")},select_file:function(){return c.can("use_fileinput")&&window.File},select_folder:function(){return k.can("select_file")&&"Chrome"===c.browser&&c.version>=21},select_multiple:function(){return !(!k.can("select_file")||"Safari"===c.browser&&"Windows"===c.os||"iOS"===c.os&&c.verComp(c.osVersion,"7.0.4","<"))},send_binary_string:i(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:i(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||k.can("send_binary_string")},slice_blob:i(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return k.can("slice_blob")&&k.can("send_multipart")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||"IE"===c.browser&&c.version>=10||!!~g.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a},arguments[2]);j.call(this,e,arguments[1]||h,l),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(k),m=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html5",b={};return j.addConstructor(h,f),b}),a6(ao,[aB,aO],function(b,a){function c(){function d(j,g,k){var f;if(!window.File.prototype.slice){return(f=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?f.call(j,g,k):null}try{return j.slice(),j.slice(g,k)}catch(h){return j.slice(g,k-g)}}this.slice=function(){return new a(this.getRuntime().uid,d.apply(this,arguments))}}return b.Blob=c}),a6(aq,[aS],function(h){function d(){this.returnValue=!1}function k(){this.cancelBubble=!0}var c={},g="moxie_"+h.guid(),j=function(p,i,n,m){var q,e;i=i.toLowerCase(),p.addEventListener?(q=n,p.addEventListener(i,q,!1)):p.attachEvent&&(q=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=d,a.stopPropagation=k,n(a)},p.attachEvent("on"+i,q)),p[g]||(p[g]=h.guid()),c.hasOwnProperty(p[g])||(c[p[g]]={}),e=c[p[g]],e.hasOwnProperty(i)||(e[i]=[]),e[i].push({func:q,orig:n,key:m})},b=function(l,r,p){var e,m;if(r=r.toLowerCase(),l[g]&&c[l[g]]&&c[l[g]][r]){e=c[l[g]][r];for(var i=e.length-1;i>=0&&(e[i].orig!==p&&e[i].key!==p||(l.removeEventListener?l.removeEventListener(r,e[i].func,!1):l.detachEvent&&l.detachEvent("on"+r,e[i].func),e[i].orig=null,e[i].func=null,e.splice(i,1),p===m));i--){}if(e.length||delete c[l[g]][r],h.isEmptyObj(c[l[g]])){delete c[l[g]];try{delete l[g]}catch(q){l[g]=m}}}},f=function(a,e){a&&a[g]&&h.each(c[a[g]],function(m,l){b(a,l,e)})};return{addEvent:j,removeEvent:b,removeAllEvents:f}}),a6(ap,[aB,aS,ba,aq,a2,bc],function(g,d,j,c,f,h){function b(){var k=[],i;d.extend(this,{init:function(x){var w=this,v=w.getRuntime(),n,t,r,o,a,e;i=x,k=[],r=i.accept.mimes||f.extList2mimes(i.accept,v.can("filter_by_extension")),t=v.getShimContainer(),t.innerHTML='<input id="'+v.uid+'" type="file" style="font-size:999px;opacity:0;"'+(i.multiple&&v.can("select_multiple")?"multiple":"")+(i.directory&&v.can("select_folder")?"webkitdirectory directory":"")+(r?' accept="'+r.join(",")+'"':"")+" />",n=j.get(v.uid),d.extend(n.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),o=j.get(i.browse_button),v.can("summon_file_dialog")&&("static"===j.getStyle(o,"position")&&(o.style.position="relative"),a=parseInt(j.getStyle(o,"z-index"),10)||1,o.style.zIndex=a,t.style.zIndex=a-1,c.addEvent(o,"click",function(m){var l=j.get(v.uid);l&&!l.disabled&&l.click(),m.preventDefault()},w.uid)),e=v.can("summon_file_dialog")?o:t,c.addEvent(e,"mouseover",function(){w.trigger("mouseenter")},w.uid),c.addEvent(e,"mouseout",function(){w.trigger("mouseleave")},w.uid),c.addEvent(e,"mousedown",function(){w.trigger("mousedown")},w.uid),c.addEvent(j.get(i.container),"mouseup",function(){w.trigger("mouseup")},w.uid),n.onchange=function q(){if(k=[],i.directory?d.each(this.files,function(m){"."!==m.name&&k.push(m)}):k=[].slice.call(this.files),"IE"!==h.browser&&"IEMobile"!==h.browser){this.value=""}else{var l=this.cloneNode(!0);this.parentNode.replaceChild(l,this),l.onchange=q}w.trigger("change")},w.trigger({type:"ready",async:!0}),t=null},getFiles:function(){return k},disable:function(m){var l=this.getRuntime(),a;(a=j.get(l.uid))&&(a.disabled=!!m)},destroy:function(){var a=this.getRuntime(),e=a.getShim(),l=a.getShimContainer();c.removeAllEvents(l,this.uid),c.removeAllEvents(i&&j.get(i.container),this.uid),c.removeAllEvents(i&&j.get(i.browse_button),this.uid),l&&(l.innerHTML=""),e.removeInstance(this.uid),k=i=l=e=null}})}return g.FileInput=b}),a6(aC,[aB,aS,ba,aq,a2],function(d,b,g,a,c){function f(){function n(h){if(!h.dataTransfer||!h.dataTransfer.types){return !1}var l=b.toArray(h.dataTransfer.types||[]);return -1!==b.inArray("Files",l)||-1!==b.inArray("public.file-url",l)||-1!==b.inArray("application/x-moz-file",l)}function i(l){for(var o=[],h=0;h<l.length;h++){[].push.apply(o,l[h].extensions.split(/\s*,\s*/))}return -1===b.inArray("*",o)?o:[]}function r(h){if(!m.length){return !0}var l=c.getFileExtension(h.name);return !l||-1!==b.inArray(l,m)}function v(l,o){var h=[];b.each(l,function(u){var s=u.webkitGetAsEntry();if(s){if(s.isFile){var w=u.getAsFile();r(w)&&p.push(w)}else{h.push(s)}}}),h.length?t(h,o):o()}function t(l,o){var h=[];b.each(l,function(s){h.push(function(e){q(s,e)})}),b.inSeries(h,function(){o()})}function q(l,h){l.isFile?l.file(function(o){r(o)&&p.push(o),h()},function(){h()}):l.isDirectory?j(l,h):h()}function j(s,l){function u(w){o.readEntries(function(e){e.length?([].push.apply(h,e),u(w)):w()},w)}var h=[],o=s.createReader();u(function(){t(h,l)})}var p=[],m=[],k;b.extend(this,{init:function(l){var h=this,e;k=l,m=i(k.accept),e=k.container,a.addEvent(e,"dragover",function(o){n(o)&&(o.preventDefault(),o.dataTransfer.dropEffect="copy")},h.uid),a.addEvent(e,"drop",function(o){n(o)&&(o.preventDefault(),p=[],o.dataTransfer.items&&o.dataTransfer.items[0].webkitGetAsEntry?v(o.dataTransfer.items,function(){h.trigger("drop")}):(b.each(o.dataTransfer.files,function(s){r(s)&&p.push(s)}),h.trigger("drop")))},h.uid),a.addEvent(e,"dragenter",function(o){h.trigger("dragenter")},h.uid),a.addEvent(e,"dragleave",function(o){h.trigger("dragleave")},h.uid)},getFiles:function(){return p},destroy:function(){a.removeAllEvents(k&&g.get(k.container),this.uid),p=m=k=null}})}return d.FileDrop=f}),a6(az,[aB,a1,aS],function(c,b,d){function a(){function h(i){return b.atob(i.substring(i.indexOf("base64,")+7))}var f,g=!1;d.extend(this,{read:function(j,i){var k=this;f=new window.FileReader,f.addEventListener("progress",function(l){k.trigger(l)}),f.addEventListener("load",function(l){k.trigger(l)}),f.addEventListener("error",function(l){k.trigger(l,f.error)}),f.addEventListener("loadend",function(){f=null}),"function"===d.typeOf(f[j])?(g=!1,f[j](i.getSource())):"readAsBinaryString"===j&&(g=!0,f.readAsDataURL(i.getSource()))},getResult:function(){return f&&f.result?g?h(f.result):f.result:null},abort:function(){f&&f.abort()},destroy:function(){f=null}})}return c.FileReader=a}),a6(aw,[aB,aS,a2,aj,aQ,aO,aE,a7,bc],function(h,m,f,g,b,d,k,p,l){function j(){function q(w,u){var x=this,c,v;c=u.getBlob().getSource(),v=new window.FileReader,v.onload=function(){u.append(u.getBlobName(),new d(null,{type:c.type,data:v.result})),n.send.call(x,w,u)},v.readAsBinaryString(c)}function s(){return !window.XMLHttpRequest||"IE"===l.browser&&l.version<8?function(){for(var u=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],c=0;c<u.length;c++){try{return new ActiveXObject(u[c])}catch(v){}}}():new window.XMLHttpRequest}function a(u){var c=u.responseXML,v=u.responseText;return"IE"===l.browser&&v&&c&&!c.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(u.getResponseHeader("Content-Type"))&&(c=new window.ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.validateOnParse=!1,c.loadXML(v)),c&&("IE"===l.browser&&0!==c.parseError||!c.documentElement||"parsererror"===c.documentElement.tagName)?null:c}function r(x){var v="----moxieboundary"+(new Date).getTime(),y="--",u="\r\n",w="",c=this.getRuntime();if(!c.can("send_binary_string")){throw new p.RuntimeError(p.RuntimeError.NOT_SUPPORTED_ERR)}return i.setRequestHeader("Content-Type","multipart/form-data; boundary="+v),x.each(function(z,t){w+=z instanceof d?y+v+u+'Content-Disposition: form-data; name="'+t+'"; filename="'+unescape(encodeURIComponent(z.name||"blob"))+'"'+u+"Content-Type: "+(z.type||"application/octet-stream")+u+u+z.getSource()+u:y+v+u+'Content-Disposition: form-data; name="'+t+'"'+u+u+unescape(encodeURIComponent(z))+u}),w+=y+v+y+u}var n=this,i,o;m.extend(this,{send:function(z,x){var u=this,e="Mozilla"===l.browser&&l.version>=4&&l.version<7,y="Android Browser"===l.browser,c=!1;if(o=z.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),i=s(),i.open(z.method,z.url,z.async,z.user,z.password),x instanceof d){x.isDetached()&&(c=!0),x=x.getSource()}else{if(x instanceof k){if(x.hasBlob()){if(x.getBlob().isDetached()){x=r.call(u,x),c=!0}else{if((e||y)&&"blob"===m.typeOf(x.getBlob().getSource())&&window.FileReader){return void q.call(u,z,x)}}}if(x instanceof k){var w=new window.FormData;x.each(function(A,v){A instanceof d?w.append(v,A.getSource()):w.append(v,A)}),x=w}}}i.upload?(z.withCredentials&&(i.withCredentials=!0),i.addEventListener("load",function(v){u.trigger(v)}),i.addEventListener("error",function(v){u.trigger(v)}),i.addEventListener("progress",function(v){u.trigger(v)}),i.upload.addEventListener("progress",function(v){u.trigger({type:"UploadProgress",loaded:v.loaded,total:v.total})})):i.onreadystatechange=function t(){switch(i.readyState){case 1:break;case 2:break;case 3:var B,v;try{g.hasSameOrigin(z.url)&&(B=i.getResponseHeader("Content-Length")||0),i.responseText&&(v=i.responseText.length)}catch(A){B=v=0}u.trigger({type:"progress",lengthComputable:!!B,total:parseInt(B,10),loaded:v});break;case 4:i.onreadystatechange=function(){},u.trigger(0===i.status?"error":"load")}},m.isEmptyObj(z.headers)||m.each(z.headers,function(A,v){i.setRequestHeader(v,A)}),""!==z.responseType&&"responseType" in i&&(i.responseType="json"!==z.responseType||l.can("return_response_type","json")?z.responseType:"text"),c?i.sendAsBinary?i.sendAsBinary(x):!function(){for(var A=new Uint8Array(x.length),v=0;v<x.length;v++){A[v]=255&x.charCodeAt(v)}i.send(A.buffer)}():i.send(x),u.trigger("loadstart")},getStatus:function(){try{if(i){return i.status}}catch(c){}return 0},getResponse:function(x){var v=this.getRuntime();try{switch(x){case"blob":var u=new b(v.uid,i.response),y=i.getResponseHeader("Content-Disposition");if(y){var c=y.match(/filename=([\'\"'])([^\1]+)\1/);c&&(o=c[2])}return u.name=o,u.type||(u.type=f.getFileMime(o)),u;case"json":return l.can("return_response_type","json")?i.response:200===i.status&&window.JSON?JSON.parse(i.responseText):null;case"document":return a(i);default:return""!==i.responseText?i.responseText:null}}catch(w){return null}},getAllResponseHeaders:function(){try{return i.getAllResponseHeaders()}catch(c){}return""},abort:function(){i&&i.abort()},destroy:function(){n=o=null}})}return h.XMLHttpRequest=j}),a6(am,[],function(){return function(){function c(k,j){var l=b?0:-8*(j-1),h=0,g;for(g=0;j>g;g++){h|=d.charCodeAt(k+g)<<Math.abs(l+8*g)}return h}function f(h,g,i){i=3===arguments.length?i:d.length-g-1,d=d.substr(0,g)+h+d.substr(i+g)}function a(l,j,h){var m="",g=b?0:-8*(h-1),k;for(k=0;h>k;k++){m+=String.fromCharCode(j>>Math.abs(g+8*k)&255)}f(m,l,h)}var b=!1,d;return{II:function(g){return g===aT?b:void (b=g)},init:function(g){b=!1,d=g},SEGMENT:function(j,h,g){switch(arguments.length){case 1:return d.substr(j,d.length-j-1);case 2:return d.substr(j,h);case 3:f(g,j,h);break;default:return d}},BYTE:function(e){return c(e,1)},SHORT:function(e){return c(e,2)},LONG:function(g,e){return e===aT?c(g,4):void a(g,e,4)},SLONG:function(e){var g=c(e,4);return g>2147483647?g-4294967296:g},STRING:function(g,h){var e="";for(h+=g;h>g;g++){e+=String.fromCharCode(c(g,1))}return e}}}}),a6(a3,[am],function(b){return function a(h){var d=[],f,g,c,e=0;if(f=new b,f.init(h),65496===f.SHORT(0)){for(g=2;g<=h.length;){if(c=f.SHORT(g),c>=65488&&65495>=c){g+=2}else{if(65498===c||65497===c){break}e=f.SHORT(g+2)+2,c>=65505&&65519>=c&&d.push({hex:c,name:"APP"+(15&c),start:g,length:e,segment:f.SEGMENT(g,e)}),g+=e}}return f.init(null),{headers:d,restore:function(j){var i,k;for(f.init(j),g=65504==f.SHORT(2)?4+f.SHORT(4):2,k=0,i=d.length;i>k;k++){f.SEGMENT(g,0,d[k].segment),g+=d[k].length}return j=f.SEGMENT(),f.init(null),j},strip:function(k){var m,j,l;for(j=new a(k),m=j.headers,j.purge(),f.init(k),l=m.length;l--;){f.SEGMENT(m[l].start,m[l].length,"")}return k=f.SEGMENT(),f.init(null),k},get:function(k){for(var i=[],l=0,j=d.length;j>l;l++){d[l].name===k.toUpperCase()&&i.push(d[l].segment)}return i},set:function(l,j){var p=[],k,m,i;for("string"==typeof j?p.push(j):p=j,k=m=0,i=d.length;i>k&&(d[k].name===l.toUpperCase()&&(d[k].segment=p[m],d[k].length=p[m].length,m++),!(m>=p.length));k++){}},purge:function(){d=[],f.init(null),f=null}}}}}),a6(af,[aS,am],function(b,c){return function a(){function g(B,v){var x=e.SHORT(B),l,t,E,D,C,A,y,q,w=[],z={};for(l=0;x>l;l++){if(y=A=B+12*l+2,E=v[e.SHORT(y)],E!==aT){switch(D=e.SHORT(y+=2),C=e.LONG(y+=2),y+=4,w=[],D){case 1:case 7:for(C>4&&(y=e.LONG(y)+m.tiffHeader),t=0;C>t;t++){w[t]=e.BYTE(y+t)}break;case 2:C>4&&(y=e.LONG(y)+m.tiffHeader),z[E]=e.STRING(y,C-1);continue;case 3:for(C>2&&(y=e.LONG(y)+m.tiffHeader),t=0;C>t;t++){w[t]=e.SHORT(y+2*t)}break;case 4:for(C>1&&(y=e.LONG(y)+m.tiffHeader),t=0;C>t;t++){w[t]=e.LONG(y+4*t)}break;case 5:for(y=e.LONG(y)+m.tiffHeader,t=0;C>t;t++){w[t]=e.LONG(y+4*t)/e.LONG(y+4*t+4)}break;case 9:for(y=e.LONG(y)+m.tiffHeader,t=0;C>t;t++){w[t]=e.SLONG(y+4*t)}break;case 10:for(y=e.LONG(y)+m.tiffHeader,t=0;C>t;t++){w[t]=e.SLONG(y+4*t)/e.SLONG(y+4*t+4)}break;default:continue}q=1==C?w[0]:w,z[E]=d.hasOwnProperty(E)&&"object"!=typeof q?d[E][q]:q}}return z}function j(){var i=m.tiffHeader;return e.II(18761==e.SHORT(i)),42!==e.SHORT(i+=2)?!1:(m.IFD0=m.tiffHeader+e.LONG(i+=2),f=g(m.IFD0,h.tiff),"ExifIFDPointer" in f&&(m.exifIFD=m.tiffHeader+f.ExifIFDPointer,delete f.ExifIFDPointer),"GPSInfoIFDPointer" in f&&(m.gpsIFD=m.tiffHeader+f.GPSInfoIFDPointer,delete f.GPSInfoIFDPointer),!0)}function k(y,B,s){var w,p,q,A=0;if("string"==typeof B){var v=h[y.toLowerCase()];for(var z in v){if(v[z]===B){B=z;break}}}w=m[y.toLowerCase()+"IFD"],p=e.SHORT(w);for(var x=0;p>x;x++){if(q=w+12*x+2,e.SHORT(q)==B){A=q+8;break}}return A?(e.LONG(A,s),!0):!1}var e,h,f,m={},d;return e=new c,h={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},d={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return m={tiffHeader:10},i!==aT&&i.length?(e.init(i),65505===e.SHORT(0)&&"EXIF\x00"===e.STRING(4,5).toUpperCase()?j():!1):!1},TIFF:function(){return f},EXIF:function(){var i;if(i=g(m.exifIFD,h.exif),i.ExifVersion&&"array"===b.typeOf(i.ExifVersion)){for(var o=0,l="";o<i.ExifVersion.length;o++){l+=String.fromCharCode(i.ExifVersion[o])}i.ExifVersion=l}return i},GPS:function(){var i;return i=g(m.gpsIFD,h.gps),i.GPSVersionID&&"array"===b.typeOf(i.GPSVersionID)&&(i.GPSVersionID=i.GPSVersionID.join(".")),i},setExif:function(l,i){return"PixelXDimension"!==l&&"PixelYDimension"!==l?!1:k("exif",l,i)},getBinary:function(){return e.SEGMENT()},purge:function(){e.init(null),e=f=null,m={}}}}}),a6(aD,[aS,a7,a3,am,af],function(d,b,g,a,c){function f(e){function p(){for(var l=0,h,o;l<=q.length;){if(h=n.SHORT(l+=2),h>=65472&&65475>=h){return l+=5,{height:n.SHORT(l),width:n.SHORT(l+=2)}}o=n.SHORT(l+=2),l+=o-2}return null}function r(){m&&i&&n&&(m.purge(),i.purge(),n.init(null),q=k=i=m=n=null)}var q,n,i,m,k,j;if(q=e,n=new a,n.init(q),65496!==n.SHORT(0)){throw new b.ImageError(b.ImageError.WRONG_FORMAT)}i=new g(e),m=new c,j=!!m.init(i.get("app1")[0]),k=p.call(this),d.extend(this,{type:"image/jpeg",size:q.length,width:k&&k.width||0,height:k&&k.height||0,setExif:function(h,l){return j?("object"===d.typeOf(h)?d.each(h,function(s,o){m.setExif(o,s)}):m.setExif(h,l),void i.set("app1",m.getBinary())):!1},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):q=i.restore(q)},stripHeaders:function(h){return i.strip(h)},purge:function(){r.call(this)}}),j&&(this.meta={tiff:m.TIFF(),exif:m.EXIF(),gps:m.GPS()})}return f}),a6(aN,[a7,aS,am],function(c,b,d){function a(h){function e(){var l,i;return l=m.call(this,8),"IHDR"==l.type?(i=l.start,{width:n.LONG(i),height:n.LONG(i+=4)}):null}function f(){n&&(n.init(null),p=j=k=g=n=null)}function m(s){var o,u,l,q;return o=n.LONG(s),u=n.STRING(s+=4,4),l=s+=4,q=n.LONG(s+o),{length:o,type:u,start:l,CRC:q}}var p,n,k,g,j;p=h,n=new d,n.init(p),function(){var o=0,q=0,l=[35152,20039,3338,6666];for(q=0;q<l.length;q++,o+=2){if(l[q]!=n.SHORT(o)){throw new c.ImageError(c.ImageError.WRONG_FORMAT)}}}(),j=e.call(this),b.extend(this,{type:"image/png",size:p.length,width:j.width,height:j.height,purge:function(){f.call(this)}}),f.call(this)}return a}),a6(ay,[aS,a7,aD,aN],function(c,b,d,a){return function(f){var g=[d,a],e;e=function(){for(var h=0;h<g.length;h++){try{return new g[h](f)}catch(i){}}throw new b.ImageError(b.ImageError.WRONG_FORMAT)}(),c.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(h){return h},stripHeaders:function(h){return h},purge:function(){}}),c.extend(this,e),this.purge=function(){e.purge(),e=null}}}),a6(aW,[],function(){function b(L,H,B){var D=L.naturalWidth,P=L.naturalHeight,A=B.width,t=B.height,N=B.x||0,G=B.y||0,M=H.getContext("2d");a(L)&&(D/=2,P/=2);var K=1024,I=document.createElement("canvas");I.width=I.height=K;for(var C=I.getContext("2d"),F=c(L,D,P),J=0;P>J;){for(var q=J+K>P?P-J:K,j=0;D>j;){var n=j+K>D?D-j:K;C.clearRect(0,0,K,K),C.drawImage(L,-j,-J);var z=j*A/D+N<<0,Q=Math.ceil(n*A/D),k=J*t/P/F+G<<0,O=Math.ceil(q*t/P/F);M.drawImage(I,0,0,n,q,z,k,Q,O),j+=K}J+=K}I=C=null}function a(h){var f=h.naturalWidth,j=h.naturalHeight;if(f*j>1048576){var d=document.createElement("canvas");d.width=d.height=1;var g=d.getContext("2d");return g.drawImage(h,-f+1,0),0===g.getImageData(0,0,1,1).data[3]}return !1}function c(k,v,g){var j=document.createElement("canvas");j.width=1,j.height=g;var d=j.getContext("2d");d.drawImage(k,0,0);for(var f=d.getImageData(0,0,1,g).data,p=0,w=g,q=g;q>p;){var m=f[4*(q-1)+3];0===m?w=q:p=q,q=w+p>>1}j=null;var h=q/g;return 0===h?1:h}return{isSubsampled:a,renderTo:b}}),a6(ac,[aB,aS,a7,a1,aQ,ay,aW,a2,bc],function(h,m,f,g,b,d,k,p,l){function j(){function t(){if(!H&&!B){throw new f.ImageError(f.DOMException.INVALID_STATE_ERR)}return H||B}function z(c){return g.atob(c.substring(c.indexOf("base64,")+7))}function n(v,c){return"data:"+(c||"")+";base64,"+g.btoa(v)}function u(v){var c=this;B=new Image,B.onerror=function(){r.call(this),c.trigger("error",f.ImageError.WRONG_FORMAT)},B.onload=function(){c.trigger("load")},B.src=/^data:[^;]*;base64,/.test(v)?v:n(v,C.type)}function s(x,v){var c=this,w;return window.FileReader?(w=new FileReader,w.onload=function(){v(this.result)},w.onerror=function(){c.trigger("error",f.ImageError.WRONG_FORMAT)},w.readAsDataURL(x),void 0):v(x.getAsDataURL())}function q(x,E,e,w){var N=this,Q,P,M=0,y=0,L,K,I,J;if(o=w,J=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==m.inArray(J,[5,6,7,8])){var O=x;x=E,E=O}return L=t(),e?(x=Math.min(x,L.width),E=Math.min(E,L.height),Q=Math.max(x/L.width,E/L.height)):Q=Math.min(x/L.width,E/L.height),Q>1&&!e&&w?void this.trigger("Resize"):(H||(H=document.createElement("canvas")),K=Math.round(L.width*Q),I=Math.round(L.height*Q),e?(H.width=x,H.height=E,K>x&&(M=Math.round((K-x)/2)),I>E&&(y=Math.round((I-E)/2))):(H.width=K,H.height=I),o||i(H.width,H.height,J),a.call(this,L,H,-M,-y,K,I),this.width=H.width,this.height=H.height,A=!0,void N.trigger("Resize"))}function a(y,v,I,c,x,E){if("iOS"===l.OS){k.renderTo(y,v,{width:x,height:E,x:I,y:c})}else{var w=v.getContext("2d");w.drawImage(y,I,c,x,E)}}function i(w,v,x){switch(x){case 5:case 6:case 7:case 8:H.width=v,H.height=w;break;default:H.width=w,H.height=v}var c=H.getContext("2d");switch(x){case 2:c.translate(w,0),c.scale(-1,1);break;case 3:c.translate(w,v),c.rotate(Math.PI);break;case 4:c.translate(0,v),c.scale(1,-1);break;case 5:c.rotate(0.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(0.5*Math.PI),c.translate(0,-v);break;case 7:c.rotate(0.5*Math.PI),c.translate(w,-v),c.scale(-1,1);break;case 8:c.rotate(-0.5*Math.PI),c.translate(-w,0)}}function r(){D&&(D.purge(),D=null),F=B=H=C=null,A=!1}var G=this,B,D,H,F,C,A=!1,o=!0;m.extend(this,{loadFromBlob:function(x){var v=this,c=v.getRuntime(),w=arguments.length>1?arguments[1]:!0;if(!c.can("access_binary")){throw new f.RuntimeError(f.RuntimeError.NOT_SUPPORTED_ERR)}return C=x,x.isDetached()?(F=x.getSource(),void u.call(this,F)):void s.call(this,x.getSource(),function(y){w&&(F=z(y)),u.call(v,y)})},loadFromImage:function(v,c){this.meta=v.meta,C=new b(null,{name:v.name,size:v.size,type:v.type}),u.call(this,c?F=v.getAsBinaryString():v.getAsDataURL())},getInfo:function(){var c=this.getRuntime(),e;return !D&&F&&c.can("access_image_binary")&&(D=new d(F)),e={width:t().width||0,height:t().height||0,type:C.type||p.getFileMime(C.name),size:F&&F.length||C.size||0,name:C.name||"",meta:D&&D.meta||this.meta||{}}},downsize:function(){q.apply(this,arguments)},getAsCanvas:function(){return H&&(H.id=this.uid+"_canvas"),H},getAsBlob:function(v,c){return v!==this.type&&q.call(this,this.width,this.height,!1),new b(null,{name:C.name||"",type:v,data:G.getAsBinaryString.call(this,v,c)})},getAsDataURL:function(v){var c=arguments[1]||90;if(!A){return B.src}if("image/jpeg"!==v){return H.toDataURL("image/png")}try{return H.toDataURL("image/jpeg",c/100)}catch(w){return H.toDataURL("image/jpeg")}},getAsBinaryString:function(w,v){if(!A){return F||(F=z(G.getAsDataURL(w,v))),F}if("image/jpeg"!==w){F=z(G.getAsDataURL(w,v))}else{var x;v||(v=90);try{x=H.toDataURL("image/jpeg",v/100)}catch(c){x=H.toDataURL("image/jpeg")}F=z(x),D&&(F=D.stripHeaders(F),o&&(D.meta&&D.meta.exif&&D.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),F=D.writeHeaders(F)),D.purge(),D=null)}return A=!1,F},destroy:function(){G=null,r.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return h.Image=j}),a6(a5,[aS,bc,ba,a7,a8],function(g,k,d,f,b){function c(){var i;try{i=navigator.plugins["Shockwave Flash"],i=i.description}catch(a){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(m){i="0.0"}}return i=i.match(/\d+/g),parseFloat(i[0]+"."+i[1])}function h(i){var m=this,e;i=g.extend({swf_url:k.swf_url},i),b.call(this,i,l,{access_binary:function(a){return a&&"browser"===m.mode},access_image_binary:function(a){return a&&"browser"===m.mode},display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===m.mode},resize_image:b.capTrue,return_response_headers:!1,return_response_type:function(a){return"json"===a&&window.JSON?!0:!g.arrayDiff(a,["","text","document"])||"browser"===m.mode},return_status_code:function(a){return"browser"===m.mode||!g.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:function(a){return a&&"browser"===m.mode},send_browser_cookies:function(a){return a&&"browser"===m.mode},send_custom_headers:function(a){return a&&"browser"===m.mode},send_multipart:b.capTrue,slice_blob:function(a){return a&&"browser"===m.mode},stream_upload:function(a){return a&&"browser"===m.mode},summon_file_dialog:!1,upload_filesize:function(a){return g.parseSizeStr(a)<=2097152||"client"===m.mode},use_http_method:function(a){return !g.arrayDiff(a,["GET","POST"])}},{access_binary:function(a){return a?"browser":"client"},access_image_binary:function(a){return a?"browser":"client"},report_upload_progress:function(a){return a?"browser":"client"},return_response_type:function(a){return g.arrayDiff(a,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(a){return g.arrayDiff(a,[200,404])?"browser":["client","browser"]},send_binary_string:function(a){return a?"browser":"client"},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"browser":"client"},stream_upload:function(a){return a?"client":"browser"},upload_filesize:function(a){return g.parseSizeStr(a)>=2097152?"client":"browser"}},"client"),c()<10&&(this.mode=!1),g.extend(this,{getShim:function(){return d.get(this.uid)},shimExec:function(o,a){var p=[].slice.call(arguments,2);return m.getShim().exec(this.uid,o,a,p)},init:function(){var q,a,p;p=this.getShimContainer(),g.extend(p.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),q='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf_url+'" ',"IE"===k.browser&&(q+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),q+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+k.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===k.browser?(a=document.createElement("div"),p.appendChild(a),a.outerHTML=q,a=p=null):p.innerHTML=q,e=setTimeout(function(){m&&!m.initialized&&m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},5000)},destroy:function(a){return function(){a.call(m),clearTimeout(e),i=e=a=m=null}}(this.destroy)},j)}var l="flash",j={};return b.addConstructor(l,h),j}),a6(ae,[a5,aO],function(b,a){var c={slice:function(g,j,d,f){var h=this.getRuntime();return 0>j?j=Math.max(g.size+j,0):j>0&&(j=Math.min(j,g.size)),0>d?d=Math.max(g.size+d,0):d>0&&(d=Math.min(d,g.size)),g=h.shimExec.call(this,"Blob","slice",j,d,f||""),g&&(g=new a(h.uid,g)),g}};return b.Blob=c}),a6(ad,[a5],function(b){var a={init:function(c){this.getRuntime().shimExec.call(this,"FileInput","init",{name:c.name,accept:c.accept,multiple:c.multiple}),this.trigger("ready")}};return b.FileInput=a}),a6(ab,[a5,a1],function(d,b){function f(g,h){switch(h){case"readAsText":return b.atob(g,"utf8");case"readAsBinaryString":return b.atob(g);case"readAsDataURL":return g}return null}var a="",c={read:function(i,g){var h=this,j=h.getRuntime();return"readAsDataURL"===i&&(a="data:"+(g.type||"")+";base64,"),h.bind("Progress",function(e,k){k&&(a+=f(k,i))}),j.shimExec.call(this,"FileReader","readAsBase64",g.uid)},getResult:function(){return a},destroy:function(){a=null}};return d.FileReader=c}),a6(aM,[a5,a1],function(c,b){function d(f,g){switch(g){case"readAsText":return b.atob(f,"utf8");case"readAsBinaryString":return b.atob(f);case"readAsDataURL":return f}return null}var a={read:function(j,g){var f,h=this.getRuntime();return(f=h.shimExec.call(this,"FileReaderSync","readAsBase64",g.uid))?("readAsDataURL"===j&&(f="data:"+(g.type||"")+";base64,"+f),d(f,j,g.type)):null}};return c.FileReaderSync=a}),a6(au,[a5,aS,aO,aQ,ag,aE,an],function(h,d,k,c,g,j,b){var f={send:function(p,n){function a(){p.transport=m.mode,m.shimExec.call(t,"XMLHttpRequest","send",p,n)}function w(l,i){m.shimExec.call(t,"XMLHttpRequest","appendBlob",l,i.uid),n=null,a()}function v(l,i){var r=new b;r.bind("TransportingComplete",function(){i(this.result)}),r.transport(l.getSource(),l.type,{ruid:m.uid})}var t=this,m=t.getRuntime();if(d.isEmptyObj(p.headers)||d.each(p.headers,function(l,i){m.shimExec.call(t,"XMLHttpRequest","setRequestHeader",i,l.toString())}),n instanceof j){var q;if(n.each(function(l,i){l instanceof k?q=i:m.shimExec.call(t,"XMLHttpRequest","append",i,l)}),n.hasBlob()){var o=n.getBlob();o.isDetached()?v(o,function(i){o.destroy(),w(q,i)}):w(q,o)}else{n=null,a()}}else{n instanceof k?n.isDetached()?v(n,function(i){n.destroy(),n=i.uid,a()}):(n=n.uid,a()):a()}},getResponse:function(l){var p,m,i=this.getRuntime();if(m=i.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(m=new c(i.uid,m),"blob"===l){return m}try{if(p=new g,~d.inArray(l,["","text"])){return p.readAsText(m)}if("json"===l&&window.JSON){return JSON.parse(p.readAsText(m))}}finally{m.destroy()}}return null},abort:function(i){var a=this.getRuntime();a.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return h.XMLHttpRequest=f}),a6(aa,[a5,aO],function(b,a){var c={getAsBlob:function(f){var g=this.getRuntime(),d=g.shimExec.call(this,"Transporter","getAsBlob",f);return d?new a(g.uid,d):null}};return b.Transporter=c}),a6(ar,[a5,aS,an,aO,ag],function(d,b,g,a,c){var f={loadFromBlob:function(l){function j(i){k.shimExec.call(h,"Image","loadFromBlob",i.uid),h=k=null}var h=this,k=h.getRuntime();if(l.isDetached()){var m=new g;m.bind("TransportingComplete",function(){j(m.result.getSource())}),m.transport(l.getSource(),l.type,{ruid:k.uid})}else{j(l.getSource())}},loadFromImage:function(i){var h=this.getRuntime();return h.shimExec.call(this,"Image","loadFromImage",i.uid)},getAsBlob:function(j,h){var k=this.getRuntime(),i=k.shimExec.call(this,"Image","getAsBlob",j,h);return i?new a(k.uid,i):null},getAsDataURL:function(){var i=this.getRuntime(),h=i.Image.getAsBlob.apply(this,arguments),j;return h?(j=new c,j.readAsDataURL(h)):null}};return d.Image=f}),a6(al,[aS,bc,ba,a7,a8],function(g,k,d,f,b){function c(x){var C=!1,q=null,w,m,p,A,D,B=0;try{try{q=new ActiveXObject("AgControl.AgControl"),q.IsVersionSupported(x)&&(C=!0),q=null}catch(z){var v=navigator.plugins["Silverlight Plug-In"];if(v){for(w=v.description,"1.0.30226.2"===w&&(w="2.0.30226.2"),m=w.split(".");m.length>3;){m.pop()}for(;m.length<4;){m.push(0)}for(p=x.split(".");p.length>4;){p.pop()}do{A=parseInt(p[B],10),D=parseInt(m[B],10),B++}while(B<p.length&&A===D);D>=A&&!isNaN(A)&&(C=!0)}}}catch(y){C=!1}return C}function h(i){var m=this,e;i=g.extend({xap_url:k.xap_url},i),b.call(this,i,l,{access_binary:b.capTrue,access_image_binary:b.capTrue,display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:b.capTrue,resize_image:b.capTrue,return_response_headers:function(a){return a&&"client"===m.mode},return_response_type:function(a){return"json"!==a?!0:!!window.JSON},return_status_code:function(a){return"client"===m.mode||!g.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:b.capTrue,send_browser_cookies:function(a){return a&&"browser"===m.mode},send_custom_headers:function(a){return a&&"client"===m.mode},send_multipart:b.capTrue,slice_blob:b.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:b.capTrue,use_http_method:function(a){return"client"===m.mode||!g.arrayDiff(a,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"},return_status_code:function(a){return g.arrayDiff(a,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(a){return g.arrayDiff(a,["GET","POST"])?"client":["client","browser"]}}),c("2.0.31005.0")&&"Opera"!==k.browser||(this.mode=!1),g.extend(this,{getShim:function(){return d.get(this.uid).content.Moxie},shimExec:function(o,a){var p=[].slice.call(arguments,2);return m.getShim().exec(this.uid,o,a,p)},init:function(){var a;a=this.getShimContainer(),a.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+i.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+k.global_event_dispatcher+'"/></object>',e=setTimeout(function(){m&&!m.initialized&&m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},"Windows"!==k.OS?10000:5000)},destroy:function(a){return function(){a.call(m),clearTimeout(e),i=e=a=m=null}}(this.destroy)},j)}var l="silverlight",j={};return b.addConstructor(l,h),j}),a6(aX,[al,aS,ae],function(b,a,c){return b.Blob=a.extend({},c)}),a6(a9,[al],function(b){var a={init:function(d){function c(g){for(var f="",h=0;h<g.length;h++){f+=(""!==f?"|":"")+g[h].title+" | *."+g[h].extensions.replace(/,/g,";*.")}return f}this.getRuntime().shimExec.call(this,"FileInput","init",c(d.accept),d.name,d.multiple),this.trigger("ready")}};return b.FileInput=a}),a6(a4,[al,ba,aq],function(c,b,d){var a={init:function(){var h=this,f=h.getRuntime(),g;return g=f.getShimContainer(),d.addEvent(g,"dragover",function(i){i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="copy"},h.uid),d.addEvent(g,"dragenter",function(i){i.preventDefault();var j=b.get(f.uid).dragEnter(i);j&&i.stopPropagation()},h.uid),d.addEvent(g,"drop",function(i){i.preventDefault();var j=b.get(f.uid).dragDrop(i);j&&i.stopPropagation()},h.uid),f.shimExec.call(this,"FileDrop","init")}};return c.FileDrop=a}),a6(aH,[al,aS,ab],function(b,a,c){return b.FileReader=a.extend({},c)}),a6(aK,[al,aS,aM],function(b,a,c){return b.FileReaderSync=a.extend({},c)}),a6(aJ,[al,aS,au],function(b,a,c){return b.XMLHttpRequest=a.extend({},c)}),a6(ah,[al,aS,aa],function(b,a,c){return b.Transporter=a.extend({},c)}),a6(ax,[al,aS,ar],function(b,a,c){return b.Image=a.extend({},c,{getInfo:function(){var g=this.getRuntime(),h=["tiff","exif","gps"],d={meta:{}},f=g.shimExec.call(this,"Image","getInfo");return f.meta&&a.each(h,function(l){var j=f.meta[l],p,m,i,k;if(j&&j.keys){for(d.meta[l]={},m=0,i=j.keys.length;i>m;m++){p=j.keys[m],k=j[p],k&&(/^(\d|[1-9]\d+)$/.test(k)?k=parseInt(k,10):/^\d*\.\d+$/.test(k)&&(k=parseFloat(k)),d.meta[l][p]=k)}}}),d.width=parseInt(f.width,10),d.height=parseInt(f.height,10),d.size=parseInt(f.size,10),d.type=f.type,d.name=f.name,d}})}),a6(aL,[aS,a7,a8,bc],function(g,d,j,c){function f(e){var k=this,i=j.capTest,a=j.capTrue;j.call(this,e,h,{access_binary:i(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:i(b.Image&&(c.can("create_canvas")||c.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),resize_image:function(){return b.Image&&k.can("access_binary")&&c.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(l){return"json"===l&&window.JSON?!0:!!~g.inArray(l,["text","document",""])},return_status_code:function(l){return !g.arrayDiff(l,[200,404])},select_file:function(){return c.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return k.can("select_file")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||!!~g.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a,use_http_method:function(l){return !g.arrayDiff(l,["GET","POST"])}}),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(l){return function(){l.call(k),l=k=null}}(this.destroy)}),g.extend(this.getShim(),b)}var h="html4",b={};return j.addConstructor(h,f),b}),a6(aF,[aL,aS,ba,aq,a2,bc],function(g,d,j,c,f,h){function b(){function m(){var s=this,e=s.getRuntime(),v,t,o,u,a,q;q=d.guid("uid_"),v=e.getShimContainer(),i&&(o=j.get(i+"_form"),o&&d.extend(o.style,{top:"100%"})),u=document.createElement("form"),u.setAttribute("id",q+"_form"),u.setAttribute("method","post"),u.setAttribute("enctype","multipart/form-data"),u.setAttribute("encoding","multipart/form-data"),d.extend(u.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),a=document.createElement("input"),a.setAttribute("id",q),a.setAttribute("type","file"),a.setAttribute("name",n.name||"Filedata"),a.setAttribute("accept",k.join(",")),d.extend(a.style,{fontSize:"999px",opacity:0}),u.appendChild(a),v.appendChild(u),d.extend(a.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===h.browser&&h.version<10&&d.extend(a.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),a.onchange=function(){var r;this.value&&(r=this.files?this.files[0]:{name:this.value},l=[r],this.onchange=function(){},m.call(s),s.bind("change",function p(){var x=j.get(q),w=j.get(q+"_form"),y;s.unbind("change",p),s.files.length&&x&&w&&(y=s.files[0],x.setAttribute("id",y.uid),w.setAttribute("id",y.uid+"_form"),w.setAttribute("target",y.uid+"_iframe")),x=w=null},998),a=u=null,s.trigger("change"))},e.can("summon_file_dialog")&&(t=j.get(n.browse_button),c.removeEvent(t,"click",s.uid),c.addEvent(t,"click",function(p){a&&!a.disabled&&a.click(),p.preventDefault()},s.uid)),i=q,v=o=t=null}var i,l=[],k=[],n;d.extend(this,{init:function(p){var r=this,e=r.getRuntime(),q;n=p,k=p.accept.mimes||f.extList2mimes(p.accept,e.can("filter_by_extension")),q=e.getShimContainer(),function(){var s,o,a;s=j.get(p.browse_button),e.can("summon_file_dialog")&&("static"===j.getStyle(s,"position")&&(s.style.position="relative"),o=parseInt(j.getStyle(s,"z-index"),10)||1,s.style.zIndex=o,q.style.zIndex=o-1),a=e.can("summon_file_dialog")?s:q,c.addEvent(a,"mouseover",function(){r.trigger("mouseenter")},r.uid),c.addEvent(a,"mouseout",function(){r.trigger("mouseleave")},r.uid),c.addEvent(a,"mousedown",function(){r.trigger("mousedown")},r.uid),c.addEvent(j.get(p.container),"mouseup",function(){r.trigger("mouseup")},r.uid),s=null}(),m.call(this),q=null,r.trigger({type:"ready",async:!0})},getFiles:function(){return l},disable:function(o){var a;(a=j.get(i))&&(a.disabled=!!o)},destroy:function(){var p=this.getRuntime(),a=p.getShim(),o=p.getShimContainer();c.removeAllEvents(o,this.uid),c.removeAllEvents(n&&j.get(n.container),this.uid),c.removeAllEvents(n&&j.get(n.browse_button),this.uid),o&&(o.innerHTML=""),a.removeInstance(this.uid),i=l=k=n=o=a=null}})}return g.FileInput=b}),a6(aI,[aL,az],function(b,a){return b.FileReader=a}),a6(ak,[aL,aS,ba,aj,a7,aq,aO,aE],function(g,k,d,f,b,c,h,l){function j(){function m(y){var v=this,q,x,o,w,p=!1;if(a){if(q=a.id.replace(/_iframe$/,""),x=d.get(q+"_form")){for(o=x.getElementsByTagName("input"),w=o.length;w--;){switch(o[w].getAttribute("type")){case"hidden":o[w].parentNode.removeChild(o[w]);break;case"file":p=!0}}o=[],p||x.parentNode.removeChild(x),x=null}setTimeout(function(){c.removeEvent(a,"load",v.uid),a.parentNode&&a.parentNode.removeChild(a);var e=v.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=a=null,y()},1)}}var i,n,a;k.extend(this,{send:function(t,s){function q(){var v=o.getShimContainer()||document.body,p=document.createElement("div");p.innerHTML='<iframe id="'+r+'_iframe" name="'+r+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',a=p.firstChild,v.appendChild(a),c.addEvent(a,"load",function(){var y;try{y=a.contentWindow.document||a.contentDocument||window.frames[a.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(y.title)?i=y.title.replace(/^(\d+).*$/,"$1"):(i=200,n=k.trim(y.body.innerHTML),e.trigger({type:"progress",loaded:n.length,total:n.length}),x&&e.trigger({type:"uploadprogress",loaded:x.size||1025,total:x.size||1025}))}catch(w){if(!f.hasSameOrigin(t.url)){return void m.call(e,function(){e.trigger("error")})}i=404}m.call(e,function(){e.trigger("load")})},e.uid)}var e=this,o=e.getRuntime(),r,z,u,x;if(i=n=null,s instanceof l&&s.hasBlob()){if(x=s.getBlob(),r=x.uid,u=d.get(r),z=d.get(r+"_form"),!z){throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}}else{r=k.guid("uid_"),z=document.createElement("form"),z.setAttribute("id",r+"_form"),z.setAttribute("method",t.method),z.setAttribute("enctype","multipart/form-data"),z.setAttribute("encoding","multipart/form-data"),z.setAttribute("target",r+"_iframe"),o.getShimContainer().appendChild(z)}s instanceof l&&s.each(function(v,w){if(v instanceof h){u&&u.setAttribute("name",w)}else{var p=document.createElement("input");k.extend(p,{type:"hidden",name:w,value:v}),u?z.insertBefore(p,u):z.appendChild(p)}}),z.setAttribute("action",t.url),q(),z.submit(),e.trigger("loadstart")},getStatus:function(){return i},getResponse:function(o){if("json"===o&&"string"===k.typeOf(n)&&window.JSON){try{return JSON.parse(n.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(p){return null}}return n},abort:function(){var e=this;a&&a.contentWindow&&(a.contentWindow.stop?a.contentWindow.stop():a.contentWindow.document.execCommand?a.contentWindow.document.execCommand("Stop"):a.src="about:blank"),m.call(this,function(){e.dispatchEvent("abort")})}})}return g.XMLHttpRequest=j}),a6(aG,[aL,ac],function(b,a){return b.Image=a}),bf([aS,bd,a2,bc,ba,a7,aY,a1,a8,aR,aO,aQ,aA,bg,aP,be,aj,ag,aE,ai,an,av,aq])}(this);(function(c){var a={},d=c.moxie.core.utils.Basic.inArray;return function b(h){var f,g;for(f in h){g=typeof h[f],g==="object"&&!~d(f,["Exceptions","Env","Mime"])?b(h[f]):g==="function"&&(a[f]=h[f])}}(c.moxie),a.Env=c.moxie.core.utils.Env,a.Mime=c.moxie.core.utils.Mime,a.Exceptions=c.moxie.core.Exceptions,c.mOxie=a,c.o||(c.o=a),a})(this);(function(f,b,h){function c(k){function j(p,n,o){var m={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};m[p]?l[m[p]]=n:o||(l[p]=n)}var i=k.required_features,l={};if(typeof i=="string"){g.each(i.split(/\s*,\s*/),function(m){j(m,!0)})}else{if(typeof i=="object"){g.each(i,function(n,m){j(m,n)})}else{if(i===!0){k.chunk_size>0&&(l.slice_blob=!0);if(k.resize.enabled||!k.multipart){l.send_binary_string=!0}g.each(k,function(n,m){j(m,!!n,!0)})}}}return l}var d=f.setTimeout,a={},g={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,get:function(l){var k=[],e;b.typeOf(l)!=="array"&&(l=[l]);var j=l.length;while(j--){e=b.get(l[j]),e&&k.push(e)}return k.length?k:null},each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(j){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},k=/[<>&\"\']/g;return j?(""+j).replace(k,function(l){return i[l]?"&"+i[l]+";":l}):j},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(j){var i,k;k=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(i=0;i<k.length;i+=2){j=j.replace(k[i],k[i+1])}return j=j.replace(/\s+/g,"_"),j=j.replace(/[^a-z0-9_\-\.]+/gi,""),j},buildUrl:function(j,i){var k="";return g.each(i,function(m,l){k+=(k?"&":"")+encodeURIComponent(l)+"="+encodeURIComponent(m)}),k&&(j+=(j.indexOf("?")>0?"&":"?")+k),j},formatSize:function(k){function i(m,l){return Math.round(m*Math.pow(10,l))/Math.pow(10,l)}if(k===h||/\D/.test(k)){return g.translate("N/A")}var j=Math.pow(1024,4);return k>j?i(k/j,1)+" "+g.translate("tb"):k>(j/=1024)?i(k/j,1)+" "+g.translate("gb"):k>(j/=1024)?i(k/j,1)+" "+g.translate("mb"):k>1024?Math.round(k/1024)+" "+g.translate("kb"):k+" "+g.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(l,m){var k,j;return k=new g.Uploader(l),j=b.Runtime.thatCan(k.getOption().required_features,m||l.runtimes),k.destroy(),j},addFileFilter:function(j,i){a[j]=i}};g.addFileFilter("mime_types",function(j,i,k){j.length&&!j.regexp.test(i.name)?(this.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:i}),k(!1)):k(!0)}),g.addFileFilter("max_file_size",function(k,i,l){var j;k=g.parseSize(k),i.size!==j&&k&&i.size>k?(this.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:i}),l(!1)):l(!0)}),g.addFileFilter("prevent_duplicates",function(k,i,l){if(k){var j=this.files.length;while(j--){if(i.name===this.files[j].name&&i.size===this.files[j].size){this.trigger("Error",{code:g.FILE_DUPLICATE_ERROR,message:g.translate("Duplicate file error."),file:i}),l(!1);return}}}l(!0)}),g.Uploader=function(X){function V(){var l,k=0,m;if(this.state==g.STARTED){for(m=0;m<W.length;m++){!l&&W[m].status==g.QUEUED?(l=W[m],this.trigger("BeforeUpload",l)&&(l.status=g.UPLOADING,this.trigger("UploadFile",l))):k++}k==W.length&&(this.state!==g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",W))}}function s(k){k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):100,aa()}function aa(){var l,k;Y.reset();for(l=0;l<W.length;l++){k=W[l],k.size!==h?(Y.size+=k.origSize,Y.loaded+=k.loaded*k.origSize/k.size):Y.size=h,k.status==g.DONE?Y.uploaded++:k.status==g.FAILED?Y.failed++:Y.queued++}Y.size===h?Y.percent=W.length>0?Math.ceil(Y.uploaded/W.length*100):0:(Y.bytesPerSec=Math.ceil(Y.loaded/((+(new Date)-J||1)/1000)),Y.percent=Y.size>0?Math.ceil(Y.loaded/Y.size*100):0)}function z(){var k=Z[0]||U[0];return k?k.getRuntime().uid:!1}function G(l,m){if(l.ruid){var k=b.Runtime.getInfo(l.ruid);if(k){return k.can(m)}}return !1}function j(){this.bind("FilesAdded FilesRemoved",function(k){k.trigger("QueueChanged"),k.refresh()}),this.bind("CancelUpload",n),this.bind("BeforeUpload",I),this.bind("UploadFile",R),this.bind("UploadProgress",r),this.bind("StateChanged",K),this.bind("QueueChanged",aa),this.bind("Error",ac),this.bind("FileUploaded",q),this.bind("Destroy",H)}function t(v,w){var p=this,l=0,m=[],k={runtime_order:v.runtimes,required_caps:v.required_features,preferred_caps:Q,swf_url:v.flash_swf_url,xap_url:v.silverlight_xap_url};g.each(v.runtimes.split(/\s*,\s*/),function(e){v[e]&&(k[e]=v[e])}),v.browse_button&&g.each(v.browse_button,function(e){m.push(function(x){var u=new b.FileInput(g.extend({},k,{accept:v.filters.mime_types,name:v.file_data_name,multiple:v.multi_selection,container:v.container,browse_button:e}));u.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),multi_selection:y.can("select_multiple")}),l++,Z.push(this),x()},u.onchange=function(){p.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(y){B||(v.browse_button_hover&&("mouseenter"===y.type?b.addClass(e,v.browse_button_hover):"mouseleave"===y.type&&b.removeClass(e,v.browse_button_hover)),v.browse_button_active&&("mousedown"===y.type?b.addClass(e,v.browse_button_active):"mouseup"===y.type&&b.removeClass(e,v.browse_button_active)))}),u.bind("mousedown",function(){p.trigger("Browse")}),u.bind("error runtimeerror",function(){u=null,x()}),u.init()})}),v.drop_element&&g.each(v.drop_element,function(u){m.push(function(x){var e=new b.FileDrop(g.extend({},k,{drop_zone:u}));e.onready=function(){var y=b.Runtime.getInfo(this.ruid);p.features.dragdrop=y.can("drag_and_drop"),l++,U.push(this),x()},e.ondrop=function(){p.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,x()}),e.init()})}),b.inSeries(m,function(){typeof w=="function"&&w(l)})}function i(p,m,k){var l=new b.Image;try{l.onload=function(){if(m.width>this.width&&m.height>this.height&&m.quality===h&&m.preserve_headers&&!m.crop){return this.destroy(),k(p)}l.downsize(m.width,m.height,m.crop,m.preserve_headers)},l.onresize=function(){k(this.getAsBlob(p.type,m.quality)),this.destroy()},l.onerror=function(){k(p)},l.load(p)}catch(u){k(p)}}function o(v,w,m){function p(y,u,A){var x=ab[y];switch(y){case"max_file_size":y==="max_file_size"&&(ab.max_file_size=ab.filters.max_file_size=u);break;case"chunk_size":if(u=g.parseSize(u)){ab[y]=u,ab.send_file_name=!0}break;case"multipart":ab[y]=u,u||(ab.send_file_name=!0);break;case"unique_names":ab[y]=u,u&&(ab.send_file_name=!0);break;case"filters":g.typeOf(u)==="array"&&(u={mime_types:u}),A?g.extend(ab.filters,u):ab.filters=u,u.mime_types&&(ab.filters.mime_types.regexp=function(D){var C=[];return g.each(D,function(E){g.each(E.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?C.push("\\.*"):C.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+C.join("|")+")$","i")}(ab.filters.mime_types));break;case"resize":A?g.extend(ab.resize,u,{enabled:!0}):ab.resize=u;break;case"prevent_duplicates":ab.prevent_duplicates=ab.filters.prevent_duplicates=!!u;break;case"browse_button":case"drop_element":u=g.get(u);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":ab[y]=u,A||(k=!0);break;default:ab[y]=u}A||l.trigger("OptionChanged",y,u,x)}var l=this,k=!1;typeof v=="object"?g.each(v,function(x,u){p(u,x,m)}):p(v,w,m),m?(ab.required_features=c(g.extend({},ab)),Q=c(g.extend({},ab,{required_features:!0}))):k&&(l.trigger("Destroy"),t.call(l,ab,function(u){u?(l.runtime=b.Runtime.getInfo(z()).type,l.trigger("Init",{runtime:l.runtime}),l.trigger("PostInit")):l.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}))}function I(m,k){if(m.settings.unique_names){var p=k.name.match(/\.([^.]+)$/),l="part";p&&(l=p[1]),k.target_name=k.id+"."+l}}function R(x,l){function v(){C-->0?d(k,1000):(l.loaded=w,x.trigger("Error",{code:g.HTTP_ERROR,message:g.translate("HTTP Error."),file:l,response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()}))}function k(){var u,e,p={},E;if(l.status!==g.UPLOADING||x.state===g.STOPPED){return}x.settings.send_file_name&&(p.name=l.target_name||l.name),D&&A.chunks&&y.size>D?(E=Math.min(D,y.size-w),u=y.slice(w,w+E)):(E=y.size,u=y),D&&A.chunks&&(x.settings.send_chunk_number?(p.chunk=Math.ceil(w/D),p.chunks=Math.ceil(y.size/D)):(p.offset=w,p.total=y.size)),P=new b.XMLHttpRequest,P.upload&&(P.upload.onprogress=function(L){l.loaded=Math.min(l.size,w+L.loaded),x.trigger("UploadProgress",l)}),P.onload=function(){if(P.status>=400){v();return}C=x.settings.max_retries,E<y.size?(u.destroy(),w+=E,l.loaded=Math.min(w,y.size),x.trigger("ChunkUploaded",l,{offset:l.loaded,total:y.size,response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&x.trigger("UploadProgress",l)):l.loaded=l.size,u=e=null,!w||w>=y.size?(l.size!=l.origSize&&(y.destroy(),y=null),x.trigger("UploadProgress",l),l.status=g.DONE,x.trigger("FileUploaded",l,{response:P.responseText,status:P.status,responseHeaders:P.getAllResponseHeaders()})):d(k,1)},P.onerror=function(){v()},P.onloadend=function(){this.destroy(),P=null},x.settings.multipart&&A.multipart?(P.open("post",m,!0),g.each(x.settings.headers,function(M,L){P.setRequestHeader(L,M)}),e=new b.FormData,g.each(g.extend(p,x.settings.multipart_params),function(M,L){e.append(L,M)}),e.append(x.settings.file_data_name,u),P.send(e,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:Q,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url})):(m=g.buildUrl(x.settings.url,g.extend(p,x.settings.multipart_params)),P.open("post",m,!0),P.setRequestHeader("Content-Type","application/octet-stream"),g.each(x.settings.headers,function(M,L){P.setRequestHeader(L,M)}),P.send(u,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:Q,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url}))}var m=x.settings.url,D=x.settings.chunk_size,C=x.settings.max_retries,A=x.features,w=0,y;l.loaded&&(w=l.loaded=D?D*Math.floor(l.loaded/D):0),y=l.getSource(),x.settings.resize.enabled&&G(y,"send_binary_string")&&!!~b.inArray(y.type,["image/jpeg","image/png"])?i.call(this,y,x.settings.resize,function(p){y=p,l.size=p.size,k()}):k()}function r(l,k){s(k)}function K(l){if(l.state==g.STARTED){J=+(new Date)}else{if(l.state==g.STOPPED){for(var k=l.files.length-1;k>=0;k--){l.files[k].status==g.UPLOADING&&(l.files[k].status=g.QUEUED,aa())}}}}function n(){P&&P.abort()}function q(k){aa(),d(function(){V.call(k)},1)}function ac(l,k){k.code===g.INIT_ERROR?l.destroy():k.file&&(k.file.status=g.FAILED,s(k.file),l.state==g.STARTED&&(l.trigger("CancelUpload"),d(function(){V.call(l)},1)))}function H(k){k.stop(),g.each(W,function(l){l.destroy()}),W=[],Z.length&&(g.each(Z,function(l){l.destroy()}),Z=[]),U.length&&(g.each(U,function(l){l.destroy()}),U=[]),Q={},B=!1,J=P=null,Y.reset()}var F=g.guid(),ab,W=[],Q={},Z=[],U=[],J,Y,B=!1,P;ab={runtimes:b.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},o.call(this,X,null,!0),Y=new g.QueueProgress,g.extend(this,{id:F,uid:F,state:g.STOPPED,features:{},runtime:null,files:W,settings:ab,total:Y,init:function(){var k=this;typeof ab.preinit=="function"?ab.preinit(k):g.each(ab.preinit,function(e,l){k.bind(l,e)}),j.call(this);if(!ab.browse_button||!ab.url){this.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")});return}t.call(this,ab,function(e){typeof ab.init=="function"?ab.init(k):g.each(ab.init,function(l,m){k.bind(m,l)}),e?(k.runtime=b.Runtime.getInfo(z()).type,k.trigger("Init",{runtime:k.runtime}),k.trigger("PostInit")):k.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})})},setOption:function(l,k){o.call(this,l,k,!this.runtime)},getOption:function(k){return k?ab[k]:ab},refresh:function(){Z.length&&g.each(Z,function(k){k.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),V.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){B=arguments[0]!==h?arguments[0]:!0,Z.length&&g.each(Z,function(k){k.disable(B)}),this.trigger("DisableBrowse",B)},getFile:function(l){var k;for(k=W.length-1;k>=0;k--){if(W[k].id===l){return W[k]}}},addFile:function(x,A){function y(u,C){var l=[];b.each(v.settings.filters,function(e,D){a[D]&&l.push(function(E){a[D].call(v,e,u,function(L){E(!L)})})}),b.inSeries(l,C)}function w(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!k){return !1}u.ruid=k,u.connectRuntime(k)}w(new g.File(u))}else{u instanceof b.Blob?(w(u.getSource()),u.destroy()):u instanceof g.File?(A&&(u.name=A),p.push(function(e){y(u,function(C){C||(W.push(u),m.push(u),v.trigger("FileFiltered",u)),d(e,1)})})):b.inArray(l,["file","blob"])!==-1?w(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,w):l==="array"&&(A=null,b.each(u,w))}}var v=this,p=[],m=[],k;k=z(),w(x),p.length&&b.inSeries(p,function(){m.length&&v.trigger("FilesAdded",m)})},removeFile:function(l){var k=typeof l=="string"?l:l.id;for(var m=W.length-1;m>=0;m--){if(W[m].id===k){return this.splice(m,1)[0]}}},splice:function(p,l){var m=W.splice(p===h?0:p,l===h?W.length:l),k=!1;return this.state==g.STARTED&&(g.each(m,function(u){if(u.status===g.UPLOADING){return k=!0,!1}}),k&&this.stop()),this.trigger("FilesRemoved",m),g.each(m,function(u){u.destroy()}),k&&this.start(),m},bind:function(m,k,p){var l=this;g.Uploader.prototype.bind.call(this,m,function(){var u=[].slice.call(arguments);return u.splice(0,1,l),k.apply(this,u)},0,p)},destroy:function(){this.trigger("Destroy"),ab=Y=null,this.unbindAll()}})},g.Uploader.prototype=b.EventTarget.instance,g.File=function(){function j(e){g.extend(this,{id:g.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:g.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var k=this.getSource().getSource();return b.inArray(b.typeOf(k),["blob","file"])!==-1?k:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var k=this.getSource();k&&(k.destroy(),delete i[this.id])}}),i[this.id]=e}var i={};return j}(),g.QueueProgress=function(){var i=this;i.size=0,i.loaded=0,i.uploaded=0,i.failed=0,i.queued=0,i.percent=0,i.bytesPerSec=0,i.reset=function(){i.size=i.loaded=i.uploaded=i.failed=i.queued=i.percent=i.bytesPerSec=0}},f.plupload=g})(window,mOxie);(function(C){var P={timeoutDelay:500,appendClasses:false,keystrokeDelay:200,slideDuration:300,buttonHtml:true,showGroupHeaders:true,scrollbar:false,scrollbarOptions:{},autoHide:true,dropUp:false,showHide:false,bottomOffset:"0px",fullSize:false,autoAppendGroupTitle:false,disableOnTouch:false,disableScrollbarOnTouch:false,autoAppendGroupSeparator:" - ",wrapperClass:"pph-dropdown",wrapperHookClass:"pph-dropdown-wrapper",selectClass:"pph-dropdown-select",labelClass:"pph-dropdown-label",labelTitleClass:"pph-dropdown-title",labelButtonClass:"pph-dropdown-button",listContainerClass:"pph-dropdown-list",additionalListItemClass:"",elementSelected:"pph-dropdown-selected",additionalWrapperClass:"",fullSizeWrapperClass:"pph-dropdown-fullsize",listLinkClass:"",ajaxLoadMore:false};var h="PPHD-list";var Q="PPHD-select-";var f="PPHD-item";var p="PPHD-group";var J="PPHD-group-";var s="current";var x="last";var y="hoverable";var N;var O;var l="";var K="click.pph-dropdown";var e="keydown.pph-dropdown";var z="keydown.pph-dropdown-list";var k="change.pph-dropdown";var A;var u;var o;var I=10;var M={38:function(W){var S=W.find("option");var V=S.filter("option:selected");var T=S.index(V);if(T!=0){var U=W.find(S.get(T-1));W.val(U.val()).change()}},40:function(W){var S=W.find("option");var V=S.filter("option:selected");var T=S.index(V);if(T!=(S.length-1)){var U=W.find(S.get(T+1));W.val(U.val()).change()}},37:function(S){M[38](S)},39:function(S){M[40](S)},36:function(T){var S=T.find("option:first-child");T.val(S.val()).change()},35:function(T){var S=T.find("option").last();T.val(S.val()).change()},33:function(W){var S=W.find("option");var V=S.filter("option:selected");var T=S.index(V);if(T>I){var U=W.find(S.get(T-I));W.val(U.val()).change()}else{M[36](W)}},34:function(W){var S=W.find("option");var V=S.filter("option:selected");var T=S.index(V);if(T<(S.length-I)){var U=W.find(S.get(T+I));W.val(U.val()).change()}else{M[35](W)}},27:function(S){G();i(C("."+h+":visible"))},13:function(S){M[27](S)},32:function(S){M[27](S)}};var D={init:function(S){u=C.extend({},P,S);if(u.disableOnTouch&&E()){return}if(u.scrollbar&&u.disableScrollbarOnTouch&&E()){u.scrollbar=false}return this.each(function(V,X){var Y=C(this);if(typeof Y.attr("id")!="undefined"){V=Y.attr("id")}var Z=Q+V;if(C("."+u.wrapperHookClass+"."+Z).length!=0){C("."+u.wrapperHookClass+"."+Z).remove()}var U=F(Y,Z),T=Y.attr("class");var W=r(Y,Z,V,S);var aa=d(Z);if(u.additionalWrapperClass.length!=0){aa.addClass(u.additionalWrapperClass)}else{aa.addClass(C(this).attr("class"))}aa.append(U).append(W);a(W,W.find("ul li.current"));Y.addClass(Z).addClass(u.selectClass).after(aa).hide().off(k).on(k,b);if(T!==undefined&&T.length>0){if(u.appendClasses){aa.addClass(T)}}if(u.scrollbar){n(aa)}W.data("settings",u);if(u.dropUp){W.hide()}else{W.css({top:o}).hide()}if(u.fullSize){W.addClass(u.fullSizeWrapperClass);W.find("li").addClass("boxmodelfix").css({minWidth:U.width()+"px"});if(u.scrollbar){W.find(".tiny-scroll-overview").css({position:"relative"})}}})},getRelatedSelect:function(T){var S=T.closest("."+h).data("related-select");return C("."+S)},update:function(){b({},this)}};function n(T){var S=T.find("div."+h);if(typeof C.fn.tinyscrollbar=="function"){S.tinyscrollbar(u.scrollbarOptions).data("scrollbar",true)}}function d(S){return C("<div></div>").css({position:"relative"}).addClass(u.wrapperClass).addClass(u.wrapperHookClass).addClass(S).addClass("clearfix")}function F(T,Y){var S=C("<div></div>").addClass(u.labelClass).addClass("clearfix");var W=T.find("option:selected").text(),X=T.find("option:selected").parent("optgroup[label]");if(u.autoAppendGroupTitle&&X.length){W=X.attr("label")+u.autoAppendGroupSeparator+W}var Z=C("<div></div>").addClass(u.labelTitleClass).html(W);if(typeof u.buttonHtml=="boolean"&&u.buttonHtml){var U=C('<div><span class="fa fa-caret-down"></span></div>');U.addClass(u.labelButtonClass);S.append(Z).append(U)}else{if(typeof u.buttonHtml=="string"&&C(u.buttonHtml.length)!=0){var U=C(u.buttonHtml);U.addClass(u.labelButtonClass).addClass("right");S.append(Z).append(U)}else{S.append(Z)}}if(typeof Y!="undefined"){S.addClass(Y).data("related-select",Y)}var V;if(typeof T.attr("tabindex")=="undefined"){V=0}else{V=T.attr("tabindex")}S.attr("tabindex",V);S.on("click",function(){c(C(this))});S.on(z,function(aa){if(!C(this).parent().find("."+u.listContainerClass).is(":visible")&&C.inArray((aa.keyCode),[38,40,37,39,33,34])!=(-1)){aa.preventDefault();c(C(this))}});S.on("blur",v);S.on("mouseover",j);S.on("mouseout",v);return S}function r(V,Z,Y,aa){o=V.css("top");var X={position:"absolute","z-index":1};if(u.dropUp){X.bottom=u.bottomOffset}else{X.top="-3000px"}var S=C("<div></div>").addClass(u.listContainerClass).addClass(h).data("select",Y).css(X);var T=C("<ul></ul>");if(typeof Z!="undefined"){S.addClass(Z).data("related-select",Z)}T=R(T,V,V.val());T.children().last().addClass(x);if(typeof aa!="undefined"&&typeof aa.ajaxLoadMore!="undefined"&&aa.ajaxLoadMore){var W=Q+"load-all-jobs";var U=g(W,aa.ajaxLoadMore.label,null,"action-load-all-jobs");U.removeClass(f);T.append(U);U.on("click",function(){if(aa.ajaxLoadMore.beforeClickCallback){aa.ajaxLoadMore.beforeClickCallback()}C.ajax({url:aa.ajaxLoadMore.url,data:aa.ajaxLoadMore.data,type:"GET",dataType:"json",success:function(ab){if(aa.ajaxLoadMore.callback){aa.ajaxLoadMore.callback(ab)}return true}})})}S.append(T).on("mouseout",v).on("mouseover",j);return S}function R(T,S,V,U){if(typeof U=="undefined"){U=""}S.children().each(function(Y,W){var ac=C(W);var ab=Q+B(ac.attr("value"));var aa=B(V);var X=(aa.indexOf(Q)>=0)?aa:Q+aa;var Z={};jQuery.each(ac.get(0).attributes,function(ae,ad){Z[ad.nodeName]=ad.nodeValue});if(ac.is("option")){ac.addClass(ab).attr("rel",ab);T.append(g(ab,ac.text(),X,U,Z))}else{if(ac.is("optgroup")){U=J+B(ac.attr("label"));if(u.showGroupHeaders){T.append(q(ac.attr("label"),U))}T=R(T,ac,X,U)}}});return T}String.prototype.replaceAll=function(T,S,U){if(typeof T=="undefined"||typeof S=="undefined"){return T}return this.replace(new RegExp(T.replace(/([\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,function(V){return"\\"+V}),"g"+(U?"i":"")),S)};function B(T){if(typeof T=="undefined"||T==null){return""}var S="-";return T.replaceAll(" ",S).replaceAll(",",S).replaceAll(".",S).replaceAll("_",S).replaceAll("/",S).replaceAll("*",S).replaceAll("+",S).replaceAll("@",S).replaceAll("&",S).replaceAll("(","").replaceAll(")","").replaceAll("<","").replaceAll(">","").replaceAll('"',"").replaceAll("'","").replaceAll("?","").replaceAll(S+S,S)}function g(Y,X,W,V,U){var T=C("<a></a>").attr({href:"#",tabIndex:-1,rel:Y}).addClass(u.additionalListItemClass).addClass(u.listLinkClass).html(X).on(K,H);if(typeof V!="undefined"){T.addClass(V)}var S=C("<li></li>").addClass(Y).addClass(f).addClass("hoverable");if(U){jQuery.each(U,function(Z,aa){S.attr(Z,aa)})}S.append(T);if(typeof W!="undefined"&&Y==W){S.addClass(s)}return S}function q(U,T){var S=C("<li></li>").addClass(p).append(U);if(typeof T!="undefined"){S.addClass(T)}return S}function v(){var S=C(this);if(!S.hasClass(u.listContainerClass)){S=S.parent().find("."+u.listContainerClass)}if(u.autoHide){N=setTimeout(function(){i(S)},u.timeoutDelay)}}function G(){C("."+u.selectClass).blur();C(document).off(e)}function i(T){if(T.length>0){var S=T.data("settings");var V=T.closest("."+u.wrapperHookClass);var U=V.find("."+u.listContainerClass);V.removeClass(u.elementSelected);if(S&&S.showHide){U.stop(false,true).hide()}else{U.stop(false,true).slideUp(u.slideDuration)}C(document).off(e)}}function j(){clearTimeout(N)}function c(U){if(C("select."+U.data("related-select")).prop("disabled")){return false}G();var V=C("."+h+"."+U.data("related-select"));if(V.is(":visible")){U.removeClass(u.elementSelected);i(V)}else{i(C("."+h+":visible"));var T=V.data("settings");C(document).on(e,m);U.addClass(u.elementSelected);if(T.showHide){V.stop(false,true).show()}else{V.stop(false,true).slideDown(u.slideDuration)}var S=V.find("li."+s);if(S.length>0&&V.data("scrollbar")){t(V,S)}}}function m(U){if(typeof M[U.keyCode|U.charCode]=="function"){var T=C("."+h+":visible");U.preventDefault();var V=C("select."+T.data("related-select"));M[U.keyCode|U.charCode](V)}else{if(U.which!==0&&U.which!==9){U.preventDefault();var S=(String.fromCharCode(U.keyCode|U.charCode));w(S)}}}function w(S){clearTimeout(O);l+=S;O=setTimeout(function(){L();l=""},u.keystrokeDelay)}function L(){var Y=C("."+h+":visible");var Z=C("select."+Y.data("related-select"));var U=Z.find("option");var X=U.filter("option:selected");var W=U.index(X);var T=null;var S=null;U.each(function(aa){if(jQuery(this).text().substr(0,l.length).toUpperCase()==l.toUpperCase()){var ab=aa;if(aa>W&&T==null){T=ab}else{if(S==null){S=aa}}}});if(T!=null||S!=null){if(T==null){T=S}var V=Z.find(U.get(T));Z.val(V.val()).change()}}function H(T){T.preventDefault();var W=C(this);var S=D.getRelatedSelect(W);var U=S.find("option."+W.attr("rel"));if(U.length){var V=U.val();S.val(V).change()}i(W.closest("."+h))}function a(T,S){if(S==null||typeof S=="undefined"||typeof S.attr("class")=="undefined"||S.attr("class").length==0){return}var Y=C(T).prev("."+u.labelClass).find("."+u.labelTitleClass);var X=Y.data("extra-class");var W="";var V=S.attr("class").split(" ");for(var U in V){if(V[U]!=y&&V[U]!==s&&V[U]!==x){W+=" "+V[U]}}if(X!=undefined&&X!=""){Y.removeClass(X)}Y.addClass(W);Y.data("extra-class",W)}function b(T,W){var V=W==undefined?C(this):C(W);var S=V.next();var U=S.find("."+u.listContainerClass);var Y=S.find("."+u.listContainerClass);var Z=Y.find("li."+V.find("option:selected").attr("rel"));var X=V.find("option:selected").text(),aa=V.find("option:selected").parent("optgroup[label]");if(u.autoAppendGroupTitle&&aa.length){X=aa.attr("label")+u.autoAppendGroupSeparator+X}S.find("div."+u.labelTitleClass).html(X);a(U,Z);Y.find("li").removeClass(s);Z.find('a[rel="'+V.find("option:selected").attr("rel")+'"]').html(V.find("option:selected").text());Z.addClass(s);if(Y.data("scrollbar")){t(Y,Z)}}function t(Y,W){var T=Y.find(".tiny-scroll-viewport");var Z=Y.find(".tiny-scroll-overview");if(typeof T!="undefined"&&typeof Z!="undefined"){var U={top:W.offset().top,height:W.height()};var X={top:T.offset().top,height:T.height()};var V={top:Z.offset().top,height:Z.height()};var S;if((U.top)<X.top){S=U.top-V.top;if(S<(2*U.height)){S=0}Y.tinyscrollbar_update(S)}else{if((U.top+U.height)>(X.top+X.height)){S=U.top-V.top-X.height+U.height;Y.tinyscrollbar_update(S)}}}}function E(){return("ontouchstart" in window)||("ontouchend" in document)||(window.DocumentTouch&&document instanceof DocumentTouch)}C.fn.pphDropdown=function(S){A=this.selector;if(D[S]){return D[S].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof S==="object"||!S){return D.init.apply(this,arguments)}else{C.error("Method "+S+" does not exist on jQuery.pphDropdown");return false}}}})(jQuery);(function(h){var e={closeLinkMarkup:'<a href="" class="close"><i class="fa fa-times"></i></a>',effectDelay:300,timeoutDelay:5000,defaultClass:"notice",ease:false,messageOptions:{persist:false,messageClass:"shout",unique:false,header:""}};var i=false;var f;var l="non-important";var a="not-display-again";var k="flashname";var d={init:function(o){h.extend(true,e,o);j();i=true}};function j(){f=h("<div></div>").addClass("shout-container");var o=h("body header:first");if(o.length){o.append(f)}else{h("body").append(f)}}function g(u,p,q){if(!i){d.init.call()}var t=h.extend(true,{},e.messageOptions,q);if(typeof p=="undefined"){p=e.defaultClass}if(t.messageOptions!==undefined&&typeof t.messageOptions.beforeShow==="function"){t.messageOptions.beforeShow.apply(f,[])}var r=h("<div></div>").addClass(p).addClass(t.messageClass).css({position:"relative"}).html("<div><p>"+u+"</p></div>").hide().data("options",t);if(t.header){r.find("div").prepend("<h5>"+t.header+"</h5>")}if(typeof t.unique=="string"){r.addClass("shout-"+t.unique)}if(typeof t.unique=="string"&&f.find("div.shout-"+t.unique).length>0){f.find("div.shout-"+t.unique).remove();f.append(r);r.fadeIn(0,function(){c()})}else{f.append(r);r.slideDown(e.effectDelay,"linear",function(){c()})}if(!t.persist){setTimeout(function(){r.slideUp(e.effectDelay,function(){r.remove();n()})},e.timeoutDelay)}else{if(t.closeLinkMarkup!==undefined&&t.closeLinkMarkup!=""){e.closeLinkMarkup=t.closeLinkMarkup}var s=h(e.closeLinkMarkup).on("click",function(o){o.preventDefault();if(m(h(this))){b(h(this).attr("href"),h(this).data(k))}r.slideUp(e.effectDelay,function(){r.remove();n()})});r.find("div").append(s)}if(t.ease){f.addClass(l)}}function n(){var q=false;var p;f.children().each(function(o,r){p=h(this).data("options");if(p.ease){q=true}});if(!q){f.removeClass(l)}}function c(){}function b(p,o){h.post(p,JSON.stringify({flashName:o})).done(function(q){},"json")}function m(o){return o.hasClass(a)&&o.data(k)}h.shout=function(o){if(d[o]){return d[o].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof o==="object"||!o){return d.init.apply(this,arguments)}else{g.apply(this,arguments)}}}})(jQuery);(function(h){var c={timeoutDelay:500,slideDuration:200,buttonHtml:true,showGroupHeaders:true,scrollbar:false,wrapperClass:"pph-splitButton-wrapper",primaryBtnClass:"primary-btn",toggleBtnClass:"toggle-btn",dropDownListClass:"dropDown-list",dropDownListItemClass:"dropDown-item",wrapperCustomClass:"",primaryBtnCustomClass:"",primaryBtnLinkCustomClass:"",toggleBtnContentCustomClass:"",toggleBtnCustomClass:"",buttonSize:""};var e="PPHSB-splitButton-";var a="PPHSB-splitButton-wrapper";var m="PPHSB-splitButton-item";var s="PPHSB-primary-btn";var u="PPHSB-dropDown-toggle";var p="PPHSB-dropDown-list";var q="PPHSB-dropDown-item";var k="active";var n="single-button";var i;var r;var b;var o={init:function(v){b=h.extend({},c,v);b.UlTopMargin=h(this).height()+"px";return h(this).each(function(x,y){var w=h(y);w.css({style:"display: none;"});if(w.data("initialized")){return true}if(typeof w.attr("id")!="undefined"){x=w.attr("id")}var z=e+x;l(w,z)})}};var d=function(x){var w=x;var v=g(w);v.removeClass(k);w.stop(true,false).slideUp(b.slideDuration)};var t=function(){var v=h(this);if(!v.hasClass(p)){v=v.parent().find("."+p)}if(!v.is(":visible")){return}i=setTimeout(function(){d(v)},b.timeoutDelay)};var j=function(){clearTimeout(i)};var f=function(){var v=h(this);if(!v.hasClass(p)){v=v.closest("."+b.wrapperClass).find("."+p)}t()};var g=function(v){return v.closest("."+a).find("."+u)};var l=function(A,z){A.attr("id",z).addClass(b.wrapperCustomClass+" "+a).data("initialized",true);var w=h('<ul class="'+b.buttonSize+'"></ul>').addClass(p+" "+b.dropDownListClass+" "+b.buttonSize);var x=h('<a class="button '+b.buttonSize+" "+u+" "+b.toggleBtnClass+" "+b.toggleBtnCustomClass+'"><span class="arrow-down gray icon '+b.toggleBtnContentCustomClass+'"></span></a>');var y=h("<li></li>").addClass(q+" "+b.dropDownItemClass+" "+b.buttonSize);var v={main:null,itemList:[]};A.children().each(function(C,D){var B=h(D);switch(B[0].tagName.toUpperCase()){case"BUTTON":if(!v.main){B.addClass(s+" "+b.primaryBtnClass+" "+b.primaryBtnCustomClass+" "+b.buttonSize);v.main=B}break;case"A":v.itemList.push(B);w.append(y.clone().append(B));break}});if(!v.main){if(v.itemList.length==0){throw"[ERROR]: No main button or other action links."}v.main=v.itemList[0];v.itemList.splice(0,1);w.find("li:first-child").remove();A.prepend(v.main.addClass(s+" "+b.primaryBtnClass+" "+b.primaryBtnLinkCustomClass+" button").html("<span>"+v.main.html()+"</span>")).addClass(n)}if(v.itemList.length!=0){A.append(x).append(w)}x.on("click",function(B){d(h("."+b.dropDownListClass));x.toggleClass(k);w.stop(true,false).slideToggle(b.slideDuration,function(){if(w.is(":visible")){x.addClass(k)}else{x.removeClass(k)}})}).on("mouseover",j).on("mouseout",t);w.on("mouseover",j).on("mouseout",t);w.find("a").on("click",f);A.css({display:"inline-block"})};h.fn.pphSplitButton=function(v){r=this.selector;if(o[v]){return o[v].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof v==="object"||!v){return o.init.apply(this,arguments)}else{h.error("Method "+v+" does not exist on jQuery.pphSplitButton");return false}}}})(jQuery);(function(c){var a={arrows:"a[data-previous], a[data-next]",arrowDisabledClass:"disabled",arrowsAlwaysVisible:true,arrowsRemoveIfInvisible:false,animationDelay:600,animationEasing:"linear",dimensionFault:4,selectedItem:0,selectedClass:"selected",autoCenter:true,mousewheel:true,mousewheelDelay:10,orientation:null,scrollTo:"item",scrollTarget:null,list:"ul",item:"ul > li",clickable:"a",scrolled:function(){},select:function(){},initialized:function(){}};function b(e,d){if(typeof e==="string"){e=c(e)}this.options=c.extend(true,{},a,d);this.$context=e;this.$wrapper=this.$context.find(this.options.list).parent();if(this.options.scrollTarget===null){this.options.scrollTarget=this.$wrapper}this._wheelTimeout=this.listDimension=this.containerHeight=this.containerWidth=this.containerDim=this._isHorizontal=null;this.init()}b.prototype.init=function(){var g=this,f=function(){g.resize.apply(g,arguments)};g.resize();c(window).on("resize",f);g.$context.on("thumbslider.resize",f);if(g.options.arrows!==false){g.$context.on("click",g.options.arrows,function(i){i.preventDefault();var h=c(this).data("previous")?-1:1;g.slidePage(h)});var d=g.$context.find(g.options.arrows);if(d.is(":hidden")){d.show()}}g.$wrapper.find(g.options.item+" "+g.options.clickable).on("click",function(j){j.preventDefault();j.stopPropagation();var i=g.$wrapper.find(this).parents(g.options.item),h=i.index();g.selectItem(h,i)});if(g.options.selectedItem!==false){var e=g.$wrapper.find(g.options.item).eq(g.options.selectedItem);g.selectItem(e.index(),e)}if(g.options.mousewheel){g.options.scrollTarget.on("mousewheel DOMMouseScroll",function(i){i.preventDefault();i.stopPropagation();if(i.originalEvent===undefined){return false}if(g._wheelTimeout!==null){clearTimeout(g._wheelTimeout)}var h=i.originalEvent.wheelDelta!==undefined?i.originalEvent.wheelDelta:-40*i.originalEvent.detail;g._wheelTimeout=setTimeout(function(){if(h<0){return g.slidePage(1)}return g.slidePage(-1)},g.options.mousewheelDelay)})}if(typeof g.options.initialized==="function"){g.options.initialized.apply(g.$context)}};b.prototype.resize=function(){this.containerWidth=this.$wrapper.width();this.containerHeight=this.$wrapper.height();if(this.options.orientation===null){this.options.orientation=this.containerWidth>=this.containerHeight?"horizontal":"vertical"}this._isHorizontal=this.options.orientation=="horizontal";this.containerDim=this._isHorizontal?this.containerWidth:this.containerHeight;var f=0,g=this._isHorizontal;var e=this.$wrapper.find(this.options.item);e.each(function(){var h=c(this);f+=(g?h.outerWidth(true):h.outerHeight(true))});this.listDimension=f;this.$wrapper.find(this.options.list).css((this._isHorizontal?"width":"height"),this.listDimension+"px");if(this.options.arrows!==false&&this.containerDim>=this.listDimension){if(this.options.arrowsAlwaysVisible){this.$context.find(this.options.arrows).addClass(this.options.arrowDisabledClass)}else{var d=this.$context.find(this.options.arrows);if(this.options.arrowsRemoveIfInvisible){d.remove()}else{d.hide()}}}};b.prototype.highlightSelected=function(){var d=this.getSelected();if(d.length){this.selectItem(d.index(),d,false)}};b.prototype.getSelected=function(){return this.$wrapper.find(this.options.item+"."+this.options.selectedClass)};b.prototype.selectItem=function(d,e,f){f=f!==undefined?f:true;if(e===undefined){e=this.$wrapper.find(this.options.item).eq(d)}this.$wrapper.find(this.options.item).removeClass(this.options.selectedClass);e.addClass(this.options.selectedClass);if(this.options.autoCenter){this.centerToItem(d,e)}var g=e.has(this.options.clickable)?e.find(this.options.clickable):e;if(f){this.options.select.apply(g,arguments)}};b.prototype.option=function(d,e){this.options[d]=e};b.prototype.gotoItem=function(f){f=f===undefined?"next":f;if(f!=="next"&&f!=="previous"){return false}var e=this.getSelected(),d=f=="next"?e.next():e.prev();if(d.length===0){d=this.$wrapper.find(this.options.item+(f=="next"?":first":":last"))}if(d.length){return this.selectItem(d.index(),d)}return false};b.prototype.centerToItem=function(j,n){this.resize();var g=(this._isHorizontal?this.options.scrollTarget.scrollLeft():this.options.scrollTarget.scrollTop()),m=(this._isHorizontal?(n.offset().left-this.options.scrollTarget.offset().left):(n.offset().top-this.options.scrollTarget.offset().top))+g,i=(this._isHorizontal?n.outerWidth(true):n.outerHeight(true)),f=(m+i),e=(f<(g+this.containerDim));var l=Math.floor(this.containerDim/2),h=Math.floor(i/2),d=l-h,k=this.options.autoCenter?(m-d):m;if(k<0){k=0}if(k>this.listDimension){k=this.containerDim}return this._smoothScroll(k,false)};b.prototype.slidePage=function(d){d=d||1;if((offset=this._getPageScrollOffset(d))!==false){this._smoothScroll(offset)}};b.prototype._smoothScroll=function(e,j){j=j!==undefined?j:true;if(this.options.arrows!==false&&this.listDimension>this.containerDim){var g=this.$context.find(this.options.arrows);g.removeClass(this.options.arrowDisabledClass);var h=this.$wrapper.find(this.options.item).eq(0);var d=this._isHorizontal?h.outerWidth(true):h.outerHeight(true);if(e<=d){g.filter("[data-previous]").addClass(this.options.arrowDisabledClass)}else{if(e+this.containerDim>=this.listDimension){g.filter("[data-next]").addClass(this.options.arrowDisabledClass)}}}var f=this.options.scrolled;if(j){var i=this._isHorizontal?{scrollLeft:e}:{scrollTop:e};return this.options.scrollTarget.stop().animate(i,this.options.animationDelay,this.options.animationEasing,function(){if(typeof f==="function"){f.apply(this,[e])}})}if(typeof f==="function"){f.apply(this,[e])}return this._isHorizontal?this.options.scrollTarget.scrollLeft(e):this.options.scrollTarget.scrollTop(e)};b.prototype._getPageScrollOffset=function(p){this.resize();var l=this.$wrapper.find(this.options.item),g=l.filter("[data-in-viewport]"),d=g.length?g:this.$wrapper.find(this.options.item+"."+this.options.selectedClass),e=p<0?d.prevAll():d.nextAll(),j=this._isHorizontal?this.options.scrollTarget.offset().left:this.options.scrollTarget.offset().top,f=this._isHorizontal?this.options.scrollTarget.scrollLeft():this.options.scrollTarget.scrollTop();if(!e.length){return false}if(p<0){e=c(e.get().reverse())}var k=e.eq(0),n=e.get(),o=f+p*this.containerDim;for(var h in n){var q=c(n[h]),m=(this._isHorizontal?q.offset().left:q.offset().top)-j+f;if(m>o){if(p<0){k=q}break}k=q}l.removeAttr("data-in-viewport");k.attr("data-in-viewport",1);return(this._isHorizontal?k.offset().left:k.offset().top)-j+f};c.fn.thumbslider=function(e){var d=arguments;return this.each(function(){var g="_tbsldr",f=c.data(this,g);if(f===undefined){f=new b(c(this),e)}if(typeof e==="string"&&typeof f[e]==="function"){f[e].apply(f,Array.prototype.slice.call(d,1))}c.data(this,g,f)})}})(jQuery);
/*!
 * Tiny Scrollbar 1.66
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 13 / 11 / 2011
 * Depends on library: jQuery
 * .tinyscrollbar()
 */
(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:200,sizethumb:"auto",minsizethumb:20}};a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(u,j){var g="tiny-scroll-";var n=g+"scrollbar";var H=g+"track";var h=g+"thumb";var F=g+"end";var d=g+"viewport";var w=g+"overview";A(u);var c=u.css("top");var C=u.is(":visible");if(!C){u.css("top","-3000px").show()}var p=this;var y=u;var m={obj:a("."+d,u)};var k={obj:a("."+w,u)};var f={obj:a("."+n,u)};var q={obj:a("."+H,f.obj)};var t={obj:a("."+h,f.obj)};var o=j.axis=="x",r=o?"left":"top",B=o?"Width":"Height";var v,G={start:0,now:0},s={};function e(){p.update();x();if(u.find("."+d).height()>u.find("."+w).height()){u.find("."+d).height(u.find("."+w).height())}if(!C){u.css("top",c).hide()}return p}function A(L){if(L.find("div."+n+" div."+H+" div."+h+" div."+F).length==0||L.find("div."+d+" div."+w).length==0){var N=L.children();if(N.length==0){N=L.html()}var K=a("<div></div>").addClass(F).css("overflow","hidden");var M=a("<div></div>").addClass(h).css("cursor","pointer").css("overflow","hidden").css("position","absolute").css("top","0").append(K);var J=a("<div></div>").addClass(H).css("position","relative").append(M);if(j.minTrackHeight){J.css("min-height",j.minTrackHeight)}var P=a("<div></div>").addClass(n).css("position","relative").css("float","right").append(J);var O=a("<div></div>").addClass(w).css("list-style","none").css("position","absolute").css("left","0").css("top","0").css("width","100%").append(N);var I=a("<div></div>").addClass(d).css("overflow","hidden").css("position","relative").append(O);if(j.size!="auto"){I.css("height",j.size)}L.css("clear","both").html("").append(P).append(I)}}this.update=function(I){m[j.axis]=m.obj[0]["offset"+B];k[j.axis]=k.obj[0]["scroll"+B];k.ratio=m[j.axis]/k[j.axis];f.obj.toggleClass("hide",k.ratio>=1);q[j.axis]=j.size=="auto"?m[j.axis]:j.size;t[j.axis]=Math.min(q[j.axis],Math.max(0,(j.sizethumb=="auto"?(q[j.axis]*k.ratio):j.sizethumb)));if(j.minsizethumb&&t[j.axis]<j.minsizethumb){j.sizethumb=j.minsizethumb;t[j.axis]=Math.min(q[j.axis],Math.max(0,(j.sizethumb=="auto"?(q[j.axis]*k.ratio):j.sizethumb)))}f.ratio=j.sizethumb=="auto"?(k[j.axis]/q[j.axis]):(k[j.axis]-m[j.axis])/(q[j.axis]-t[j.axis]);v=(I=="relative"&&k.ratio<=1)?Math.min((k[j.axis]-m[j.axis]),Math.max(0,v)):0;v=(I=="bottom"&&k.ratio<=1)?(k[j.axis]-m[j.axis]):isNaN(parseInt(I))?v:parseInt(I);D()};function D(){t.obj.css(r,v/f.ratio);k.obj.css(r,-v);s.start=t.obj.offset()[r];var I=B.toLowerCase();f.obj.css(I,q[j.axis]);q.obj.css(I,q[j.axis]);t.obj.css(I,t[j.axis])}function x(){t.obj.bind("mousedown",l);t.obj[0].ontouchstart=function(I){I.preventDefault();t.obj.unbind("mousedown");l(I.touches[0]);return false};q.obj.bind("mouseup",z);if(j.scroll&&this.addEventListener){y[0].addEventListener("DOMMouseScroll",E,false);y[0].addEventListener("mousewheel",E,false)}else{if(j.scroll){y[0].onmousewheel=E}}}function l(J){s.start=o?J.pageX:J.pageY;var I=parseInt(t.obj.css(r));G.start=I=="auto"?0:I;a(document).bind("mousemove",z);document.ontouchmove=function(K){a(document).unbind("mousemove");z(K.touches[0])};a(document).bind("mouseup",i);t.obj.bind("mouseup",i);t.obj[0].ontouchend=document.ontouchend=function(K){a(document).unbind("mouseup");t.obj.unbind("mouseup");i(K.touches[0])};return false}function E(J){if(!(k.ratio>=1)){var J=J||window.event;var I=J.wheelDelta?J.wheelDelta/120:-J.detail/3;v-=I*j.wheel;v=Math.min((k[j.axis]-m[j.axis]),Math.max(0,v));t.obj.css(r,v/f.ratio);k.obj.css(r,-v);J=a.event.fix(J);J.preventDefault()}}function i(I){a(document).unbind("mousemove",z);a(document).unbind("mouseup",i);t.obj.unbind("mouseup",i);document.ontouchmove=t.obj[0].ontouchend=document.ontouchend=null;return false}function z(I){if(!(k.ratio>=1)){G.now=Math.min((q[j.axis]-t[j.axis]),Math.max(0,(G.start+((o?I.pageX:I.pageY)-s.start))));v=G.now*f.ratio;k.obj.css(r,-v);t.obj.css(r,G.now)}return false}return e()}})(jQuery);(function(f){f.yvalidate={exists:function(l,j,k){return h("exists",l,null,j,k)},isBoolean:function(m,j,k,l){return h("isBoolean",m,j,k,l)},isTrue:function(m,k,j,l){return h("isTrue",m,j,k,l)},isFalse:function(m,k,j,l){return h("isFalse",m,j,k,l)},isObject:function(l,j,k){return h("isObject",l,null,j,k)},isFunction:function(l,j,k){return h("isFunction",l,null,j,k)},isArray:function(l,j,k){return h("isArray",l,null,j,k)},inArray:function(m,j,k,l){return h("inArray",m,j,k,l)},isInt:function(l,j,k){return h("isInt",l,null,j,k)},isNumeric:function(l,j,k){return h("isNumeric",l,null,j,k)},isMoreThan:function(m,j,k,l){return h("isMoreThan",m,j,k,l)},isLessThan:function(m,j,k,l){return h("isLessThan",m,j,k,l)},isString:function(l,j,k){return h("isString",l,null,j,k)},isEmpty:function(l,j,k){return h("isEmpty",l,null,j,k)},isNotEmpty:function(l,j,k){return h("isNotEmpty",l,null,j,k)},isMoreCharThan:function(m,j,k,l){return h("isMoreCharThan",m,j,k,l)},isLessCharThan:function(m,j,k,l){return h("isLessCharThan",m,j,k,l)}};var a=false;var d={exists:function(){return"is not defined"},isObject:function(){return"should be an object"},isArray:function(){return"is not an array"},inArray:function(){return"is not valid"},isString:function(){return"should be a string"},isMoreCharThan:function(j){return"should be minimum "+j+" characters long"},isLessCharThan:function(j){return"should be maximum "+j+" characters long"},isInt:function(){return"should be a number"},isNumeric:function(){return"should be a number"},isMoreThan:function(j){return"should be minimum "+j},isLessThan:function(j){return"should be maximum "+j},isBoolean:function(){return"should be true or false"},isTrue:function(){return"should be true"},isFalse:function(){return"should be false"},isEmpty:function(){return"should be empty"},isNotEmpty:function(){return"is required"},isFunction:function(){return"should be a function"}};var h=function(n,m,j,k,l){if(l){d=f.extend({},d,l)}if(!i.exists(n)){e("Param 'method' is required")}if(!i.isFunction(i[n])){e("Validation method '"+n+"' does not exist")}if(i[n](m,j)){return true}return(k?g(n,k,j):false)};var i={exists:function(j){return(j!==null&&typeof j!=="undefined")},isBoolean:function(k,j){j=i.exists(j)?i.exists(j):true;return(i.exists(k)&&(k===true||k===false));if(j){return(i.exists(k)&&(k===true||k===false))}else{return(i.exists(k)&&(k==true||k==false))}},isTrue:function(k,j){return(i.isBoolean(k,j)&&k==true)},isFalse:function(k,j){return(i.isBoolean(k,j)&&k==false)},isObject:function(j){return(typeof j==="object")},isFunction:function(j){return(i.exists(j)&&f.isFunction(j))},isArray:function(j){return f.isArray(j)},inArray:function(k,j){return i.exists(k)&&i.exists(j)&&i.isArray(j)&&(f.inArray(k,j)!==-1)},isInt:function(j){return i.isNumeric(j)&&(Math.floor(j)==j)},isNumeric:function(j){return i.isNotEmpty(j)&&f.isNumeric(j)},isMoreThan:function(k,j){if(i.isNotEmpty(k)&&!i.isNumeric(k)){return i.isNumeric(k)}return i.isEmpty(k)||(typeof k.length!=="function"&&k>j)},isLessThan:function(k,j){if(i.isNotEmpty(k)&&!i.isNumeric(k)){return i.isNumeric(k)}return i.isEmpty(k)||(typeof k.length!=="function"&&k<=j)},isString:function(j){return typeof j==="string"||i.isNumeric(j)},isEmpty:function(j){return(typeof j==="undefined"||j===null||(!i.isFunction(j)&&j.length==0)||(i.isObject(j)&&c(j)==0))},isNotEmpty:function(j){return !i.isEmpty(j)},isMoreCharThan:function(k,j){return typeof k.length!=="function"&&k.length>j},isLessCharThan:function(k,j){return typeof k.length!=="function"&&k.length<=j}};function g(m,k,j){var l=b(k)+" "+(d[m]?d[m](j):d.genericError());e(l);return l}function e(j,k){if(a){console.log("YVALIDATE",j)}if(k){console.trace()}}function c(l){var k=0;var j;for(j in l){if(l.hasOwnProperty(j)){k++}}return k}function b(j){return j.charAt(0).toUpperCase()+j.slice(1)}})(jQuery);(function(a){a.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:false,caseSensitive:true,placeholderText:null,truncateTagView:false,truncateTagSuffix:"...",allowSpaces:false,animate:true,singleField:false,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_create:function(){var d=this;this.options.truncateTagView=parseInt(this.options.truncateTagView);if(this.element.is("input")){this.tagList=a("<ul></ul>").insertAfter(this.element);this.options.singleField=true;this.options.singleFieldNode=this.element;this.element.css("display","none")}else{this.tagList=this.element.find("ul, ol").andSelf().last()}this._tagInput=a('<input type="text" />').addClass("ui-widget-content");if(this.options.tabIndex){this._tagInput.attr("tabindex",this.options.tabIndex)}if(this.options.placeholderText){this._tagInput.attr("placeholder",this.options.placeholderText)}this.options.tagSource=this.options.tagSource||function(f,e){var g=f.term.toLowerCase();var h=a.grep(this.options.availableTags,function(i){return(i.toLowerCase().indexOf(g)===0)});e(this._subtractArray(h,this.assignedTags()))};if(a.isFunction(this.options.tagSource)){this.options.tagSource=a.proxy(this.options.tagSource,this)}this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this._tagInput)).click(function(g){var f=a(g.target);if(f.hasClass("tagit-label")){d._trigger("onTagClicked",g,f.closest(".tagit-choice"))}else{d._tagInput.focus()}});this.tagList.children("li").each(function(){if(!a(this).hasClass("tagit-new")){d.createTag(a(this).html(),a(this).attr("class"));a(this).remove()}});if(this.options.singleField){if(this.options.singleFieldNode){var c=a(this.options.singleFieldNode);var b=c.val().split(this.options.singleFieldDelimiter);c.val("");a.each(b,function(f,e){d.createTag(e)})}else{this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />')}}this._tagInput.keydown(function(f){if(f.which==a.ui.keyCode.BACKSPACE&&d._tagInput.val()===""){var e=d._lastTag();if(!d.options.removeConfirmation||e.hasClass("remove")){d.removeTag(e)}else{if(d.options.removeConfirmation){e.addClass("remove ui-state-highlight")}}}else{if(d.options.removeConfirmation){d._lastTag().removeClass("remove ui-state-highlight")}}if(f.which==a.ui.keyCode.COMMA||f.which==a.ui.keyCode.ENTER||(f.which==a.ui.keyCode.TAB&&d._tagInput.val()!=="")||(f.which==a.ui.keyCode.SPACE&&d.options.allowSpaces!==true&&(a.trim(d._tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||(a.trim(d._tagInput.val()).charAt(0)=='"'&&a.trim(d._tagInput.val()).charAt(a.trim(d._tagInput.val()).length-1)=='"'&&a.trim(d._tagInput.val()).length-1!==0)))){f.preventDefault();d.createTag(d._cleanedInput());d._tagInput.autocomplete("close")}}).blur(function(f){d.createTag(d._cleanedInput())});if(this.options.availableTags||this.options.tagSource){this._tagInput.autocomplete({source:this.options.tagSource,select:function(e,f){if(d._tagInput.val()===""){d.removeTag(d._lastTag(),false)}d.createTag(f.item.value);return false}})}},_cleanedInput:function(){return a.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var c=this;var b=[];if(this.options.singleField){b=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);if(b[0]===""){b=[]}}else{this.tagList.children(".tagit-choice").each(function(){b.push(c.tagLabel(this))})}return b},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter))},_subtractArray:function(d,c){var b=[];for(var e=0;e<d.length;e++){if(a.inArray(d[e],c)==-1){b.push(d[e])}}return b},tagLabel:function(b){if(this.options.singleField){return a(b).children(".tagit-label").data("value")}else{return a(b).children("input").val()}},_isNew:function(d){var c=this;var b=true;this.tagList.children(".tagit-choice").each(function(e){if(c._formatStr(d)==c._formatStr(c.tagLabel(this))){b=false;return false}});return b},_formatStr:function(b){if(this.options.caseSensitive){return b}return a.trim(b.toLowerCase())},createTag:function(h,e){var d=this;var i=d._tagInput.attr("placeholder");h=(i===h)?"":a.trim(h);if(!this._isNew(h)||h===""){d._tagInput.placeholder();return false}var c=h;if(this.options.truncateTagView&&this.options.truncateTagView>0&&this.options.truncateTagView<h.length){c=h.substring(0,(this.options.truncateTagView-this.options.truncateTagSuffix.length))+this.options.truncateTagSuffix}var g=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(c).data("value",h);var l=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(e).append(g);this._trigger("onTagAdded",null,l);var b=a("<span></span>").addClass("ui-icon ui-icon-close");var f=a('<a><span class="text-icon">\xd7</span></a>').addClass("tagit-close").append(b).click(function(m){d.removeTag(l)});l.append(f);if(this.options.singleField){var k=this.assignedTags();k.push(l.find(".tagit-label").data("value"));this._updateSingleTagsField(k)}else{var j=g.data("value");l.append('<input type="hidden" style="display:none;" value="'+j+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]" />')}this._tagInput.val("");this._tagInput.parent().before(l)},removeTag:function(b,c){c=c||this.options.animate;b=a(b);this._trigger("onTagRemoved",null,b);if(this.options.singleField){var e=this.assignedTags();var d=this.tagLabel(b);e=a.grep(e,function(f){return f!=d});this._updateSingleTagsField(e)}if(c){b.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){b.remove()}).dequeue()}else{b.remove()}},removeAll:function(){var b=this;this.tagList.children(".tagit-choice").each(function(d,c){b.removeTag(c,false)})}})})(jQuery);var PPH=(function(e){var k=/\bid-(\w+)/,i=false,n=false,b=true;var j=1260;var f={};function o(q,p){if(typeof q=="object"){q=e.param(q)}if(typeof p=="object"){p=e.param(p)}return q==p}function h(q){PPH.csrfTokenName=q.csrfTokenName!==undefined?q.csrfTokenName:"YII_CSRF_TOKEN";var p=e.cookie(PPH.csrfTokenName);if(p){PPH.csrfToken=p.replace(/[^A-Za-z0-9\-\_]/g,"")}else{PPH.csrfToken=q.csrfToken!==undefined?q.csrfToken:""}}var l={page:{},pages:{},modules:{},DEBUG:false,templateEngine:{},isResponsive:b,Module:function(r){var q={},p={};var s={id:null,config:e.extend(true,{},q,r),bind:function(t,u,v){if(typeof(p[t])==="undefined"){p[t]=[]}p[t].push([u,v]);return s},unbind:function(t){if(typeof(p[t])!=="undefined"){delete p[t]}return s},trigger:function(t){args=arguments.length>1?e.makeArray(arguments).slice(1):[];if(typeof(p[t])!=="undefined"){e.each(p[t],function(u,v){if(typeof(v[1])!=="undefined"){args.push(v[1])}v[0].apply(s,args)})}},hasHandler:function(t){return typeof p[t]!=="undefined"&&p[t].length!==0},setState:function(t){s.page.setState(s.id,t)},getState:function(){return s.page.getState(s.id)},changeState:function(u){var t=s.getState()||{};e.each(u,function(v,w){if(w===null){delete t[v]}else{t[v]=w}});s.setState(t)},init:function(){}};return s},Page:function(p){var r=p||{};var q={modules:{},bu:""},u=e.extend(true,{},q,r),s=PPH.Module(u);h(u);if(typeof TemplateEngine!=="undefined"){PPH.templateEngine=TemplateEngine.init()}PPH.DEBUG=r.DEBUG||false;function t(v){var x=v.getState(),w=s.state;e.each(s.modules,function(A,y){var z=x[A]!==undefined,B=w[A]!==undefined,C=z&&B&&!o(x[A],w[A]);if((z&&!B||!z&&B||C)&&y.onHashChange!==undefined){y.onHashChange(x[A])}});s.state=x}e.extend(s,{modules:{},state:{},redirect:function(v,w){if(w){window.top.location=v}else{window.location=v}},refresh:function(){window.location.reload()},hasModule:function(v){return s.modules[v]?true:false},setState:function(v,x){var w=e.bbq.getState();if(!x){x=v;v="page"}w[v]=x;e.bbq.pushState(w)},getState:function(v){var w=e.bbq.getState();if(!v){v="page"}return w[v]==undefined?null:w[v]},run:function(){e.each(s.config.modules,function(v,x){if(l.modules[v]){if(typeof x.multiInstance!=="undefined"){for(var w in x){if(w=="multiInstance"){continue}s.modules[v]=l.modules[v](x[w]);s.modules[v].page=s;s.modules[v].id=v;s.modules[v].init()}}else{s.modules[v]=l.modules[v](x);s.modules[v].page=s;s.modules[v].id=v;s.modules[v].init()}if(v==="Messages"){i=s.modules[v]}}});PPH.page=s;s.modules.page=s;s.init();e(window).bind("hashchange",t)}});e("body").ajaxError(function(A,B,w,y){if(B.status===0||B.statusText==="abort"){return}var v=PPH.DEBUG?{persist:true,unique:"requestError-"+B.status}:{unique:"requestError-"+B.status};var z,x;if(typeof B.responseText!="undefined"){try{z=e.parseJSON(B.responseText)}catch(A){}if("object"==PPH.typeOf(z)&&"string"==PPH.typeOf(z.message)){x=z.message}}if(!PPH.DEBUG&&B.status==403){PPH.error("You have been inactive for some time and you have to <a href='#' onclick='location.reload();return false;'>Log in</a> again.",v)}else{if(!PPH.DEBUG&&"string"==PPH.typeOf(x)){PPH.error("Request error:\n"+x,v)}else{PPH.error("Request error\nError code: "+B.status+"\nMessage:\n"+B.responseText,v)}}});e(function(v){s.run()});return s},getIdFromClass:function(q){var p=k.exec(e(q).attr("class"));return(p&&p.length>1)?p[1]:null},getIdFromParents:function(r,p){var q=e(r).parents(p?p:".item");return q.length?PPH.getIdFromClass(q):null},addUrlParam:function(p,r,q){return p+(p.indexOf("?")===-1?"?":"&")+r+"="+encodeURIComponent(q)},getUrlParameter:function(p,q){if(typeof q=="undefined"){q=null}return decodeURIComponent((new RegExp("[?|&]"+p+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||q},getCsrf:function(){if(PPH.csrfToken==""){return{}}var p={};p[PPH.csrfTokenName]=PPH.csrfToken;return p},isMobile:function(){return e(".detect-mobile").is(":visible")&&navigator.userAgent.match(/mobile/i)!=null},isIpad:function(){return(navigator.userAgent.match(/iPad/i)!=null)},isTouch:function(){return("ontouchstart" in window)||("ontouchend" in document)||(window.DocumentTouch&&document instanceof DocumentTouch)},unfinishedFormExist:function(){return n},success:function(q,p){e.shout(q,"success",e.extend(true,{header:"Success",closeLinkMarkup:"",messageOptions:{}},p))},warning:function(q,p){e.shout(q,"warning",e.extend(true,{header:"Warning",closeLinkMarkup:"",messageOptions:{}},p))},info:function(q,p){e.shout(q,"info",e.extend(true,{header:"Info",closeLinkMarkup:"",messageOptions:{}},p))},error:function(q,p){e.shout(q,"error",e.extend(true,{header:"Error",closeLinkMarkup:"",messageOptions:{}},p))},tipConfig:function(p){return g(p)},tip:function(r,s,q,p){return m(r,s,q,p)},dom:{simpletip:function(q,r,p){m(q,r,"info",p)},error:function(q,r,p){m(q,r,"error",p)},info:function(q,r,p){m(q,r,"info",p)},warning:function(q,r,p){m(q,r,"warning",p)},success:function(q,r,p){m(q,r,"success",p)},help:function(q,r,p){m(q,r,"help",p)}},userData:{cache:function(){PPH.DEBUG&&console.log(f)},getAll:function(){if(PPH.DEBUG){this.get("dummy");console.log(f)}},setData:function(p){PPH.DEBUG&&console.log("seting data",p);f=p},save:function(p,t,q){q=q||false;var s={};s[p]=t;var r={data:s,overwrite:q};var u=false;e.ajax({url:"/userData/save",data:e.extend(PPH.getCsrf(),r),type:"POST",async:false,success:function(v){PPH.DEBUG&&console.log(v.success);u=v.success}});f={};return u},get:function(p){if(!e.isEmptyObject(f)){return f[p]!=undefined?f[p]:null}e.ajax({url:"/userData/getAll",data:PPH.getCsrf(),type:"POST",async:false,success:function(r){f=r.data}});var q=!e.isEmptyObject(f)&&f[p]!=undefined?f[p]:null;return q}},runStringAsFn:function(s){var r=s.split("."),q=window;for(var p in r){if(q[r[p]]){q=q[r[p]]}}if(typeof q==="function"){q()}},stripSlashes:function(p){return p.replace(/[^\\][\\]/g,"")},typeOf:function(r){var q=typeof r;if(q=="object"){if(r){if(r instanceof Array){return"array"}else{if(r instanceof Object){return q}}var p=Object.prototype.toString.call((r));if(p=="[object Window]"){return"object"}if((p=="[object Array]"||typeof r.length=="number"&&typeof r.splice!="undefined"&&typeof r.propertyIsEnumerable!="undefined"&&!r.propertyIsEnumerable("splice"))){return"array"}if((p=="[object Function]"||typeof r.call!="undefined"&&typeof r.propertyIsEnumerable!="undefined"&&!r.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(q=="function"&&typeof r.call=="undefined"){return"object"}}return q}};function g(s){var t="",r=s.data("trigger")||null,p=s.data("placement")||s.data("tooltip-pos");if(s.data("tooltip-fallback-pos")!==undefined&&e(window).width()<j){p=s.data("tooltip-fallback-pos")}if(s.data("tooltip-content")!==undefined){t=s.data("tooltip-content")}else{if(s.data("tooltip-content-selector")!==undefined&&e(s.data("tooltip-content-selector")).length){t=e(s.data("tooltip-content-selector")).html()}else{if(s.data("content-selector")&&e(s.data("content-selector")).length){t=e(s.data("content-selector")).html()}else{if(s.data("tooltip-click-content")!==undefined||(s.data("tooltip-click-content-selector")!==undefined&&e(s.data("tooltip-click-content-selector")).length)){r="click";t=s.data("tooltip-click-content")||e(s.data("tooltip-click-content-selector")).html()}else{if(s.data("input-suggestion")!==undefined){t=s.data("input-suggestion")}else{if(s.data("input-suggestion-selector")&&e(s.data("input-suggestion-selector")).length){t=e(s.data("input-suggestion-selector")).html()}}}}}}var q={arrow:!s.hasClass("no-tip")&&(!s.data("class")||(s.data("class")&&s.data("class").indexOf("no-tip")===-1&&s.data("class").indexOf("on-top")===-1)),container:(s.data("container")||"body"),content:t,pos:p?p:(s.data("tooltip-style")==="info"?"right":"top"),show:s.data("show")!==undefined?s.data("show"):true,usePopover:s.data("use-popover")!==undefined?s.data("use-popover"):false};if(r!==null){q.trigger=r}if(s.data("tooltip-style")){q.style=s.data("tooltip-style");if(q.style=="info"||q.style=="help"){q.usePopover=true}}if(s.data("tooltip-classes")){q.extraClasses=s.data("tooltip-classes")}if(s.data("tooltip-title")){q.title=s.data("tooltip-title")}else{if(s.attr("title")||s.data("title")){q.title=s.attr("title")||s.data("title")}}if(s.data("selector")&&e(s.data("selector")).length){q.selector=e(s.data("selector"))}else{if(s.data("tip-hook")&&e(s.data("tip-hook")).length){q.selector=e(s.data("tip-hook"))}}if(s.hasClass("on-top")){if(!s.attr("id")){throw new Error("We have to specify an ID for the element")}q.container=["#",s.attr("id")].join("");s.css({position:"relative"})}return q}function m(t,u,z,v){v=v||{};t=e(t);if(u===undefined&&z===undefined){v=g(t)||{};u=v.content||v.title;z=v.style}if(v.usePopover===undefined&&(z=="info"||z=="help")){v.usePopover=true}var q=v.usePopover!==undefined?v.usePopover:false,D=v.closeOnFocus!==undefined?v.closeOnFocus:true;if(t.data("bs.tooltip")!==undefined||t.data("bs.popover")!==undefined){if(t.data("bs.tooltip")!==undefined){t.tooltip("destroy")}if(t.data("bs.popover")!==undefined){t.popover("destroy")}}if(u==="close"){return false}var r=(z||v.style||"default"),y=(v.autoclose||false),w=(v.extraClasses||""),C=v.show!==undefined?v.show:true,x=v.icon!==undefined?v.icon:true,B=v.arrow!==undefined?v.arrow:true,E={placement:(v.pos||"right"),trigger:(v.trigger||"manual"),html:true};if(v.selector){E.selector=v.selector}else{E.viewport=false;E.container=(v.tipContainer||v.container||"body")}if(v.classes){v.extraClasses+=" "+v.classes}if(q){if(v.title){E.title=v.title}E.content=u||v.content;var p=e("<span>"+E.content+"</span>").find("a").length;if(E.content&&p&&E.trigger.match(/hover/gi)){E.delay={show:0,hide:300}}}else{E.title=u||v.content}if(E.trigger&&E.trigger.match(/(manual)/gi)&&D){t.one("focus mouseup",function(){if(q){return t.popover("hide")}return t.tooltip("hide")})}if(q){var s=e(document);s.mouseup(function(H){var F=e(".popover-toggle.tooltip-visible-lg");var G=e(".popover");if(!F.is(H.target)&&F.has(H.target).length===0){if(!G.is(H.target)&&G.has(H.target).length===0){if(q){return t.popover("hide")}return t.tooltip("hide")}}else{e(".popover-toggle.tooltip-visible-lg").map(function(J,I){if(I.hasAttribute("aria-describedby")){return I.click()}})}})}if(q){E.template=['<div class="popover ',w," ",r,'"',(v.zIndex?(' style="z-index: '+v.zIndex+'"'):""),">",(B?'<div class="arrow"></div>':""),'<div class="popover-inner"><h1 class="popover-title"></h1><div class="popover-content"><p></p></div></div></div>'].join("");if(t.data("bs.popover")){t.popover("destroy")}t.popover(E);if(C&&y!==false&&!isNaN(y)){setTimeout(function(){t.popover("hide")},y)}return C?t.popover("show"):t}var A=null;if(x){if(z==="error"||z==="warning"){A="fa fa-warning"}else{if(z==="info"){A="fa fa-info-circle"}else{if(z==="success"){A="fa fa-check"}}}}if(A===null){w+=" no-icon"}E.template=['<div class="tooltip ',w," ","state-",r,'"',(v.zIndex?(' style="z-index: '+v.zIndex+'"'):""),">",(B?'<div class="tooltip-arrow"></div>':""),(A?'<i class="fa '+A+'"></i>':""),'<div class="tooltip-inner"></div></div>'].join("");if(t.data("bs.tooltip")){t.tooltip("destroy")}t.tooltip(E);if(C&&y!==false&&!isNaN(y)){setTimeout(function(){t.tooltip("hide")},y)}return C?t.tooltip("show"):t}e(document).on("mouseup","[data-tracking-category]:not(form)",d).on("submit","form[data-tracking-category]",d);function d(){var p=e(this);if(typeof gtmTrackGAEvent!=="undefined"){gtmTrackGAEvent(p.data("tracking-category"),p.data("tracking-action"),p.data("tracking-label"),p.data("tracking-value"))}}function c(){n=false;e(document).on("change.unfinishedform",":input",function(){var p=e(this);if(p.filter(".ignore-unfinished-form").length==0&&p.parents(".ignore-unfinished-form").length==0){n=true;a()}})}function a(){e(document).off("change.unfinishedform",":input")}c();return l})(jQuery);window.performance=window.performance||{};performance.now=(function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()}})();window.originalTitle=document.title;$(document).ready(function(){$(".pph-switch").pphSwitch();if(PPH.isTouch()){$("body").addClass("touch-enabled")}if(typeof $.ui!=="undefined"){$(".sortable").disableSelection()}if(typeof $(this).dotdotdot!=="undefined"){window.cropTitles=function(){var a=$(".js-paragraph-crop");if(a.length){a.each(function(){var c=$(this),b=c.data("height")||c.parent().innerHeight();if(c.find(".js-crop-ending").length){c.dotdotdot({after:".js-crop-ending",height:b,wrap:"letter"})}else{c.dotdotdot({height:b,wrap:"letter"})}})}};window.cropTitles()}if($.browser&&$.browser.msie&&parseInt($.browser.version,10)<10){$("input[placeholder], textarea[placeholder]").placeholder()}(function(){var a=[".controller-job.view-list",".controller-freelancer.view-index"];if($(a.join(",")).length>0){$("#login-form").on("submit",function(d){var b=$.deparam.fragment(),g=$.deparam.querystring(),f,c;if(typeof b.Tag!=="undefined"){if($(".controller-freelancer.view-index").length>0){b.skills=b.Tag.id}else{b.tag=b.Tag.id}delete b.Tag}f=$.extend({},g,b);c=$.map(f,function(h,e){if(h!==""){return e+"="+h}}).join("&");if(c===""){return}if($("#login-form input[name=next]").length>1){$("#login-form input[name=next]").eq(1).remove()}$("#next").val(document.location.pathname+"?"+c)})}})();$("body").on("click","[data-toggle-class]",function(f){var d=$(this),c=d.attr("data-toggle-class-target"),a=c?$(c):d,b=d.attr("data-toggle-class");f.preventDefault();a.toggleClass(b)});$("body").on("click","[data-toggle-html]",function(g){var f=$(this),d=f.attr("data-toggle-html-target"),a=d?$(d):f,c=f.attr("data-toggle-html"),b=a.html();g.preventDefault();a.html(c);f.attr("data-toggle-html",b)});$("body").on("click","[data-toggle-value]",function(g){var f=$(this),d=f.attr("data-toggle-value-target"),a=d?$(d):f,c=f.attr("data-toggle-value"),b=a.val();g.preventDefault();a.val(c);f.attr("data-toggle-value",b)});(function(){var g,h=null,c,f,j,a,b='[data-hook="cmm-announcement"]',d='[data-hook="cmm-announcement"] i.fa',i='<div class="cmm-announcement clearfix" data-hook="cmm-announcement" style="display: none;"><p>{%msg}</p><i class="fa fa-times"></i></div>';if(typeof __pph_community==="undefined"||__pph_community===null){return}c=[];var e=PPH.userData.get("community.history");if(e){if(typeof e.length==="undefined"){$.each(e,function(k,l){c.push(l)})}else{c=e}}if(typeof __pph_community.announcements!=="undefined"){h=$(__pph_community.announcements).last().get(0)}if(h!==null){f=h.cmm_active||false;if(f==="y"&&$.inArray(parseInt(h.cmm_id),c)<0){a=$(i.replace("{%msg}",h.cmm_message));$(".container-top").prepend(a);$(window).load(function(){$(b).slideDown(200,function(){$(window).trigger("resize")})});$("body").on("click.community",d,function(){c.push(h.cmm_id);PPH.userData.save("community.history",c,true);$(this).parent().slideUp(200,function(){$(this).remove();$("body").off("click.community");$(window).trigger("resize")})})}}})()});(function(d){d.fn.pphactiveform=function(f){var e=d(this);d.extend(d.fn.pphactiveform.options,d.fn.yiiactiveform.defaults,d.fn.pphactiveform.defaults,f);return this.each(function(){d(this).yiiactiveform(f);c(e,d.fn.pphactiveform.components,f)})};d.fn.pphactiveform.defaults={errorSummarySeparator:"\n",tooltipDescriptor:"aria-describedby",pphComponentAttribute:"data-pph-component",componentsDefaults:{tooltip:{},pphdropdown:{},pphnumeric:{},autoresize:{}}};d.fn.pphactiveform.options={};d.fn.pphactiveform.displayErrors=function(e,h,o){var r=d(e),q=d.fn.pphactiveform.options;var n=0;for(var l in h){var m=d("#"+l,r).length?d("#"+l,r):d('[data-id="'+l+'"]',r),p=b(h[l],d.fn.pphactiveform.options.errorSummarySeparator);var g=m;if(m.is(":hidden")){g=m.closest(":visible")}var j=d.extend({container:g.parent()},a(m,"tooltip"));if(p.trim()!=""){PPH.dom.error(g,p,j)}n++;var i=q.validatingCssClass+" "+q.errorCssClass+" "+q.successCssClass;d(g).one("mouseup focus",function(u){var t=d(this),v=d(this,r).parents("."+q.errorCssClass+":first");t.removeClass(i);v.removeClass(i);var s=r.find("#"+this.errorID);if(s.length){s.html("").hide()}})}var f=d("["+q.tooltipDescriptor+"]:first");if(n&&f.length&&q.scrollErrors){var k=f.offset().top-q.scrollErrorOffset;d("html, body").animate({scrollTop:k},q.scrollErrorDuration)}return n==0};d.fn.pphactiveform.components={autoresize:function(){d(this.element).autoResize(this.options)},pphdropdown:function(){if(this.options.scrollbar==true){this.options.scrollbarOptions={size:250}}d(this.element).pphDropdown(this.options)},pphnumeric:function(){var e=this.options;if(e.typeAttribute===undefined){return}d('input[type="text"]['+this.options.typeAttribute+"]").on("keyup input paste",function(){var g=d(this).val(),f=d(this).attr(e.typeAttribute);if(g!==null){g=f=="int"?g.replace(/\D+/gi,""):g.replace(/[^0-9\.]+/gi,"");d(this).val(g)}})},help:function(){var f=d(this.element);var e=f.data("message-container");var g=d('[data-hook="'+e+'"]').html();PPH.dom.help(f,g)}};d.fn.pphactiveform.addItem=function(e,p,k,w){var n=d(e),j=d(p),k=typeof k==="function"?k:d.noop,t=n.data("settings"),l=w!==undefined?d(w):j.eq(0);if(!l.length){throw new Error("Could not locate the template for the new elements. Please specify one")}if(t===undefined){throw new Error("form "+n.selector+" is not an active form")}var s=1;if(j.length){s=Math.max.apply(Math,j.find("input, textarea, select").map(function(){return parseInt(this.id.replace(/(.*)_(\d+)_([^_]+)/gi,"$2"),10)}));s+=1}var f=t.attributes.length?t.attributes:[],r=l.clone(),g=r.find("input, textarea, select").get();for(var q in g){var u=g[q],v={};if(f.length){for(var q in f){var x=f[q];if(x.id===u.id){v=x;break}}}d(u).attr("id",h(u.id,s)).attr("name",o(u.name,s)).val("");if(d.isEmptyObject(v)){continue}var m={errorID:h(v.errorID,s),id:h(v.id,s),inputID:h(v.inputID,s),name:o(v.name,s),value:""};t.attributes.push(d.extend(true,{},v,m))}j.filter(":last").after(r);n.data("settings",t);k.apply(r,r);function h(y,i){return y.replace(/(.*)_([0-9]+)_([^_]+)/gi,("$1_"+i+"_$3"))}function o(y,i){return y.replace(/(.*)\[([0-9]+)\]\[([^\[\]]+)\]/gi,("$1["+i+"][$3]"))}};d.fn.pphactiveform.removeItem=function(e,m,h){var n=d(e),j=d(m),f=n.data("settings"),h=typeof h==="function"?h:d.noop,k=j.find("input, select, textarea").get(),l=[];if(!n.length||!j.length){return false}if(k.length){for(var g in k){l.push(k[g].id)}}if(l.length){d.each(f.attributes,function(o,i){if(i===undefined||i.inputID===undefined){return false}if(d.inArray(i.inputID,l)>-1){f.attributes.splice(o,1)}})}j.remove();h.apply();n.data("settings",f)};d.fn.pphactiveform.requiredUploader=function(e,i,h){var g=[e,"_",i].join("");if(!PPH.page||!PPH.page.modules||!PPH.page.modules.AttachFiles||!PPH.page.modules.AttachFiles.config[g]||!PPH.page.modules.AttachFiles.config[g]){return false}h=!isNaN(h)?parseInt(h,10):1;var f=PPH.page.modules.AttachFiles.config[g];return f._filesUploadedOrQueued>=h};var c=function(g,f,e){if(typeof g=="string"){g=d(g)}d("["+e.pphComponentAttribute+"]",g).each(function(l,k){var h=d(k,g).attr(e.pphComponentAttribute);var j=f[h],m=e.componentsDefaults[h];var n=d.extend({},d.fn.pphactiveform.defaults.componentsDefaults[h],m,a(d(k,g),h));if(typeof j=="function"){j.call({element:k,options:n})}})};var b=function(g,e){var f="";d.each(g,function(h,i){f+=i+e});return f};var a=function(e,g){if(typeof e=="string"){e=d(e)}if(typeof d.fn.pphactiveform.options.componentsDefaults!="undefined"){var j=d.fn.pphactiveform.options.componentsDefaults[g],h={}}if(j!==undefined){for(var f in j){var i=e.data(g+"-"+f);if(i!==undefined&&i!==null){h[f]=i}}}return d.extend({},j,h)}})(jQuery);(function(d){d.fn.availabilitySwitch=function(m){this.defaultOptions={ajax:"/member/setAvailable",onStateText:'<i class="fa fa-check-circle"></i>Available now!',offStateText:'<i class="fa fa-minus-circle"></i>Busy',stateTextContainer:d(".availability"),stateTextElement:d(".availability-label"),toggleIconElement:d(".avail-member-trigger"),success:function(){},fail:function(){}};var n=d.extend({},this.defaultOptions,m);return this.each(function(){var o=d(this);c(o,n)})};var h;var l=function(p,r,o){if(h){return false}var s=o?0:1;var n=p.stateTextContainer;var t=p.stateTextElement;var m=d(t,n);var q={status:s};d.ajax({url:p.ajax,type:"POST",data:d.extend({},q,PPH.getCsrf()),beforeSend:function(){m.fadeTo(200,0.4);h=true},success:function(u){if(u.success){if(s){e(p)}else{j(p)}m.fadeTo(150,1);h=false;k(p);a(u.newStatus);p.success.call(this)}else{p.fail.call(this);h=false;b(r,p,false);h=true;PPH.error(u.message,{persist:true})}}})};var c=function(o,n){var p=d("<div/>",{"class":"switchContainer"});var m=d("<div/>",{"class":"av-switch-bg"});switchHandle=d("<div/>",{"class":"av-switch-handle"});o.hide();switchHandle.appendTo(m.appendTo(p));p.insertAfter(o);f(o,n);var q=o.prev("a");p.add(q).on("click drag",function(r){b(o,n,true)})};var f=function(o,n){var m=o.is(":checked");if(m){switchHandle.css("left","");switchHandle.css("left","55%");switchHandle.removeClass("handle-off").addClass("handle-on");e(n)}else{switchHandle.css("left","-5%");switchHandle.removeClass("handle-on").addClass("handle-off");j(n)}};var b=function(o,n,p){var m=o.is(":checked");if(h){return false}if(m){g(o)}else{i(o)}if(p){l(n,o,m)}};var i=function(m){var n=d(".av-switch-bg > .av-switch-handle");m.prop("checked",true);n.css("left","");n.removeClass("handle-off").addClass("handle-on");n.animate({left:"55%"});n.handlePos="right"};var g=function(m){var n=d(".av-switch-bg > .av-switch-handle");m.prop("checked",false);n.removeClass("handle-on").addClass("handle-off");n.animate({left:"-5%"});n.css("right","");n.handlePos="left"};var e=function(o){var n=o.stateTextContainer;var p=o.stateTextElement;var m=d(p,n);d(m,n).html(o.onStateText).removeClass("busy").addClass("available")};var j=function(o){var n=o.stateTextContainer;var p=o.stateTextElement;var m=d(p,n);d(m,n).html(o.offStateText).removeClass("available").addClass("busy")};var k=function(m){var n=m.toggleIconElement;n.toggle()};var a=function(n){var m=d(".top-nav-image .available");var o=d(".top-nav-image .available i");m.removeClass("not");o.removeClass("fa-check fa-minus");if(n==0){m.addClass("not");o.addClass("fa-minus")}else{o.addClass("fa-check")}}})(jQuery);(function(g){g.fn.pphSwitch=function(h){this.defaultOptions={targetClass:"pphSwitchContainer",handleLeftPos:"3%",handleRightPos:"53%"};var i=g.extend({},this.defaultOptions,h);return this.each(function(){var j=g(this);c(j,i)})};var b;var c=function(i,h){var j=g("<div/>",{"class":h.targetClass});switchBg=g("<div/>",{"class":"pph-switch-bg"});switchHandle=g("<div/>",{"class":"pph-switch-handle"});if(i.data("handleleftpos")){i.handleLeftPos=i.data("handleleftpos")}else{i.handleLeftPos=h.handleLeftPos}if(i.data("handlerightpos")){i.handleRightPos=i.data("handlerightpos")}else{i.handleRightPos=h.handleRightPos}i.hide();switchHandle.appendTo(switchBg.appendTo(j));j.insertAfter(i);d(i,h);j.add(h.stateTextElement).on("click drag",function(k){e(i,h,true)})};var d=function(j,i){var h=j.is(":checked");if(h){switchHandle.css("left","");switchHandle.css("left",j.handleRightPos);switchHandle.removeClass("handle-off").addClass("handle-on");switchBg.removeClass("bg-off").addClass("bg-on")}else{switchHandle.css("left",j.handleLeftPos);switchHandle.removeClass("handle-on").addClass("handle-off");switchBg.removeClass("bg-on").addClass("bg-off")}};var e=function(j,i){var h=j.is(":checked");if(h){f(j,i)}else{a(j,i)}};var a=function(j,i){var h=g("+."+i.targetClass+" .pph-switch-bg",j);var k=g("> .pph-switch-handle",h);j.prop("checked",true);j.trigger("change");k.css("left","");k.removeClass("handle-off").addClass("handle-on");h.removeClass("bg-off").addClass("bg-on");k.animate({left:j.handleRightPos});k.handlePos="right"};var f=function(j,i){var h=g("+."+i.targetClass+" .pph-switch-bg",j);var k=g("> .pph-switch-handle",h);j.prop("checked",false);j.trigger("change");k.removeClass("handle-on").addClass("handle-off");h.removeClass("bg-on").addClass("bg-off");k.animate({left:j.handleLeftPos});k.css("right","");k.handlePos="left"}})(jQuery);PPH.modules.BsRating=function(b){var a={starRatingSelector:".star-rating span",valueInputSelector:"input.rating-value",emptyStar:"&#9734;",filledStar:"&#9733;",emptyColor:"#bbb",filledColor:"#ffac00"};var d=PPH.Module($.extend({},a,b));var e=d.config;d.init=function(){$(document).on("click",e.starRatingSelector,function(){$(this).siblings(e.valueInputSelector).val($(this).data("rating"));d.setRatingStar()});d.setRatingStar()};d.setRatingStar=function(){var c=$(e.starRatingSelector);var f=parseInt(c.siblings(e.valueInputSelector).val(),10);return c.each(function(){if(f>=parseInt($(this).data("rating"),10)){return $(this).addClass("selected")}else{if($(this).hasClass("selected")){$(this).removeClass("selected")}}})};return d};PPH.modules.AttachFiles=function(M){var a=60;var G=160;var Z={maxFiles:3,maxFileSize:"20mb",maxTotalFileSize:"0mb",chunkSize:"100kb",container:".widget-jsModuleAttachFiles",itemClass:"attachFiles-item",primaryInput:null,primarySelector:null,primaryEnabled:false,primaryDefaultOrdering:["video","image","embed","quote","other"],primaryClass:"primary",overlayClass:"attach-overlay",fileList:".attachFiles-list",fileRemoves:".delete",dragSupportElement:".attachFiles-dragsupport",noDragSupportClass:"noDragSupport",promoViewSel:".attachFiles-promoView",promoFileLink:".attachFiles-pvFiles a",absDropArea:".attachFiles-dropArea",descrDialog:null,descrDialogText:null,uploadDelayPercentage:25,uploadProgressInterval:300,chucksCount:6,chunkSizeMin:100000,chunkSizeMax:600000,embedOn:false,embedUrl:null,embedValidateUrl:null,translations:{embedContentButton:"Embed Content",embedMediaWaitMessage:"Please wait..."},importOn:false,importItemsUrl:null,importUrl:null,loadedPortfolio:false,portfolioItems:null,formKey:"uploadEnc",oldAtt:true,files:{},phrases:{errorMaxFiles:"You can upload up to {0} files",errorTotalMaxFiles:"You can upload up to {0} files of total size",errorFileType:"Invalid file type",errorFileSize:"Max file size for this file type is {0}",errorGeneral:"There was an error",loadPleaseWait:"Please wait...",description:"Add description"},fileExtsWhitelist:[],fileExtsBlacklist:[],_dropTarget:"",_formElement:"",_submitButtons:"",_currentUpload:"",_pluploader:null,_filesToUpload:0,_filesUploadedOrQueued:0,defaultMaxFileSize:"5mb",successUploadClass:"attach-success",sortingAttribute:null,tooltipPosition:"left",tooltipClasses:"state-error",FILETYPES:{},user_id:0};var n={};for(var d in M){n[d]=$.extend({},Z,M[d])}var K=PPH.Module(n);var Y=K.config;var I={};var v;var y=800;var U=25;var k=null;var S=null;var F={uploadRate:10000,uploadStart:0,uploadFinish:0,chunks:[],lastChunkUploaded:0};var J=false;var g=null;var r=null;var O=PPH.isResponsive?"fpph-icon":"icon large";var X=PPH.isResponsive?"fpph-file-unknown":"file-unknown";K.FILETYPES={IMAGE:"image",AUDIO:"audio",VIDEO:"video",DOC:"document",QUOTE:"quote",EMBED:"embed",OTHER:"other"};function l(c){if(PPH.DEBUG&&typeof console!="undefined"){console.log(c)}}function Q(ad,ac){var ab=$("#"+ad.id).closest(".widget-jsModuleAttachFiles");var c=ac||ab.data("uploader");var ae=aa(c);l("_onRemoveFile Triggered for id:"+ae.id);$("body").trigger("FileRemove",{opts:ae,file:ad});ab.data(ad.id+"-removed","1");D(ad.id,c);if(ae.primaryEnabled&&k!==null&&ad.id==k.id){q()}if(5!=ad.status){ae._filesToUpload--}ae._filesUploadedOrQueued--;ae.totalSize-=parseInt(ad.size,10);K.refreshFormStatus(c);if(ad.fake){K.trigger("removed",c,ad);return}c.removeFile(ad);c.refresh();if(ae._currentUpload==ad.id){c.stop();c.refresh();c.start()}K.trigger("removed",c,ad)}function P(){var c=$(".widget-jsModuleAttachFiles");$.each(c,function(ah,ae){var ad=$(ae);$(".attachFiles-list li",ad).each(function(aj,ak){$(ak).animate({width:0,opacity:0},1000,function(){$(this).remove()})});var ac=ad.data("uploader");var ai=aa(ac);ac.stop();ac.refresh();ai._filesUploadedOrQueued=0;ai._filesToUpload=0;if(ai.importOn){var ab=$("#import-dialog-"+ai.id),ag=ab.find('input[data-hook="selected-items"]'),af=ab.find('li[data-hook="import-select"]');af.each(function(){$(this).removeClass("checked").removeClass("imported").removeData("checked").removeData("imported")});ag.remove()}K.refreshFormStatus(ac)})}function z(c){if("string"!==typeof c){c="-"}return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;")}function u(ab,c){var ac=ab.substring(0,ab.lastIndexOf("."));if(ac.length>c-4){ac=ac.substring(0,c-5)+".."+ab.substring(ab.lastIndexOf("."))}else{ac+=ab.substring(ab.lastIndexOf("."))}ac=z(ac);return ac}function C(ad){var ab=["b","k","m","g","t"],c=parseFloat(ad),ac=ad.replace(/(\d+)b$/g,"$1bb").slice(-2,-1);return c*Math.pow(1024,$.inArray(ac,ab))}function b(c){if(c.lastIndexOf(".")!==-1){return c.slice(c.lastIndexOf(".")).substr(1).toLowerCase()}else{return false}}function T(ab,c){if(!ab){return false}else{if(c.fileExtsWhitelist&&c.fileExtsWhitelist.length>0){return($.inArray(ab,c.fileExtsWhitelist)!==-1)}else{if(c.fileExtsBlacklist&&c.fileExtsBlacklist.length>0){return($.inArray(ab,c.fileExtsBlacklist)===-1)}}}return true}function m(c){return Math.ceil(c-((c/100)*Z.uploadDelayPercentage))}function D(ab,c){$("#"+ab+" .remove").remove();$("#"+ab).animate({width:0,opacity:0},y,function(){$("#"+ab+", .file-attach-"+ab).remove();c&&c.refresh()})}function t(ac,ad,ae,ab){var c=aa();ab=ab||{};PPH.dom.error(ac,ae,$.extend(true,{},{pos:c.tooltipPosition,autoclose:5000,extraClasses:c.tooltipClasses},ab))}function p(ab,c){return"<b>"+u(ab,U)+"</b>: "+c}function j(c){$('<a href="#" class="attachFiles-pick-placeholder"></a>').insertAfter($(".attachFiles-pick._attachFiles-link",c))}K.embedMedia=function(ad,ae,c){var af=ad.find('input[type="submit"]'),ac=ad.data("uploaderConfig"),ab=function(){af.removeProp("disabled").removeClass("disabled").val(ac.translations.embedContentButton)};af.removeProp("disabled");if(c){ab();return false}if(r&&r.abort){r.abort()}r=$.ajax({url:ac.embedUrl,data:ad.serializeArray(),dataType:"json",type:"post",beforeSend:function(){af.prop("disabled",true)},error:function(){ab()},success:function(ag){r=null;ab();if(!ag.status&&ag.errorMsg){return t(ad.find('input[data-hook="input"]'),"error",ag.errorMsg,{zIndex:1101,container:ac!==undefined?"#embed-form-"+ac.id:"body"})}if(ac!==undefined){$dlg=$("#embed-dialog-"+ac.id);$dlg.modal("hide")}var ah=new K.PPHFile({id:ag.id,description:ag.name,fake:false,original:ag.path,preview:ag.preview,path:ag.path,size:ag.size,fileName:ag.name,type:ag.type||K.FILETYPES.EMBED,cssClass:X,service:ag.service,status:5,source_url:ag.source_url,media_url:ag.media_url,width:ag.width,height:ag.height,isEmbedding:true},ag.name,ag.filesize,K.FILETYPES.EMBED,false,false,ag.name);ah.category=K.FILETYPES.EMBED;K.addFileBlock(ah,ac.containerDom,ac.containerDom.data("uploader"));var ai=$("#"+ag.id);ai.data("file",ah).removeClass("hide").addClass("attach-success").css("opacity",1).show().css("width",120);K.generatePreview($("img",ai),ah);K.updateFileBlock(ag.id,ag.id,ah,ac);K.refreshFormStatus(ac.container.data("uploader"),true)}})};K.loadPortfolioItems=function(c){return $.ajax({url:c.importItemsUrl,data:PPH.getCsrf(),dataType:"html",type:"POST",success:function(ab){c.portfolioItems=ab;c.loadedPortfolio=true}})};function B(ad,ab){var ac=ad.find('a[data-hook="import-dialog-trigger"]'),c=$("#import-dialog-"+ab.id),ae=c.find('div[data-hook="items-container"]');c.on("show.bs.modal",function(ag,af){ae.loader("open",{smartPositioningOptions:{minimumHeight:250}});if(ab.portfolioItems===null){$.when(K.loadPortfolioItems(ab)).done(function(){ae.html(ab.portfolioItems);if($(ab.portfolioItems).find("span.empty").length){c.find('a[data-hook="import-button"]').hide()}i(c,ab);ae.loader("close")})}else{ae.loader("close")}});ac.on("click",function(af){af.preventDefault();c.modal("show")});c.on("hide.bs.modal",function(){c.find("li.checked:not(.imported)").each(function(){var af=$(this);af.removeClass("checked").removeData("checked");c.find('input[data-hook="selected-items"][data-item="'+af.data("id")+'"]').remove()});PPH.dom.error(ae,"close");PPH.dom.info(c.find("li.checked.imported"),"close")});c.find('a[data-hook="import-button"]').on("click",function(ag){ag.preventDefault();ag.stopPropagation();var af=ae.find('input[data-hook="selected-items"]');f(af,ab);af.each(function(){$("#import-dialog-"+ab.id+' li[data-hook="import-select"][data-id="'+$(this).data("item")+'"]').addClass("imported").data("imported",true)});c.modal("hide")})}function i(c,ab){var ad=c.find('div[data-hook="items-container"]'),ac={autoclose:5000,closeOnFocus:true,zIndex:1101,container:c.selector};ad.find('li[data-hook="import-select"]').on("click","a",function(aj){aj.preventDefault();aj.stopPropagation();var ah=ab._filesUploadedOrQueued,ag=parseInt(ab.totalSize,10),ae=ab.maxFiles-ah,am=C(ab.maxTotalFileSize)-ag;PPH.dom.error(ad,"close",ac);var ak=$(this),al=ak.parent("li");if(al.data("imported")==true){PPH.dom.info(al,ab.translations.alreadyImported,ac);return false}if(al.data("checked")){al.removeClass("checked").removeData("checked");ad.find('input[data-hook="selected-items"][data-item="'+al.data("id")+'"]').remove();return false}if(ad.find('input[data-hook="selected-items"]').length>=ae){PPH.dom.error(ad,ab.translations.maxImportFiles.replace(/\{num\}/gi,ab.maxFiles),ac);return false}if(C(ab.maxTotalFileSize)>0&&af()>=am){PPH.dom.error(ad,ab.translations.maxImportSize.replace(/\{num\}/gi,ab.maxTotalFileSize),ac);return false}al.addClass("checked").data("checked",true);var ai=al.data();ad.append(['<input type="hidden" value="',ai.id,'" data-item="',ai.id,'" data-type="',ai.type,'" data-description="',ai.description,'" data-size="',ai.size,'" data-hook="selected-items">'].join(""));function af(){var an=0;ad.find('input[data-hook="selected-items"][data-size]').each(function(){var ao=parseInt($(this).data("size"),10);if(!isNaN(ao)){an+=ao}});return an}})}function f(ab,c){if(!ab.length){return false}var ac=c.container.data("uploader");K.refreshFormStatus(ac,false);Y[c.id]._filesToUpload=ab.length;$.each(ab,function(af,ag){var ae=$(this),ai=null,ak=ae.data("item"),ah=ae.data();var ad=new K.PPHFile({id:"import-item-"+ak,description:ah.description,fake:false,category:ah.category,status:5,primary:false,fileName:ah.description,filesize:ah.size,type:ah.type||K.FILETYPES.EMBED,cssClass:X});K.addFileBlock(ad,c.containerDom,c.containerDom.data("uploader"));var aj=$("#import-item-"+ak);aj.data("file",ad).removeClass("hide").addClass("attach-success").addClass("attach-import-loading").css("opacity",1).show().css("width",120);K.refreshFormStatus(ac);aj.find(".remove").on("click",function(){Y[c.id]._filesToUpload--;K.refreshFormStatus(c.container.data("uploader"));$("#import-dialog-"+c.id+' li[data-hook="import-select"][data-id="'+ak+'"]').removeClass("checked imported").removeData("checked").removeData("imported");if(ai!==null&&typeof ai.abort==="function"){ai.abort()}});$(window).on("beforeunload",function(){if(ai!==null&&typeof ai.abort==="function"){ai.abort()}});ai=$.ajax({url:c.importUrl+"&mediaId="+ak,data:PPH.getCsrf(),dataType:"json",type:"post",error:function(){aj.find(".remove").trigger("click");K.refreshFormStatus(c.container.data("uploader"))},success:function(an){if(an.status===undefined||an.status===false){var aq=an.errorMsg?[an.errorMsg,"<br>"].join(""):["System Error: Item ",ak," could not be imported","<br>"].join(""),am=5000;PPH.dom.error(aj,aq,{autoclose:am});setTimeout(function(){aj.find(".remove").trigger("click")},am);K.refreshFormStatus(c.container.data("uploader"));return false}var ap=new K.PPHFile({id:an.id,description:an.description,fake:false,category:an.category,original:an.path,preview:an.preview,path:an.path,size:an.size,fileName:an.name,type:an.type||K.FILETYPES.EMBED,cssClass:an.cssClass||X,service:an.service,status:5,source_url:an.source_url,media_url:an.media_url,width:an.width,height:an.height,filesize:an.filesize,thumb:an.thumb,isImporting:true},an.name,an.filesize,an.category,false,false,an.description);Y[c.id]._filesToUpload--;var al=parseInt(an.filesize,10),ao=aj.find("img");Y[c.id].totalSize+=!isNaN(al)?al:0;K.generatePreview(ao,ap);ao.attr("data-tooltip-content",an.name);K.updateFileBlock(an.id,"import-item-"+ak,ap,c);K.refreshFormStatus(c.container.data("uploader"))}});ae.remove()})}function W(ad,ag){var ah=ad.find('a[data-hook="embed-dialog-trigger"]'),ae=$("#embed-dialog-"+ag.id),aj=$("#embed-form-"+ag.id),ab=aj.find('input[type="submit"]'),ac=ae.find('input[type="hidden"][data-hook="service"]'),ai=ae.find('a[data-hook="service"]'),af=[8,9,16,17,18,33,34,35,36,37,38,39,40,46,91];if(aj.length){aj.data("uploaderConfig",ag);aj.on("submit",function(ak){ak.preventDefault();ak.stopPropagation()})}if(ah.length&&ae.length){ae.on("show.bs.modal",function(){aj.find('input[data-hook="input"], input[data-hook="service"]').val("");aj.find('input[data-hook="service"]').trigger("change");ab.removeProp("disabled").removeClass("disabled").val(ag.translations.embedContentButton)}).on("hide.bs.modal",function(){if(r&&r.abort){r.abort()}ab.removeProp("disabled").removeClass("disabled").val(ag.translations.embedContentButton);ae.find(".tooltip").tooltip("destroy")});ae.find('input[data-hook="input"]').on("keyup change",function(am){var al=$(this);if(al.val()===""){ac.val("").trigger("change")}if(am.keyCode!==undefined&&$.inArray(parseInt(am.keyCode,10),af)!==-1){return}var ak=new String(al.val());if(ak.length&&!ak.match(/^(http|<\w+)/gi)){ak="http://"+ak;al.val(ak)}c(ak,ag.embedHosts)});ah.on("click",function(ak){ak.preventDefault();ae.modal("show")});function c(al,ak){if(g!==null){match=al.match(g);if(match!==undefined&&match!==null&&match.length&&match[0]!==undefined){ac.val(ak[(match[0])]).trigger("change")}else{ac.val("").trigger("change")}}}ac.on("change",function(ao){var an=$(this),ak=an.val(),am=false;ai.removeClass("transparent");for(var al in ag.embedHosts){if(!ag.embedHosts.hasOwnProperty(al)){continue}if(ag.embedHosts[al]==ak){am=true;break}}if(ak===""||!ak||!am){return}ai.filter(':not([data-service="'+ak+'"])').addClass("transparent")})}}function x(c){var ab=$(c.fileList,v);ab.addClass("ui-sortable");ab.sortable({handle:".attachFiles-item",nested:false,vertical:false,placeholder:'<li class="drop-target"></li>',onDragStart:function(ae,ac,ad){ad(ae);ae.addClass("highlight-drag")},onDrop:function(ae,ac,ad){ae.removeClass("highlight-drag");K.applySortingOrder(c);ad(ae)}})}function A(){var c=new XMLHttpRequest();return !!(c&&("upload" in c)&&("onprogress" in c.upload))}function N(){var c=document.createElement("canvas");return !!(c.getContext&&c.getContext("2d"))}function aa(c){if(typeof c=="undefined"){c=$(".widget-jsModuleAttachFiles").eq(0).data("uploader")}return typeof c!=="undefined"?c.settings.config:Z}function s(c){l("setupUploader Init");var ac=1;while($("#attachFiles-pick-"+ac).length){ac++}$("._attachFiles-link",c.containerDom).attr("id","attachFiles-pick-"+ac);$(".attachFiles-dropArea",c.containerDom).attr("id","attachFiles-dropArea-"+ac);var ab=new plupload.Uploader({runtimes:"html5,flash",required_features:"send_browser_cookies",browse_button:"attachFiles-pick-"+ac,container:c.containerDom.attr("id"),containerDom:c.containerDom,config:c,drop_element:"attachFiles-dropArea-"+ac,flash_swf_url:"/js/jquery-plugins/plupload/Moxie.swf",chunk_size:c.chunkSize,urlstream_upload:true,url:c.ajaxUpload});K.refreshFormStatus(ab);ab.init();ab.bind("FilesAdded",function(ak,ae){var ad=ak.settings.config;var af=[];var aj=ae.length;l("FilesAdded event triggered. Totalfiles:"+aj);for(var ag=0;ag<aj;ag++){if(typeof ae[ag]==="undefined"){continue}var ah=ae[ag];if(!T(b(ah.name),ad)){af.push(p(ah.name,ad.phrases.errorFileType));ak.removeFile(ah);t(ad.containerDom,"error",ah.name+": invalid file type");w(false,"Invalid file type",ah.size,ah.name);ae.splice(ag,1);ag--;continue}var al=o(ah.name,ad);if(ah.size>C(al)){af.push(p(ah.name,ad.phrases.errorFileSize.replace("{0}",al)));ak.removeFile(ah);ae.splice(ag,1);ag--;continue}ad.totalSize+=ah.size;if(C(ad.maxTotalFileSize)>0&&ad.totalSize>C(ad.maxTotalFileSize)){af.push(p(ah.name,ad.phrases.errorTotalMaxFiles.replace("{0}",ad.maxTotalFileSize)));ak.removeFile(ah);ae.splice(ag,1);ag--;ad.totalSize-=ah.size;continue}}if(ad._filesUploadedOrQueued+ae.length>ad.maxFiles){var am=ad._filesUploadedOrQueued+ae.length-ad.maxFiles;if(ad._filesUploadedOrQueued==1){am--}for(var ai=0;ai<am;ai++){ak.removeFile(ae.pop())}if(am>0){af.push(ad.phrases.errorMaxFiles.replace("{0}",ad.maxFiles))}}if(ae.length>0){$.each(ae,function(ao,an){if(an.size===0){ak.removeFile(an);return true}an.safeName=u(an.name,25);ad._filesToUpload++;K.addFileBlock(an,ak.settings.containerDom,ak);var ap=a;if(ad.galleryMode){ap=G}$("#"+an.id).data("uploader",ak).css("width",0).css("display","block").animate({width:ap,opacity:1},y,function(){var aq=$(this).data("uploader");K.refreshFormStatus(aq);aq.refresh()})});ak.start();K.refreshFormStatus(ak)}if(af.length){t(ad.containerDom,"error",af.join("<br/>"))}});ab.bind("Error",function(ad,af){l("ErrorUpload Event. err:"+af.message);var ae=ad.settings.config;K.uploadFailed(ae,ad,af.file,af.message);if(ae._filesToUpload>0){ae._filesToUpload--}});ab.bind("BeforeUpload",function(ad,ag){l("Event: BeforeUpload");F.uploadStart=performance.now();F.lastChunkUploaded=performance.now();F.chunks=[];var af=Math.ceil(ag.size/Z.chucksCount);l("File size: "+ag.size+" bytes");af=Math.min(Math.max(af,Z.chunkSizeMin),Z.chunkSizeMax);ad.settings.chunk_size=af;var ai={file_size:ag.size,user_id:c.user_id};if(c.target){ai.target=c.target}if(c.targetId){ai.targetId=c.targetId}ad.settings.multipart_params=$.extend(ai,PPH.getCsrf());l("Resulting ChunkSize: "+af+" bytes");l(ad.settings);var ah=ad.settings.config;ah._currentUpload=ag.id;$("#"+ag.id).removeClass().addClass("attach-uploading").find(".attachFiles-item").remove("img").append('<div class="attachFiles-progress"><span>0</span><input type="hidden" class="attachFiles-knob" value="0" /></div>');var ae=$("#"+ag.id+" .attachFiles-knob");ae.bind("change",function(aj){$(this).parents(".attachFiles-progress").find("span").text($(this).val())}).parent().css({marginTop:ae.parents(".gallery:first").length?40:5,marginLeft:5,display:"block"});if(N()){ae.knob({readOnly:true,fgColor:"#ff7701",bgColor:"#abaaaa",thickness:0.22,width:50,height:50})}K.updateFileProgressBlock(ag,ad,10,700,false,true)});ab.bind("ChunkUploaded",function(ah,af,al){l("Event: ChunkUploaded");l(". Percent (file.percent): "+af.percent);l(". Percent (up.total.percent): "+ah.total.percent);l(al);if(al.chunk==al.chunks-1){var ak=0;for(var ag=0;ag<F.chunks.length;ag++){ak+=parseInt(F.chunks[ag])}ak=Math.ceil(ak/F.chunks.length);lastChunk=Math.ceil(performance.now()-F.lastChunkUploaded)}F.chunks[al.chunk]=performance.now()-F.lastChunkUploaded;F.lastChunkUploaded=performance.now();var aj=99-parseInt($("#"+af.id+" .attachFiles-progress input.attachFiles-knob").val(),10),ad=(aj-Z.uploadDelayPercentage)*Z.uploadProgressInterval;if(al.chunks>2&&al.chunk==0){F.uploadRate=ah.settings.chunk_size/((performance.now()-F.uploadStart)/1000);l(". Upload rate: "+F.uploadRate)}if(al.chunk+1<=al.chunks-1){var ae=0,ai=Z.uploadProgressInterval;if(al.chunk>0){for(var ag=0;ag<=al.chunk;ag++){ae+=F.chunks[ag]}ae/=al.chunk+1;ai=ae/(m(100)/al.chunks)}ad=(aj-Z.uploadDelayPercentage)*ai;l(". Update progress: Normal");K.updateFileProgressBlock(af,ah,af.percent,ai,true,true)}else{l(". Update progress: None, last chunk")}if(al.chunk+1==al.chunks-1){l(". Update progress: Last Update, pre-last chunk");setTimeout(function(){var an=100-parseInt($("#"+af.id+" .attachFiles-progress input.attachFiles-knob").val()),ao=0.0000186282295023406*af.size+(22.0065182321634*af.size/3000000),am=(ao/an)*1000;l("Estimated processing time: "+ao);K.updateFileProgressBlock(af,ah,98,am,false,true)},ad)}});ab.bind("UploadedProgress",function(ad,ae){var af=aa(ad);l("Event: UploadedProgress");l("Percent (file.percent): "+ae.percent);l("Percent (up.total.percent): "+ad.total.percent)});ab.bind("FileUploaded",function(al,ah,ai){for(var ak=0;ak<F.chunks.length;ak++){l("Chunk #"+(ak+1)+" took: "+parseInt(F.chunks[ak]*1000,10)/1000000+"s")}var ae=aa(al);l("FileUpload Event. File upload completed");if($(ae.container).data(ah.id+"-removed")==1){return false}ae._filesToUpload--;var aj=null,ad=true;try{aj=jQuery.parseJSON(ai.response)}catch(am){w(false,"Exception thrown while parsing the json response "+am.message);ad=false}var ag;if(aj===undefined||!ad){l("Malformed JSON returned from server");ag=p(ah.name,"System Error");K.uploadFailed(ae,al,ah,ag);return false}else{if(null===aj){l("FileUpload Event. Empty response");ag=p(ah.name,"System Error");w(false,"System error: empty response from server",ah.size,ah.name);K.uploadFailed(ae,al,ah,ag);return false}}if(typeof aj!="undefined"&&aj.errorMsg){l("FileUpload Event. Failed with error message:"+ag);ag=p(ah.name,aj.errorMsg);w(false,"Failed with message "+ag,ah.size,ah.name);K.uploadFailed(ae,al,ah,ag);return false}else{if(!aj.status){l("FileUpload Event. Failed with no error message");ag=p(ah.name,ae.phrases.errorGeneral);w(false,"Failed with no error message",ah.size,ah.name);K.uploadFailed(ae,al,ah,ag);return false}}var af=aj.id||ah.id;K.updateFileProgressBlock(ah,al,100,1,false,true);setTimeout(function(){if(J&&ae.sortingAttribute&&!aj[ae.sortingAttribute]){aj[ae.sortingAttribute]=$(ae.fileList+" li",v).length}K.updateFileBlock(af,ah.id,aj,ae)},100);K.refreshFormStatus(al);l("FileUpload Event. totalSize so far:"+K.getTotalSize(al));w(true,"File uploaded successfully",ah.size,ah.name);$("body").trigger("FileUpload",{pluploader:ab,opts:ae,response:aj});K.trigger("uploaded",al)});ab.bind("UploadComplete",function(ad,af){for(var ae in af){ad.removeFile(af[ae])}K.refreshFormStatus(ad)});c._pluploader=ab;c.containerDom.data("uploader",c._pluploader);return c._pluploader}K.uploadFailed=function(ab,c,ac,ad){ab._filesUploadedOrQueued--;t(ab.containerDom,"error",ad);D(ac.id,c);K.refreshFormStatus(c)};function H(ag){ag.preventDefault();var ac=$(this).closest("li");var ae=ac.data("file");var ad=ac.data("config");var ah=$("img.descr-content-img"),c=$("div.descr-content-icon");ah.removeAttr("src").hide();c.hide();var ab=$('input[data-file-id="'+ae.id+'"][data-property="description"]');ad.descrDialogText.val(ab.val());if(K.FILETYPES.IMAGE==ae.category){ah.attr("src",ae.original);ah.show()}else{if(ae.category==K.FILETYPES.EMBED&&ae.preview){ah.attr("src",ae.preview);ah.show()}else{if(c.data("icon-class")!==undefined){c.removeClass(c.data("icon-class"))}if(ae.cssClass===undefined){var af=ac.find(".preview").attr("class").match(/(file\-.*)/gi);if(af.length){ae.cssClass=af.pop()}}c.addClass(ae.cssClass).data("icon-class",ae.cssClass).show()}}$("#"+ad.id+"-descr-dialog-btn").data("file",ae);ad.descrDialog.modal("show")}function e(ae){ae.preventDefault();var ag=$(this).data("config");var ac=$(this).data("file");var ad=ag.descrDialogText.val();var ab=$('input[data-file-id="'+ac.id+'"][data-property="description"]');ab.val(ad);var af=$("#"+ac.id);if(""===ad){af.find(".attachFiles-item-descr-container a").addClass("without-description").text("Add Description")}else{af.find(".attachFiles-item-descr-container a").removeClass("without-description").text(ad)}ag.descrDialog.modal("hide")}function o(af,ae){var ab=ae||aa(),c=ab.defaultMaxFileSize,ad=(b(af)||null),ac="other";if(ad!=null&&typeof plupload.mimeTypes[ad]!="undefined"){ac=plupload.mimeTypes[ad].replace(/(.*)\/.*/gi,"$1")||null;if(typeof ab.maxFileSize=="object"&&typeof ab.maxFileSize[ac]!="undefined"){c=ab.maxFileSize[ac]}}return c}function h(c){l("_enableDefault Init. fileId:"+c);if("string"!==typeof c){l("_enableDefault exiting, fileId not string");return}var ac=aa(),ah=ac.primaryDefaultOrdering,ag=-1,ad=-1;var ae="."+ac.itemClass+" ."+ac.overlayClass;var af=$("#"+c).closest(ac.fileList),ab=$("#"+c).data("category");if(S!==null){ag=$.inArray(S,ah)}if(ab!==null){ad=$.inArray(ab,ah)}af.find("li[data-category]").off("mouseover mouseout click").on("click",function(ai){ai.preventDefault();return false});if(S===null||(ab!==null&&ad>-1&&(ag==-1||ad<ag))){E(c);S=ab;k=c}l("_enableDefault: _primaryType:"+S+" newType:"+ab+" newPos:"+ad+" existingPos:"+ag);af.find('li[data-category="'+S+'"]').each(function(aj,ai){$(ai).on("mouseover",function(){if(S===null||$(this).data("category")==S){$(this).find(ae).addClass(ac.primaryClass)}}).on("mouseout",function(){if(k===null||(k.id!==null&&k!=$(this).attr("id"))){$(this).find(ae).removeClass(ac.primaryClass)}}).on("click",function(ak){l("_enableDefault: click triggered for element with ID:"+$(this).attr("id"));E($(this).attr("id"));ak.preventDefault();return false})})}function E(c){l("_makeDefault Init. fileID:"+c);var ac=aa();var ab="#"+c;k=c;var ad="."+ac.itemClass+" ."+ac.overlayClass;$(ab).siblings().each(function(){$(this).find(ad).removeClass(ac.primaryClass)});$(ab).find(ad).addClass(ac.primaryClass);var ae=isNaN(c)?$(ab).find('input[data-property="id"]').val():c;$(ac.primarySelector).val(ae)}function q(){k=null;var c=aa();$(c.primarySelector).val("")}function V(ac){var c=false;if(typeof ac.originalEvent.dataTransfer.types=="undefined"||!ac.originalEvent.dataTransfer.types){c=true}else{for(var ab=0;ab<ac.originalEvent.dataTransfer.types.length;ab++){if(ac.originalEvent.dataTransfer.types[ab]=="Files"){c=true}if(ac.originalEvent.dataTransfer.types[ab]=="text/uri-list"){return false}}}if(c&&$(".widget-jsModuleAttachFiles").is(":hidden")){$(".widget-jsModuleAttachFiles:hidden").slideDown()}return c}K.generatePreview=function(ab,ae){var ad=aa();if(typeof ae.preview=="string"){ab.attr("src",ae.preview).show()}else{switch(ae.category){case K.FILETYPES.VIDEO:ab.attr("src",ad.defaultThumbFile).show();break;case K.FILETYPES.QUOTE:ab.attr("src",ad.defaultQuoteThumbFile).show();break;default:var ac=ab.parent();ab.replaceWith('<div class="preview"></div>');var c=(typeof ae.cssClass=="string")?ae.cssClass:X;if(PPH.isResponsive){c="fpph-"+c}$(".preview",ac).addClass(O).addClass(c);if(PPH.isResponsive){$(".preview",ac).addClass("js-tooltip").attr("title",ae.name)}else{$(".preview",ac).attr("data-tooltip-content",ae.name)}$(".preview",ac).parents("li").first().removeClass().attr("data-category",ae.category||"other").addClass(ad.successUploadClass);ab=$(".preview",ac);break}}return ab};K.applySortingOrder=function(c){if(!J){return false}$(c.fileList+" > li",v).each(function(ab,ac){var ad=$(ac).find('input[data-property="'+c.sortingAttribute+'"]');if(ad.length){ad.val(ab)}});return true};K.addFileBlock=function(ae,ac,ab){var c=ab||undefined;var ad=aa(c);l("addFileBlock Init. ConfigID:"+ad.id+"file.category:"+ae.category+" file.type:"+ae.type+" file.cssClass:"+ae.cssClass+" file.preview:"+ae.preview+" config._filesUploadedOrQueued:"+ad._filesUploadedOrQueued);if(typeof c!="undefined"||ae.preview===undefined){ad._filesUploadedOrQueued++}var af=$("#"+ad.id+"-template li").clone();af.data("file",ae).data("config",ad);af.attr("id",ae.id);af.attr("data-category",ae.category||"other");if(ad.primaryEnabled){af.children("div").children(".default").addClass(ad.overlayClass)}else{af.children("div").children(".default").remove()}if(!ad.galleryMode){af.find(".attachFiles-item-descr-container").remove()}else{af.find(".attachFiles-item-descr-container").on("click",H).addClass("hide");if(ae.description&&0<ae.description.length){af.find(".attachFiles-item-descr-container a").attr("title","Edit Description").removeClass("without-description").text(ae.description)}}if(typeof ae.preview=="string"){af.children("div").children("img").attr("alt",ae.safeName+" - "+(ae.size>0?plupload.formatSize(ae.size):""))}af.children(".remove").click(function(ag){Q(ae,c);ag.preventDefault();ag.stopPropagation();return false}).attr("title","Remove");$(".attachFiles-list",ac).append(af);return af};K.animateFileBlock=function(ac,ab){l("animateFileBlock Init. jQ.selector:"+ac.selector);var c=ab||function(){};ac.css("width",0).css("display","block").animate({width:a,opacity:1},y,c).removeClass().addClass("attach-uploading");return ac};K.PPHFile=function(ag,af,ac,ad,ab,c,ae){if("string"===typeof ag){l("PPHFile() init. id:"+ag+" fileName:"+af+" size:"+ac);this.id=ag;this.fileName=z(af);this.size=ac||0;this.fake=ab||false;this.primary=c||false;this.category=ad||K.FILETYPES.OTHER;this.status=5;this.description=ae||""}else{l("PPHFile() init. id:"+ag.id+" fileName:"+ag.fileName+" size:"+ag.size+" preview:"+ag.preview);this.id=ag.id;this.fileName=z(ag.fileName);this.size=ag.filesize||ac;this.fake=ag.fake||false;this.primary=ag.primary||false;this.category=ag.category||K.FILETYPES.OTHER;this.preview=ag.thumbUrl||ag.preview;this.original=ag.original||this.preview;this.cssClass=ag.cssClass;this.status=ag.status||5;this.type=ag.type||ad;this.description=ag.description||"";this.path=ag.path||"";this.service=ag.service||"";this.width=ag.width||"";this.height=ag.height||"";this.filesize=ag.filesize;this.source_url=ag.source_url||"";this.media_url=ag.media_url||"";this.thumb=ag.thumb||"";this.isEmbedding=ag.isEmbedding||false;this.isImporting=ag.isImporting||false}this.name=this.fileName};K.getTotalSize=function(c){var ab=aa(c);if(typeof ab.totalSize=="undefined"||isNaN(ab.totalSize)){return 0}return ab.totalSize};K.init=function(){plupload.mimeTypes=$.extend(true,{},mOxie.Mime.mimes,{"3gp":"video/3gp","3gpp":"video/3gp"});var ab,c;for(c in Y){ab=Y[c];l("Core INIT for id:"+ab.id);ab.totalSize=0;v=$(ab.container+"[data-id="+c+"]");ab.container=v;ab.containerDom=v;v.data("attachFilesConfig",ab);ab._fileList=$(ab.fileList,v);ab._formElement=v.closest("form");ab._submitButtons=ab._formElement.find("input[type=submit],button").not('[data-hook="descr"]').not('[data-dismiss="modal"]');ab._dropTarget=$(ab.absDropArea,v);if(ab.galleryMode){ab.descrDialog=$("#"+ab.id+"-descr-dialog");ab.descrDialog.data("config",ab);ab.descrDialogText=$("#"+ab.id+"-descr-dialog-text");$("#"+ab.id+"-descr-dialog-btn").on("click",e).data("config",ab)}if(ab.embedOn){W(v,ab);var ac=[];for(var aj in ab.embedHosts){ac.push(aj)}g=new RegExp("("+ac.join("|")+")","gi")}if(ab.importOn){B(v,ab)}if(ab.primaryInput!==null){ab.primarySelector="#"+$(ab.primaryInput).attr("id")}$("input[type=submit]",ab._formElement).each(function(){$(this).data("previousValue",$(this).val())});if(ab.promoView&&typeof ab.files!="undefined"&&ab.files&&ab.files.length&&$(ab.promoViewSel).is(":visible")){$(ab.promoViewSel).hide();$(".attachFiles-pick-placeholder",v).replaceWith($(".attachFiles-pick._attachFiles-link",v))}if(ab.quotesOn){j()}if(ab.sortingAttribute!==null){J=true;x(ab)}var ae=s(ab);for(var ai in ab.files){var ag=ab.files[ai];var ad=new K.PPHFile({id:ag.id,safeName:ag.name,size:ag.size,fake:true,primary:ab.primaryEnabled&&typeof ag.primary!=="undefined"&&ag.primary==true?true:false,type:ag.type||"other",category:ag.type||"other",name:ag.name,thumb:ag.thumb,preview:ag.preview,original:ag.original,cssClass:ag.cssClass,fileName:ag.name,service:ag.service||"",description:ag.description||"",source_url:ag.source_url||"",media_url:ag.media_url||"",width:ag.width||"",height:ag.height||""});if(J&&ab.sortingAttribute!==null&&ag[ab.sortingAttribute]!==undefined){ad[ab.sortingAttribute]=parseInt(ag[ab.sortingAttribute],10)}var af=parseInt(ad.size,10);ab.totalSize+=!isNaN(af)?af:0;var ah=a;if(ab.galleryMode){ah=G}K.addFileBlock(ad,v,ae);$("#"+ag.id).removeClass().addClass("attach-success").css("opacity",1).show().css("width",ah);K.generatePreview($("img","#"+ag.id),ad);if(ab.oldAtt){$("#"+ag.id).append('<input type="hidden" name="oldAtt[]" value="'+ad.id+'">')}else{K.updateFileBlock(ag.id,ag.id,ad,ab)}if(ab.primaryEnabled){h(ag.id)}}K.refreshFormStatus(ae,true);K.trigger("uploaderInit",ae);if((typeof window.FileReader!="undefined"&&window.FileReader)&&("draggable" in document.createElement("span"))){K.hideForDrag=function(){$(ab.absDropArea).removeClass("dragging");$(window).unbind("mousemove",K.hideForDrag)};K.showForDrag=function(){$(ab.absDropArea).addClass("dragging");$(window).bind("mousemove",K.hideForDrag)};$(window).bind("dragover",function(ak){if(V(ak)){K.showForDrag()}ak.preventDefault()});$(window).bind("drop",function(ak){K.hideForDrag();ak.preventDefault();return false})}else{v.addClass(ab.noDragSupportClass)}}};K.reset=function(){P()};K.refresh=function(){var c=$(".widget-jsModuleAttachFiles");$.each(c,function(ae,ad){var ac=$(ad);var ab=ac.data("uploader");var af=aa(ab);ab.refresh()})};K.refreshFormStatus=function(ab,ag){var c=ab||Y._pluploader;var ae=aa(c);var ac;if(false===ag){ac=false}else{if(true===ag){ac=true}else{ac=ae._filesToUpload<=0}}l("refreshFormStatus Init. for id:"+ae.id+" status:"+ac+" maxFiles:"+ae.maxFiles+" _filesToUpload:"+ae._filesToUpload+" _filesUploadedOrQueued:"+ae._filesUploadedOrQueued+" total size uploaded:"+K.getTotalSize(c));for(var ad in Y){if(Y[ad]._filesToUpload>0){ac=false;break}}if(ac){K.trigger("upload-complete");ae._formElement.removeClass("loading");ae._submitButtons.each(function(ah){$(this).removeAttr("disabled");if(ah===0){if($(this).prop("tagName").toLowerCase()=="input"){$(this).val($(this).data("previousValue"))}if($(this).prop("tagName").toLowerCase()=="button"){$(this).text($(this).data("previousValue"))}}})}else{K.trigger("upload-progress");if(!ae._formElement.hasClass("loading")){ae._formElement.addClass("loading")}ae._submitButtons.each(function(ah){$(this).attr("disabled","disabled");if(ah===0){if(typeof $(this).data("previousValue")=="undefined"){if($(this).prop("tagName").toLowerCase()=="input"){$(this).data("previousValue",$(this).val())}if($(this).prop("tagName").toLowerCase()=="button"){$(this).data("previousValue",$(this).text())}}if($(this).prop("tagName").toLowerCase()=="input"){$(this).val(ae.phrases.loadPleaseWait)}if($(this).prop("tagName").toLowerCase()=="button"){$(this).text(ae.phrases.loadPleaseWait)}}})}var af=(ae.maxFiles<=ae._filesUploadedOrQueued);if(af){ae._dropTarget.hide()}else{if(!af){ae._dropTarget.show()}}if(J){K.applySortingOrder(ae)}};K.updateFileProgressBlock=function(c,ac,ae,ag,ab,ai){var ai=(typeof ai!=="undefined"&&ai),ab=(typeof ab!=="undefined"&&ab),ae=(ab?m(ae):ae),ag=(typeof ag!=="undefined"?ag:Z.uploadProgressInterval),ad=$("#"+c.id+" .attachFiles-progress"),af=$(ad).find("input.attachFiles-knob");var ah;if(ai){ah=ae}else{ah=ae-parseInt(af.val(),10)}R(af,ah,ag,ai)};function R(ae,ad,af,c){var ab=ad;l(".. animate "+(c?"Absolute":"Relative")+" progress: "+ad+"%, rate: "+af);var ac=setInterval(function(){var ag=ae.val();if(ag>=100||((!c&&ab<=0)||(c&&ag>=ab))){clearInterval(ac);return false}if(!c){ab--}ae.val(parseInt(ae.val(),10)+1);ae.trigger("change")},af)}K.updateFileBlock=function(ag,ae,ak,ad){l("updateFileBlock Init. fileId:"+ae);var c=ad||aa();ae=ae+"";var ap=$("<div/>").text((typeof ak.name=="undefined"||ak.name==="")?"":ak.name).html();var ao=$("<div/>").text((typeof ak.path=="undefined"||ak.path==="")?"":ak.path).html();var aj=$("#"+ae);var af=aj.data("file");af.original=ak.original||"";af.category=ak.category||K.FILETYPES.OTHER;aj.data("file",af);var am=c.formKey+"["+ag+"]";var al=ak.description||"";aj.find(".attachFiles-progress").fadeOut(100);if(c.galleryMode){aj.find(".attachFiles-item-descr-container").removeClass("hide")}var ai=c.sortingAttribute;if(J&&ai!==null&&ak[ai]!==undefined&&!isNaN(parseInt(ak[ai],10))){aj.append('<input type="hidden" name="'+am+"["+ai+']" data-file-id="'+ae+'" data-property="'+ai+'" class="file-attachment file-attach-'+ae+'" value="'+ak[ai]+'" />')}var ac=c.embedServiceAttribute;if(c.embedOn&&ak.isEmbedding){aj.append('<input type="hidden" name="'+am+"["+ac+']" data-file-id="'+ae+'" data-property="'+ac+'" class="file-attachment file-attach-'+ae+'" value="'+ak[ac]+'" />');var an=["source_url","media_url","width","height"];for(var ah in an){var aq=an[ah];if(aq!==undefined&&ak[aq]!==undefined){aj.append('<input type="hidden" name="'+am+"["+aq+']" data-file-id="'+ae+'" data-property="'+aq+'" class="file-attachment file-attach-'+ae+'" value="'+ak[aq]+'" />')}}}if(c.importOn&&ak.isImporting){var ab=["media_url","source_url","service"];for(var ah in ab){var aq=ab[ah];if(aq!==undefined&&ak[aq]!==undefined){aj.append('<input type="hidden" name="'+am+"["+aq+']" data-file-id="'+ae+'" data-property="'+aq+'" class="file-attachment file-attach-'+ae+'" value="'+ak[aq]+'" />')}}}aj.append('<input type="hidden" name="'+am+'[name]" data-file-id="'+ae+'" data-property="name" class="file-attachment file-attach-'+ae+'" value="'+ap+'" />').append('<input type="hidden" name="'+am+'[type]" data-file-id="'+ae+'" data-property="type" class="file-attachment file-attach-'+ae+'" value="'+ak.type+'" />').append('<input type="hidden" name="'+am+'[path]" data-file-id="'+ae+'" data-property="path" class="file-attachment file-attach-'+ae+'" value="'+ao+'" />').append('<input type="hidden" name="'+am+'[thumb]" data-file-id="'+ae+'" data-property="thumb" class="file-attachment file-attach-'+ae+'" value="'+(ak.thumb||"")+'" />').append('<input type="hidden" name="'+am+'[id]" data-file-id="'+ae+'" data-property="id" class="file-attachment file-attach-'+ae+'" value="'+ak.id+'" />').append('<input type="hidden" name="'+am+'[filesize]" data-file-id="'+ae+'" data-property="filesize" class="file-attachment file-attach-'+ae+'" value="'+ak.size+'" />').append('<input type="hidden" name="'+am+'[description]" data-file-id="'+ae+'" data-property="description" class="file-attachment file-attach-'+ae+'" value="'+al+'" />').find(".preview").bind("load",function(){$(this).show().parents("li").attr("data-category",ak.category||"other").removeClass().addClass(c.successUploadClass);if(c.primaryEnabled){h(ae)}});K.generatePreview($(".preview",aj),ak)};function w(af,ai,ah,ae){var ag=0;for(var ab in n){var ad=n[ab].user_id!==undefined?parseInt(n[ab].user_id,10):0;if(!isNaN(ad)&&ad>0){ag=ad;break}}var c="uploader_"+L()+(af?"_success":"_error");var ac="";if(!isNaN(ah)&&ae!==undefined){ae=ae.indexOf(".")!==-1?ae.replace(/(.*)\.([a-z0-9]{2,4})?/gi,"$2"):ae;ac=[ae.toUpperCase(),"file size:","~",(ah/1000/1000).toFixed(2),"MB"].join(" ")}ac+=" "+new Date().toISOString().replace(/([T,Z])/gi," ");l(["Uploader Analytis: ",c,ai,ac].join(" "));if(typeof gtmTrackGAEvent!=="undefined"){gtmTrackGAEvent(c,ai,ac,(ag>0?ag:"1"))}}function L(){var c=window.location.pathname;if(c.match(/\/hourlie\/new/gi)){return"post_hourlie"}else{if(c.match(/\/freelancer\/(.*)\/edit/gi)){return"edit_profile"}else{if(c.match(/\/job\/new/gi)){return"post_job"}else{if(c.match(/\/job\/(.*)(\-[0-9]+)/gi)){return"job_view"}else{if(c.match(/\/stream\//gi)){return"stream"}}}}}}return K};PPH.modules.CheckoutButton=function(b){var a={element:"button",buttonElementValue:"button",linkElementValue:"link",messages:{wait:"Please wait..."},selectors:{allForms:".js-checkout-button",addons:'input[name^="Checkout[params][addons]"]',quantity:"input[]",button:".js-payment-button"}};var e=PPH.Module($.extend(true,{},a,b)),f=e.config;e.init=function(){if(f.element==f.linkElementValue){$(document).on("click",("a"+f.selectors.button),function(i){if(i){i.preventDefault()}var h=$(this),g=h.data("formId"),c=h.parents("#"+g+":first");if(!c.length){throw new Error("Form was not found")}c.submit()})}$(document).on("submit",f.selectors.allForms,function(k){var j=$(this);var i=j[0].id.includes("Dispute");if(j[0].id.indexOf("invoice")>-1&&i===false){var h=j.data("enableEscrowRelease");var g=(h)?"Release Funds":"Yes";var c=this;k.preventDefault();bootbox.confirm({message:"I confirm that I have received and accepted the work related to this invoice and I agree to complete the payment to the Freelancer.",title:"Warning",buttons:{confirm:{label:g,className:"btn btn-pph tall"},cancel:{label:"Cancel",className:"btn btn-pph tall"}},callback:function(l){if(l){if(j.data("enableEscrowRelease")){d.apply(this,[j.data("releaseUrl"),j])}else{c.submit()}}}})}else{return true}})};function d(c,g){var m=g,n=m.find(f.selectors.button),l=n.text(),h={},p=m.serializeArray(),j=n.get(0).nodeName.toUpperCase()=="A";n.attr("disabled","disabled").addClass("disabled").css("cursor","wait");n.on("click.disabled",function(i){i.preventDefault();return false});if(j){n.text(f.messages.wait)}else{n.val(f.messages.wait)}for(var k in p){var o=p[k];h[o.name]=o.value}$.ajax({type:"POST",url:c,data:$.extend(true,{},PPH.getCsrf(),h),success:function(i){if(i.status&&i.url&&i.url.match(/^http/)){return window.location.href=i.url}if(j){n.text(l)}else{n.val(l)}n.removeAttr("disabled").removeClass("disabled").css("cursor","initial");n.off("click.disabled");window.location.reload()}})}e.updateHourlieAddonIds=function(j){var g=$(f.selectors.allForms);g.find(f.selectors.addons).remove();if(!j.length){return}for(var h in j){var k=j[h],c=$(['<input type="hidden" name="Checkout[params][addons][',h,']" value="',k,'">'].join(""));g.append(c)}};e.updateQuantity=function(g){var c=$(f.selectors.allForms);g=parseInt(g,10);if(isNaN(g)){g=1}c.find('input[name="Checkout[params][quantity]"]').val(g)};return e};PPH.modules.DateRangePicker=function(b){var h={};var g=PPH.Module($.extend({},h,b));var f=5*60*1000;start=moment(Math.ceil((+new Date)/f)*f);var i=g.config,a=moment(new Date),k={endDate:a,format:"DD/MM",maxDate:a,startDate:moment(new Date).subtract(1,"day"),opens:"right",separator:" - "},d=["apply.daterangepicker","cancel.daterangepicker","hide.daterangepicker","show.daterangepicker"];function j(m,l,n){var p=m.find('[data-role="range-display"]'),r=m.find('[data-role="hidden-start-date"]'),s=m.find('[data-role="hidden-end-date"]'),c=m.data("daterangepickerOpts"),q=l.format(c.format)+c.separator+n.format(c.format),o="YYYY-MM-DD";if(m.data("daterangepickerType")=="select"){p.val(q);m.find(".date").html(q)}else{(m.data("daterangepickerType")=="text")}p.val(q);r.val(l.format(o));s.val(n.format(o))}function e(n,l){var c=$('input[data-role="hidden-'+n.data("role")+'"]'),m=l.format(n.data("format-value"));c.val(m)}g.setup=function(o,l){if(typeof l=="undefined"){l=o.data()}if(l.singleDatePicker){if(l.cancelLabel){if(!l.locale){l.locale={}}l.locale.cancelLabel=l.cancelLabel}o.daterangepicker(l,function(r,t,s){e(o,r)});if(l.resetOnCancel==true){o.on("cancel.daterangepicker",function(s,r){o.val("");$('input[data-role="hidden-'+o.data("role")+'"]').val("")})}if(l.prefillDate==true){o.data("daterangepicker").setStartDate(l.startDate)}}else{var n=$.extend({},k,l.options,g.config||{}),m=l.events||{};var q=o.find('[data-role="hidden-start-date"]');var c=o.find('[data-role="hidden-end-date"]');if(q.val()){n.startDate=moment(q.val())}if(c.val()){n.endDate=moment(c.val())}o.daterangepicker(n,function(r,s){j(o,r,s)}).data("daterangepickerOpts",n);for(var p in m){if(d.indexOf(p)>-1&&typeof m[p]!="undefined"){o.on(p,m[p])}}o.on("apply.daterangepicker",function(s){var r=o.data("daterangepicker");if(r.endDate.diff(n.maxDate,"days")>0){r.setEndDate(n.maxDate);j(o,r.startDate,r.maxDate)}});if(!n.startDate||!n.endDate){return true}o.data("daterangepicker").setStartDate(n.startDate);o.data("daterangepicker").setEndDate(n.endDate);j(o,n.startDate,n.endDate)}};g.init=function(){};return g};PPH.modules.CertoMeter=function(d){var b={levels:[],supportsSvg:true,userLevel:-1,viewMode:null};var f=PPH.Module($.extend(true,{},b,d)),i=f.config,a="#"+i.id+"-svg";var g=$(a),h=$(a+"-container");function e(){g.attr({height:h.width()*0.55,width:h.width()})}f.init=function(){i.supportsSvg=!!("createElementNS" in document&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);if(i.supportsSvg){h.find("svg").show()}else{if(!i.supportsSvg&&i.viewMode=="full"){var j=parseInt(i.userLevel,10),c=['<div class="fallback level-',(j===-1?"not-assigned":j),'"></div>'].join("");h.html(c)}else{if(!i.supportsSvg&&i.viewMode!="full"){$('div[data-hook="cert-indicator-group"]').remove()}}}e();$(window).on("resize",function(){e()})};return f};PPH.modules.FeatureFeedback=function(d){var b={};var f=PPH.Module($.extend({},b,d));var g=f.config;f.init=function(){a()};function a(){$('input[name="featureFeedback[rating]"]').on("change",function(){e()});$("#featureFeedback").on("submit",function(c){c.preventDefault();$.post("/featureFeedback/save",$(this).serialize(),function(h){if(h.success){$(".featureFeedbackWidget").html("Thank You!").fadeOut(5000)}else{if(h.error){$(".featureFeedbackWidget .feedback-error").html(h.message)}}},"json")})}function e(){$(".featureFeedbackWidget .feedback-hidden:hidden").slideDown()}return f};PPH.modules.InviteSeller=function(b){var a={inviteHookAuto:"contact-invite-auto",inviteHookAll:"contact-invite-all",inviteMoreAfterSent:false,sendingLabel:"Sending...",sentLabel:"Invited",inviteLabel:"Invite"};var d=PPH.Module($.extend({},a,b));var e=d.config;d.init=function(){$("body").on("click",'[data-hook="'+e.inviteHookAuto+'"]',function(h){h.preventDefault();var c=$(this);if(!c.hasClass("disabled")){var g=c.data("job");var f=c.data("id");d.inviteToBid(g,f,c)}});if($('[data-hook="'+e.inviteHookAuto+'"]').not(":disabled").length>0){$("body").on("click",'[data-hook="'+e.inviteHookAll+'"]',function(f){f.preventDefault();if($(this).hasClass("disabled")){return}$(this).attr("disabled","disabled").addClass("disabled");var c=$('[data-hook="'+e.inviteHookAuto+'"]').not(":disabled");$.each(c,function(h,k){var g=$(k);if(!g.hasClass("disabled")){var l=g.data("job");var j=g.data("id");d.inviteToBid(l,j,g,true)}});if(c.length>0){PPH.success("All invitations were successfully sent.")}})}else{$('[data-hook="'+e.inviteHookAll+'"]').attr("disabled","disabled").addClass("disabled");$("body").on("click",'[data-hook="'+e.inviteHookAll+'"]',function(c){c.preventDefault()})}};d.inviteToBid=function(i,h,g,f){var c="/job/invite";g.val(e.sendingLabel).text(e.sendingLabel).attr("disabled","disabled").addClass("disabled");$.get(c,{id:i,inv_id:h},function(j){if(j.success){if(typeof gtmTrackPageview!=="undefined"){if(f){gtmTrackPageview("/vp_members_invite_all")}else{gtmTrackPageview("/vp_members_invite")}}if(!f){if(j.redirect){location.href=j.redirect}else{PPH.success(j.message);if(e.inviteMoreAfterSent&&j.inviteMoreHtml){$(".js-invite-more-sellers").html(j.inviteMoreHtml).show();$(".js-invite-btn").hide();return}}}g.val(e.sentLabel).text(e.sentLabel)}else{if(j.error){PPH.warning(j.error)}if(j.info){PPH.warning(j.info)}g.attr("disabled",false).val(e.inviteLabel).text(e.inviteLabel)}})};return d};PPH.modules.LoginSignup=function(J){var a;var i={defaultNextUrl:"/dashboard",selLogin:".action-login-show",selSignup:".action-signup-show",selSocial:".action-social-login",selFbLogin:".fb-login",selToggleForms:".action-login-toggle",selLoginToggleDiv:".div-login-toggle",selSignupToggleDiv:".div-signup-toggle",selForgotPassword:".action-forgot-toggle",selConfirmEmailDiv:".emailConfirm",selNextUrl:".login-next-url",selFbLink:".login-fb-link",selLiLink:".login-li-link",selSlider:"member-type-slider",selSelect:"member-type-select",selRadio:"member-type-radio",selInPopup:".insidePopup",selPasswordStrength:".pass-strength",dataSelPasswordStrength:'[data-password-strength="password"]',selToggleSignup:'[data-hook="toggle-signup-form"]',selUpdateMetadataPromo:".update-metadata-homepage",selUpdateMetadataMemberType:".update-metadata-member-type",partialSocial:'[data-hook="partial-social-buttons"]',partialFacebook:'[data-hook="partial-facebook-button"]',partialSignup:'[data-hook="partial-singup-form"]',partialSignupToggle:'[data-hook="partial-singup-toggle"]',partialSeparator:'[data-hook="partial-separator"]',selEmail:".login-signup-email",idEmail:"#Members_newEmail",idConfirmEmail:"#Members_emailConfirm",selConfirmPasswordDiv:".passwordConfirm",idPassword:"#Members_password",idConfirmPassword:"#Members_passwordConfirm",metadataMemberType:"guest.memberType",metadataHomepagePromo:"homepage.promo",memberTypeValue:null,memberTypeBuyer:"buyer",memberTypeBuyerValue:null,memberTypeSeller:"provider",memberTypeSellerValue:null,fbUrl:null,liUrl:null,nextUrl:null,urlIsGuest:"/site/isGuest",beforeRedirect:null,afterAjaxLogin:null,enableAjax:false,enableClientValidation:true,enableDialog:true,dialogOpts:{backdrop:true,show:false}};var q=PPH.Module($.extend(true,{},i,J)),G=q.config,z,p,b,I,j,v,C,x,f,e,A,s=false,g=false;function E(c){if(g!==false||!q.hasHandler("beforeRedirect")){return true}c.preventDefault();g=c.data.form;q.trigger("beforeRedirect")}function n(L){var K=$(this);if(A&&typeof $(G.selNextUrl).attr("value")!="undefined"){var c=K.attr("href");K.attr("href",c+"&next="+$(G.selNextUrl).attr("value"))}if(!q.hasHandler("beforeRedirect")){return true}L.preventDefault();g=$(this).attr("href");q.trigger("beforeRedirect")}function B(c){k();if(e){e=false;I.filter(G.selInPopup).hide();C.filter(G.selInPopup).show();C.filter(G.selInPopup).find(G.partialSignupToggle).show();C.filter(G.selInPopup).find(G.partialSignup).hide();v.hide();f.show();w(z,"signupTitle");$(".pph-dropdown-countries-popup").pphDropdown({additionalWrapperClass:"pph-dropdown tall",scrollbar:true,scrollbarOptions:{size:100}})}else{e=true;I.filter(G.selInPopup).show();C.filter(G.selInPopup).hide();v.show();f.hide();w(z,"loginTitle")}p.hide();c.preventDefault()}function m(c){g="forgotPassword";k();w(z,"forgotTitle");I.hide();C.hide();v.hide();f.hide();p.show();$(window).trigger("resize");c.preventDefault()}function y(){if($(this).val()==""){$(G.selConfirmEmailDiv).addClass("disabled");$(G.idConfirmEmail).empty().attr("disabled","disabled")}else{$(G.selConfirmEmailDiv).removeClass("disabled");$(G.idConfirmEmail).removeAttr("disabled")}}function H(){if($(this).val()==""){$(G.selConfirmPasswordDiv).addClass("disabled");$(G.idConfirmPassword).empty().attr("disabled","disabled")}else{$(G.selConfirmPasswordDiv).removeClass("disabled");$(G.idConfirmPassword).removeAttr("disabled")}}var r=function(){var c=$("."+G.selSlider);if(c.length>0){c.each(function(){var K=$(this);if(typeof K.data(G.selSlider+"-active")=="undefined"){var M=$("<div></div>").addClass(G.selSlider+"-container").insertAfter(K).slider({min:1,max:K.children().length,range:"min",value:K[0].selectedIndex+1,slide:function(O,P){K[0].selectedIndex=P.value-1;G.memberTypeValue=K.val();d(G.metadataMemberType,K.val())}});var L=$("<div></div>").addClass(G.selSlider+"-edges clearfix");if(typeof K.data("edge-left")!="undefined"){L.append($("<div></div>").addClass("hourlie left").html(K.data("edge-left")))}if(typeof K.data("edge-right")!="undefined"){L.append($("<div></div>").addClass("job right").html(K.data("edge-right")))}L.insertBefore(K);K.change(function(){M.slider("value",this.selectedIndex+1)}).data(G.selSlider+"-active",true).hide()}var N;if(N=F(K)){K.val(N).change()}})}};var o=function(){var c=$("."+G.selSelect);if(c.length>0){c.each(function(){var K=$(this);var L;K.change(function(){G.memberTypeValue=K.val();d(G.metadataMemberType,K.val())});if(L=F(K)){K.val(L).change()}})}};var u=function(){var c=$("."+G.selRadio);if(c.length>0){c.each(function(){var K=$(this);var M=F(K);if(M){var L=K.val();if(L==M){K.attr("checked",true)}else{K.removeAttr("checked")}}K.off("click.loginSignupRadio").on("click.loginSignupRadio",function(){G.memberTypeValue=K.val();d(G.metadataMemberType,G.memberTypeValue)})})}};var h=function(){var c=$("."+G.selRadio+"[value=provider]");var K=$("."+G.selRadio+"[value=uninitialized]");var L=$(".extra-types-container");if(c.is(":checked")||K.is(":checked")){L.show()}else{L.find(".extra-types-radio").attr("checked",false);L.hide()}};var d=function(c,K){PPH.userData.save(c,K)};var F=function(c){var K=null;if(G.memberTypeValue==null&&typeof c.data("member-type")!="undefined"){G.memberTypeValue=c.data("member-type")}if(G.memberTypeValue!=null&&a==null){if(G.memberTypeValue==G.memberTypeBuyer){K=G.memberTypeValue=G.memberTypeBuyerValue}else{if(G.memberTypeValue==G.memberTypeSeller){K=G.memberTypeValue=G.memberTypeSellerValue}}K=G.memberTypeValue}if(a!=null){if(a==G.memberTypeBuyer){K=G.memberTypeBuyerValue}else{if(a==G.memberTypeSeller){K=G.memberTypeSellerValue}}K=a}return K};q.isGuest=function(c){$.getJSON(G.urlIsGuest,function(K){if(typeof c=="function"){c(K.isGuest)}})};q.open=function(L,M){q.trigger("beforeOpen");$("input[type=radio]").attr("checked",false);$(".extra-types-container").hide();if(typeof gtmTrackPageview!=="undefined"){gtmTrackPageview("/vp_"+((typeof L!="undefined")?L:"login")+"_popup")}if(!s){q.showSignupFacepile()}var c=G.nextUrl;if(typeof $(document).data("nextUrl")!="undefined"&&$(document).data("nextUrl")!=""){M=$(document).data("nextUrl");$(document).data("nextUrl","")}var K=(typeof M!="undefined"&&M!==null)?M:c;j.find(G.selNextUrl).remove();x.find(G.selNextUrl).remove();if(A&&K){$('<input type="hidden" class="'+G.selNextUrl.substr(1)+'" name="next" />').appendTo(x)}else{K=c}$('<input type="hidden" class="'+G.selNextUrl.substr(1)+'" name="next" />').appendTo(j);$(G.selNextUrl).attr("value",K);$(G.selFbLink).attr("href",PPH.addUrlParam(G.fbUrl,"next",K));$(G.selLiLink).attr("href",PPH.addUrlParam(G.liUrl,"next",K));if(!G.enableDialog){return}p.hide();if(L==="signup"){e=false;I.hide();C.show();v.hide();f.show();w(z,"signupTitle");if(G.forceEmailRegistration){$(G.selToggleSignup).click()}}else{e=true;I.show();C.hide();v.show();f.hide();w(z,"loginTitle")}$(".member-type-radio-container").click(h);r();o();u();h();z.modal("show");$(".widget-jsModuleLoginSignup a.action-social-login.button-facebook").attr("href",PPH.addUrlParam(G.fbUrl,"next",K));$(".widget-jsModuleLoginSignup a.action-social-login.button-linkedin").attr("href",PPH.addUrlParam(G.liUrl,"next",K));G.defaultNextUrl=K;q.trigger("open")};q.close=function(){if(!G.enableDialog){return}z.modal("hide");q.trigger("close")};q.proceed=function(){if(g==="login"){j.submit()}else{if(g==="signup"){x.submit()}else{if(g==="forgotPassword"){forgotPasswordForm.submit()}else{if(g!==false){q.page.redirect(g)}else{g=false}}}}};var t=function(M,P,O){k();for(var K in P){var L="";if(typeof P[K]!="undefined"&&typeof P[K][0]!="undefined"){L=P[K][0]}if(L!=""){var c=$("#"+K).is(":visible")?$("#"+K):$("#"+K).closest(":visible");var N=c.data("tip-position")||"right";c.addClass("error");PPH.dom.error(c,L,{container:M,pos:N,zIndex:1500})}}};q.afterValidateForgotPassword=function(c,L,K){t(c,L,K);if(K){return false}return true};q.afterValidate=function(c,L,K){if($('input[name="EmailMemberRegistration[geonameId]"]').val()==""&&$(".signupDiv").is(":visible")){L.Members_location=["Please enter your location"];K=true}if(!K){if(g=="forgotPassword"){$("#forgotPasswordForm").submit();return true}if(G.enableDialog){q.close()}if(g!==false){return true}if(G.enableAjax){$.ajax({type:"POST",url:c.attr("action"),data:c.serialize(),dataType:"json",success:function(M){q.trigger("afterAjaxLogin",M.success)}})}else{if(q.hasHandler("beforeRedirect")){g=e?"login":"signup";q.trigger("beforeRedirect");return false}else{return true}}}if(!K){d("guest.geonameId",$('[name="EmailMemberRegistration[geonameId]"]').val());return true}t(c,L,K);return false};q.showSignupFacepile=function(){var c=10;var K=setInterval(function(){var L=$(".signupDiv");if(typeof PPH.page.modules!="undefined"&&typeof PPH.page.modules.FbApi!="undefined"){PPH.page.modules.FbApi.checkLoginStatus(function(M){if(M!==null){L.find(G.partialSocial).hide();L.find(G.partialFacebook).show();L.find(G.partialSeparator).show();var N=L.find(G.partialSocial).find("span,iframe");$(".button-facebook").off("hover").on("hover",function(){$(G.partialFacebook).addClass("fb-facepile-container-hover")}).off("mouseout").on("mouseout",function(){$(G.partialFacebook).removeClass("fb-facepile-container-hover")});if(N.is(":visible")){clearInterval(K);N.removeAttr("height").css("height","70px")}}else{L.find(G.partialSocial).show();L.find(G.partialSeparator).show()}s=true;clearInterval(K)})}else{if(c>1){c--}else{L.find(G.partialSocial).show();L.find(G.partialSeparator).show();clearInterval(K);if(window.console&&console.log){console.log("Tried to load FB library "+c+" times, I'm giving up.")}}}},500)};q.init=function(){a=PPH.userData.get(G.metadataMemberType);$('[data-hook="work-email"]').remove();A=window.location.pathname!="/"&&!window.location.pathname.match(/^\/hp\/(.*)?/gi);$("input[type=radio]").attr("checked",false);$(".extra-types-container").hide();G.dialogOpts.buttons={};if(G.enableDialog){z=$("#jsModuleLoginSignup").modal(G.dialogOpts);z.on("show.bs.modal",function(){$(this).addClass("customUiDialog loginSignupCustomDialog login-signup-modal")}).on("hide.bs.modal",function(){if($(".tooltip").length>0){$(".tooltip").tooltip("destroy")}});z.data({forgotTitle:"Forgot your Password?",loginTitle:"Log In",signupTitle:"Sign Up"})}I=$("#jsModuleLoginSignup .loginDiv");C=$("#jsModuleLoginSignup .signupDiv");p=$("#forgotPasswordDiv");j=I.parent("form");x=C.parent("form");v=$(G.selLoginToggleDiv);f=$(G.selSignupToggleDiv);if(!G.enableAjax&&!G.enableClientValidation){j.bind("submit",{form:"login"},E);x.bind("submit",{form:"signup"},E)}I.find(G.selSocial).click(n);I.find(G.selForgotPassword).click(m);v.find("a").click(B);C.find(G.selSocial).click(n);C.find(G.idEmail).keyup(y);C.find(G.idPassword).keyup(H);f.find("a").click(B);$("body").on("click",G.selToggleSignup,function(K){var c=$(this).parents(".signupDiv");c.find(G.partialSignupToggle).hide();c.find(G.partialFacebook).hide();c.find(G.partialSignup).show();c.find(G.partialSocial).show();c.find(G.partialSeparator).show();$(window).trigger("resize");K.preventDefault()});if(typeof G.beforeRedirect==="function"){q.bind("beforeRedirect",G.beforeRedirect)}if(G.enableDialog){$("body").on("click",G.selLogin,function(K){K.preventDefault();G.memberTypeValue=(typeof $(this).data("member-type")!="undefined"?$(this).data("member-type"):G.memberTypeValue);var c=(typeof $(this).data("deactivate-next")!="undefined")?false:null;q.open("login",c);w(z,"loginTitle")});$("body").on("click",G.selSignup,function(K){K.preventDefault();G.memberTypeValue=(typeof $(this).data("member-type")!="undefined"?$(this).data("member-type"):G.memberTypeValue);var c=(typeof $(this).data("deactivate-next")!="undefined")?false:null;q.open("signup",c);w(z,"signupTitle");$(".pph-dropdown-countries-popup").pphDropdown({additionalWrapperClass:"pph-dropdown tall",scrollbar:true,scrollbarOptions:{size:100}})});$("body").not(".homepage").on("click",G.selFbLogin,n)}$("body").on("click",G.selUpdateMetadataPromo,function(){d(G.metadataHomepagePromo,"active");return true});$("body").on("click",G.selUpdateMetadataMemberType,function(){var c=$(this).data("member-type");if(c){d(G.metadataMemberType,c)}return true});if(G.forceEmailRegistration){$(G.selToggleSignup).click()}l();D()};function D(){var c=document.location.hash;if(c.indexOf("buyer")>=0){$("#EmailMemberRegistration_memType_0").trigger("click");o()}if(c.indexOf("freelancer")>=0){$("#EmailMemberRegistration_memType_1").trigger("click");o()}}function l(){$(G.dataSelPasswordStrength).on("keyup",function(K){var c={password:K.target.value,passwordStrengthI:G.selPasswordStrength+" i",passwordStrengthSpanText:G.selPasswordStrength+" span.text"};$(G.dataSelPasswordStrength).trigger("password-strength-event",c)})}q.validateExtraTypesRadio=function(N,L){var O=$(".extra-types-container");var M=O.find(".extra-types-radio");var c=$("."+G.selRadio+"[value=provider]");var K=$("."+G.selRadio+"[value=uninitialized]");if((c.is(":checked")||K.is(":checked"))&&!M.is(":checked")){L.push("Please Select a Freelancer Type");return false}return true};function w(L,K){var c=L.find(".modal-header"),M=L.find('[data-dismiss="modal"]'),N=L.data(K);if(N===undefined){return}c.html(N).append(M)}function k(){if($(".tooltip").length){$(".tooltip").tooltip("destroy")}}$(".member-type-radio-container").click(h);u();h();return q};PPH.modules.MediaViewer=function(B){var j={ajaxData:{},backgroundCoverMode:false,supportedSuffixes:[],response:null,defaultImage:"/css/images/file-icon-picture.png",selectedId:null,fancyboxOptions:{openEffect:"fade",closeEffect:"fade",nextEffect:"fade",prevEffect:"fade",autoCenter:true,autoSize:true,fitToView:true,keys:false,scrolling:"no",margin:[55,20,20,20],arrows:false,showCloseButton:true,mouseWheel:false,helpers:{title:false,overlay:{closeClick:false}},wrapCSS:"widget-media-viewer"}};var l=PPH.Module($.extend({},j,B)),z=l.config;if(z.selectors===undefined){return l}var m=$(z.selectors.widget),n=$(z.selectors.stage),t=$("title").html(),f=new RegExp("([?#&]{1})"+z.id+"-item\\=([\\w]+)","i"),q=(window.location.pathname+window.location.search).replace(f,"");var g={video:x,embed:a,file:D,image:r,pdf:C,quote:y};var b,d,v,h;l.init=function(){var I=z.clientOptions;if(I!==undefined&&I.afterRenderTrigger!==undefined&&typeof I.afterRenderTrigger==="function"){I.afterRenderTrigger.apply(l,[m])}z.stageId=z.id;if(z.enableAjax){s();w();if($.fancybox.current){$.fancybox.update()}$(window).on("resize",function(){w();$.fancybox.update()})}else{l.bindEvents(z.id)}var J=l.getItemFromState();if(J!==false){if(z.enableAjax){i()}else{var H=$('div[data-hook="stage-container"][data-widget-id="'+z.id+'"] ul[data-hook="thumbnails-list"] li a[data-id="'+J+'"]');if(H!==undefined&&H.length){l.showItem(H)}}}if(navigator.plugins){for(var F=0;F<navigator.plugins.length;F++){for(var E=0;E<navigator.plugins[F].length;E++){var c=navigator.plugins[F][E].suffixes.split(",");for(var G in c){if(c[G]!=""){z.supportedSuffixes.push(c[G])}}}}}if(I!==undefined&&I.afterInit&&typeof I.afterInit==="function"){I.afterInit.apply(l,[m])}};l.bindEvents=function(H){H=H||z.id;z.stageId=H;var G=$('.stage-container[data-widget-id="'+H+'"] div[data-hook="thumbnails"]'),F=G.find(".thumbnails-list-container"),E=G.find('ul[data-hook="thumbnails-list"]'),I=z.selectedItem||0;var c=l.getItemFromState();if(c!==false){I=G.find('a[data-id="'+c+'"]').parent("li").index()}G.thumbslider({arrows:z.enablePagerArrows?"a[data-previous], a[data-next]":false,arrowsAlwaysVisible:false,arrowsRemoveIfInvisible:true,autoCenter:true,animationEasing:$.easing.easeInOutCirc!==undefined?"easeInOutCirc":"linear",mousewheel:z.enablePagerArrows,orientation:z.orientation,selectedItem:I,select:function(){var J=$(this);z.selectedId=J.data("id");if(z.enableItemUrl){l.setItemState(J)}l.showItem(J)},scrolled:function(J){var K=z.orientation=="horizontal"?E.width():E.height(),L=z.orientation=="horizontal"?F.width():F.height();if(!z.enablePagerArrows&&F.length&&F.data("tsb")&&K>L){if(J<0){J=0}if(J+L>K){J=K-L}F.tinyscrollbar_update(J)}},initialized:function(){if(!z.enablePagerArrows){F.tinyscrollbar({axis:z.orientation==="horizontal"?"x":"y",size:"auto",minTrackHeight:5});if(z.orientation==="horizontal"){F.find(".tiny-scroll-overview").css({position:"relative"});F.find(".tiny-scroll-scrollbar").css({position:"absolute",bottom:"10px"})}setTimeout(function(){G.thumbslider("option","scrollTarget",G.find(".tiny-scroll-overview"))},100)}}});$(document).off("click",'a[data-hook="mediaviewer-nav"]').on("click",'a[data-hook="mediaviewer-nav"]',function(J){J.preventDefault();G.thumbslider("gotoItem",$(this).data("pos"))});if(z.enableNextOnClick&&E.find("li").length>1){$(document).off("click",'div.central-stage[data-hook="stage"]').on("click",'div.central-stage[data-hook="stage"]',function(J){J.preventDefault();J.stopPropagation();G.thumbslider("gotoItem","next")})}if(z.enableKeyNavigation){$(document).off("keyup.mediaviewer").on("keyup.mediaviewer",function(J){if(!$.fancybox.isOpen||J.keyCode===undefined||$.inArray(J.keyCode,[27,33,34,35,36,37,38,39,40])===-1){return false}J.preventDefault();if(J.keyCode===27){return $.fancybox.close()}if($.inArray(J.keyCode,[34,35,39,40])>=0){G.thumbslider("gotoItem","next")}else{G.thumbslider("gotoItem","previous")}})}};l.setItemState=function(c){if(!z.enableItemUrl||!c.length||!c.data||!c.data("id")){return false}History.pushState({item:c.data("id")},t,l.getStateUrl(c.data("id")));return true};l.getStateUrl=function(F,c){var G=c===undefined?window.location.search:c.replace(/\?(.*)/gi,"?$1");if(G!==""){if(G.match(f)){G=G.replace(f,"")}}var E=G!==""?(G+"&"):"?";return[E,z.id,"-item=",F].join("")};l.getItemFromState=function(){var E=History.getState(),c=E.cleanUrl.match(f);if(c&&c[2]!==undefined){return c[2]}return false};l.clearState=function(){if(!z.enableItemUrl){return false}History.replaceState({},t,q)};l.showItem=function(E){var c=E.data("type"),G=E.data("extension");var F=null;if(G&&z.previewCallbacks[G]){F=z.previewCallbacks[G]}else{if(c&&z.previewCallbacks[c]){F=z.previewCallbacks[c]}else{if(G&&g[G]){F=g[G]}else{F=g[c]||r}}}if(F===null||typeof F!=="function"){return false}if(z.clientOptions!==undefined&&z.clientOptions.beforeShowItem!==undefined&&typeof z.clientOptions.beforeShowItem=="function"){z.clientOptions.beforeShowItem.apply(l,[E,E.parent("li").index()])}if(z.backgroundCoverMode){o(E.data())}F.apply(E,[E.data()]);if(z.enableMediaTitle){l.showTitle(E.data())}};l.loadImage=function(c){if(typeof c!=="object"||!c.length){return false}if(c.data("src")){c.attr("src",c.data("src"));c.data("src",false)}return true};l.showTitle=function(c){var E=p(),G=$('<div class="media-description"></div>');if(E.nextAll(".media-description").length){E.nextAll(".media-description").remove()}if(c.description!==undefined&&c.description.toString().replace(/[\-\s]+/gi,"")!==""){G.append(['<span class="title crop">',c.description,"</span>"].join(""))}if(c.download){var J=$('<span class="helpers"></span>'),I=!(c.type=="image"||c.type==="embed"||c.type==="video"),L=!I?z.previewCssClass:z.downloadCssClass,F=!I?z.translations.preview:z.translations.download;J.append(['<a href="',c.download,'" target="_blank"><i class="',L,'"></i>',F,"</a>"].join(""));J.prependTo(G)}E.after(G);var H=G.find(".title");if(H.length){var K=H.get(0);if(K!==undefined&&K.scrollWidth>K.clientWidth){H.addClass("js-tooltip").data("title",c.description).data("placement","top").tooltip()}}return true};function s(){$(document).on("click",z.ajaxTrigger,function(H){H.preventDefault();var G=$(this);if(z.enableItemUrl){l.setItemState(G)}else{var F=G.parents(z.ajaxTriggerContainer).filter(":first"),E=F.siblings(z.ajaxTriggerContainer),c=0;if(F.length>0&&E.length>0&&E.find(z.ajaxTrigger).length>0){c=F.index(z.ajaxTriggerContainer)}else{if(G.siblings(z.ajaxTrigger).length>0){c=G.index()}}z.selectedItem=!isNaN(c)?c:0}if(!G.data("widgetId")){G.data("widgetId",z.id)}if(z.enableAjax){i(G)}else{l.showItem(G)}return false})}function i(F){var I=F!==undefined&&F.data!==undefined?F.data():{},H=F!==undefined?F:this,E={};var c=["content","type","dataType","data","url","tipHook","tooltipContent","tooltipContentSelector","tooltipStyle"];for(var G in I){if(typeof I[G]!=="object"&&$.inArray(G,c)===-1){E[G]=I[G]}}$.ajax({url:z.ajaxUrl,data:$.extend(true,{},PPH.getCsrf(),{widgetId:z.id},z.ajaxData,E),dataType:"html",type:"post",beforeSend:function(){$.fancybox.showLoading();if(z.clientOptions!==undefined&&z.clientOptions.beforeAjax!==undefined&&typeof z.clientOptions.beforeAjax==="function"){var J=z.clientOptions.beforeAjax.apply(H,[l]);if(J===false){return false}}return true},success:function(J){z.response=J;$.fancybox.hideLoading();k();if(z.clientOptions!==undefined&&z.clientOptions.afterAjax!==undefined&&typeof z.clientOptions.afterAjax==="function"){z.clientOptions.afterAjax.apply(H,[l])}}})}function k(){$response=$("<div>"+z.response+"</div>");$thumbs=$response.find('[data-hook="thumbnails"]');var c=$response.find("[data-widget-id]").data("widgetId");$.fancybox.open($.extend(true,{},z.fancyboxOptions,{content:$response.find('div[data-hook="widget-content"]'),beforeShow:function(){this.width=p().outerWidth(true);this.height=p().outerHeight(true)},onReady:function(){h=this.minHeight;v=this.minWidth;b=this.maxWidth;d=this.maxHeight},onUpdate:function(){if(this.thumbsAppended){var E=$thumbs.find("li.selected > a"),F=E.data();$thumbs.thumbslider("highlightSelected");if(z.clientOptions!==undefined&&z.clientOptions.afterShowItem!==undefined&&typeof z.clientOptions.afterShowItem=="function"){z.clientOptions.afterShowItem.apply(l,[E,E.parent("li").index()])}}},afterShow:function(){var E=this;setTimeout(function(){if($thumbs.find("li").length>1){var F=$response.find('[data-hook="ajax-nav-arrows"]');E.wrap.prepend(F.find('[data-pos="previous"]'));E.wrap.append(F.find('[data-pos="next"]'))}E.thumbsAppended=true;l.bindEvents(c)},250)},afterClose:function(){l.clearState();$('a[data-hook="mediaviewer-nav"]').remove()}}))}function p(){return $(['.stage-container[data-widget-id="',z.stageId,'"] ',z.selectors.stage].join(""))}function e(c){c.removeClass("loading").addClass("loading")}function u(c){c.removeClass("loading")}function r(F){var c=p();var E=$('<img style="display: none;">');E.attr("src",F.source).attr("alt",F.description);c.html("").prepend('<span class="center-helper"></span>').append(E);e(c);E.load(function(){E.fadeIn(400);u(c);$.fancybox.update()}).error(function(){c.html(['<article class="missing-image boxmodelfix"><img src="',z.defaultImage,'" alt="',z.translations.fileNotFound,'"></article>'].join(""));u(c);$.fancybox.update()})}function o(E){var c=p();if(c.data("resized")){return false}if(E.width>E.height&&E.width>c.width()){var F=parseFloat((E.height/E.width).toFixed(3),10)*100;c.parent(".stage-container").css({paddingBottom:(F+"%")})}c.data("resized",true)}function A(F){var c=p(),E=$('<div class="background-cover" style="background-image: url('+F.source+')"></div>');c.html("");e(c);c.html(E);u(c);$.fancybox.update()}function D(F){var c=p(),E=$('<article class="preview-file boxmodelfix">');E.append(['<span class="center-helper"></span><i class="',F.icon,'"></i>'].join(""));e(c);c.html(E).prepend('<span class="center-helper"></span>');u(c);if(z.enableAjax){$.fancybox.update()}}function C(E){var G=false;if((navigator.mimeTypes&&navigator.mimeTypes["application/pdf"]!==undefined)||$.inArray("pdf",z.supportedSuffixes)>=0){G=true}if(!G){return D(E)}var c=p(),F=$('<iframe class="pdf-viewer">');e(c);F.attr("src",E.download);c.html(F);u(c);if(z.enableAjax){$.fancybox.update()}}function y(G){var c=p(),E=G.id%5,F=['<div class="hourlie-quote-',E,' portrait-mode quote-display"><div>',G.description,"</div></div>"].join("");e(c);c.html(F);u(c);if(z.enableAjax){$.fancybox.update()}}function x(F){var c=p();if(F.videoStillEncoding!==undefined&&parseInt(F.videoStillEncoding,10)===1){var E=['<div class="video-processing-full"><span class="video-processing-film"></span>',z.translations.videoNotReady,"</div>"].join("");return c.html(E)}return a(F)}function a(F){var c=p();var G=$('<iframe allowtransparency allowfullscreen scrolling="no" frameborder="0">');var E=F.source;if(F.autoplay&&parseInt(F.autoplay,10)===1){E+=(E.match(/\?/gi)?"&":"?")+"autoplay=1"}E+=(E.match(/\?/gi)?"&":"?")+"wmode=transparent";G.attr("src",E).attr("width",F.width).attr("height",F.height);e(c);c.html('<div class="embed-container"></div>').find(".embed-container").html(G);G.load(function(){u(c);G.addClass("bg-fill");if(z.enableAjax){$.fancybox.update()}})}function w(){var K=0,c=0,F=0,G=z.fancyboxOptions,L=G.margin!==undefined&&G.margin.length===4,c=L?(G.margin[0]+G.margin[2]):0,F=L?(G.margin[1]+G.margin[3]):0;var I=$(window),E=Math.floor(I.width()*0.9)-F-($(".mediaviewer-nav").width()*2),M=Math.floor(I.height()*0.95)-c,J=z.widthLimit!==null?z.widthLimit:0,E=J<E?J:E,M=M>E?E:M,H={maxHeight:M,minWidth:E,minHeight:M,maxWidth:E};if($.fancybox.current!==null){$.fancybox.current=$.extend(true,{},$.fancybox.current,z.fancyboxOptions,H)}z.fancyboxOptions=newOptions=$.extend(true,{},z.fancyboxOptions,H)}return l};PPH.modules.Notifications=function(b){var g={yiiListID:"notification-list",notifPageSelector:".widget-jsModuleNotifications",notifItemClass:".notification-item",notifDismissHook:".action-notification-dismiss",notifSetAsReadHook:".action-notification-setasread",notifMainLinkHook:".action-notification-link",notifTopNavLinkHook:"#notification-list-mini .notifications-list li",notifUnreadClass:"unread",updateUrl:"/notification/list",dismissUrl:"/notification/dismiss",setAsReadUrl:"/notification/setAsRead",setAsUnreadUrl:"/notification/setAsUnread"};var e=PPH.Module($.extend(true,{},g,b));var h=e.config;function j(o,c){var m=c.find("i.fa");var n=m.parent("a");var l=c.parents(h.notifItemClass);if(l.hasClass("unread")){n.attr("title","Mark as unread");m.removeClass("fa-circle").addClass("fa-circle-o")}else{n.attr("title","Mark as read");m.removeClass("fa-circle-o").addClass("fa-circle")}l.toggleClass("unread");if(c.data("id")>0){$(h.notifTopNavLinkHook+'[data-id="'+c.data("id")+'"]').toggleClass("unread")}$("#"+h.yiiListID).loader("close")}function f(n,m,l,c){n.preventDefault();if(typeof c=="undefined"){$("#"+h.yiiListID).loader("open")}if(typeof m==="undefined"){m=$(this)}if(typeof l==="undefined"){l=j}$.ajax({url:($(this).parents(h.notifItemClass).hasClass("unread"))?h.setAsReadUrl:h.setAsUnreadUrl,data:{id:m.data("id")},dataType:"json",success:function(){l(n,m);if(typeof c=="undefined"){$("#"+h.yiiListID).loader("close")}},complete:function(){},error:function(){}})}function k(n,l,c){n.preventDefault();if(!$("#"+h.yiiListID).not("[href='#']")){$("#"+h.yiiListID).loader("open")}if(typeof l==="undefined"){l=$(this)}if(typeof c==="undefined"){c=function(p,o){window.location=o.attr("href")}}var m=l.parents(h.notifItemClass);if(m.hasClass("unread")){f(n,l,c,true)}else{c(n,l)}}function a(l,c){$.fn.yiiListView.update(h.yiiListID,{url:h.updateUrl,data:{},async:false});if(c.data("id")>0){$(h.notifTopNavLinkHook+"[data-id="+c.data("id")+"]").remove()}}function i(n,m,l,c){n.preventDefault();if(typeof c=="undefined"){$("#"+h.yiiListID).loader("open")}if(typeof m==="undefined"){m=$(this)}if(typeof l==="undefined"){l=a}$.ajax({url:h.dismissUrl,data:{id:m.data("id")},dataType:"json",success:function(){l(n,m);if(typeof c=="undefined"){$("#"+h.yiiListID).loader("close")}},complete:function(){},error:function(){}})}e.setupNotificationsMultiselector=function(){var n="#actionbox";var l=$(n+" .check-all");var c=$(".multiaction-cb");var m=$(".notification-mass-actions");l.on("click",function(o){var p=$(this).is(":checked");(p===true)?$(h.notifItemClass).find(":checkbox").prop("checked",true):$(h.notifItemClass).find(":checkbox").prop("checked",false);$("#"+h.yiiListID).trigger("checkBoxUpdate")});c.on("click",function(){l.prop("checked",false);$("#"+h.yiiListID).trigger("checkBoxUpdate")});$(n+" .check-control .dropdown-menu li a").on("click",function(p){p.preventDefault();var o=$(this).data("checkCondition");$(h.notifItemClass).find(":checkbox").prop("checked",false);switch(o){case"read":$(h.notifItemClass).filter(":not(.unread)").find(":checkbox").prop("checked",true);break;case"unread":$(h.notifItemClass).filter(".unread").find(":checkbox").prop("checked",true);break;case"all":l.prop("checked",true);$(h.notifItemClass).find(":checkbox").prop("checked",true);break;default:$(h.notifItemClass).find(":checkbox").prop("checked",false)}$("#"+h.yiiListID).trigger("checkBoxUpdate")});$("#"+h.yiiListID).on("checkBoxUpdate",function(){var p=$(h.notifItemClass+" :checkbox:checked").length;var o=$(h.notifItemClass+" :checkbox").length;if(p==o){l.prop("checked",true)}else{l.prop("checked",false)}(p>0)?$(".notification-mass-actions").css("display","inline-block"):$(".notification-mass-actions").hide()});$("#"+h.yiiListID).trigger("checkBoxUpdate")};function d(m,c,l){l.preventDefault();$("#"+h.yiiListID).loader("open");$.ajax({url:m,data:{id:c.toString()},dataType:"json",success:function(){$.fn.yiiListView.update(h.yiiListID,{url:h.updateUrl,data:{},async:false})},complete:function(){e.setupNotificationsMultiselector();$("#"+h.yiiListID).loader("close")},error:function(){}})}$(".notification-mass-actions").on("click",".btn",function(l){var m=$(this).data("action");var c=Array.prototype.slice.call($(h.notifItemClass+" :checkbox:checked").map(function(n){return $(this).data("id")}));switch(m){case"read":d(h.setAsReadUrl,c,l);break;case"unread":d(h.setAsUnreadUrl,c,l);break;case"delete":d(h.dismissUrl,c,l)}});e.init=function(){$(document).off("click.notification",h.notifPageSelector+" "+h.notifMainLinkHook).on("click.notification",h.notifPageSelector+" "+h.notifMainLinkHook,k);$(document).off("click.notification",h.notifPageSelector+" "+h.notifSetAsReadHook).on("click.notification",h.notifPageSelector+" "+h.notifSetAsReadHook,f);$(document).off("click.notification",h.notifPageSelector+" "+h.notifDismissHook).on("click.notification",h.notifPageSelector+" "+h.notifDismissHook,i);e.setupNotificationsMultiselector()};e.actionChangeReadState=function(n,m,l,c){f(n,m,l,c)};e.actionDismiss=function(n,m,l,c){i(n,m,l,c)};return e};PPH.modules.PasswordStrength=function(b){var f={scores:[26,40],options:{common:{minChar:6},rules:{activated:{wordNotEmail:true,wordLength:true,wordSequences:true,wordRepetitions:true,wordLowercase:true,wordUppercase:true,wordOneNumber:true,wordThreeNumbers:true,wordOneSpecialChar:true,wordTwoSpecialChar:true,wordUpperLowerCombo:true,wordLetterNumberCombo:true,wordLetterNumberCharCombo:true},scores:{wordNotEmail:-100,wordLength:-50,wordSequences:-20,wordRepetitions:-25,wordLowercase:1,wordUppercase:3,wordOneNumber:3,wordThreeNumbers:5,wordOneSpecialChar:4,wordTwoSpecialChar:5,wordUpperLowerCombo:3,wordLetterNumberCombo:2,wordLetterNumberCharCombo:2},raisePower:1.4}},faExclamationCircle:"fa-exclamation-circle",faMinusCircle:"fa-minus-circle",faCheckCircle:"fa-check-circle",lowCssClass:"low",mediumCssClass:"medium",strongCssClass:"strong"};var e=PPH.Module($.extend({},f,b));var g=e.config;var d={};var a={};a.forbiddenSequences=["0123456789","abcdefghijklmnopqrstuvwxyz","qwertyuiop","asdfghjkl","zxcvbnm","!@#$%^&*()_+"];d.wordNotEmail=function(k,c){if(k.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)){return c}return 0};d.wordLength=function(o,c,k){var m=o.length,l=k.rules.raisePower,n=Math.pow(m,l);if(m<k.common.minChar){n=(n+c)}return n};d.wordRepetitions=function(k,c){if(k.match(/(.)\1\1/)){return c}return 0};d.wordSequences=function(m,c){var l=false,k;if(m.length>2){$.each(a.forbiddenSequences,function(n,o){if(l){return}var p=[o,o.split("").reverse().join("")];$.each(p,function(q,r){for(k=0;k<(m.length-2);k+=1){if(r.indexOf(m.toLowerCase().substring(k,k+3))>-1){l=true}}})});if(l){return c}}return 0};d.wordLowercase=function(k,c){return k.match(/[a-z]/)&&c};d.wordUppercase=function(k,c){return k.match(/[A-Z]/)&&c};d.wordOneNumber=function(k,c){return k.match(/\d+/)&&c};d.wordThreeNumbers=function(k,c){return k.match(/(.*[0-9].*[0-9].*[0-9])/)&&c};d.wordOneSpecialChar=function(k,c){return k.match(/[!,@,#,$,%,\^,&,*,?,_,~]/)&&c};d.wordTwoSpecialChar=function(k,c){return k.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/)&&c};d.wordUpperLowerCombo=function(k,c){return k.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&c};d.wordLetterNumberCombo=function(k,c){return k.match(/([a-zA-Z])/)&&k.match(/([0-9])/)&&c};d.wordLetterNumberCharCombo=function(k,c){return k.match(/([a-zA-Z0-9].*[!,@,#,$,%,\^,&,*,?,_,~])|([!,@,#,$,%,\^,&,*,?,_,~].*[a-zA-Z0-9])/)&&c};a.validation=d;var j=function(c,l){var k=0;$.each(g.options.rules.activated,function(p,o){if(o){var q=c.rules.scores[p],n=a.validation[p],m;if($.isFunction(n)){m=n(l,q,c);if(m){k+=m}}}});return k};var h=function(m){var k,l,c;if(m<g.scores[0]){k="low";l=g.translation.weak;c=g.faMinusCircle}else{if(m<g.scores[1]){k=g.mediumCssClass;l=g.translation.medium;c=g.faExclamationCircle}else{k=g.strongCssClass;l=g.translation.strong;c=g.faCheckCircle}}return[l,k,c]};var i=function(r,o,q){var p=g.faExclamationCircle+" "+g.faCheckCircle+" "+g.faMinusCircle+" "+g.lowCssClass+" "+g.mediumCssClass+" "+g.strongCssClass;$(o).removeClass(p);$(q).text("");if(r!==""){var k=j(g.options,r);var s=h(k);var n=s[0];var m=s[1];var l=s[2];var c=m+" "+l;$(o).addClass(c);$(q).text(n)}};e.init=function(){$(document).on("password-strength-event",function(k,c){i(c.password,c.passwordStrengthI,c.passwordStrengthSpanText)})};return e};PPH.modules.Rating=function(b){var a={hook:"ul.rating",name:"rating",ratingWordings:[]};var d=PPH.Module($.extend(true,{},a,b)),e=d.config;d.init=function(){var c=$("ul.rating");$(document).on("click","ul.rating li a",function(l){l.preventDefault();if($(this).parents("ul:first").data("disabled")==0){var f;var j=$(this);var i=j.parents("ul.rating:first");var m=j.parent("li").data("index");if(typeof $(this).data("id")!="undefined"){f=$(this).data("id")}else{f=e.name}PPH.dom.error(c.parents(".widget-jsModuleRating"),"close");i.find("a span").removeClass("active");i.next("div.rating-wording").html(e.ratingWordings[m]);for(var h=0;h<m;h++){i.find("a span").eq(h).addClass("active")}var g=i.nextAll('input[name="'+f+'"]:first');if(g.length==0){g=$("<input>").attr({name:f,type:"hidden"}).val(m);i.after(g)}g.val(m);$(g).change()}});$(document).on("mouseover.ratingHover","ul.rating li",function(){var f=$(this).parent("ul").eq(0);if(f.data("disabled")==1){return}f.find("a span").removeClass("active");$(this).find("a span").addClass("hover");$(this).prevAll("li").each(function(){$(this).find("a span").addClass("hover")});f.next("div.rating-wording").html(e.ratingWordings[$(this).data("index")])}).on("mouseout.ratingHover","ul.rating li",function(){var g=$(this).parent("ul").eq(0);if(g.data("disabled")==1){return}g.find("a span").removeClass("hover");var h=g.nextAll("input:first").val();for(var f=0;f<h;f++){g.find("a span").eq(f).addClass("active")}g.next("div").html(e.ratingWordings[g.find("li span.active").last().parents("li").data("index")]?e.ratingWordings[g.find("li span.active").last().parents("li").data("index")]:"")})};return d};PPH.modules.Tag=function(d){var l={prefix:"widget-tag-",listId:"list",itemClass:"item",activeClass:"active",selectClass:"select-tag",removeClass:"unset-tag",templateTag:"",templateUnsetTag:"",performAjaxRequest:true,limitTitle:false,delimiter:",",minWeight:80,maxWeight:150,alterFontSize:false,triggerOnChange:false};var i=PPH.Module($.extend({},l,d));var m=i.config,j;function g(){var r=$("div."+m.prefix+m.listId);if(!isNaN(m.minWeight)&&!isNaN(m.maxWeight)){var p=$("a."+m.selectClass);var c=Number.MIN_VALUE;var q=Number.MAX_VALUE;p.each(function(u){var t=$(this).data("weight");if(t>c){c=t}if(t<q){q=t}});if(c-q!=0){var s=(m.maxWeight-m.minWeight)/(c-q);p.each(function(t){var u=$(this).data("weight");$(this).css("fontSize",(m.minWeight+(u-q)*s)+"%")})}}}function n(p){var c={};if(i.getState()!=null){c=i.getState()}$.each(p,function(q,r){if(r.length!=0){c[q]=r}else{c[q]=""}});i.setState(c)}function e(p){p.preventDefault();var c=$(this).parent();c.find("."+m.prefix+m.itemClass+"-excess").removeClass("hide");c.find("."+m.prefix+"more-action").addClass("hide");c.find("."+m.prefix+"less-action").removeClass("hide")}function f(p){p.preventDefault();var c=$(this).parent();c.find("."+m.prefix+m.itemClass+"-excess").addClass("hide");c.find("."+m.prefix+"more-action").removeClass("hide");c.find("."+m.prefix+"less-action").addClass("hide")}function k(t){var p=$(this).closest("."+m.prefix+m.itemClass),q=p.data(m.prefix+m.itemClass).toString();if(m.triggerOnChange){t.preventDefault();var c=p.hasClass(m.activeClass);if(c){a(q);i.trigger("unchecked",q)}else{b(q);i.trigger("checked",q)}return false}else{if(m.performAjaxRequest){t.preventDefault();var c=p.hasClass(m.activeClass),r=[],s=j.attr("data-"+m.prefix+"ids");if(typeof s!="undefined"){if(s.toString().indexOf(",")==-1){r=s.length>0?[s]:[]}else{r=s.split(",")}}if(c){$.each(r,function(u,v){if(v==q){r.splice(u,1)}})}else{if($.inArray(q,r)==-1){r.push(q)}}i.updateSelected(r);n({id:r.join(m.delimiter)})}}}function o(q){q.preventDefault();var c=$(this).closest("."+m.prefix+m.itemClass),s=c.attr("data-"+m.prefix+m.itemClass).toString(),r=c.find("."+m.selectClass).text(),p=c.attr("data-owner");if(typeof p!="undefined"){c.remove();i.trigger("unsetTag",{id:s,name:r,owner:p})}}function h(){i.updateSelected(i.val())}i.init=function(){j=$("div."+m.prefix+m.listId);$("body").delegate(j,"refreshTags",h);$("body").delegate("."+m.prefix+m.itemClass+" ."+m.selectClass,"click",k);$("body").delegate("."+m.prefix+m.itemClass+" ."+m.unsetClass,"click",o);$("body").delegate("."+m.prefix+"more-action","click",e);$("body").delegate("."+m.prefix+"less-action","click",f);if(m.alterFontSize){g()}};i.onHashChange=function(r){var t="";var c="";var q=[];var s=null;if(typeof r!="undefined"&&typeof(r.id)!="undefined"){s=[];if(r.id.toString().indexOf(",")==-1){q=r.id.length>0?[r.id]:[]}else{q=r.id.split(",")}var p;$.each(q,function(u,v){p=$("."+m.prefix+m.itemClass+" ."+m.selectClass+"[data-"+m.prefix+m.itemClass+'="'+v+'"]');s.push(p.html())});t=r.id.toString();c=s.join(",");i.updateSelected(q)}j.attr("data-"+m.prefix+"ids",t);j.attr("data-"+m.prefix+"names",c);i.trigger("updateHeading",s)};i.updateSelected=function(c){if(typeof c!="undefined"){$("."+m.prefix+m.itemClass).removeClass(m.activeClass);$.each(c,function(p,q){b(q)})}};function b(c){$("."+m.prefix+m.itemClass+"[data-"+m.prefix+m.itemClass+'="'+c+'"]').addClass(m.activeClass)}function a(c){$("."+m.prefix+m.itemClass+"[data-"+m.prefix+m.itemClass+'="'+c+'"]').removeClass(m.activeClass)}i.val=function(){var p=j.attr("data-"+m.prefix+"ids");var c=[];if(typeof p!="undefined"){if(p.toString().indexOf(",")==-1){c=p.length>0?[p]:[]}else{c=p.split(",")}}return c};i.addTag=function(c){j.find("div.emptyTags").hide();c.id=typeof(c.id)!="undefined"?c.id:"";var p=i.getTag(c.id);if(p.length==0){j.prepend(i.createNewTag(c))}};i.getTag=function(c){return j.find("."+m.prefix+m.itemClass+"-"+c).clone()};i.createNewTag=function(c){c.id=typeof(c.id)!="undefined"?c.id:"";c.name=typeof(c.name)!="undefined"?c.name:"";c.weight=typeof(c.weight)!="undefined"?c.weight:"";c.cssclass=typeof(c.cssclass)!="undefined"?c.cssclass:"";c.owner=typeof(c.owner)!="undefined"?c.owner:"";c.unset=typeof(c.unset)!="undefined"?c.unset:false;var p=m.templateTag.replace(/{id}/g,c.id).replace(/{name}/g,c.name).replace(/{cssclass}/g,c.cssclass).replace(/{weight}/g,c.weight).replace(/{owner}/g,c.owner);if(c.unset){p=p.replace("</div>",m.templateUnsetTag+"</div>")}return p};i.removeTag=function(c){j.find("."+m.prefix+m.itemClass+"-"+c).remove()};return i};PPH.modules.TagsInput=function(a){var g={id:"",truncateTagView:false,container:".widget-tags-input",selTagNew:".tagit-new input",selDefaultInput:".tagItList",enableClientValidation:false,allowSpaces:true,autoCompleteUrl:""};var e={};for(moduleInstance in a){e[moduleInstance]=$.extend({},g,a[moduleInstance])}var f=PPH.Module(e);var h=f.config;var d;function k(){$(g.container).addClass("tag-focus").css("overflow","hidden")}function b(){$(g.container).removeClass("tag-focus").css("overflow","hidden");if(e[moduleInstance].enableClientValidation){$(g.selDefaultInput).trigger("blur")}}function l(m,c){var n=c.find(".tagit-label").text();n=j(n);if($.trim(n)==""){$(e[moduleInstance].selDefaultInput).tagit("removeTag",c,true);return false}c.find(".tagit-label").text(n);$(c).on("click",function(){$(e[moduleInstance].selDefaultInput).tagit("removeTag",c,true)});setTimeout(function(){$(window).trigger("resize")},100)}function i(m,c){setTimeout(function(){$(window).trigger("resize")},100)}function j(c){c=c.replace(/[^\d\w\s\+#&\.,\@]/g,"");return c}f.init=function(){var c,m=h;for(c in m){h=m[c];d=$(h.container+"[data-id="+c+"]");h.containerDom=d;d.data("tagsInputConfig",h);$(h.selDefaultInput,d).tagit({tagSource:h.autoCompleteUrl,allowSpaces:h.allowSpaces,singleFieldDelimiter:",",onTagAdded:l,onTagRemoved:i,placeholderText:h.placeholder,truncateTagView:h.truncateTagView});d.on("click",function(){$(g.selTagNew).trigger("focus")});$(g.selTagNew).on("focus",k).on("blur",b)}h=m};return f};PPH.modules.SuggestSkills=function(e){var d={triggerSelector:null,targetSelector:null,modalId:null,modal:{cancel:".suggested-tags .cancel",submit:"#suggest-skill-submit-btn",addTag:".suggest-auto-tag-item",skillInput:"#SuggestedSkill_skill",suggestedTags:".suggested-auto-tags",message:".js-relative-skill-msg",submitHidden:"#submit-hidden"}};var g=PPH.Module($.extend({},d,e));var i=g.config;g.init=function(){$(document).on("click",i.triggerSelector,f);$(document).on("click",i.modal.cancel,b);$(document).on("click",i.modal.submit,a);$(document).on("click",i.modal.addTag,h)};function f(c){c.preventDefault();$(i.modal.skillInput).val("");$(i.modal.suggestedTags).html("");$(i.modal.submit).text("Submit");$(i.modal.message).hide();$(i.modal.submitHidden).val(0);$(i.modalId).modal("show");$(i.modal.cancel).css("display","none")}function a(l){l.preventDefault();if($(i.modal.skillInput).val().trim()==""){PPH.dom.error(i.modal.skillInput,"Please type a skill");return}var k=$(this).parents("form"),j=k.find(i.modal.submit),c=j.text();j.prop("disabled",true).text("Please wait...");$.ajax({url:k.attr("action"),type:"POST",data:k.serialize(),success:function(m){j.prop("disabled",false).text(c);if(m.success){if(m.tags.length>0){var n='<ul class="select2-choices">';$(m.tags).each(function(q,p){n+=['<li class="suggest-auto-tag-item select2-search-choice gray" data-id=',p.id,' data-text="',p.label,'">',p.label,"</li>"].join("")});n+="</ul>";$(i.modal.suggestedTags).html(n);var o=["We found ",(m.tags.length==1?"a":"these")," relative skill",(m.tags.length==1?"":"s"),"<br>","Do you want to submit your skill or use ",(m.tags.length==1?"this":"one of these"),"?<br>"].join("");$(i.modal.message).html(o).show();$(i.modal.submit).text("Submit mine");$(i.modal.submitHidden).val(1);$(i.modal.cancel).css("display","inline-block");return}PPH.success("Thanks for submitting a new Skill.We will review it soon.");$(i.modal.skillInput).val("");$(i.modalId).modal("hide")}else{PPH.error("There was an error while submitting the skill.Please try again later.")}}})}function h(){var l=$(this),j=l.siblings(i.modal.addTag).length;var c={id:l.data("id"),text:l.data("text")};var k=$(i.targetSelector).select2("data");k.push(c);$(i.targetSelector).select2("data",k);l.remove();if(!j){$(i.modalId).modal("hide")}}function b(){$(i.modalId).modal("hide")}return g};$(document).ready(function(){var b=$(document);b.on("click",".offcanvas-toggle.topnav-toggle",function(f){f.preventDefault();$("#site-wrapper").toggleClass("offcanvas-active")});$(".js-show-offcanvas").off("click");b.on("click",".js-show-offcanvas",function(f){f.preventDefault();$("#main-container").toggleClass("offcanvas-active");$("html").css("overflow-x","hidden")});$(".js-hide-offcanvas").off("click");b.on("click",".offcanvas-sidebar .js-hide-offcanvas",function(f){f.preventDefault();$("#main-container").removeClass("offcanvas-active");$("html").css("overflow-x","auto")});var c=$(".dropcanvas");if(c.length>0){var a=$(".js-toggle-dropcanvas"),d=a.offset().top;a.on("click",function(f){f.preventDefault();if(c.is(":visible")){c.slideUp()}else{if(d>$(window).scrollTop()){dropcanvasH=2.5/4*($(window).height()-$(window).scrollTop())}else{dropcanvasH=3/4*$(window).height()}c.css({height:dropcanvasH+"px"});c.slideDown("fast",function(){$(this).css({"overflow-y":"auto"})})}})}b.on("mouseenter focus",".js-tooltip",function(g){g.preventDefault();var f=$(this);f.data("trigger","hover");PPH.tip(f)});b.on("mouseleave",".js-tooltip",function(g){var f=$("body").find($("[id^=tooltip]"));f.remove()});b.on("mouseenter tap click",'[data-tooltip-content]:not("[aria-describedby]"), [data-tooltip-content-selector]:not("[aria-describedby]")',function(g){var f=$(this);if(f.hasClass("js-tooltip")||f.hasClass("popover-toggle")){return false}f.data("trigger","hover");PPH.tip(f)});b.on("touchstart tap click mousenter hover",".js-tooltip--exclusive",function(i){var g=$(this);var f=$("#"+g.attr("aria-describedby"));var h=$('.popover:not("#'+g.attr("aria-describedby")+'")');$.each(h,function(k,j){$(this).remove()});setTimeout(function(){f.fadeOut(0,function(){if(f!==null){f.remove()}})},5000)});b.on("click","[data-tooltip-click-content], [data-tooltip-click-content-selector]",function(g){g.preventDefault();var f=$(this);f.data("tooltip-style","info");b.one("click",function(h){f.popover("destroy")});PPH.tip(f)});b.on("focus","[data-input-suggestion], [data-input-suggestion-selector]",function(f){var g=(typeof f.preventDefault=="undefined")?f:$(this);g.data("tooltip-style","info");g.data("trigger","focus");PPH.tip(g)});b.on("focus",'.popover-toggle[data-trigger="focus"], input.popover-toggle:not([data-trigger])',function(f){e.apply(this,["focus"])});b.on("click",'.popover-toggle[data-trigger*="click"], button.popover-toggle:not([data-trigger])',function(f){f.preventDefault();e.apply(this,["click"])});b.on("mouseenter",'.popover-toggle[data-trigger*="hover"], a.popover-toggle:not([data-trigger])',function(f){e.apply(this,["hover"])});b.on("click",".bootbox-toggle",function(h){h.preventDefault();var f=$(this),g={keyboard:true};if(f.data("class")){g.className=f.data("class")}if(f.attr("title")){g.title=f.attr("title")}if(f.data("message")){g.message=f.data("message")}else{if(f.data("contentSelector")){g.message=$(f.data("contentSelector")).html()}}var i=bootbox.dialog(g);if(f.data("modalShownCb")){PPH.runStringAsFn(f.data("modalShownCb"))}if(f.data("closeModalBtn")){i.find(f.data("closeModalBtn")).on("click",function(j){bootbox.hideAll()})}});b.on("click",".js-toggle-class",function(){var f=$(this);var g=f.data("selector")?f.parents(f.data("selector")):f;if(f.data("class")){g.toggleClass(f.data("class"))}});function e(f){var g=$(this);g.data("tooltip-style","info");if(g.data("bound-popover")){return false}g.data("bound-popover",true);f=f||"hover";if(!g.data("trigger")){g.data("trigger",f)}PPH.tip(g)}});PPH.modules.LocationCombo=function(C){var h={mappings:{iso_code:"iso"},selMainIdPrefix:"#widget-jsModuleLocationCombo-",selMain:".widget-jsModuleLocationCombo",selInput:".location-combo-input",selText:".location-combo-text",selChange:".location-combo-change",suggestionDisplayKey:"country",ajaxLookup:"/location/cities",locationDisplayFields:["city","iso"],locationDelimiter:" - ",minLength:2,enhancedText:false,enhancedTextFlag:false,dropdownFlags:true,dropdownLook:false,lockedLocation:false,lockedMessage:false,prefix:"",showTitleTooltip:false};var k=PPH.Module($.extend({},h,C));var x=k.config,n="",y={},i={},w={},f=false,p="text",t=false;function B(c,E){for(var D=0;D<E.length;D++){if(typeof E[D]=="undefined"||E[D]==""||E[D]==null){E.splice(D,1);D--}}if(E.length>0){return E.join(c)}else{return""}}function a(G,c){var F=[];c=c!==undefined?c:true;for(var H in x.locationDisplayFields){var E=x.locationDisplayFields[H];if(G[E]===undefined){var D=G.country;return e(G,D)}F.push(G[x.locationDisplayFields[H]]);if(x.locationDisplayFields[H]=="city"&&G.iso!==undefined&&G.iso=="US"&&G.admin_area!==undefined){F.push(G.admin_area)}}F=B(x.locationDelimiter,F);return c?e(G,F):F}function e(D,c){if(x.dropdownFlags&&D.iso!==undefined){c='<img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="country-flag flag-'+D.iso.toLowerCase()+'"  /> '+c}return c}function z(E,D){var c=$(x.elMain).data("lastGoodItem");if(!E){if($(D).val()!=""&&c!==undefined&&!$.isEmptyObject(c)){d(a(c),c.iso);return c}else{d("");$(x.elMain).data("lastGoodItem",{});if(x.ifEmptyShowInput){v(true)}return{}}}else{$(x.elMain).data("lastGoodItem",E);d(a(E),E.iso);return E}}function o(D){var c=$(this).data("locationItem");if(c===undefined){return false}var E=$(D.target).text().length>0?$(D.target).text():a(c);d(E,c.geoname.iso);return false}function u(D,K,F){var H=x.elMain.find(".location-combo-input");if(K===undefined||$.isEmptyObject(K)){return false}if(H.attr("placeholder")===H.val()){return false}K=z(K,this);var I=$(this);I.data("locationItem",$.extend(true,I.data("locationItem"),{geoname:K}));var E=x.mappings;for(var c in E){var J=E[c];if(!K||!K[J]||K[J]==""){$('input[data-geoname-attr="'+J+'"]',x.elMain).val("");var G=m();x.elMain.trigger("newLocation",G);return false}else{$('input[data-geoname-attr="'+J+'"]',x.elMain).val(K[J])}}var G=m();if(i.concatTotal!=G.concatTotal||(i.concatTotal!==undefined&&y.concatTotal!=G.concatTotal)){x.elMain.trigger("newLocation",G);if(G.concatTotal!=""){i=G;x.elMain.trigger("newValidLocation",G)}}if(H.attr("placeholder")!=H.val()){b.apply(this,[D])}return false}function d(c,D){if(c===undefined){return}c=$.trim(c.replace(/(<([^>]+)>)/ig,""));$(x.elInput).val(c);if(x.enhancedText){if(c!=""&&x.enhancedTextFlag&&typeof D!="undefined"){c=e({iso:D},c)}$(x.elText).html(c==""?x.emptyLocation:x.prefix+c);if(x.showTitleTooltip){l(x.elText)}}}function b(c){r()}function j(c){if(c.keyCode==13||c.keyCode==27){$(this).trigger("blur");$(this).trigger("keyPressBlur");c.preventDefault()}}function g(c){c.preventDefault();s();q();v();return false}function s(){if(x.dependsOn){x.elDepends.attr("checked",true);x.elDepends.change()}}function r(D){if(x.enhancedText){p="text";f=false;var c=x.elText.text();if(x.ifEmptyShowInput&&(c==""||c==x.emptyLocation)){x.elInput.unbind("blur");x.elInput.blur();x.elInput.bind("blur",b);return true}x.elInput.hide();x.elText.show();if(x.elText.next(".twitter-typeahead").length){x.elText.next(".twitter-typeahead").hide()}if(typeof D=="undefined"||!D){x.elChange.css("display","inline")}}}function v(c){if(x.lockedLocation){return false}if(x.enhancedText){if(p==="input"){return true}p="input";x.elChange.hide();x.elText.hide()}x.elInput.show();if(x.elText.next(".twitter-typeahead").length){x.elText.next(".twitter-typeahead").show()}if(!c){if(x.elInput.not(":focus").length>0&&!f){x.elInput.focus();x.elInput.select();f=true}}}function q(){var c=$(x.elMain).attr("data-tip-hook");if(typeof c!="undefined"){PPH.dom.error($(x.elMain),"close",{useHook:false})}}function m(){var c={};c.target=c.geoname={};c.concatTotal="";$("[data-target-attr]",x.elMain).each(function(D,E){var F=$(E);var G=F.val();c.target[F.attr("data-target-attr")]=G;c.geoname[F.attr("data-geoname-attr")]=G;c.concatTotal+=G});return c}function A(){$(this).fadeOut("fast");$(".widget-jsModuleLocationCombo").fadeIn("fast")}function l(c){c.attr("title",c.text())}k.disable=function(){if(!t){return true}t=false;q();var c=$('input[type="text"],input[type="hidden"]',$(x.elMain).parent());c.each(function(D,E){if(typeof $(E).attr("data-name")==="undefined"){$(E).attr("data-name",$(E).attr("name"))}});c.attr("disabled","disabled").removeAttr("name");r(true)};k.enable=function(){if(t){return true}t=true;q();var c=$('input[type="text"],input[type="hidden"]',$(x.elMain).parent());c.each(function(D,E){if(typeof $(this).attr("data-name")!=="undefined"){$(this).attr("name",$(E).attr("data-name"))}});c.removeAttr("disabled").removeAttr("data-name");v(false)};k.reset=function(D){i={};var c=$('input[type="text"],input[type="hidden"]',$(x.elMain).parent());c.val("");if(typeof D!="undefined"&&D){x.elInput.trigger("blur");if(x.elInput.data("ttTypeahead")){x.elInput.typeahead("val","")}}};k.init=function(){var D=$(x.selMainIdPrefix+x.id);var E=$(x.selInput,D);if(!E.length){return}x.elMain=D;x.elInput=E;if(x.enhancedText){x.elChange=$(x.selChange,D);x.elText=$(x.selText,D);if(x.showTitleTooltip){l(x.elText)}if(typeof x.dependsOn!="undefined"){x.elDepends=$(x.dependsOn);if(!x.elDepends.is(":checked")){x.elChange.hide();k.disable()}var H=x.elDepends;if(x.elDepends.attr("type")=="radio"){var G=x.elDepends.attr("name");H=$('input[name="'+G+'"]')}H.on("change",function(){if($(this).val()==x.elDepends.val()){x.elMain.show();k.enable()}else{x.elChange.hide();k.disable()}})}}y=m();var F=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:(x.ajaxLookup+"?term=%QUERY")});F.initialize();E.typeahead(null,{name:x.id+"-typeahead",displayKey:x.suggestionDisplayKey,source:F.ttAdapter(),autoselect:true,templates:{suggestion:function(I){return a(I)}}});E.on("typeahead:selected",u);E.on("focus",o);E.on("blur",b);E.data("locationItem",y);D.data("js-location-combo",k);E.on("blur",b);E.on("keypress",j);if(x.enhancedText){x.elChange.add(x.elText).on("click",g);x.elText.next(".twitter-typeahead").hide()}else{var c=$(x.elMain).parents("form");$('input[type="submit"]',c).on("mouseover",function(){x.elInput.blur()})}if(x.id=="footer_preference_menu_location"&&x.lockedLocation){$(x.selMainIdPrefix+x.id+" "+x.selText).css({cursor:"default"}).attr("data-tooltip-content",x.lockedMessage).attr("data-tooltip-pos","top").attr("data-tooltip-style","info");$(x.selMainIdPrefix+x.id+" "+x.selChange).hide()}$(document).on("click",".add-more-countries",A)};return k};PPH.modules.SubscribeNewsletter=function(d){var b={metadataKey:"guest.newsletter-subscription-popup"};var e=PPH.Module($.extend(true,{},b,d)),g=e.config;e.init=function(){$(document).on("click",".subscribe-newsletter .form .submit-btn, .connect .submit-btn",function(c){var h=$(this).closest("form");a("subscribe");c.preventDefault();f(c,h)})};function f(k,l){var i=l;var j=$(i).attr("action");var c=$("#NewsletterSubscription_email",l).val().trim();var h=$("#NewsletterSubscription_email_group",l);if(c==""){PPH.dom.error(h,"Please type your email",{container:i});return}if(jQuery.trim(c)!=""&&!c.match(/^[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$/)){PPH.dom.error(h,"Email format isn't valid",{container:i});return}$.ajax({url:j,type:"POST",data:i.serialize(),success:function(m){if(m.success){PPH.success("You have successfully subscribed to the hourlie offers newsletter");$('input[name="NewsletterSubscription[email]"]',l).val("");PPH.userData.save(g.metadataKey,true)}else{PPH.error("We couldn't subscribe you to the hourlie offers newsletter");$('input[name="NewsletterSubscription[email]"]',l).val("")}}})}function a(h){var c="/subscribeNewsletter/"+h;if(typeof gtmTrackPageview!=="undefined"){gtmTrackPageview(c)}}return e};PPH.modules.Rtm=function(e){var l={notificationCreated:"App\\Events\\NotificationCreated",videoCallInitialized:"videoCallInitialized",videoCallCreated:"App\\Events\\VideoCallCreated",videoCallAnswered:"App\\Events\\VideoCallAnswered",videoCallHangup:"App\\Events\\VideoCallHangup",videoCallMissed:"App\\Events\\VideoCallMissed",videoCallConstructionEndpoint:"/videoCall/transformCall",streamRead:"StreamRead",streamUpdated:"StreamUpdated",messageTyping:"client-MessageTyping",memberAdded:"pusher:member_added",memberRemoved:"pusher:member_removed",messageNotTyping:"client-MessageNotTyping",notificationContainer:$("li.notifications-bell"),notificationContainerMobile:$("li.navNotifications"),envelopeContainer:$("li.navWorkstreams"),notificationMobileTopnavToggler:$(".top-navigation .topnav-toggle"),listItemContainer:"#streamview-list .items-container",listMessageID:"files-messageview-list",streamFeedSummaryView:"streamsystemmessageview-list",notificationConstructionEndpoint:"/notification/renderMessage",notificationBubbleTimeout:15000,notificationBubbleDivContainer:"notifications-bubble-container"};var i=PPH.Module($.extend({},l,e));var m=i.config;var d;var o;var f;var a=m.videoCallerTemplate;var g=m.videoCalleeTemplate;var k={};function h(q){var c={notifications:"private-"+m.consumer+"-"+m.userId,stream:"private-"+m.consumer+"-stream-"+i.getStreamId(),presence:"presence-"+m.consumer+"-stream-"+i.getStreamId()};return c[q]}function j(q){var r=window.location.search.substring(1);var s=r.split("&");for(var c=0;c<s.length;c++){var t=s[c].split("=");if(t[0]==q){return t[1]}}}function p(){$(m.listItemContainer).animate({scrollTop:$(m.listItemContainer)[0].scrollHeight},0)}i.init=function(){$(window).load(function(){if(m.featureEnabled&&typeof _pusher!=="undefined"){n()}})};function n(){if(!_pusher){return}d=_pusher.subscribe(h("notifications"));if(i.getStreamId()&&m.currentUrl=="stream/view"){o=_pusher.subscribe(h("stream"));f=_pusher.subscribe(h("presence"))}if(!m.isReactPage){i.notifications._initNotifications(_pusher)}i.videoCalls._initVideoCalls();i.streamNotifications._initStreamNotifications()}i.videoCalls={_initVideoCalls:function(c){if(!m.isReactPage){d.bind(m.videoCallCreated,function(q){i.videoCalls._callReceived(q.videoCall)});d.bind(m.videoCallAnswered,function(q){i.videoCalls._callAnwered(q.videoCall)});d.bind(m.videoCallHangup,function(q){i.videoCalls._callHangup(q.videoCall)});d.bind(m.videoCallMissed,function(q){i.videoCalls._callMissed(q.videoCall)});this._callingCheck()}$(document).bind("makeRtmCall",function(s,q,r){i.videoCalls.actionMakeCallAttempt(q,r)})},_callingCheck:function(){$.each(m.videoCalls,function(c,q){i.videoCalls.callingBubble(q)})},_playCallingSound:function(){if(m.notificationSoundFlag==1){var q=new Audio(m.videocallSoundUrl);try{q.play().catch(function(){})}catch(c){}}},callingBubble:function(r){var q;if(r.role=="caller"){q=i.template._populateTemplate(a,r.params)}else{if(r.role=="callee"){q=i.template._populateTemplate(g,r.params)}}var s={level:200,html:q,bubbleTimeout:r.timeout,role:r.role,callId:r.id};i.bubble.notify(s,r.id);var c=$('.notify-bubble[data-id="'+r.id+'"]');c.find(".abort-call").on("click",function(){i.videoCalls._actionHangupCall(r);$(this).unbind("click");c.find(".answer-call").unbind("click")});if(r.role=="callee"){c.find(".answer-call").on("click",function(){i.videoCalls._actionAnswerCall(r);$(this).unbind("click");var t=window.open(r.params["{call-link}"],"_blank");if(t!=null){t.focus()}})}c.find(".join-call").on("click",function(){var t=window.open(r.params["{call-link}"],"_blank");if(t!=null){t.focus()}})},_updateBubble:function(q,r){var c=$('.notify-bubble[data-id="'+q.id+'"]');switch(r){case"answer":c.find(".call-accepted").show();c.find(".call-pending").remove();clearTimeout(k[c.data("id")]);k[c.data("id")]=setTimeout(function(){i.bubbleTimeout(c)},60000);break;case"hangup":clearTimeout(k[c.data("id")]);i.bubbleTimeout(c);break}},_callReceived:function(c){var q=$('.notify-bubble[data-id="'+c.id+'"]').length;if(q<1){$.ajax({url:m.videoCallConstructionEndpoint,dataType:"json",data:{call:c},success:function(r){i.videoCalls.callingBubble(r);i.title.flashTitle(m.translations.callReceivedTitle,c.timeout,1500);i.videoCalls._playCallingSound();if(m.currentUrl=="stream/view"){$.fn.yiiListView.update("streamview-list",{url:"/stream/view",data:{id:i.getStreamId()}})}}})}},_callAnwered:function(q){i.videoCalls._updateBubble(q,"answer");var c=$('.notify-bubble[data-id="'+q.id+'"]');c.find("button.answer-call").trigger("click")},_callMissed:function(q){var c=$.extend({callId:q.id,fromElement:(typeof q.fromElement!="undefined")?q.fromElement:false},PPH.getCsrf());$.post("/videoCall/missedCall",c)},_callHangup:function(c){i.videoCalls._updateBubble(c,"hangup");i.title.flashClear()},_actionAnswerCall:function(q){var c=$.extend({callId:q.id},PPH.getCsrf());$.post("/videoCall/answerCall",c,function(r){if(r.status=="1"){i.videoCalls._updateBubble(q,"answer")}},"json")},_actionHangupCall:function(q){var c=$.extend({callId:q.id},PPH.getCsrf());$.post("/videoCall/hangupCall",c,function(r){if(r.status=="1"){i.videoCalls._updateBubble(q,"hangup")}},"json")},actionMakeCallAttempt:function(q,s){var r=q;var t=s;var c=$.extend({calleeId:q,streamId:s,check:1},PPH.getCsrf());$.post("/videoCall/makeCall",c,function(u){if(u.status=="1"){bootbox.dialog({message:m.translations.callConfirmMsg,title:m.translations.callConfirmTitle,buttons:{success:{label:m.translations.callConfirmButton,className:"btn btn-pph tall",callback:function(){i.videoCalls.actionMakeCall(r,t);return true}},main:{label:"Cancel",className:"btn tall",callback:function(){bootbox.hideAll();return false}}}})}else{if(u.status=="0"){bootbox.dialog({message:u.message,title:m.translations.callConfirmTitle,buttons:{main:{label:"Close",className:"btn tall",callback:function(){bootbox.hideAll();return false}}}})}}$(document).trigger("callProcessed")},"json")},actionMakeCall:function(q,r){var c=$.extend({calleeId:q,streamId:r},PPH.getCsrf());$.post("/videoCall/makeCall",c,function(t){if(t.status=="1"){if(!m.isReactPage){i.videoCalls.callingBubble(t.call)}else{var s=new CustomEvent(m.videoCallInitialized,{detail:t.call});window.dispatchEvent(s)}}else{if(t.status=="0"){PPH.info(t.message)}}$(document).trigger("callProcessed");$.fn.yiiListView.settings["streamview-list"].afterAjaxUpdate=function(){p()};$.fn.yiiListView.update("streamview-list",{url:"/stream/view",data:{id:i.getStreamId()}})},"json")}};i.streamNotifications={_notificationBubbleNumber:m.envelopeContainer.find(".notification-bubble"),_messagesCount:function(){return parseInt(this._notificationBubbleNumber.html())},_initStreamNotifications:function(){d.bind(m.streamRead,function(c){i.streamNotifications._actionStreamRead(c)});d.bind(m.streamUpdated,function(c){i.streamNotifications._actionStreamUpdated(c)});if(i.getStreamId()&&m.currentUrl=="stream/view"){$(document).bind(m.messageTyping,function(q,c){o.trigger(m.messageTyping,c)});o.bind(m.messageTyping,function(c){i.streamNotifications._actionMessageTyping(c)});$(document).bind(m.messageNotTyping,function(q,c){o.trigger(m.messageNotTyping,c)});o.bind(m.messageNotTyping,function(c){i.streamNotifications._actionMessageNotTyping(c)})}},_actionMessageTyping:function(c){$("#streamview-list").append('<div class="user-typing"><span class="user-name">'+c.memberName+'</span> <span class="typing">is typing</span></div>');$("#streamview-list .user-typing").slideDown("fast")},_actionMessageNotTyping:function(c){$("#streamview-list .user-typing").slideUp("fast",function(){$(this).remove()})},_actionStreamRead:function(c){var r=c.data;if(m.currentUrl=="stream/view"){if(i.getStreamId()==r.stream_id&&((typeof r.owner!=="undefined"&&(parseInt(m.userId,10)!==parseInt(r.owner,10)))||(typeof r.mem_id!=="undefined"&&(parseInt(m.userId,10)!==parseInt(r.mem_id,10))))){$(".seen-date").remove();var q=$("#streamview-list ul.items > li.item.mine").last().find(".right-col .msg-wrap");if(!q.find(".seen-date").length){q.append('<p class="pull-right discreet seen-date">'+m.translations.streamSeen+"</p>");p()}}}},_actionStreamUpdated:function(q){data=q.data;var c=false;if(m.currentUrl=="stream/view"){var r=i.getStreamId();if(data.streamId==r){var s=0;if(document.hasFocus()){s=1}else{$(window).unbind("focus").one("focus",function(){$.getJSON("/stream/read",{id:r})})}$.getJSON("/stream/view",{id:r,hasFocus:s,ajax:"streamview-list-full"},function(t){this._afterStreamRefresh(t)}.bind(this));$.fn.yiiListView.update(m.streamFeedSummaryView,{url:"/stream/view",data:{id:r}});$.fn.yiiListView.update(m.listMessageID,{url:"/stream/view",data:{id:r}});i.page.trigger("refresh-button-states-config");if(!m.isReactPage){i.title.flashTitle(m.translations.streamUpdtedTitle,30000,1500)}c=true}else{c=false}}if(!m.isReactPage){if(!c){i.streamNotifications.renderNotifications()}}},renderNotifications:function(){$.getJSON("/stream/newMessages",function(c){if(c.count<=this._messagesCount()){return false}i.notifications._playNotificationSound();i.envelope.setCount(c.count);i.title.flashTitle(m.translations.streamNewMessages,30000,1500);this._updateWorkstreamListingPage();_lockStreamNotificationRequest=false;if($(".navWorkstreams.stream-envelope").hasClass("open")){$(".navWorkstreams.stream-envelope").trigger("click")}}.bind(this))},_updateWorkstreamListingPage:function(){if((window.location.pathname=="/stream/list")&&(!$("#stream-list").has(".new-stream-message-element").length)){$('<div class="clearfix new-stream-message-element">'+m.newStreamMessagesText+"</div>").prependTo($("#stream-list").on("click",function(){location.reload(true)}))}},_updateSummary:function(r,q){var c=q;if(r!=""){if(c.length&&c.is(":visible")){c.replaceWith(r)}else{$(".right-column .sticky-widgets").append(r)}}else{if(c.length){c.hide().html("")}}PPH.page.modules.StreamControl.sidebarTabsHeightCalc()},_afterStreamRefresh:function(r){$(r.messages).replaceAll("#streamview-list").promise().done(function(){p()});var q=$("section.toolbox");var c=$("<div></div>");c.hide().appendTo("body").html(r.toolbox);q.html(c.children().html());c.remove();$(".stream-whats-next").replaceWith(r.whatsNext);$(".system-messages-list").replaceWith(r.systemMessages);PPH.page.modules.StreamControl.initWorkstreamFeed();this._updateSummary(r.perhourSummary,$(".hire-per-hour-summary-display"));this._updateSummary(r.streamSummary,$(".stream-summary-display"));this._updateSummary(r.payrollSummary,$(".payroll-summary-display"));$(document).trigger("_setupFeedbackForms")}};i.notifications={_initNotifications:function(c){i.bubble._createContainer();d.bind(m.notificationCreated,function(q){i.notifications._constructNotification(q)})},_constructNotification:function(c){$.ajax({url:m.notificationConstructionEndpoint,dataType:"json",data:c,success:function(q){i.notifications._afterNotificationRender(q)}})},_playNotificationSound:function(){if(m.notificationSoundFlag==1){var q=new Audio(m.notificationSoundUrl);try{q.play().catch(function(){})}catch(c){}}},_afterNotificationRender:function(c){if(c.status){if(c.showBubble){i.bubble.notify(c)}i.bell.setNumber(c.newCount);this._playNotificationSound();this._updateNotificationListingPage();_lockNotificationRequest=false;if($(".navNotifications.notifications-bell").hasClass("open")){$(".navNotifications.notifications-bell").trigger("click")}}},_updateNotificationListingPage:function(){if((window.location.pathname=="/notification/list")&&(!$("#notification-list .items").has(".new-notifs-element").length)){$('<div class="col-xs-12 clearfix new-notifs-element">'+m.newNotificationsText+"</div>").prependTo($("#notification-list .items").on("click",function(){location.reload(true)}))}},_countNewNotifs:function(){var q=["navWorkstreams","navNotifications"],r=0,c;$.each(q,function(s,t){c=parseInt($("#widget-TopNav .nav-tabs ."+t+" > a").find(".notification-bubble").html());if(c>0){r+=c}});return r}};i.envelope={_envelopeCountContainer:m.envelopeContainer.find(".notification-bubble"),setCount:function(c){if(c>0){this._envelopeCountContainer.html(c).show();m.notificationMobileTopnavToggler.addClass("with-new-notification")}},removeAll:function(){this._envelopeCountContainer.html(0).fadeOut("slow");i.title.restoreTitle();if(i.notifications._countNewNotifs()==0){m.notificationMobileTopnavToggler.removeClass("with-new-notification")}}};i.bell={_notificationBubbleNumber:m.notificationContainer.find(".notification-bubble"),_notificationBubbleNumberMobile:m.notificationContainerMobile.find(".notification-bubble"),_notificationsCount:function(){return parseInt(this._notificationBubbleNumber.html())},addOne:function(){var c=this._notificationsCount()+1;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();i.title.changeTitle(c);m.notificationMobileTopnavToggler.addClass("with-new-notification")},addLot:function(q){var c=this._notificationsCount()+q;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();m.notificationMobileTopnavToggler.addClass("with-new-notification")},setNumber:function(c){this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();i.title.changeTitle(c);m.notificationMobileTopnavToggler.addClass("with-new-notification")},removeOne:function(){var c;if(this._notificationsCount()>1){c=this._notificationsCount()-1;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();i.title.changeTitle(c)}else{if(this._notificationsCount()==1){this.removeAll()}}},removeAll:function(){this._notificationBubbleNumber.html(0).fadeOut("slow");this._notificationBubbleNumberMobile.html(0).fadeOut("slow");i.title.restoreTitle();if(i.notifications._countNewNotifs()==0){m.notificationMobileTopnavToggler.removeClass("with-new-notification")}}};var b=null;i.title={changeTitle:function(c){document.title="("+c+") "+window.originalTitle},restoreTitle:function(){document.title=window.originalTitle},flashTitle:function(s,t,c){if((b!=null)||(document.hasFocus())){return false}b=null;var u=$("title").html();var r;var q=0;b=setInterval(function(){if(q%2==0||q==0){$("title").html(s)}else{$("title").html(u)}q++},c);r=setTimeout(function(){clearInterval(b)},t);$(document).focusin(function(){clearInterval(b);clearTimeout(r);$("title").html(u)})},flashClear:function(){clearInterval(b)}};i.bubble={_createContainer:function(){$("body").append('<div class="'+m.notificationBubbleDivContainer+' col-xs-12 col-sm-7"></div>')},notify:function(s,r){var c=$('<div class="notify-bubble notif-level-'+s.level+'">'+s.html+"</div>");if(r){c.attr("data-id",r)}c.appendTo("."+m.notificationBubbleDivContainer).slideDown("fast");k[c.data("id")]=setTimeout(function(){i.bubbleTimeout(c,true)},(s.bubbleTimeout)?s.bubbleTimeout:m.notificationBubbleTimeout);var q=c.find(".close-btn");c.call=s;q.on("click",function(){clearTimeout(k[c.data("id")]);i.bubbleTimeout(c)})}};i.bubbleTimeout=function(q,c){q.slideUp("fast");if((typeof c=="undefined")||(c==false)){return true}if(typeof q.call=="undefined"){return true}if(q.call.role!="caller"){return true}var r={id:q.call.callId,fromElement:true};i.videoCalls._callMissed(r)};i.template={_populateTemplate:function(c,q){$.each(q,function(r,s){c=c.replace(new RegExp(r,"g"),s)});return c}};i.getStreamId=function(){var c=new URL(window.location.href);var q;if(c.searchParams){q=c.searchParams.get("id")}else{q=j("id")}return q&&q.replace(/[^\d]/gi,"")};return i};PPH.pages.Checkout=function(s){var d={actions:[],activeClass:"selected",validVoucherClass:"",invalidVoucherClass:"",beforeSubmit:function(){return true},voucherCustomValue:"CUSTOM",tooltipPosition:"top",paymentData:{},selectors:{action:".js-action-value",mainContainer:"#main-container .main-content.controller-checkout",control:".js-selection-control",partial:'.js-selection-control[data-partial="1"]',cancelCustomVoucher:".js-cancel-custom-voucher",customVoucherContainer:".js-custom-voucher-container",customVoucher:".js-custom-voucher",form:"#checkout-form",item:".js-payment-method-item",submit:"#checkout-btn",voucherControl:'.js-payment-method-item .js-selection-control[data-voucher="1"]',voucherForm:".js-voucher-form-container",voucherValidityStatus:".js-voucher-valid-status",validateVoucher:".js-validate-voucher",vouchers:".js-voucher-list",refreshInput:"select.js-refresh-order-preview, input.js-refresh-order-preview",serviceFee:".js-service-fee"},messages:{}};var g=PPH.Page($.extend(true,{},d,s)),r=g.config;var e=$(r.selectors.form),i=$(r.selectors.mainContainer),m={};g.init=function(){var c=$(document);c.on("ready",function(){m=$.fn.yiiactiveform.getSettings(r.selectors.form)});c.on("change",r.selectors.refreshInput,n);c.on("change",r.selectors.partial,n);c.on("change",r.selectors.vouchers,a);c.on("change",r.selectors.customVoucher,p);c.on("click",r.selectors.cancelCustomVoucher,o);c.on("click",r.selectors.item,l);c.on("click",r.selectors.submit,k);c.on("click","a[data-tooltip-content-selector]",b);j()};function j(){$(r.selectors.item).each(function(){var v=$(this),c=v.find(r.selectors.control);if(c.prop("checked")){v.addClass(r.activeClass);h(c)}else{v.removeClass(r.activeClass)}})}g.beforeValidate=function(){if(typeof r.beforeSubmit!=="function"){return true}return r.beforeSubmit.apply(g,[])};g.afterValidate=function(v,c){if(!v.status){return false}if(v.url&&v.url.match(/^http.*$/)){g.disableForm();window.location.href=v.url;return v.url}if(!v.view){return false}i.html(v.view);i.find(".js-pph-dropdown").pphDropdown();e=i.find(r.selectors.form);e.yiiactiveform(m);$(r.selectors.item).each(function(){var x=$(this),w=x.find(r.selectors.control);if(w.prop("checked")){h(w)}})};function k(c){b(c);f("doCheckout")}function n(w){b(w);var v=$(this),c=parseInt(v.data("voucher"),10)===1;if(c&&!v.is(":checked")){q()}f("orderPreview")}g.disableForm=function(){$(r.selectors.mainContainer).loader("open");$(r.selectors.submit).text(r.messages.wait).prop("disabled",true)};g.enableForm=function(){$(r.selectors.mainContainer).loader("close");$(r.selectors.submit).text(r.messages.checkout).prop("disabled",false)};g.getVoucherCode=function(){var c=$(r.selectors.vouchers),v=$(r.selectors.customVoucher);if(!c.length){return v.val()}return c.val()==r.voucherCustomValue?v.val():c.val()};g.focusVoucher=function(){var c=$(r.selectors.vouchers),w=$(r.selectors.customVoucher),v=[];if(!c.length){v=w}else{v=w.is(":visible")?w:c}PPH.dom.error(v,r.messages.noVoucher,{autoclose:2500,closeOnFocus:false,pos:r.tooltipPosition});return v.focus()};function h(v){if(v.length>0){var c=v[0];if(v.attr("type")=="radio"&&c.value=="wallet-pph-wallet"){$(r.selectors.serviceFee).css("visibility","hidden")}else{$(r.selectors.serviceFee).css("visibility","visible")}}}function l(A){var c=A.target?$(A.target):[];if(c.length&&(c.is(":input")||c.parents(r.selectors.partial).length)){return false}b(A);var z=$(this),v=z.is(r.selectors.item)?z:z.parents(r.selectors.item).filter(":first"),x=v.find(r.selectors.control),w=x.attr("type")=="radio",y=parseInt(x.data("voucher"),10)===1,B=x.is(":checked");if(x.prop("disabled")){return false}h(x);if(w){if(B){return false}v.siblings(r.selectors.item).each(function(D,C){var E=$(C);if(w&&E.find(r.selectors.control+'[type="radio"]').length){E.removeClass(r.activeClass)}});x.prop("checked",true)}else{if(!y){x.prop("checked",!B)}else{if(y){if(!x.is(":checked")&&g.getVoucherCode()===""){return g.focusVoucher()}x.prop("checked",!B)}}}if(x.is(":checked")){v.addClass(r.activeClass)}else{v.removeClass(r.activeClass)}x.trigger("change")}function q(){$([r.selectors.vouchers,r.selectors.customVoucher].join()).val("");$(r.selectors.voucherValidityStatus).removeClass(r.validVoucherClass).addClass(r.invalidVoucherClass);var c=$(r.selectors.vouchers);if(c.length){$(r.selectors.customVoucherContainer).hide();c.show()}}function a(w){b(w);var v=$(this),c=$(r.selectors.voucherControl);if($(this).val()==r.voucherCustomValue){return t.apply(this,[w])}c.prop("checked",(v.val()!=="")).trigger("change")}function p(w){b(w);var v=$(this),c=$(r.selectors.voucherControl);if(v.val()===""){return o.apply(this,[w])}u()}function o(v){b(v);q();var c=$(r.selectors.voucherControl);if(!c.is(":checked")&&g.getVoucherCode()===""){return false}c.prop("checked",false).trigger("change")}function u(){f("validateVoucher")}function t(c){$(r.selectors.vouchers).hide();$(r.selectors.customVoucherContainer).show().find(r.selectors.customVoucher).val("").focus();$(r.selectors.voucherValidityStatus).removeClass(r.validVoucherClass)}function b(c){if(!c){return false}c.preventDefault();c.stopPropagation()}function f(c){if(c&&$.inArray(c,r.actions)>-1){e.find(r.selectors.action).val(c)}e.submit()}return g};PPH.pages.Zero=function(b){var a={isGuest:true,currency:""};var d=PPH.Page($.extend(true,{},a,b)),e=d.config;d.init=function(){PPH.page.currency=e.currency};return d};(function(a){if(typeof a.fn.each2=="undefined"){a.extend(a.fn,{each2:function(f){var d=a([0]),e=-1,b=this.length;while(++e<b&&(d.context=d[0]=this[e])&&f.call(d[0],e,d)!==false){}return this}})}})(jQuery);(function(E,m){if(window.Select2!==m){return}var L,O,y,c,a,q,o={x:0,y:0},w,x,L={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(P){P=P.which?P.which:P;switch(P){case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:return true}return false},isControl:function(Q){var P=Q.which;switch(P){case L.SHIFT:case L.CTRL:case L.ALT:return true}if(Q.metaKey){return true}return false},isFunctionKey:function(P){P=P.which?P.which:P;return P>=112&&P<=123}},C="<div class='select2-measure-scrollbar'></div>",d={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z"};w=E(document);a=(function(){var P=1;return function(){return P++}}());function p(P){var Q=E(document.createTextNode(""));P.before(Q);Q.before(P);Q.remove()}function e(S){var Q,R,P,T;if(!S||S.length<1){return S}Q="";for(R=0,P=S.length;R<P;R++){T=S.charAt(R);Q+=d[T]||T}return Q}function r(R,S){var Q=0,P=S.length;for(;Q<P;Q=Q+1){if(u(R,S[Q])){return Q}}return -1}function N(){var P=E(C);P.appendTo("body");var Q={width:P.width()-P[0].clientWidth,height:P.height()-P[0].clientHeight};P.remove();return Q}function u(Q,P){if(Q===P){return true}if(Q===m||P===m){return false}if(Q===null||P===null){return false}if(Q.constructor===String){return Q+""===P+""}if(P.constructor===String){return P+""===Q+""}return false}function i(Q,S){var T,R,P;if(Q===null||Q.length<1){return[]}T=Q.split(S);for(R=0,P=T.length;R<P;R=R+1){T[R]=E.trim(T[R])}return T}function h(P){return P.outerWidth(false)-P.width()}function G(Q){var P="keyup-change-value";Q.on("keydown",function(){if(E.data(Q,P)===m){E.data(Q,P,Q.val())}});Q.on("keyup",function(){var R=E.data(Q,P);if(R!==m&&Q.val()!==R){E.removeData(Q,P);Q.trigger("keyup-change")}})}w.on("mousemove",function(P){o.x=P.pageX;o.y=P.pageY});function K(P){P.on("mousemove",function(R){var Q=o;if(Q===m||Q.x!==R.pageX||Q.y!==R.pageY){E(R.target).trigger("mousemove-filtered",R)}})}function k(S,Q,P){P=P||m;var R;return function(){var T=arguments;window.clearTimeout(R);R=window.setTimeout(function(){Q.apply(P,T)},S)}}function t(R){var P=false,Q;return function(){if(P===false){Q=R();P=true}return Q}}function l(P,R){var Q=k(P,function(S){R.trigger("scroll-debounced",S)});R.on("scroll",function(S){if(r(S.target,R.get())>=0){Q(S)}})}function J(P){if(P[0]===document.activeElement){return}window.setTimeout(function(){var S=P[0],T=P.val().length,R;P.focus();var Q=(S.offsetWidth>0||S.offsetHeight>0);if(Q&&S===document.activeElement){if(S.setSelectionRange){S.setSelectionRange(T,T)}else{if(S.createTextRange){R=S.createTextRange();R.collapse(false);R.select()}}}},0)}function f(P){P=E(P)[0];var S=0;var Q=0;if("selectionStart" in P){S=P.selectionStart;Q=P.selectionEnd-S}else{if("selection" in document){P.focus();var R=document.selection.createRange();Q=document.selection.createRange().text.length;R.moveStart("character",-P.value.length);S=R.text.length-Q}}return{offset:S,length:Q}}function B(P){P.preventDefault();P.stopPropagation()}function b(P){P.preventDefault();P.stopImmediatePropagation()}function n(Q){if(!q){var P=Q[0].currentStyle||window.getComputedStyle(Q[0],null);q=E(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:P.fontSize,fontFamily:P.fontFamily,fontStyle:P.fontStyle,fontWeight:P.fontWeight,letterSpacing:P.letterSpacing,textTransform:P.textTransform,whiteSpace:"nowrap"});q.attr("class","select2-sizer");E("body").append(q)}q.text(Q.val());return q.width()}function j(Q,U,P){var S,T=[],R;S=Q.attr("class");if(S){S=""+S;E(S.split(" ")).each2(function(){if(this.indexOf("select2-")===0){T.push(this)}})}S=U.attr("class");if(S){S=""+S;E(S.split(" ")).each2(function(){if(this.indexOf("select2-")!==0){R=P(this);if(R){T.push(R)}}})}Q.attr("class",T.join(" "))}function v(U,T,R,P){var S=e(U.toUpperCase()).indexOf(e(T.toUpperCase())),Q=T.length;if(S<0){R.push(P(U));return}R.push(P(U.substring(0,S)));R.push("<span class='select2-match'>");R.push(P(U.substring(S,S+Q)));R.push("</span>");R.push(P(U.substring(S+Q,U.length)))}function H(P){var Q={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(P).replace(/[&<>"'\/\\]/g,function(R){return Q[R]})}function F(Q){var T,R=null,U=Q.quietMillis||100,S=Q.url,P=this;return function(V){window.clearTimeout(T);T=window.setTimeout(function(){var Y=Q.data,X=S,aa=Q.transport||E.fn.select2.ajaxDefaults.transport,W={type:Q.type||"GET",cache:Q.cache||false,jsonpCallback:Q.jsonpCallback||m,dataType:Q.dataType||"json"},Z=E.extend({},E.fn.select2.ajaxDefaults.params,W);Y=Y?Y.call(P,V.term,V.page,V.context):null;X=(typeof X==="function")?X.call(P,V.term,V.page,V.context):X;if(R&&typeof R.abort==="function"){R.abort()}if(Q.params){if(E.isFunction(Q.params)){E.extend(Z,Q.params.call(P))}else{E.extend(Z,Q.params)}}E.extend(Z,{url:X,dataType:Q.dataType,data:Y,success:function(ac){var ab=Q.results(ac,V.page);V.callback(ab)}});R=aa.call(P,Z)},U)}}function I(Q){var T=Q,S,R,U=function(V){return""+V.text};if(E.isArray(T)){R=T;T={results:R}}if(E.isFunction(T)===false){R=T;T=function(){return R}}var P=T();if(P.text){U=P.text;if(!E.isFunction(U)){S=P.text;U=function(V){return V[S]}}}return function(X){var W=X.term,V={results:[]},Y;if(W===""){X.callback(T());return}Y=function(aa,ac){var ab,Z;aa=aa[0];if(aa.children){ab={};for(Z in aa){if(aa.hasOwnProperty(Z)){ab[Z]=aa[Z]}}ab.children=[];E(aa.children).each2(function(ad,ae){Y(ae,ab.children)});if(ab.children.length||X.matcher(W,U(ab),aa)){ac.push(ab)}}else{if(X.matcher(W,U(aa),aa)){ac.push(aa)}}};E(T().results).each2(function(aa,Z){Y(Z,V.results)});X.callback(V)}}function A(Q){var P=E.isFunction(Q);return function(T){var S=T.term,R={results:[]};E(P?Q():Q).each(function(){var U=this.text!==m,V=U?this.text:this;if(S===""||T.matcher(S,V)){R.results.push(U?this:{id:this,text:this})}});T.callback(R)}}function z(P,Q){if(E.isFunction(P)){return true}if(!P){return false}if(typeof(P)==="string"){return true}throw new Error(Q+" must be a string, function, or falsy value")}function D(Q){if(E.isFunction(Q)){var P=Array.prototype.slice.call(arguments,1);return Q.apply(null,P)}return Q}function s(P){var Q=0;E.each(P,function(R,S){if(S.children){Q+=s(S.children)}else{Q++}});return Q}function g(X,Y,V,P){var Q=X,Z=false,S,W,T,R,U;if(!P.createSearchChoice||!P.tokenSeparators||P.tokenSeparators.length<1){return m}while(true){W=-1;for(T=0,R=P.tokenSeparators.length;T<R;T++){U=P.tokenSeparators[T];W=X.indexOf(U);if(W>=0){break}}if(W<0){break}S=X.substring(0,W);X=X.substring(W+U.length);if(S.length>0){S=P.createSearchChoice.call(this,S,Y);if(S!==m&&S!==null&&P.id(S)!==m&&P.id(S)!==null){Z=false;for(T=0,R=Y.length;T<R;T++){if(u(P.id(S),P.id(Y[T]))){Z=true;break}}if(!Z){V(S)}}}}if(Q!==X){return X}}function M(P,Q){var R=function(){};R.prototype=new P;R.prototype.constructor=R;R.prototype.parent=P.prototype;R.prototype=E.extend(R.prototype,Q);return R}O=M(Object,{bind:function(Q){var P=this;return function(){Q.apply(P,arguments)}},init:function(T){var R,Q,U=".select2-results";this.opts=T=this.prepareOpts(T);this.id=T.id;if(T.element.data("select2")!==m&&T.element.data("select2")!==null){T.element.data("select2").destroy()}this.container=this.createContainer();this.liveRegion=E("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body);this.containerId="s2id_"+(T.element.attr("id")||"autogen"+a()).replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.containerSelector="#"+this.containerId;this.container.attr("id",this.containerId);this.body=t(function(){return T.element.closest("body")});j(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",T.element.attr("style"));this.container.css(D(T.containerCss));this.container.addClass(D(T.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",B);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");j(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(D(T.dropdownCssClass));this.dropdown.data("select2",this);this.dropdown.on("click",B);this.results=R=this.container.find(U);this.search=Q=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",B);K(this.results);this.dropdown.on("mousemove-filtered touchstart touchmove touchend",U,this.bind(this.highlightUnderEvent));this.dropdown.on("touchend",U,this.bind(this.selectHighlighted));this.dropdown.on("touchmove",U,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",U,this.bind(this.clearTouchMoved));l(80,this.results);this.dropdown.on("scroll-debounced",U,this.bind(this.loadMoreIfNeeded));E(this.container).on("change",".select2-input",function(V){V.stopPropagation()});E(this.dropdown).on("change",".select2-input",function(V){V.stopPropagation()});if(E.fn.mousewheel){R.mousewheel(function(Y,Z,W,V){var X=R.scrollTop();if(V>0&&X-V<=0){R.scrollTop(0);B(Y)}else{if(V<0&&R.get(0).scrollHeight-R.scrollTop()+V<=R.height()){R.scrollTop(R.get(0).scrollHeight-R.height());B(Y)}}})}G(Q);Q.on("keyup-change input paste",this.bind(this.updateResults));Q.on("focus",function(){Q.addClass("select2-focused")});Q.on("blur",function(){Q.removeClass("select2-focused")});this.dropdown.on("mouseup",U,this.bind(function(V){if(E(V.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(V);this.selectHighlighted(V)}}));this.dropdown.on("click mouseup mousedown focusin",function(V){V.stopPropagation()});this.nextSearchTerm=m;if(E.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(T.maximumInputLength!==null){this.search.attr("maxlength",T.maximumInputLength)}var S=T.element.prop("disabled");if(S===m){S=false}this.enable(!S);var P=T.element.prop("readonly");if(P===m){P=false}this.readonly(P);x=x||N();this.autofocus=T.element.prop("autofocus");T.element.prop("autofocus",false);if(this.autofocus){this.focus()}this.search.attr("placeholder",T.searchInputPlaceholder)},destroy:function(){var Q=this.opts.element,P=Q.data("select2");this.close();if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}if(P!==m){P.container.remove();P.liveRegion.remove();P.dropdown.remove();Q.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){Q.attr({tabindex:this.elementTabIndex})}else{Q.removeAttr("tabindex")}Q.show()}},optionToData:function(P){if(P.is("option")){return{id:P.prop("value"),text:P.text(),element:P.get(),css:P.attr("class"),disabled:P.prop("disabled"),locked:u(P.attr("locked"),"locked")||u(P.data("locked"),true)}}else{if(P.is("optgroup")){return{text:P.attr("label"),children:[],element:P.get(),css:P.attr("class")}}}},prepareOpts:function(U){var S,Q,P,T,R=this;S=U.element;if(S.get(0).tagName.toLowerCase()==="select"){this.select=Q=U.element}if(Q){E.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in U){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}U=E.extend({},{populateResults:function(W,X,Z){var Y,aa=this.opts.id,V=this.liveRegion;Y=function(ah,ab,ag){var ai,ad,an,ak,ae,am,ac,al,aj,af;ah=U.sortResults(ah,ab,Z);for(ai=0,ad=ah.length;ai<ad;ai=ai+1){an=ah[ai];ae=(an.disabled===true);ak=(!ae)&&(aa(an)!==m);am=an.children&&an.children.length>0;ac=E("<li></li>");ac.addClass("select2-results-dept-"+ag);ac.addClass("select2-result");ac.addClass(ak?"select2-result-selectable":"select2-result-unselectable");if(ae){ac.addClass("select2-disabled")}if(am){ac.addClass("select2-result-with-children")}ac.addClass(R.opts.formatResultCssClass(an));ac.attr("role","presentation");al=E(document.createElement("div"));al.addClass("select2-result-label");al.attr("id","select2-result-label-"+a());al.attr("role","option");af=U.formatResult(an,al,Z,R.opts.escapeMarkup);if(af!==m){al.html(af);ac.append(al)}if(am){aj=E("<ul></ul>");aj.addClass("select2-result-sub");Y(an.children,aj,ag+1);ac.append(aj)}ac.data("select2-data",an);ab.append(ac)}V.text(U.formatMatches(ah.length))};Y(X,W,0)}},E.fn.select2.defaults,U);if(typeof(U.id)!=="function"){P=U.id;U.id=function(V){return V[P]}}if(E.isArray(U.element.data("select2Tags"))){if("tags" in U){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+U.element.attr("id")}U.tags=U.element.data("select2Tags")}if(Q){U.query=this.bind(function(Z){var Y={results:[],more:false},X=Z.term,W,V,aa;aa=function(ab,ad){var ac;if(ab.is("option")){if(Z.matcher(X,ab.text(),ab)){ad.push(R.optionToData(ab))}}else{if(ab.is("optgroup")){ac=R.optionToData(ab);ab.children().each2(function(ae,af){aa(af,ac.children)});if(ac.children.length>0){ad.push(ac)}}}};W=S.children();if(this.getPlaceholder()!==m&&W.length>0){V=this.getPlaceholderOption();if(V){W=W.not(V)}}W.each2(function(ab,ac){aa(ac,Y.results)});Z.callback(Y)});U.id=function(V){return V.id}}else{if(!("query" in U)){if("ajax" in U){T=U.element.data("ajax-url");if(T&&T.length>0){U.ajax.url=T}U.query=F.call(U.element,U.ajax)}else{if("data" in U){U.query=I(U.data)}else{if("tags" in U){U.query=A(U.tags);if(U.createSearchChoice===m){U.createSearchChoice=function(V){return{id:E.trim(V),text:E.trim(V)}}}if(U.initSelection===m){U.initSelection=function(V,X){var W=[];E(i(V.val(),U.separator)).each(function(){var Z={id:this,text:this},Y=U.tags;if(E.isFunction(Y)){Y=Y()}E(Y).each(function(){if(u(this.id,Z.id)){Z=this;return false}});W.push(Z)});X(W)}}}}}}}if(typeof(U.query)!=="function"){throw"query function not defined for Select2 "+U.element.attr("id")}if(U.createSearchChoicePosition==="top"){U.createSearchChoicePosition=function(W,V){W.unshift(V)}}else{if(U.createSearchChoicePosition==="bottom"){U.createSearchChoicePosition=function(W,V){W.push(V)}}else{if(typeof(U.createSearchChoicePosition)!=="function"){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}}}return U},monitorSource:function(){var Q=this.opts.element,R,P;Q.on("change.select2",this.bind(function(S){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));R=this.bind(function(){var T=Q.prop("disabled");if(T===m){T=false}this.enable(!T);var S=Q.prop("readonly");if(S===m){S=false}this.readonly(S);j(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(D(this.opts.containerCssClass));j(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(D(this.opts.dropdownCssClass))});Q.on("propertychange.select2",R);if(this.mutationCallback===m){this.mutationCallback=function(S){S.forEach(R)}}P=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(P!==m){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new P(this.mutationCallback);this.propertyObserver.observe(Q.get(0),{attributes:true,subtree:false})}},triggerSelect:function(Q){var P=E.Event("select2-selecting",{val:this.id(Q),object:Q});this.opts.element.trigger(P);return !P.isDefaultPrevented()},triggerChange:function(P){P=P||{};P=E.extend({},P,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(P);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var P=this._enabled&&!this._readonly,Q=!P;if(P===this.enabledInterface){return false}this.container.toggleClass("select2-container-disabled",Q);this.close();this.enabledInterface=P;return true},enable:function(P){if(P===m){P=true}if(this._enabled===P){return}this._enabled=P;this.opts.element.prop("disabled",!P);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(P){if(P===m){P=false}if(this._readonly===P){return}this._readonly=P;this.opts.element.prop("readonly",P);this.enableInterface()},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var R=this.dropdown,U=this.container.offset(),ad=this.container.outerHeight(false),ae=this.container.outerWidth(false),Z=R.outerHeight(false),ab=E(window),ai=ab.width(),X=ab.height(),Q=ab.scrollLeft()+ai,ah=ab.scrollTop()+X,S=U.top+ad,af=U.left,P=S+Z<=ah,W=(U.top-Z)>=ab.scrollTop(),aa=R.outerWidth(false),ak=af+aa<=Q,aj=R.hasClass("select2-drop-above"),V,ag,T,Y,ac;if(aj){ag=true;if(!W&&P){T=true;ag=false}}else{ag=false;if(!P&&W){T=true;ag=true}}if(T){R.hide();U=this.container.offset();ad=this.container.outerHeight(false);ae=this.container.outerWidth(false);Z=R.outerHeight(false);Q=ab.scrollLeft()+ai;ah=ab.scrollTop()+X;S=U.top+ad;af=U.left;aa=R.outerWidth(false);ak=af+aa<=Q;R.show()}if(this.opts.dropdownAutoWidth){ac=E(".select2-results",R)[0];R.addClass("select2-drop-auto-width");R.css("width","");aa=R.outerWidth(false)+(ac.scrollHeight===ac.clientHeight?0:x.width);aa>ae?ae=aa:aa=ae;ak=af+aa<=Q}else{this.container.removeClass("select2-drop-auto-width")}if(this.body().css("position")!=="static"){V=this.body().offset();S-=V.top;af-=V.left}if(!ak){af=U.left+this.container.outerWidth(false)-aa}Y={left:af,width:ae};if(ag){Y.top=U.top-Z;Y.bottom="auto";this.container.addClass("select2-drop-above");R.addClass("select2-drop-above")}else{Y.top=S;Y.bottom="auto";this.container.removeClass("select2-drop-above");R.removeClass("select2-drop-above")}Y=E.extend(Y,D(this.opts.dropdownCss));R.css(Y)},shouldOpen:function(){var P;if(this.opened()){return false}if(this._enabled===false||this._readonly===true){return false}P=E.Event("select2-opening");this.opts.element.trigger(P);return !P.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}this.opening();return true},opening:function(){var U=this.containerId,P="scroll."+U,S="resize."+U,R="orientationchange."+U,Q;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body().children().last()[0]){this.dropdown.detach().appendTo(this.body())}Q=E("#select2-drop-mask");if(Q.length==0){Q=E(document.createElement("div"));Q.attr("id","select2-drop-mask").attr("class","select2-drop-mask");Q.hide();Q.appendTo(this.body());Q.on("mousedown touchstart click",function(W){p(Q);var X=E("#select2-drop"),V;if(X.length>0){V=X.data("select2");if(V.opts.selectOnBlur){V.selectHighlighted({noFocus:true})}V.close();W.preventDefault();W.stopPropagation()}})}if(this.dropdown.prev()[0]!==Q[0]){this.dropdown.before(Q)}E("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");Q.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var T=this;this.container.parents().add(window).each(function(){E(this).on(S+" "+P+" "+R,function(V){T.positionDropdown()})})},close:function(){if(!this.opened()){return}var S=this.containerId,P="scroll."+S,R="resize."+S,Q="orientationchange."+S;this.container.parents().add(window).each(function(){E(this).off(P).off(R).off(Q)});this.clearDropdownAlignmentPreference();E("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(E.Event("select2-close"))},externalSearch:function(P){this.open();this.search.val(P);this.updateResults(false)},clearSearch:function(){},getMaximumSelectionSize:function(){return D(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var S=this.results,R,P,W,V,T,U,Q;P=this.highlight();if(P<0){return}if(P==0){S.scrollTop(0);return}R=this.findHighlightableChoices().find(".select2-result-label");W=E(R[P]);V=W.offset().top+W.outerHeight(true);if(P===R.length-1){Q=S.find("li.select2-more-results");if(Q.length>0){V=Q.offset().top+Q.outerHeight(true)}}T=S.offset().top+S.outerHeight(true);if(V>T){S.scrollTop(S.scrollTop()+(V-T))}U=W.offset().top-S.offset().top;if(U<0&&W.css("display")!="none"){S.scrollTop(S.scrollTop()+U)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(S){var R=this.findHighlightableChoices(),Q=this.highlight();while(Q>-1&&Q<R.length){Q+=S;var P=E(R[Q]);if(P.hasClass("select2-result-selectable")&&!P.hasClass("select2-disabled")&&!P.hasClass("select2-selected")){this.highlight(Q);break}}},highlight:function(Q){var S=this.findHighlightableChoices(),P,R;if(arguments.length===0){return r(S.filter(".select2-highlighted")[0],S.get())}if(Q>=S.length){Q=S.length-1}if(Q<0){Q=0}this.removeHighlight();P=E(S[Q]);P.addClass("select2-highlighted");this.search.attr("aria-activedescendant",P.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(P.text());R=P.data("select2-data");if(R){this.opts.element.trigger({type:"select2-highlight",val:this.id(R),choice:R})}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=true},clearTouchMoved:function(){this._touchMoved=false},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(Q){var P=E(Q.target).closest(".select2-result-selectable");if(P.length>0&&!P.is(".select2-highlighted")){var R=this.findHighlightableChoices();this.highlight(R.index(P))}else{if(P.length==0){this.removeHighlight()}}},loadMoreIfNeeded:function(){var T=this.results,S=T.find("li.select2-more-results"),V,U=this.resultsPage+1,P=this,R=this.search.val(),Q=this.context;if(S.length===0){return}V=S.offset().top-T.offset().top-T.height();if(V<=this.opts.loadMorePadding){S.addClass("select2-active");this.opts.query({element:this.opts.element,term:R,page:U,context:Q,matcher:this.opts.matcher,callback:this.bind(function(W){if(!P.opened()){return}P.opts.populateResults.call(this,T,W.results,{term:R,page:U,context:Q});P.postprocessResults(W,false,false);if(W.more===true){S.detach().appendTo(T).text(D(P.opts.formatLoadMore,U+1));window.setTimeout(function(){P.loadMoreIfNeeded()},10)}else{S.remove()}P.positionDropdown();P.resultsPage=U;P.context=W.context;this.opts.element.trigger({type:"select2-loaded",items:W})})})}},tokenize:function(){},updateResults:function(X){var ab=this.search,V=this.results,P=this.opts,U,aa=this,Y,T=ab.val(),R=E.data(this.container,"select2-last-term"),Z;if(X!==true&&R&&u(T,R)){return}E.data(this.container,"select2-last-term",T);if(X!==true&&(this.showSearchInput===false||!this.opened())){return}function W(){ab.removeClass("select2-active");aa.positionDropdown();if(V.find(".select2-no-results,.select2-selection-limit,.select2-searching").length){aa.liveRegion.text(V.text())}else{aa.liveRegion.text(aa.opts.formatMatches(V.find(".select2-result-selectable").length))}}function Q(ac){V.html(ac);W()}Z=++this.queryCount;var S=this.getMaximumSelectionSize();if(S>=1){U=this.data();if(E.isArray(U)&&U.length>=S&&z(P.formatSelectionTooBig,"formatSelectionTooBig")){Q("<li class='select2-selection-limit'>"+D(P.formatSelectionTooBig,S)+"</li>");return}}if(ab.val().length<P.minimumInputLength){if(z(P.formatInputTooShort,"formatInputTooShort")){Q("<li class='select2-no-results'>"+D(P.formatInputTooShort,ab.val(),P.minimumInputLength)+"</li>")}else{Q("")}if(X&&this.showSearch){this.showSearch(true)}return}if(P.maximumInputLength&&ab.val().length>P.maximumInputLength){if(z(P.formatInputTooLong,"formatInputTooLong")){Q("<li class='select2-no-results'>"+D(P.formatInputTooLong,ab.val(),P.maximumInputLength)+"</li>")}else{Q("")}return}if(P.formatSearching&&this.findHighlightableChoices().length===0){Q("<li class='select2-searching'>"+D(P.formatSearching)+"</li>")}ab.addClass("select2-active");this.removeHighlight();Y=this.tokenize();if(Y!=m&&Y!=null){ab.val(Y)}this.resultsPage=1;P.query({element:P.element,term:ab.val(),page:this.resultsPage,context:null,matcher:P.matcher,callback:this.bind(function(ad){var ac;if(Z!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}this.context=(ad.context===m)?null:ad.context;if(this.opts.createSearchChoice&&ab.val()!==""){ac=this.opts.createSearchChoice.call(aa,ab.val(),ad.results);if(ac!==m&&ac!==null&&aa.id(ac)!==m&&aa.id(ac)!==null){if(E(ad.results).filter(function(){return u(aa.id(this),aa.id(ac))}).length===0){this.opts.createSearchChoicePosition(ad.results,ac)}}}if(ad.results.length===0&&z(P.formatNoMatches,"formatNoMatches")){Q("<li class='select2-no-results'>"+D(P.formatNoMatches,ab.val())+"</li>");return}V.empty();aa.opts.populateResults.call(this,V,ad.results,{term:ab.val(),page:this.resultsPage,context:null});if(ad.more===true&&z(P.formatLoadMore,"formatLoadMore")){V.append("<li class='select2-more-results'>"+aa.opts.escapeMarkup(D(P.formatLoadMore,this.resultsPage))+"</li>");window.setTimeout(function(){aa.loadMoreIfNeeded()},10)}this.postprocessResults(ad,X);W();this.opts.element.trigger({type:"select2-loaded",items:ad})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){J(this.search)},selectHighlighted:function(Q){if(this._touchMoved){this.clearTouchMoved();return}var P=this.highlight(),R=this.results.find(".select2-highlighted"),S=R.closest(".select2-result").data("select2-data");if(S){this.highlight(P);this.onSelect(S,Q)}else{if(Q&&Q.noFocus){this.close()}}},getPlaceholder:function(){var P;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((P=this.getPlaceholderOption())!==m?P.text():m)},getPlaceholderOption:function(){if(this.select){var P=this.select.children("option").first();if(this.opts.placeholderOption!==m){return(this.opts.placeholderOption==="first"&&P)||(typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select))}else{if(P.text()===""&&P.val()===""){return P}}}},initContainerWidth:function(){function Q(){var V,T,W,U,S,R;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){V=this.opts.element.attr("style");if(V!==m){T=V.split(";");for(U=0,S=T.length;U<S;U=U+1){R=T[U].replace(/\s/g,"");W=R.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(W!==null&&W.length>=1){return W[1]}}}if(this.opts.width==="resolve"){V=this.opts.element.css("width");if(V.indexOf("%")>0){return V}return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(E.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var P=Q.call(this);if(P!==null){this.container.css("width",P)}}});y=M(O,{createContainer:function(){var P=E(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return P},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var R,Q,P;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}this.search.focus();R=this.search.get(0);if(R.createTextRange){Q=R.createTextRange();Q.collapse(false);Q.select()}else{if(R.setSelectionRange){P=this.search.val().length;R.setSelectionRange(P,P)}}if(this.search.val()===""){if(this.nextSearchTerm!=m){this.search.val(this.nextSearchTerm);this.search.select()}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(E.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},focus:function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},destroy:function(){E("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var S,P=this.container,U=this.dropdown,T=a(),R;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=S=P.find(".select2-choice");this.focusser=P.find(".select2-focusser");S.find(".select2-chosen").attr("id","select2-chosen-"+T);this.focusser.attr("aria-labelledby","select2-chosen-"+T);this.results.attr("id","select2-results-"+T);this.search.attr("aria-owns","select2-results-"+T);this.focusser.attr("id","s2id_autogen"+T);R=E("label[for='"+this.opts.element.attr("id")+"']");this.focusser.prev().text(R.text()).attr("for",this.focusser.attr("id"));var Q=this.opts.element.attr("title");this.opts.element.attr("title",(Q||R.text()));this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(E("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(V){if(!this.isInterfaceEnabled()){return}if(V.which===L.PAGE_UP||V.which===L.PAGE_DOWN){B(V);return}switch(V.which){case L.UP:case L.DOWN:this.moveHighlight((V.which===L.UP)?-1:1);B(V);return;case L.ENTER:this.selectHighlighted();B(V);return;case L.TAB:this.selectHighlighted({noFocus:true});return;case L.ESC:this.cancel(V);B(V);return}}));this.search.on("blur",this.bind(function(V){if(document.activeElement===this.body().get(0)){window.setTimeout(this.bind(function(){if(this.opened()){this.search.focus()}}),0)}}));this.focusser.on("keydown",this.bind(function(V){if(!this.isInterfaceEnabled()){return}if(V.which===L.TAB||L.isControl(V)||L.isFunctionKey(V)||V.which===L.ESC){return}if(this.opts.openOnEnter===false&&V.which===L.ENTER){B(V);return}if(V.which==L.DOWN||V.which==L.UP||(V.which==L.ENTER&&this.opts.openOnEnter)){if(V.altKey||V.ctrlKey||V.shiftKey||V.metaKey){return}this.open();B(V);return}if(V.which==L.DELETE||V.which==L.BACKSPACE){if(this.opts.allowClear){this.clear()}B(V);return}}));G(this.focusser);this.focusser.on("keyup-change input",this.bind(function(V){if(this.opts.minimumResultsForSearch>=0){V.stopPropagation();if(this.opened()){return}this.open()}}));S.on("mousedown touchstart","abbr",this.bind(function(V){if(!this.isInterfaceEnabled()){return}this.clear();b(V);this.close();this.selection.focus()}));S.on("mousedown touchstart",this.bind(function(V){p(S);if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(E.Event("select2-focus"))}if(this.opened()){this.close()}else{if(this.isInterfaceEnabled()){this.open()}}B(V)}));U.on("mousedown touchstart",this.bind(function(){this.search.focus()}));S.on("focus",this.bind(function(V){B(V)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(E.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(E.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(E.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(R){var S=this.selection.data("select2-data");if(S){var Q=E.Event("select2-clearing");this.opts.element.trigger(Q);if(Q.isDefaultPrevented()){return}var P=this.getPlaceholderOption();this.opts.element.val(P?P.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(R!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(S),choice:S});this.triggerChange({removed:S})}}},initSelection:function(){var Q;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var P=this;this.opts.initSelection.call(null,this.opts.element,function(R){if(R!==m&&R!==null){P.updateSelection(R);P.close();P.setPlaceholder();P.nextSearchTerm=P.opts.nextSearchTerm(R,P.search.val())}})}},isPlaceholderOptionSelected:function(){var P;if(!this.getPlaceholder()){return false}return((P=this.getPlaceholderOption())!==m&&P.prop("selected"))||(this.opts.element.val()==="")||(this.opts.element.val()===m)||(this.opts.element.val()===null)},prepareOpts:function(){var Q=this.parent.prepareOpts.apply(this,arguments),P=this;if(Q.element.get(0).tagName.toLowerCase()==="select"){Q.initSelection=function(R,T){var S=R.find("option").filter(function(){return this.selected&&!this.disabled});T(P.optionToData(S))}}else{if("data" in Q){Q.initSelection=Q.initSelection||function(S,U){var T=S.val();var R=null;Q.query({matcher:function(V,Y,W){var X=u(T,Q.id(W));if(X){R=W}return X},callback:!E.isFunction(U)?E.noop:function(){U(R)}})}}}return Q},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===m){return m}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var P=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&P!==m){if(this.select&&this.getPlaceholderOption()===m){return}this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(P));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(U,Q,T){var S=0,P=this,V=true;this.findHighlightableChoices().each2(function(W,X){if(u(P.id(X.data("select2-data")),P.opts.element.val())){S=W;return false}});if(T!==false){if(Q===true&&S>=0){this.highlight(S)}else{this.highlight(0)}}if(Q===true){var R=this.opts.minimumResultsForSearch;if(R>=0){this.showSearch(s(U.results)>=R)}}},showSearch:function(P){if(this.showSearchInput===P){return}this.showSearchInput=P;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!P);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!P);E(this.dropdown,this.container).toggleClass("select2-with-searchbox",P)},onSelect:function(R,Q){if(!this.triggerSelect(R)){return}var P=this.opts.element.val(),S=this.data();this.opts.element.val(this.id(R));this.updateSelection(R);this.opts.element.trigger({type:"select2-selected",val:this.id(R),choice:R});this.nextSearchTerm=this.opts.nextSearchTerm(R,this.search.val());this.close();if((!Q||!Q.noFocus)&&this.opts.shouldFocusInput(this)){this.focusser.focus()}if(!u(P,this.id(R))){this.triggerChange({added:R,removed:S})}},updateSelection:function(S){var Q=this.selection.find(".select2-chosen"),R,P;this.selection.data("select2-data",S);Q.empty();if(S!==null){R=this.opts.formatSelection(S,Q,this.opts.escapeMarkup)}if(R!==m){Q.append(R)}P=this.opts.formatSelectionCssClass(S,Q);if(P!==m){Q.addClass(P)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==m){this.container.addClass("select2-allowclear")}},val:function(){var T,Q=false,R=null,P=this,S=this.data();if(arguments.length===0){return this.opts.element.val()}T=arguments[0];if(arguments.length>1){Q=arguments[1]}if(this.select){this.select.val(T).find("option").filter(function(){return this.selected}).each2(function(U,V){R=P.optionToData(V);return false});this.updateSelection(R);this.setPlaceholder();if(Q){this.triggerChange({added:R,removed:S})}}else{if(!T&&T!==0){this.clear(Q);return}if(this.opts.initSelection===m){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(T);this.opts.initSelection(this.opts.element,function(U){P.opts.element.val(!U?"":P.id(U));P.updateSelection(U);P.setPlaceholder();if(Q){P.triggerChange({added:U,removed:S})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(R){var Q,P=false;if(arguments.length===0){Q=this.selection.data("select2-data");if(Q==m){Q=null}return Q}else{if(arguments.length>1){P=arguments[1]}if(!R){this.clear(P)}else{Q=this.data();this.opts.element.val(!R?"":this.id(R));this.updateSelection(R);if(P){this.triggerChange({added:R,removed:Q})}}}}});c=M(O,{createContainer:function(){var P=E(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return P},prepareOpts:function(){var Q=this.parent.prepareOpts.apply(this,arguments),P=this;if(Q.element.get(0).tagName.toLowerCase()==="select"){Q.initSelection=function(R,T){var S=[];R.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(U,V){S.push(P.optionToData(V))});T(S)}}else{if("data" in Q){Q.initSelection=Q.initSelection||function(R,U){var S=i(R.val(),Q.separator);var T=[];Q.query({matcher:function(V,Y,W){var X=E.grep(S,function(Z){return u(Z,Q.id(W))}).length;if(X){T.push(W)}return X},callback:!E.isFunction(U)?E.noop:function(){var V=[];for(var Y=0;Y<S.length;Y++){var Z=S[Y];for(var X=0;X<T.length;X++){var W=T[X];if(u(Z,Q.id(W))){V.push(W);T.splice(X,1);break}}}U(V)}})}}}return Q},selectChoice:function(P){var Q=this.container.find(".select2-search-choice-focus");if(Q.length&&P&&P[0]==Q[0]){}else{if(Q.length){this.opts.element.trigger("choice-deselected",Q)}Q.removeClass("select2-search-choice-focus");if(P&&P.length){this.close();P.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",P)}}},destroy:function(){E("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var P=".select2-choices",Q;this.searchContainer=this.container.find(".select2-search-field");this.selection=Q=this.container.find(P);var R=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(S){R.search[0].focus();R.selectChoice(E(this))});this.search.attr("id","s2id_autogen"+a());this.search.prev().text(E("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(W){if(!this.isInterfaceEnabled()){return}++this.keydowns;var U=Q.find(".select2-search-choice-focus");var V=U.prev(".select2-search-choice:not(.select2-locked)");var T=U.next(".select2-search-choice:not(.select2-locked)");var X=f(this.search);if(U.length&&(W.which==L.LEFT||W.which==L.RIGHT||W.which==L.BACKSPACE||W.which==L.DELETE||W.which==L.ENTER)){var S=U;if(W.which==L.LEFT&&V.length){S=V}else{if(W.which==L.RIGHT){S=T.length?T:null}else{if(W.which===L.BACKSPACE){if(this.unselect(U.first())){this.search.width(10);S=V.length?V:T}}else{if(W.which==L.DELETE){if(this.unselect(U.first())){this.search.width(10);S=T.length?T:null}}else{if(W.which==L.ENTER){S=null}}}}}this.selectChoice(S);B(W);if(!S||!S.length){this.open()}return}else{if(((W.which===L.BACKSPACE&&this.keydowns==1)||W.which==L.LEFT)&&(X.offset==0&&!X.length)){this.selectChoice(Q.find(".select2-search-choice:not(.select2-locked)").last());B(W);return}else{this.selectChoice(null)}}if(this.opened()){switch(W.which){case L.UP:case L.DOWN:this.moveHighlight((W.which===L.UP)?-1:1);B(W);return;case L.ENTER:this.selectHighlighted();B(W);return;case L.TAB:this.selectHighlighted({noFocus:true});this.close();return;case L.ESC:this.cancel(W);B(W);return}}if(W.which===L.TAB||L.isControl(W)||L.isFunctionKey(W)||W.which===L.BACKSPACE||W.which===L.ESC){return}if(W.which===L.ENTER){if(this.opts.openOnEnter===false){return}else{if(W.altKey||W.ctrlKey||W.shiftKey||W.metaKey){return}}}this.open();if(W.which===L.PAGE_UP||W.which===L.PAGE_DOWN){B(W)}if(W.which===L.ENTER){B(W)}}));this.search.on("keyup",this.bind(function(S){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(S){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened()){this.clearSearch()}S.stopImmediatePropagation();this.opts.element.trigger(E.Event("select2-blur"))}));this.container.on("click",P,this.bind(function(S){if(!this.isInterfaceEnabled()){return}if(E(S.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(E.Event("select2-focus"))}this.open();this.focusSearch();S.preventDefault()}));this.container.on("focus",P,this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(E.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var Q;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var P=this;this.opts.initSelection.call(null,this.opts.element,function(R){if(R!==m&&R!==null){P.updateSelection(R);P.close();P.clearSearch()}})}},clearSearch:function(){var Q=this.getPlaceholder(),P=this.getMaxSearchWidth();if(Q!==m&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(Q).addClass("select2-default");this.search.width(P>0?P:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();if(this.search.val()===""){if(this.nextSearchTerm!=m){this.search.val(this.nextSearchTerm);this.search.select()}}this.updateResults(true);this.search.focus();this.opts.element.trigger(E.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(S){var R=[],Q=[],P=this;E(S).each(function(){if(r(P.id(this),R)<0){R.push(P.id(this));Q.push(this)}});S=Q;this.selection.find(".select2-search-choice").remove();E(S).each(function(){P.addSelectedChoice(this)});P.postprocessResults()},tokenize:function(){var P=this.search.val();P=this.opts.tokenizer.call(this,P,this.data(),this.bind(this.onSelect),this.opts);if(P!=null&&P!=m){this.search.val(P);if(P.length>0){this.open()}}},onSelect:function(Q,P){if(!this.triggerSelect(Q)){return}this.addSelectedChoice(Q);this.opts.element.trigger({type:"selected",val:this.id(Q),choice:Q});this.nextSearchTerm=this.opts.nextSearchTerm(Q,this.search.val());this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect){this.postprocessResults(Q,false,this.opts.closeOnSelect===true)}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}else{if(this.nextSearchTerm!=m){this.search.val(this.nextSearchTerm);this.updateResults();this.search.select()}}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:Q});if(!P||!P.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(T){var V=!T.locked,R=E("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),W=E("<li class='select2-search-choice select2-locked'><div></div></li>");var S=V?R:W,P=this.id(T),Q=this.getVal(),U,X;U=this.opts.formatSelection(T,S.find("div"),this.opts.escapeMarkup);if(U!=m){S.find("div").replaceWith("<div>"+U+"</div>")}X=this.opts.formatSelectionCssClass(T,S.find("div"));if(X!=m){S.addClass(X)}if(V){S.find(".select2-search-choice-close").on("mousedown",B).on("click dblclick",this.bind(function(Y){if(!this.isInterfaceEnabled()){return}this.unselect(E(Y.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");B(Y);this.close();this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled()){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}S.data("select2-data",T);S.insertBefore(this.searchContainer);Q.push(P);this.setVal(Q)},unselect:function(R){var T=this.getVal(),S,Q;R=R.closest(".select2-search-choice");if(R.length===0){throw"Invalid argument: "+R+". Must be .select2-search-choice"}S=R.data("select2-data");if(!S){return}var P=E.Event("select2-removing");P.val=this.id(S);P.choice=S;this.opts.element.trigger(P);if(P.isDefaultPrevented()){return false}while((Q=r(this.id(S),T))>=0){T.splice(Q,1);this.setVal(T);if(this.select){this.postprocessResults()}}R.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(S),choice:S});this.triggerChange({removed:S});return true},postprocessResults:function(T,Q,S){var U=this.getVal(),V=this.results.find(".select2-result"),R=this.results.find(".select2-result-with-children"),P=this;V.each2(function(X,W){var Y=P.id(W.data("select2-data"));if(r(Y,U)>=0){W.addClass("select2-selected");W.find(".select2-result-selectable").addClass("select2-selected")}});R.each2(function(X,W){if(!W.is(".select2-result-selectable")&&W.find(".select2-result-selectable:not(.select2-selected)").length===0){W.addClass("select2-selected")}});if(this.highlight()==-1&&S!==false){P.highlight(0)}if(!this.opts.createSearchChoice&&!V.filter(".select2-result:not(.select2-selected)").length>0){if(!T||T&&!T.more&&this.results.find(".select2-no-results").length===0){if(z(P.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+D(P.opts.formatNoMatches,P.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-h(this.search)},resizeSearch:function(){var U,S,R,P,Q,T=h(this.search);U=n(this.search)+10;S=this.search.offset().left;R=this.selection.width();P=this.selection.offset().left;Q=R-(S-P)-T;if(Q<U){Q=R-T}if(Q<40){Q=R-T}if(Q<=0){Q=U}this.search.width(Math.floor(Q))},getVal:function(){var P;if(this.select){P=this.select.val();return P===null?[]:P}else{P=this.opts.element.val();return i(P,this.opts.separator)}},setVal:function(Q){var P;if(this.select){this.select.val(Q)}else{P=[];E(Q).each(function(){if(r(this,P)<0){P.push(this)}});this.opts.element.val(P.length===0?"":P.join(this.opts.separator))}},buildChangeDetails:function(P,S){var S=S.slice(0),P=P.slice(0);for(var R=0;R<S.length;R++){for(var Q=0;Q<P.length;Q++){if(u(this.opts.id(S[R]),this.opts.id(P[Q]))){S.splice(R,1);if(R>0){R--}P.splice(Q,1);Q--}}}return{added:S,removed:P}},val:function(S,Q){var R,P=this;if(arguments.length===0){return this.getVal()}R=this.data();if(!R.length){R=[]}if(!S&&S!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(Q){this.triggerChange({added:this.data(),removed:R})}return}this.setVal(S);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(Q){this.triggerChange(this.buildChangeDetails(R,this.data()))}}else{if(this.opts.initSelection===m){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(U){var T=E.map(U,P.id);P.setVal(T);P.updateSelection(U);P.clearSearch();if(Q){P.triggerChange(P.buildChangeDetails(R,P.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var Q=[],P=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){Q.push(P.opts.id(E(this).data("select2-data")))});this.setVal(Q);this.triggerChange()},data:function(R,S){var Q=this,T,P;if(arguments.length===0){return this.selection.children(".select2-search-choice").map(function(){return E(this).data("select2-data")}).get()}else{P=this.data();if(!R){R=[]}T=E.map(R,function(U){return Q.opts.id(U)});this.setVal(T);this.updateSelection(R);this.clearSearch();if(S){this.triggerChange(this.buildChangeDetails(P,this.data()))}}}});E.fn.select2=function(){var U=Array.prototype.slice.call(arguments,0),Q,T,P,W,Y,X=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],V=["opened","isFocused","container","dropdown"],R=["val","data"],S={search:"externalSearch"};this.each(function(){if(U.length===0||typeof(U[0])==="object"){Q=U.length===0?{}:E.extend({},U[0]);Q.element=E(this);if(Q.element.get(0).tagName.toLowerCase()==="select"){Y=Q.element.prop("multiple")}else{Y=Q.multiple||false;if("tags" in Q){Q.multiple=Y=true}}T=Y?new window.Select2["class"].multi():new window.Select2["class"].single();T.init(Q)}else{if(typeof(U[0])==="string"){if(r(U[0],X)<0){throw"Unknown method: "+U[0]}W=m;T=E(this).data("select2");if(T===m){return}P=U[0];if(P==="container"){W=T.container}else{if(P==="dropdown"){W=T.dropdown}else{if(S[P]){P=S[P]}W=T[P].apply(T,U.slice(1))}}if(r(U[0],V)>=0||(r(U[0],R)&&U.length==1)){return false}}else{throw"Invalid arguments to select2 plugin: "+U}}});return(W===m)?this:W};E.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(Q,R,T,P){var S=[];v(Q.text,T.term,S,P);return S.join("")},formatSelection:function(R,Q,P){return R?P(R.text):m},sortResults:function(Q,P,R){return Q},formatResultCssClass:function(P){return P.css},formatSelectionCssClass:function(Q,P){return m},formatMatches:function(P){return P+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(P,Q){var R=Q-P.length;return"Please enter "+R+" or more character"+(R==1?"":"s")},formatInputTooLong:function(Q,P){var R=Q.length-P;return"Please delete "+R+" character"+(R==1?"":"s")},formatSelectionTooBig:function(P){return"You can only select "+P+" item"+(P==1?"":"s")},formatLoadMore:function(P){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(P){return P==m?null:P.id},matcher:function(P,Q){return e(""+Q).toUpperCase().indexOf(e(""+P).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:g,escapeMarkup:H,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(P){return P},adaptDropdownCssClass:function(P){return null},nextSearchTerm:function(P,Q){return m},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(P){if(P.opts.minimumResultsForSearch<0){return false}return true}};E.fn.select2.ajaxDefaults={transport:E.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:F,local:I,tags:A},util:{debounce:k,markMatch:v,escapeMarkup:H,stripDiacritics:e},"class":{"abstract":O,single:y,multi:c}}}(jQuery));!function(k,o,h){var e,n="sortable",m={drag:true,drop:true,exclude:"",nested:true,vertical:true},a={afterMove:function(s,d,t){},containerPath:"",containerSelector:"ol, ul",distance:0,delay:0,handle:"",itemPath:"",itemSelector:"li",isValidTarget:function(s,d){return true},onCancel:function(s,d,u,t){},onDrag:function(s,d,u,t){s.css(d)},onDragStart:function(s,d,u,t){s.css({height:s.height(),width:s.width()});s.addClass("dragged");k("body").addClass("dragging")},onDrop:function(s,d,u,t){s.removeClass("dragged").removeAttr("style");k("body").removeClass("dragging")},onMousedown:function(d,t,s){if(s.target.nodeName!="INPUT"&&s.target.nodeName!="SELECT"){s.preventDefault();return true}},placeholder:'<li class="placeholder"/>',pullPlaceholder:true,serialize:function(u,t,s){var d=k.extend({},u.data());if(s){return t}else{if(t[0]){d.children=t;delete d.subContainer}}delete d.sortable;return d},tolerance:0},j={},c=0,f={left:0,top:0,bottom:0,right:0};e={start:"touchstart.sortable mousedown.sortable",drop:"touchend.sortable touchcancel.sortable mouseup.sortable",drag:"touchmove.sortable mousemove.sortable",scroll:"scroll.sortable"};function p(t,s){var d=Math.max(0,t[0]-s[0],s[0]-t[1]),u=Math.max(0,t[2]-s[1],s[1]-t[3]);return d+u}function r(y,w,s,u){var t=y.length,d=u?"offset":"position";s=s||0;while(t--){var v=y[t].el?y[t].el:k(y[t]),x=v[d]();x.left+=parseInt(v.css("margin-left"),10);x.top+=parseInt(v.css("margin-top"),10);w[t]=[x.left-s,x.left+v.outerWidth()+s,x.top-s,x.top+v.outerHeight()+s]}}function l(t,d){var s=d.offset();return{left:t.left-s.left,top:t.top-s.top}}function q(u,w,t){w=[w.left,w.top];t=t&&[t.left,t.top];var v,s=u.length,d=[];while(s--){v=u[s];d[s]=[s,p(v,w),t&&p(v,t)]}d=d.sort(function(y,x){return x[1]-y[1]||x[2]-y[2]||x[0]-y[0]});return d}function i(d){this.options=k.extend({},a,d);this.containers=[];if(!this.options.parentContainer){this.scrollProxy=k.proxy(this.scroll,this);this.dragProxy=k.proxy(this.drag,this);this.dropProxy=k.proxy(this.drop,this);this.placeholder=k(this.options.placeholder);if(!d.isValidTarget){this.options.isValidTarget=h}}}i.get=function(d){if(!j[d.group]){if(d.group===h){d.group=c++}j[d.group]=new i(d)}return j[d.group]};i.prototype={dragInit:function(s,d){this.$document=k(d.el[0].ownerDocument);if(d.enabled()){this.item=k(s.target).closest(this.options.itemSelector);this.itemContainer=d;if(this.item.is(this.options.exclude)||!this.options.onMousedown(this.item,a.onMousedown,s)){return}this.setPointer(s);this.toggleListeners("on")}else{this.toggleListeners("on",["drop"])}this.setupDelayTimer();this.dragInitDone=true},drag:function(v){if(!this.dragging){if(!this.distanceMet(v)||!this.delayMet){return}this.options.onDragStart(this.item,this.itemContainer,a.onDragStart,v);this.item.before(this.placeholder);this.dragging=true}this.setPointer(v);this.options.onDrag(this.item,l(this.pointer,this.item.offsetParent()),a.onDrag,v);var d=v.pageX,w=v.pageY,u=this.sameResultBox,s=this.options.tolerance;if(!u||u.top-s>w||u.bottom+s<w||u.left-s>d||u.right+s<d){if(!this.searchValidTarget()){this.placeholder.detach()}}},drop:function(d){this.toggleListeners("off");this.dragInitDone=false;if(this.dragging){if(this.placeholder.closest("html")[0]){this.placeholder.before(this.item).detach()}else{this.options.onCancel(this.item,this.itemContainer,a.onCancel,d)}this.options.onDrop(this.item,this.getContainer(this.item),a.onDrop,d);this.clearDimensions();this.clearOffsetParent();this.lastAppendedItem=this.sameResultBox=h;this.dragging=false}},searchValidTarget:function(x,v){if(!x){x=this.relativePointer||this.pointer;v=this.lastRelativePointer||this.lastPointer}var s=q(this.getContainerDimensions(),x,v),u=s.length;while(u--){var t=s[u][0],y=s[u][1];if(!y||this.options.pullPlaceholder){var d=this.containers[t];if(!d.disabled){if(!this.$getOffsetParent()){var w=d.getItemOffsetParent();x=l(x,w);v=l(v,w)}if(d.searchValidTarget(x,v)){return true}}}}if(this.sameResultBox){this.sameResultBox=h}},movePlaceholder:function(s,t,v,d){var u=this.lastAppendedItem;if(!d&&u&&u[0]===t[0]){return}t[v](this.placeholder);this.lastAppendedItem=t;this.sameResultBox=d;this.options.afterMove(this.placeholder,s,t)},getContainerDimensions:function(){if(!this.containerDimensions){r(this.containers,this.containerDimensions=[],this.options.tolerance,!this.$getOffsetParent())}return this.containerDimensions},getContainer:function(d){return d.closest(this.options.containerSelector).data(n)},$getOffsetParent:function(){if(this.offsetParent===h){var d=this.containers.length-1,s=this.containers[d].getItemOffsetParent();if(!this.options.parentContainer){while(d--){if(s[0]!=this.containers[d].getItemOffsetParent()[0]){s=false;break}}}this.offsetParent=s}return this.offsetParent},setPointer:function(s){var t={left:s.pageX,top:s.pageY};if(this.$getOffsetParent()){var d=l(t,this.$getOffsetParent());this.lastRelativePointer=this.relativePointer;this.relativePointer=d}this.lastPointer=this.pointer;this.pointer=t},distanceMet:function(d){return(Math.max(Math.abs(this.pointer.left-d.pageX),Math.abs(this.pointer.top-d.pageY))>=this.options.distance)},setupDelayTimer:function(){var d=this;this.delayMet=!this.options.delay;if(!this.delayMet){clearTimeout(this._mouseDelayTimer);this._mouseDelayTimer=setTimeout(function(){d.delayMet=true},this.options.delay)}},scroll:function(d){this.clearDimensions();this.clearOffsetParent()},toggleListeners:function(t,d){var s=this;d=d||["drag","drop","scroll"];k.each(d,function(u,v){s.$document[t](e[v],s[v+"Proxy"])})},clearOffsetParent:function(){this.offsetParent=h},clearDimensions:function(){this.containerDimensions=h;var d=this.containers.length;while(d--){this.containers[d].clearDimensions()}},destroy:function(){j[this.options.group]=h}};function g(t,s){this.el=t;this.options=k.extend({},m,s);this.group=i.get(this.options);this.rootGroup=this.options.rootGroup||this.group;this.parentContainer=this.options.parentContainer;this.handle=this.rootGroup.options.handle||this.rootGroup.options.itemSelector;var d=this.rootGroup.options.itemPath,u=d?this.el.find(d):this.el;u.on(e.start,this.handle,k.proxy(this.dragInit,this));if(this.options.drop){this.group.containers.push(this)}}g.prototype={dragInit:function(s){var d=this.rootGroup;if(!d.dragInitDone&&s.which===1&&this.options.drag){d.dragInit(s,this)}},searchValidTarget:function(d,t){var x=q(this.getItemDimensions(),d,t),u=x.length,y=this.rootGroup,A=!y.options.isValidTarget||y.options.isValidTarget(y.item,this);if(!u&&A){var z=this.rootGroup.options.itemPath,w=z?this.el.find(z):this.el;y.movePlaceholder(this,w,"append");return true}else{while(u--){var v=x[u][0],s=x[u][1];if(!s&&this.hasChildGroup(v)){var B=this.getContainerGroup(v).searchValidTarget(d,t);if(B){return true}}else{if(A){this.movePlaceholder(v,d);return true}}}}},movePlaceholder:function(z,s){var D=k(this.items[z]),y=this.itemDimensions[z],d="after",t=D.outerWidth(),C=D.outerHeight(),x=D.offset(),u={left:x.left,right:x.left+t,top:x.top,bottom:x.top+C};if(this.options.vertical){var B=(y[2]+y[3])/2,A=s.top<=B;if(A){d="before";u.bottom-=C/2}else{u.top+=C/2}}else{var v=(y[0]+y[1])/2,w=s.left<=v;if(w){d="before";u.right-=t/2}else{u.left+=t/2}}if(this.hasChildGroup(z)){u=f}this.rootGroup.movePlaceholder(this,D,d,u)},getItemDimensions:function(){if(!this.itemDimensions){this.items=this.$getChildren(this.el,"item").filter(":not(.placeholder, .dragged)").get();r(this.items,this.itemDimensions=[],this.options.tolerance)}return this.itemDimensions},getItemOffsetParent:function(){var s,d=this.el;if(d.css("position")==="relative"||d.css("position")==="absolute"||d.css("position")==="fixed"){s=d}else{s=d.offsetParent()}return s},hasChildGroup:function(d){return this.options.nested&&this.getContainerGroup(d)},getContainerGroup:function(t){var u=k.data(this.items[t],"subContainer");if(u===h){var s=this.$getChildren(this.items[t],"container");u=false;if(s[0]){var d=k.extend({},this.options,{parentContainer:this,rootGroup:this.rootGroup,group:c++});u=s[n](d).data(n).group}k.data(this.items[t],"subContainer",u)}return u},enabled:function(){return !this.disabled&&(!this.parentContainer||this.parentContainer.enabled())},$getChildren:function(u,t){var s=this.rootGroup.options,v=s[t+"Path"],d=s[t+"Selector"];u=k(u);if(v){u=u.find(v)}return u.children(d)},_serialize:function(u,t){var v=this,d=t?"item":"container",s=this.$getChildren(u,d).not(this.options.exclude).map(function(){return v._serialize(k(this),!t)}).get();return this.rootGroup.options.serialize(u,s,t)},clearDimensions:function(){this.itemDimensions=h;if(this.items&&this.items[0]){var d=this.items.length;while(d--){var s=k.data(this.items[d],"subContainer");if(s){s.clearDimensions()}}}}};var b={enable:function(d){this.disabled=false},disable:function(d){this.disabled=true},serialize:function(){return this._serialize(this.el,true)},destroy:function(){this.rootGroup.destroy()}};k.extend(g.prototype,b);k.fn[n]=function(d){var s=Array.prototype.slice.call(arguments,1);return this.map(function(){var u=k(this),t=u.data(n);if(t&&b[d]){return b[d].apply(t,s)||this}else{if(!t&&(d===h||typeof d==="object")){u.data(n,new g(u,d))}}return this})}}(jQuery,window);PPH.modules.PriceInput=function(b){var a={additionalClass:""};var d=PPH.Module($.extend({},a,b));var e=d.config;d.init=function(){$(".widget-jsModule-price-input select").addClass(e.additionalClass);$(".widget-jsModule-price-input input").focus(function(){$(this).parent(".widget-jsModule-price-input").addClass("active")});$(".widget-jsModule-price-input input").blur(function(){$(this).parent(".widget-jsModule-price-input").removeClass("active")})};return d};PPH.modules.Wizard=function(e){var h={callbacks:{nextStep:function(){},validStep:function(){},invalidStep:function(){},wizardSubmit:function(){}},formSelector:'form[data-hook="wizard-form"]',loaderOptions:{},translations:{formErrorOccured:""}};var g=PPH.Module($.extend({},h,e)),i=g.config,a=$("#"+i.wizardId),b=a.find(i.formSelector),d=null;g.init=function(){g.processForms();var m="button[data-wizard-submit], input[data-wizard-submit]",l=a.find(m),c=b.filter(":last");if(!l.length){l=c.find('button[type="submit"]:visible, input[type="submit"]:visible')}if(l.length){d=l.parents("form:first")}else{d=c}};g.processForms=function(){if(b.length===0){return false}$.each(b,function(l,m){var c=$(m);c.on("changeData",function(n){f(c)}).on("submit",function(o){o.preventDefault();var n=$(this),p=n.is(d);if(!n.data("isValidated")||!n.data("isCompleted")){return false}g.ajaxSubmitForm.apply(n,[n,function(){g.openNextStep(n);n.data("isValidated",false);if(n.data("disableWizardSubmit")===true){n.data("disableWizardSubmit",false);return false}if(p&&g.allStepsValid()){i.callbacks.wizardSubmit.apply()}}])})})};g.openNextStep=function(l){if(typeof i.callbacks.nextStep!=="function"){return false}var c=l.data("nextPanel")&&l.data("nextPanel").length?l.data("nextPanel").find(i.formSelector):j(l);if(c===false||!c.length){return false}l.data("nextPanel",false);i.callbacks.nextStep.apply(a,[c])};g.isFormFilled=function(l){var c=$(l);if(c.length===0){return true}if(c.length>1){var m=true;c.each(function(n,o){m=m&&g.isFormFilled(o)});return m}return c.data("settings")!==undefined&&c.data("isCompleted")===true};function j(p){var c=p.parents(i.stepContainerSelector+":first").siblings(),n=g.allStepsValid();if(n){var o=p.parents(i.stepContainerSelector+":first").next(i.stepContainerSelector);return o.length?o.find(i.formSelector):false}if(!c.length){return false}c=c.get();for(var m in c){var l=$(c[m]).find(i.formSelector);if(!g.isFormFilled(l)){return l}}return false}function f(c){if(c.data("isProcessed")===true){return false}c.off("changeData");var l=c.data("settings"),m=typeof l.afterValidate==="function"?l.afterValidate:$.noop;l.showErrors=function(o,p,n){return m(o,p,n)};l.beforeValidate=function(n){c.data("isValidated",false);c.data("isCompleted",false);return true};l.afterValidate=function(o,p,n){if($.isEmptyObject(p)&&!n){c.data("isValidated",true);c.data("isCompleted",true);if(typeof i.callbacks.validStep==="function"){i.callbacks.validStep.apply(c,[c])}}else{c.data("isValidated",false);c.data("isCompleted",false);i.callbacks.invalidStep.apply(c,[c])}return m(o,p,n)};c.data("isProcessed",true);c.data("settings",l)}g.ajaxSubmitForm=function(m,c){var o=m.serialize(),c=typeof c==="function"?c:$.noop,p=true,n=m.find('[type="submit"]'),r=m.parents(i.stepContainerSelector+":first");o+="&action=submit";var l={type:m.attr("method"),url:m.attr("action"),data:o,dataType:"json",beforeSend:function(){if(n.length){n.prop("disabled",true)}if(r.length){r.loader("open")}return true},complete:function(){q();if(r.length){r.loader("close")}},error:q,success:function(s){if(s===null||s===""||$.isEmptyObject(s)||("success" in s&&s.success===true)){return c.apply(m,[m])}var t=m.data("settings");if("showErrors" in t&&typeof t.showErrors==="function"){return t.showErrors(m,s,true)}},error:function(s){PPH.error(i.translations.formSubmitError);p=false}};return $.ajax(l);function q(){if(n.length){n.prop("disabled",false)}}};g.allStepsValid=function(){var c=$(i.formSelector);if(!c.length){return true}var l=true;c.each(function(n,o){var m=$(o);l=l&&m.data("isProcessed")===true&&m.data("isCompleted")===true});return l};function k(n){if(typeof n==="string"){n=$(n)}var m=n.data("settings");if(m===undefined||m===null||$.isEmptyObject(m)){throw new TypeError(["Form ",n.id," should be an activeform"])}if(m.submitting){return false}n.data("settings",$.extend(true,{},m,{submitting:true}));$.fn.yiiactiveform.validate(n,l,c);n.data("settings",$.extend(true,{},m,{submitting:false}));function l(o){return o}function c(){PPH.error(i.translations.formErrorOccured)}}return g};PPH.pages.MemberApplication=function(x){var i={sendVerificationEmailUrl:"/member/activateEmail",externalUrlsLimit:10,submitUrl:"",loaderImg:"/css/pph2/images/pph-loader-medium.gif",afterSubmitUrl:"/memberApplication/fastTrack",enableSubmitApplication:true,hasUploadedVideo:false,translations:{sending:"",emailAlreadySent:"",emailVerificationError:"",maxSkills:"",notAllStepsValid:"",submitFailed:""},tagsSelected:{}};var n=PPH.Page($.extend(true,{},i,x)),w=n.config;var m={},k=[9,13,27,32,37,38,39,40,16,17,18,33,34,36,35,8,46,93,65],h=$(document);n.init=function(){h.on("click","#suggest-skill-trigger",p);h.on("click",".suggested-tags .cancel",j);h.on("click","#suggest-skill-submit-btn",f);h.on("click",".suggest-auto-tag-item",e);h.on("change",'#MemberProfile_onsite input[name="MemberProfile[onsite]"]',l);$("form#add-external-profiles").on("click",'a[data-hook="add-item"]',d);$("form#add-external-profiles").on("click",'a[data-hook="remove-item"]',o);$("button#start-application").on("click",v);$("#seller-application").on("shown.bs.collapse",s);$("#external-profile-urls").on("keyup input paste",'input[data-hook="url-input"]',q);$("#SellerShowCase_topSkillsList, #SellerShowCase_secondarySkillsList, #SellerShowCase_industryExpertise").on("change",r);$("#SellerShowCase_topSkillsList, #SellerShowCase_secondarySkillsList, #SellerShowCase_industryExpertise").on("select2-focus",t);$("#SellerShowCase_topSkillsList, #SellerShowCase_secondarySkillsList, #SellerShowCase_industryExpertise").on("select2-blur",u);h.on("click",".js-resend-verification",b);var c=document.location.toString();if(c.match("#")){$("#seller-application .panel-collapse").removeClass("in");$("#seller-application .panel-collapse").addClass("collapse");try{$("#"+c.split("#")[1]).addClass("in")}catch(y){}}};n.hideSkillsPopovers=function(y,c){if(!y||!y.length){return false}y.select2("close");var z=y.parent(".form-group:first"),A=y.find('input[type="text"]:visible');if(z.data("bs.popover")){z.popover("hide")}return true};function g(B,c){var C=B.data("select2");if(!C||$.isEmptyObject(C)){return false}m[B.attr("id")]=true;var A=C.opts,y=c.find('input[type="text"]:visible'),z=A.maximumSelectionSize,D=w.translations.maxSkills.replace(/\{n\}/gi,z);y.on("keyup",function(F){if(!F||!F.keyCode){return false}if(F.metaKey||$.inArray(F.keyCode,k)>-1){return false}var E=B.select2("val");if(E.length>=z){PPH.dom.error(c,D,{useHook:false})}})}function l(c){if($(this).val()==0){$("#MemberProfile_onsite_distance").attr("value","");$("#MemberProfile_onsite_distance").parent().addClass("hidden")}else{$("#MemberProfile_onsite_distance").parent().removeClass("hidden")}}function t(B){var A=$(this),C=A.parents(".form-group:first"),z=A.prevAll(".select2-container:first"),c=A.select2("val"),y=A.data(),D=y!==undefined&&y.select2&&y.select2.opts&&y.select2.opts.maximumSelectionSize?parseInt(y.select2.opts.maximumSelectionSize,10):null;if(!m[A.attr("id")]){g.apply(A,[A,C])}z.addClass("select2-container-focused");if(y.contentSelector===undefined){return false}if(c&&c.length&&D!==null&&c.length>=D){if(C.data("bs.popover")){C.popover("hide")}return false}if(!C.data("bs.popover")){C.popover({html:true,content:$(y.contentSelector).html(),trigger:"manual",template:'<div class="popover info visible-lg"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',placement:y.placement||"right"})}C.popover("show")}function u(){var y=$(this),c=y.prevAll(".select2-container:first"),z=y.parents(".form-group:first");c.removeClass("select2-container-focused");PPH.dom.error(z,"close",{useHook:false});if(!z.data("bs.popover")){return false}z.popover("hide")}n.addSelectedTags=function(c){if(!c.length){return false}for(var y in c){w.tagsSelected[(c[y].id)]=c[y]}};function r(c){var y=$(this).prev(".select2-container"),z=y.find('input[type="text"]:visible').css("width","20px");if(c.added!==undefined){n.addSelectedTags([c.added])}if(c.removed!==undefined&&c.removed.id!==undefined&&w.tagsSelected[(c.removed.id)]!==undefined){delete w.tagsSelected[(c.removed.id)]}}n.submitApplication=function(){if(!w.enableSubmitApplication){return false}var c=n.modules.Wizard.allStepsValid();if(c){return a()}PPH.error(w.translations.notAllStepsValid)};n.parseSkillsSuggestions=function(z){if(!z.length){return{results:[]}}var c=[];for(var y in z){var A=z[y].id||null;if(A!==null&&w.tagsSelected[A]===undefined){c.push(z[y])}}return{results:c}};function b(y){y.preventDefault();var c=$(this),z=c.html();if(c.data("alreadySent")){return PPH.success(w.translations.emailAlreadySent)}c.prop("disabled",true);c.data("alreadySent",true);c.html(w.translations.sending);$.ajax({url:w.sendVerificationEmailUrl,type:"GET",data:PPH.getCsrf(),success:function(A){c.html(z);if(A.success){PPH.success(w.translations.emailSent)}else{PPH.error(w.translations.emailVerificationError)}c.prop("disabled",false)}})}function q(z){var y=$(this),c=y.prev('[data-hook="filled-indicator"]'),A=y.val();if(A==""){c.removeClass("filled-url")}else{c.addClass("filled-url")}}function a(){return $.ajax({url:w.submitUrl,type:"POST",dataType:"json",data:$.extend(true,{},PPH.getCsrf()),success:function(c){if(!c.success){return PPH.error(w.translations.submitFailed)}$('#add-video button[type="submit"]').prop("disabled",true).text(w.translations.submittedWizard);window.location.href=w.afterSubmitUrl}})}function d(z){z.preventDefault();z.stopPropagation();var y=$(this);var c=function(B){var A=$(B);A.find('[data-hook="remove-item"]').removeAttr("style");A.find('[data-hook="filled-indicator"]').removeClass("filled-url");if($('#external-profile-urls div[data-hook="external-profile-row"]').length>=w.externalUrlsLimit){y.hide()}};$.fn.pphactiveform.addItem("form#add-external-profiles",'#external-profile-urls div[data-hook="external-profile-row"]',c)}function o(B){B.preventDefault();B.stopPropagation();var y=$("form#add-external-profiles"),z=y.find('div[data-hook="external-profile-row"]');if(z.length===1){z.find("input, select, textarea").val("");return}var A=$(this),c=A.parents('div[data-hook="external-profile-row"]'),C=function(){if($('#external-profile-urls div[data-hook="external-profile-row"]').length>=w.externalUrlsLimit){A.show()}};$.fn.pphactiveform.removeItem("form#add-external-profiles",c)}function v(c){c.preventDefault();$("#seller-application .panel-collapse:first").collapse("show")}function s(){$("button#start-application").hide().remove()}function p(c){c.preventDefault();$("#SuggestedSkill_skill").val("");$(".suggested-auto-tags").html("");$("#suggest-skill-submit-btn").text("Submit");$(".js-relative-skill-msg").hide();$("#submit-hidden").val(0);$("#suggest-skill-modal").modal("show");$(".suggested-tags .cancel").css("display","none")}function f(A){A.preventDefault();if($("#SuggestedSkill_skill").val()===""){PPH.dom.error("#SuggestedSkill_skill","Please type a skill");return}var z=$(this).parents("form"),y=z.find("#suggest-skill-submit-btn"),c=y.text();y.prop("disabled",true).text("Please wait...");$.ajax({url:z.attr("action"),type:"POST",data:z.serialize(),success:function(B){y.prop("disabled",false).text(c);if(B.success){if(B.tags.length>0){var C='<ul class="select2-choices">';$(B.tags).each(function(F,E){C+=['<li class="suggest-auto-tag-item select2-search-choice gray" data-id=',E.id,' data-text="',E.label,'">',E.label,"</li>"].join("")});C+="</ul>";$(".suggested-auto-tags").html(C);var D=["We found ",(B.tags.length==1?"a":"these")," relative skill",(B.tags.length==1?"":"s"),"<br>","Do you want to submit your skill or use ",(B.tags.length==1?"this":"one of these"),"?<br>"].join("");$(".js-relative-skill-msg").html(D).show();$("#suggest-skill-submit-btn").text("Submit mine");$("#submit-hidden").val(1);$(".suggested-tags .cancel").css("display","inline-block");return}PPH.success("Thanks for submitting a new Skill.We will review it soon.");$("#SuggestedSkill_skill").val("");$("#suggest-skill-modal").modal("hide")}else{PPH.error("There was an error while submitting the skill.Please try again later.")}}})}function e(){var A=$(this),y=A.siblings(".suggest-auto-tag-item").length;var c={id:A.data("id"),text:A.data("text")};var z=$("#SellerShowCase_secondarySkillsList").select2("data");z.push(c);$("#SellerShowCase_secondarySkillsList").select2("data",z);A.remove();if(!y){$("#suggest-skill-modal").modal("hide")}}function j(){$("#suggest-skill-modal").modal("hide")}};PPH.modules.ImageCrop=function(b){var i={};var a;var f=PPH.Module($.extend({},i,b));var j=f.config,h;f.init=function(){var k,c;for(c in j){k=j[c];var n;var m;var r;var p;var l=k.constX/k.constY;var q=k.thumbWidth;var o=Math.round(k.thumbWidth/l);$('div[data-id="'+k.containerId+'"]').addClass("ImageCrop-enabled");$("body").bind("FileRemove",function(s,t){if(t.opts.id!=k.containerId){return}e(k,t)});$("body").bind("FileUpload",function(s,t){if(t.opts.id!=k.containerId){return}var u=$("#"+k.imageId);$(u).attr("src","").attr("style","");if(t.opts.id+"_crop"===c){$("#"+k.imageId).attr("src",k.cdnUrl+t.response.tempPath.slice(1,-1)+t.response.path).load(function(){n=t.response.id;m=t.pluploader.id;p=t.opts._currentUpload;$("#"+p).css({width:q,height:o});if($(u).data("Jcrop")){$(u).data("Jcrop").destroy()}$("#"+k.modalId).modal("show");$('[data-target="#'+k.modalId+'"]').clone().appendTo("li#"+p);$("#cropAttr_"+n).remove();$("<div>").attr({id:"cropAttr_"+n,"class":"cropAttributes","data-id":k.containerId}).insertAfter("#"+k.modalId)})}});$("#"+k.modalId).on("shown.bs.modal",function(v){var w=$("#"+k.imageId);var u=w.width();var t=w.height();a=u/w.get(0).naturalWidth;var x,s;x=u*k.constY/k.constX;s=u;$(w).Jcrop({minSize:[0,0],maxSize:[s,x],aspectRatio:l,trueSize:[u,t],setSelect:[0,(t-x)/2,s,(t-x)/2+x],bgOpacity:0.4,onSelect:function(y){d(y,k.modalId,n,k.formKey);g(p,y,q,o,u,t,w)},allowSelect:false})})}};function g(q,u,l,c,o,m,t){var r=$(t).attr("src");var s=$("#"+q+" .preview");s.attr("src",r);var p=o;var v=m;var n=l/u.w;var k=c/u.h;s.css({width:Math.round(n*p)+"px",height:Math.round(k*v)+"px",marginLeft:"-"+Math.round(n*u.x)+"px",marginTop:"-"+Math.round(k*u.y)+"px"})}function d(o,r,l,q){var k,c,p,n;var m={};m.x1=o.x/a;m.x2=o.x2/a;m.y1=o.y/a;m.y2=o.y2/a;m.h=o.h/a;m.w=o.w/a;$("#cropAttr_"+l).html("");$.each(m,function(s,t){$("<input>").attr({type:"hidden",name:q+"["+l+"][crop]["+s+"]",value:t}).appendTo("#cropAttr_"+l)})}function e(c,k){$('.cropAttributes[data-id="'+c.containerId+'"]').remove()}return f};(function(b){b.Jcrop=function(bx,bu){function aZ(c){return Math.round(c)+"px"}function aX(c){return a9.baseClass+"-"+c}function aV(){return b.fx.step.hasOwnProperty("backgroundColor")}function aT(d){var e=b(d).offset();return[e.left,e.top]}function aS(c){return[c.pageX-a7[0],c.pageY-a7[1]]}function aQ(c){typeof c!="object"&&(c={}),a9=b.extend(a9,c),b.each(["onChange","onSelect","onRelease","onDblClick"],function(e,d){typeof a9[d]!="function"&&(a9[d]=function(){})})}function aO(h,e,l){a7=aT(aw),by.setCursor(h==="move"?h:h+"-resize");if(h==="move"){return by.activateHandlers(aK(e),aE,l)}var k=bB.getFixed(),j=aI(h),i=bB.getCorner(aI(j));bB.setPressed(bB.getCorner(j)),bB.setCurrent(i),by.activateHandlers(aM(h,k),aE,l)}function aM(d,c){return function(e){if(!a9.aspectRatio){switch(d){case"e":e[1]=c.y2;break;case"w":e[1]=c.y2;break;case"n":e[0]=c.x2;break;case"s":e[0]=c.x2}}else{switch(d){case"e":e[1]=c.y+1;break;case"w":e[1]=c.y+1;break;case"n":e[0]=c.x+1;break;case"s":e[0]=c.x+1}}bB.setCurrent(e),bz.update()}}function aK(d){var c=d;return bw.watchKeys(),function(e){bB.moveOffset([e[0]-c[0],e[1]-c[1]]),c=e,bz.update()}}function aI(c){switch(c){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function aH(c){return function(d){return a9.disabled?!1:c==="move"&&!a9.allowMove?!1:(a7=aT(aw),ac=!0,aO(c,aS(d)),d.stopPropagation(),d.preventDefault(),!1)}}function aG(g,f,j){var i=g.width(),h=g.height();i>f&&f>0&&(i=f,h=f/g.width()*g.height()),h>j&&j>0&&(h=j,i=j/g.height()*g.width()),af=g.width()/i,ae=g.height()/h,g.width(i).height(h)}function aF(c){return{x:c.x*af,y:c.y*ae,x2:c.x2*af,y2:c.y2*ae,w:c.w*af,h:c.h*ae}}function aE(d){var c=bB.getFixed();c.w>a9.minSelect[0]&&c.h>a9.minSelect[1]?(bz.enableHandles(),bz.done()):bz.release(),by.setCursor(a9.allowSelect?"crosshair":"default")}function aD(d){if(a9.disabled){return !1}if(!a9.allowSelect){return !1}ac=!0,a7=aT(aw),bz.disableHandles(),by.setCursor("crosshair");var c=aS(d);return bB.setPressed(c),bz.update(),by.activateHandlers(aC,aE,d.type.substring(0,5)==="touch"),bw.watchKeys(),d.stopPropagation(),d.preventDefault(),!1}function aC(c){bB.setCurrent(c),bz.update()}function aB(){var c=b("<div></div>").addClass(aX("tracker"));return a3&&c.css({opacity:0,backgroundColor:"white"}),c}function bv(c){at.removeClass().addClass(aX("holder")).addClass(c)}function bt(N,M){function v(){window.setTimeout(d,D)}var L=N[0]/af,K=N[1]/ae,J=N[2]/af,I=N[3]/ae;if(ab){return}var H=bB.flipCoords(L,K,J,I),G=bB.getFixed(),F=[G.x,G.y,G.x2,G.y2],E=F,D=a9.animationDelay,C=H[0]-F[0],B=H[1]-F[1],A=H[2]-F[2],z=H[3]-F[3],y=0,x=a9.swingSpeed;L=E[0],K=E[1],J=E[2],I=E[3],bz.animMode(!0);var w,d=function(){return function(){y+=(100-y)/x,E[0]=Math.round(L+y/100*C),E[1]=Math.round(K+y/100*B),E[2]=Math.round(J+y/100*A),E[3]=Math.round(I+y/100*z),y>=99.8&&(y=100),y<100?(a6(E),v()):(bz.done(),bz.animMode(!1),typeof M=="function"&&M.call(aJ))}}();v()}function a8(c){a6([c[0]/af,c[1]/ae,c[2]/af,c[3]/ae]),a9.onSelect.call(aJ,aF(bB.getFixed())),bz.enableHandles()}function a6(c){bB.setPressed([c[0],c[1]]),bB.setCurrent([c[2],c[3]]),bz.update()}function a4(){return aF(bB.getFixed())}function a2(){return bB.getFixed()}function a0(c){aQ(c),aL()}function aY(){a9.disabled=!0,bz.disableHandles(),bz.setCursor("default"),by.setCursor("default")}function aW(){a9.disabled=!1,aL()}function aU(){bz.done(),by.activateHandlers(null,null)}function aR(){at.remove(),az.show(),az.css("visibility","visible"),b(bx).removeData("Jcrop")}function aP(e,d){bz.release(),aY();var f=new Image;f.onload=function(){var k=f.width,j=f.height,i=a9.boxWidth,c=a9.boxHeight;aw.width(k).height(j),aw.attr("src",e),ar.attr("src",e),aG(aw,i,c),av=aw.width(),au=aw.height(),ar.width(av).height(au),am.width(av+an*2).height(au+an*2),at.width(av).height(au),bA.resize(av,au),aW(),typeof d=="function"&&d.call(aJ)},f.src=e}function aN(f,d,h){var g=d||a9.bgColor;a9.bgFade&&aV()&&a9.fadeTime&&!h?f.animate({backgroundColor:g},{queue:!1,duration:a9.fadeTime}):f.css("backgroundColor",g)}function aL(c){a9.allowResize?c?bz.enableOnly():bz.enableHandles():bz.disableHandles(),by.setCursor(a9.allowSelect?"crosshair":"default"),bz.setCursor(a9.allowMove?"move":"default"),a9.hasOwnProperty("trueSize")&&(af=a9.trueSize[0]/av,ae=a9.trueSize[1]/au),a9.hasOwnProperty("setSelect")&&(a8(a9.setSelect),bz.done(),delete a9.setSelect),bA.refresh(),a9.bgColor!=al&&(aN(a9.shade?bA.getShades():at,a9.shade?a9.shadeColor||a9.bgColor:a9.bgColor),al=a9.bgColor),ak!=a9.bgOpacity&&(ak=a9.bgOpacity,a9.shade?bA.refresh():bz.setBgOpacity(ak)),aj=a9.maxSize[0]||0,ai=a9.maxSize[1]||0,ah=a9.minSize[0]||0,ag=a9.minSize[1]||0,a9.hasOwnProperty("outerImage")&&(aw.attr("src",a9.outerImage),delete a9.outerImage),bz.refresh()}var a9=b.extend({},b.Jcrop.defaults),a7,a5=navigator.userAgent.toLowerCase(),a3=/msie/.test(a5),a1=/msie [1-6]\./.test(a5);typeof bx!="object"&&(bx=b(bx)[0]),typeof bu!="object"&&(bu={}),aQ(bu);var aA={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},az=b(bx),ay=!0;if(bx.tagName=="IMG"){if(az[0].width!=0&&az[0].height!=0){az.width(az[0].width),az.height(az[0].height)}else{var ax=new Image;ax.src=az[0].src,az.width(ax.width),az.height(ax.height)}var aw=az.clone().removeAttr("id").css(aA).show();aw.width(az.width()),aw.height(az.height()),az.after(aw).hide()}else{aw=az.css(aA).show(),ay=!1,a9.shade===null&&(a9.shade=!0)}aG(aw,a9.boxWidth,a9.boxHeight);var av=aw.width(),au=aw.height(),at=b("<div />").width(av).height(au).addClass(aX("holder")).css({position:"relative",backgroundColor:a9.bgColor}).insertAfter(az).append(aw);a9.addClass&&at.addClass(a9.addClass);var ar=b("<div />"),aq=b("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),ap=b("<div />").width("100%").height("100%").css("zIndex",320),ao=b("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var c=bB.getFixed();a9.onDblClick.call(aJ,c)}).insertBefore(aw).append(aq,ap);ay&&(ar=b("<img />").attr("src",aw.attr("src")).css(aA).width(av).height(au),aq.append(ar)),a1&&ao.css({overflowY:"hidden"});var an=a9.boundary,am=aB().width(av+an*2).height(au+an*2).css({position:"absolute",top:aZ(-an),left:aZ(-an),zIndex:290}).mousedown(aD),al=a9.bgColor,ak=a9.bgOpacity,aj,ai,ah,ag,af,ae,ad=!0,ac,ab,aa;a7=aT(aw);var a=function(){function d(){var i={},h=["touchstart","touchmove","touchend"],n=document.createElement("div"),m;try{for(m=0;m<h.length;m++){var l=h[m];l="on"+l;var k=l in n;k||(n.setAttribute(l,"return;"),k=typeof n[l]=="function"),i[h[m]]=k}return i.touchstart&&i.touchend&&i.touchmove}catch(j){return !1}}function c(){return a9.touchSupport===!0||a9.touchSupport===!1?a9.touchSupport:d()}return{createDragger:function(e){return function(f){return a9.disabled?!1:e==="move"&&!a9.allowMove?!1:(a7=aT(aw),ac=!0,aO(e,aS(a.cfilter(f)),!0),f.stopPropagation(),f.preventDefault(),!1)}},newSelection:function(e){return aD(a.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:d,support:c()}}(),bB=function(){function z(c){c=t(c),D=F=c[0],C=E=c[1]}function y(c){c=t(c),B=c[0]-D,A=c[1]-C,D=c[0],C=c[1]}function x(){return[B,A]}function w(h){var e=h[0],c=h[1];0>F+e&&(e-=e+F),0>E+c&&(c-=c+E),au<C+c&&(c+=au-(C+c)),av<D+e&&(e+=av-(D+e)),F+=e,D+=e,E+=c,C+=c}function v(e){var c=u();switch(e){case"ne":return[c.x2,c.y];case"nw":return[c.x,c.y];case"se":return[c.x2,c.y2];case"sw":return[c.x,c.y2]}}function u(){if(!a9.aspectRatio){return r()}var K=a9.aspectRatio,J=a9.minSize[0]/af,I=a9.maxSize[0]/af,H=a9.maxSize[1]/ae,G=D-F,q=C-E,p=Math.abs(G),o=Math.abs(q),e=p/o,c,N,M,L;return I===0&&(I=av*10),H===0&&(H=au*10),e<K?(N=C,M=o*K,c=G<0?F-M:M+F,c<0?(c=0,L=Math.abs((c-F)/K),N=q<0?E-L:L+E):c>av&&(c=av,L=Math.abs((c-F)/K),N=q<0?E-L:L+E)):(c=D,L=p/K,N=q<0?E-L:E+L,N<0?(N=0,M=Math.abs((N-E)*K),c=G<0?F-M:M+F):N>au&&(N=au,M=Math.abs(N-E)*K,c=G<0?F-M:M+F)),c>F?(c-F<J?c=F+J:c-F>I&&(c=F+I),N>E?N=E+(c-F)/K:N=E-(c-F)/K):c<F&&(F-c<J?c=F-J:F-c>I&&(c=F-I),N>E?N=E+(F-c)/K:N=E-(F-c)/K),c<0?(F-=c,c=0):c>av&&(F-=c-av,c=av),N<0?(E-=N,N=0):N>au&&(E-=N-au,N=au),d(s(F,E,c,N))}function t(c){return c[0]<0&&(c[0]=0),c[1]<0&&(c[1]=0),c[0]>av&&(c[0]=av),c[1]>au&&(c[1]=au),[Math.round(c[0]),Math.round(c[1])]}function s(j,i,p,o){var n=j,m=p,l=i,k=o;return p<j&&(n=p,m=j),o<i&&(l=o,k=i),[n,l,m,k]}function r(){var h=D-F,e=C-E,c;return aj&&Math.abs(h)>aj&&(D=h>0?F+aj:F-aj),ai&&Math.abs(e)>ai&&(C=e>0?E+ai:E-ai),ag/ae&&Math.abs(e)<ag/ae&&(C=e>0?E+ag/ae:E-ag/ae),ah/af&&Math.abs(h)<ah/af&&(D=h>0?F+ah/af:F-ah/af),F<0&&(D-=F,F-=F),E<0&&(C-=E,E-=E),D<0&&(F-=D,D-=D),C<0&&(E-=C,C-=C),D>av&&(c=D-av,F-=c,D-=c),C>au&&(c=C-au,E-=c,C-=c),F>av&&(c=F-au,C-=c,E-=c),E>au&&(c=E-au,C-=c,E-=c),d(s(F,E,D,C))}function d(c){return{x:c[0],y:c[1],x2:c[2],y2:c[3],w:c[2]-c[0],h:c[3]-c[1]}}var F=0,E=0,D=0,C=0,B,A;return{flipCoords:s,setPressed:z,setCurrent:y,getOffset:x,moveOffset:w,getCorner:v,getFixed:u}}(),bA=function(){function x(e,c){y.left.css({height:aZ(c)}),y.right.css({height:aZ(c)})}function w(){return v(bB.getFixed())}function v(c){y.top.css({left:aZ(c.x),width:aZ(c.w),height:aZ(c.y)}),y.bottom.css({top:aZ(c.y2),left:aZ(c.x),width:aZ(c.w),height:aZ(au-c.y2)}),y.right.css({left:aZ(c.x2),width:aZ(av-c.x2)}),y.left.css({width:aZ(c.x)})}function u(){return b("<div />").css({position:"absolute",backgroundColor:a9.shadeColor||a9.bgColor}).appendTo(z)}function t(){A||(A=!0,z.insertBefore(aw),w(),bz.setBgOpacity(1,0,1),ar.hide(),s(a9.shadeColor||a9.bgColor,1),bz.isAwake()?q(a9.bgOpacity,1):q(1,1))}function s(e,c){aN(d(),e,c)}function r(){A&&(z.remove(),ar.show(),A=!1,bz.isAwake()?bz.setBgOpacity(a9.bgOpacity,1,1):(bz.setBgOpacity(1,1,1),bz.disableHandles()),aN(at,0,1))}function q(c,f){A&&(a9.bgFade&&!f?z.animate({opacity:1-c},{queue:!1,duration:a9.fadeTime}):z.css({opacity:1-c}))}function i(){a9.shade?t():r(),bz.isAwake()&&q(a9.bgOpacity)}function d(){return z.children()}var A=!1,z=b("<div />").css({position:"absolute",zIndex:240,opacity:0}),y={top:u(),left:u().height(au),right:u().height(au),bottom:u()};return{update:w,updateRaw:v,getShades:d,setBgColor:s,enable:t,disable:r,resize:x,refresh:i,opacity:q}}(),bz=function(){function W(e){var f=b("<div />").css({position:"absolute",opacity:a9.borderOpacity}).addClass(aX(e));return aq.append(f),f}function V(e,g){var f=b("<div />").mousedown(aH(e)).css({cursor:e+"-resize",position:"absolute",zIndex:g}).addClass("ord-"+e);return a.support&&f.bind("touchstart.jcrop",a.createDragger(e)),ap.append(f),f}function U(f){var c=a9.handleSize,g=V(f,bb++).css({opacity:a9.handleOpacity}).addClass(aX("handle"));return c&&g.width(c).height(c),g}function T(c){return V(c,bb++).addClass("jcrop-dragbar")}function S(e){var c;for(c=0;c<e.length;c++){Y[e[c]]=T(e[c])}}function R(f){var e,g;for(g=0;g<f.length;g++){switch(f[g]){case"n":e="hline";break;case"s":e="hline bottom";break;case"e":e="vline right";break;case"w":e="vline"}ba[f[g]]=W(e)}}function P(e){var c;for(c=0;c<e.length;c++){Z[e[c]]=U(e[c])}}function N(e,c){a9.shade||ar.css({top:aZ(-c),left:aZ(-e)}),ao.css({top:aZ(c),left:aZ(e)})}function J(e,c){ao.width(Math.round(e)).height(Math.round(c))}function D(){var c=bB.getFixed();bB.setPressed([c.x,c.y]),bB.setCurrent([c.x2,c.y2]),u()}function u(c){if(bc){return s(c)}}function s(e){var f=bB.getFixed();J(f.w,f.h),N(f.x,f.y),a9.shade&&bA.updateRaw(f),bc||Q(),e?a9.onSelect.call(aJ,aF(f)):a9.onChange.call(aJ,aF(f))}function j(f,h,g){if(!bc&&!h){return}a9.bgFade&&!g?aw.animate({opacity:f},{queue:!1,duration:a9.fadeTime}):aw.css("opacity",f)}function Q(){ao.show(),a9.shade?bA.opacity(ak):j(ak,!0),bc=!0}function O(){H(),ao.hide(),a9.shade?bA.opacity(1):j(1),bc=!1,a9.onRelease.call(aJ)}function K(){X&&ap.show()}function I(){X=!0;if(a9.allowResize){return ap.show(),!0}}function H(){X=!1,ap.hide()}function y(c){c?(ab=!0,H()):(ab=!1,I())}function i(){y(!1),D()}var bc,bb=370,ba={},Z={},Y={},X=!1;a9.dragEdges&&b.isArray(a9.createDragbars)&&S(a9.createDragbars),b.isArray(a9.createHandles)&&P(a9.createHandles),a9.drawBorders&&b.isArray(a9.createBorders)&&R(a9.createBorders),b(document).bind("touchstart.jcrop-ios",function(c){b(c.currentTarget).hasClass("jcrop-tracker")&&c.stopPropagation()});var d=aB().mousedown(aH("move")).css({cursor:"move",position:"absolute",zIndex:360});return a.support&&d.bind("touchstart.jcrop",a.createDragger("move")),aq.append(d),H(),{updateVisible:u,update:s,release:O,refresh:D,isAwake:function(){return bc},setCursor:function(c){d.css("cursor",c)},enableHandles:I,enableOnly:function(){X=!0},showHandles:K,disableHandles:H,animMode:y,setBgOpacity:j,done:i}}(),by=function(){function t(c){am.css({zIndex:450}),c?b(document).bind("touchmove.jcrop",o).bind("touchend.jcrop",m):u&&b(document).bind("mousemove.jcrop",r).bind("mouseup.jcrop",q)}function s(){am.css({zIndex:290}),b(document).unbind(".jcrop")}function r(c){return w(aS(c)),!1}function q(c){return c.preventDefault(),c.stopPropagation(),ac&&(ac=!1,v(aS(c)),bz.isAwake()&&a9.onSelect.call(aJ,aF(bB.getFixed())),s(),w=function(){},v=function(){}),!1}function p(c,g,f){return ac=!0,w=c,v=g,t(f),!1}function o(c){return w(aS(a.cfilter(c))),!1}function m(c){return q(a.cfilter(c))}function d(c){am.css("cursor",c)}var w=function(){},v=function(){},u=a9.trackDocument;return u||am.mousemove(r).mouseup(q).mouseout(q),aw.before(am),{activateHandlers:p,setCursor:d}}(),bw=function(){function l(){a9.keySupport&&(d.show(),d.focus())}function k(c){d.hide()}function j(f,e,g){a9.allowMove&&(bB.moveOffset([e,g]),bz.updateVisible(!0)),f.preventDefault(),f.stopPropagation()}function h(e){if(e.ctrlKey||e.metaKey){return !0}aa=e.shiftKey?!0:!1;var c=aa?10:1;switch(e.keyCode){case 37:j(e,-c,0);break;case 39:j(e,c,0);break;case 38:j(e,0,-c);break;case 40:j(e,0,c);break;case 27:a9.allowSelect&&bz.release();break;case 9:return !0}return !1}var d=b('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),m=b("<div />").css({position:"absolute",overflow:"hidden"}).append(d);return a9.keySupport&&(d.keydown(h).blur(k),a1||!a9.fixedSupport?(d.css({position:"absolute",left:"-20px"}),m.append(d).insertBefore(aw)):d.insertBefore(aw)),{watchKeys:l}}();a.support&&am.bind("touchstart.jcrop",a.newSelection),ap.hide(),aL(!0);var aJ={setImage:aP,animateTo:bt,setSelect:a8,setOptions:a0,tellSelect:a4,tellScaled:a2,setClass:bv,disable:aY,enable:aW,cancel:aU,release:bz.release,destroy:aR,focus:bw.watchKeys,getBounds:function(){return[av*af,au*ae]},getWidgetSize:function(){return[av,au]},getScaleFactor:function(){return[af,ae]},getOptions:function(){return a9},ui:{holder:at,selection:ao}};return a3&&at.bind("selectstart",function(){return !1}),az.data("Jcrop",aJ),aJ},b.fn.Jcrop=function(a,f){var e;return this.each(function(){if(b(this).data("Jcrop")){if(a==="api"){return b(this).data("Jcrop")}b(this).data("Jcrop").setOptions(a)}else{this.tagName=="IMG"?b.Jcrop.Loader(this,function(){b(this).css({display:"block",visibility:"hidden"}),e=b.Jcrop(this,a),b.isFunction(f)&&f.call(e)}):(b(this).css({display:"block",visibility:"hidden"}),e=b.Jcrop(this,a),b.isFunction(f)&&f.call(e))}}),this},b.Jcrop.Loader=function(a,l,k){function h(){i.complete?(j.unbind(".jcloader"),b.isFunction(l)&&l.call(i)):window.setTimeout(h,50)}var j=b(a),i=j[0];j.bind("load.jcloader",h).bind("error.jcloader",function(c){j.unbind(".jcloader"),b.isFunction(k)&&k.call(i)}),i.complete&&b.isFunction(l)&&(j.unbind(".jcloader"),l.call(i))},b.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:!1,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}})(jQuery);
/*!
 * Bootstrap-select v1.13.2 (https://developer.snapappointments.com/bootstrap-select)
 *
 * Copyright 2012-2018 SnapAppointments, LLC
 * Licensed under MIT (https://github.com/snapappointments/bootstrap-select/blob/master/LICENSE)
 */
(function(a,b){if(a===undefined&&window!==undefined){a=window}if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(b(c))})}else{if(typeof module==="object"&&module.exports){module.exports=b(require("jquery"))}else{b(a.jQuery)}}}(this,function(a){(function(j){var q=document.createElement("_");q.classList.toggle("c3",false);if(q.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(D,E){if(1 in arguments&&!this.contains(D)===!E){return E}else{return c.call(this,D)}}}function y(E,D){return E.length===D.length&&E.every(function(G,F){return G===D[F]})}if(!String.prototype.startsWith){(function(){var D=(function(){try{var J={};var I=Object.defineProperty;var G=I(J,J,J)&&I}catch(H){}return G}());var F={}.toString;var E=function(N){if(this==null){throw new TypeError()}var K=String(this);if(N&&F.call(N)=="[object RegExp]"){throw new TypeError()}var G=K.length;var O=String(N);var I=O.length;var J=arguments.length>1?arguments[1]:undefined;var M=J?Number(J):0;if(M!=M){M=0}var H=Math.min(Math.max(M,0),G);if(I+H>G){return false}var L=-1;while(++L<I){if(K.charCodeAt(H+L)!=O.charCodeAt(L)){return false}}return true};if(D){D(String.prototype,"startsWith",{value:E,configurable:true,writable:true})}else{String.prototype.startsWith=E}}())}if(!Object.keys){Object.keys=function(F,D,E){E=[];for(D in F){E.hasOwnProperty.call(F,D)&&E.push(D)}return E}}function p(F){var E=[];var G=F&&F.options;var I;if(F.multiple){for(var H=0,D=G.length;H<D;H++){I=G[H];if(I.selected){E.push(I.value||I.text)}}}else{E=F.value}return E}var k={useDefault:false,_set:j.valHooks.select.set};j.valHooks.select.set=function(D,E){if(E&&!k.useDefault){j(D).data("selected",true)}return k._set.apply(this,arguments)};var r=null;var v=(function(){try{new Event("change");return true}catch(D){return false}})();j.fn.triggerNative=function(D){var E=this[0],F;if(E.dispatchEvent){if(v){F=new Event(D,{bubbles:true})}else{F=document.createEvent("Event");F.initEvent(D,true,false)}E.dispatchEvent(F)}else{if(E.fireEvent){F=document.createEventObject();F.eventType=D;E.fireEvent("on"+D,F)}else{this.trigger(D)}}};function h(K,L,D,G){var I=["content","subtext","tokens"],E=false;for(var F=0;F<I.length;F++){var J=I[F],H=K[J];if(H){H=H.toString();if(J==="content"){H=H.replace(/<[^>]+>/g,"")}if(G){H=d(H)}H=H.toUpperCase();if(D==="contains"){E=H.indexOf(L)>=0}else{E=H.startsWith(L)}if(E){break}}}return E}function t(D){return parseInt(D,10)||0}function d(E){var D=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];j.each(D,function(){E=E?E.replace(this.re,this.ch):""});return E}var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var l={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"};var w=function(H){var E=function(I){return H[I]};var G="(?:"+Object.keys(H).join("|")+")";var F=RegExp(G);var D=RegExp(G,"g");return function(I){I=I==null?"":""+I;return F.test(I)?I.replace(D,E):I}};var s=w(o);var g=w(l);var u={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};var B={ESCAPE:27,ENTER:13,SPACE:32,TAB:9,ARROW_UP:38,ARROW_DOWN:40};var i={success:false,major:"3"};try{i.full=(j.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".");i.major=i.full[0];i.success=true}catch(m){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",m)}var A={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"};var z={MENU:"."+A.MENU};if(i.major==="4"){A.DIVIDER="dropdown-divider";A.SHOW="show";A.BUTTONCLASS="btn-light";A.POPOVERHEADER="popover-header"}var f=new RegExp(B.ARROW_UP+"|"+B.ARROW_DOWN);var x=new RegExp("^"+B.TAB+"$|"+B.ESCAPE);var n=new RegExp(B.ENTER+"|"+B.SPACE);var C=function(F,E){var G=this;if(!k.useDefault){j.valHooks.select.set=k._set;k.useDefault=true}this.$element=j(F);this.$newElement=null;this.$button=null;this.$menu=null;this.options=E;this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){G.selectpicker.keydown.keyHistory=""},800)}}}};if(this.options.title===null){this.options.title=this.$element.attr("title")}var D=this.options.windowPadding;if(typeof D==="number"){this.options.windowPadding=[D,D,D,D]}this.val=C.prototype.val;this.render=C.prototype.render;this.refresh=C.prototype.refresh;this.setStyle=C.prototype.setStyle;this.selectAll=C.prototype.selectAll;this.deselectAll=C.prototype.deselectAll;this.destroy=C.prototype.destroy;this.remove=C.prototype.remove;this.show=C.prototype.show;this.hide=C.prototype.hide;this.init()};C.VERSION="1.13.2";C.BootstrapVersion=i.major;C.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(E,D){return(E==1)?"{0} item selected":"{0} items selected"},maxOptionsText:function(D,E){return[(D==1)?"Limit reached ({n} item max)":"Limit reached ({n} items max)",(E==1)?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:false,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:A.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:false,container:false,hideDisabled:false,showSubtext:false,showIcon:true,showContent:true,dropupAuto:true,header:false,liveSearch:false,liveSearchPlaceholder:null,liveSearchNormalize:false,liveSearchStyle:"contains",actionsBox:false,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:false,template:{caret:'<span class="caret"></span>'},maxOptions:false,mobile:false,selectOnTab:false,dropdownAlignRight:false,windowPadding:0,virtualScroll:600,display:false};if(i.major==="4"){C.DEFAULTS.style="btn-light";C.DEFAULTS.iconBase="";C.DEFAULTS.tickIcon="bs-ok-default"}C.prototype={constructor:C,init:function(){var D=this,E=this.$element.attr("id");this.$element.addClass("bs-select-hidden");this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createDropdown();this.createLi();this.$element.after(this.$newElement).prependTo(this.$newElement);this.$button=this.$newElement.children("button");this.$menu=this.$newElement.children(z.MENU);this.$menuInner=this.$menu.children(".inner");this.$searchbox=this.$menu.find("input");this.$element.removeClass("bs-select-hidden");if(this.options.dropdownAlignRight===true){this.$menu.addClass(A.MENURIGHT)}if(typeof E!=="undefined"){this.$button.attr("data-id",E)}this.checkDisabled();this.clickListener();if(this.options.liveSearch){this.liveSearchListener()}this.render();this.setStyle();this.setWidth();if(this.options.container){this.selectPosition()}else{this.$element.on("hide.bs.select",function(){if(D.isVirtual()){var G=D.$menuInner[0],F=G.firstChild.cloneNode(false);G.replaceChild(F,G.firstChild);G.scrollTop=0}})}this.$menu.data("this",this);this.$newElement.data("this",this);if(this.options.mobile){this.mobile()}this.$newElement.on({"hide.bs.dropdown":function(F){D.$menuInner.attr("aria-expanded",false);D.$element.trigger("hide.bs.select",F)},"hidden.bs.dropdown":function(F){D.$element.trigger("hidden.bs.select",F)},"show.bs.dropdown":function(F){D.$menuInner.attr("aria-expanded",true);D.$element.trigger("show.bs.select",F)},"shown.bs.dropdown":function(F){D.$element.trigger("shown.bs.select",F)}});if(D.$element[0].hasAttribute("required")){this.$element.on("invalid",function(){D.$button.addClass("bs-invalid");D.$element.on({"shown.bs.select":function(){D.$element.val(D.$element.val()).off("shown.bs.select")},"rendered.bs.select":function(){if(this.validity.valid){D.$button.removeClass("bs-invalid")}D.$element.off("rendered.bs.select")}});D.$button.on("blur.bs.select",function(){D.$element.focus().blur();D.$button.off("blur.bs.select")})})}setTimeout(function(){D.$element.trigger("loaded.bs.select")})},createDropdown:function(){var H=(this.multiple||this.options.showTick)?" show-tick":"",J=this.autofocus?" autofocus":"";var I=this.options.header?'<div class="'+A.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"";var G=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+s(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>':"";var F=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+A.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+A.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>":"";var D=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+A.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>":"";var E='<div class="dropdown bootstrap-select'+H+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+(this.options.display==="static"?'data-display="static"':"")+'data-toggle="dropdown"'+J+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+(i.major==="4"?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+A.MENU+" "+(i.major==="4"?"":A.SHOW)+'" role="combobox">'+I+G+F+'<div class="inner '+A.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+A.MENU+" inner "+(i.major==="4"?A.SHOW:"")+'"></ul></div>'+D+"</div></div>";return j(E)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var E=0;E<this.selectpicker.current.data.length;E++){var D=this.selectpicker.current.data[E],F=true;if(D.type==="divider"){F=false;D.height=this.sizeInfo.dividerHeight}else{if(D.type==="optgroup-label"){F=false;D.height=this.sizeInfo.dropdownHeaderHeight}else{D.height=this.sizeInfo.liHeight}}if(D.disabled){F=false}this.selectpicker.view.canHighlight.push(F);D.position=(E===0?0:this.selectpicker.current.data[E-1].position)+D.height}},isVirtual:function(){return(this.options.virtualScroll!==false)&&this.selectpicker.main.elements.length>=this.options.virtualScroll||this.options.virtualScroll===true},createView:function(G,D){D=D||0;var H=this;this.selectpicker.current=G?this.selectpicker.search:this.selectpicker.main;var I;var E=[];var F;var J;var M;var K;this.setPositionData();L(D,true);this.$menuInner.off("scroll.createView").on("scroll.createView",function(O,N){if(!H.noScroll){L(this.scrollTop,N)}H.noScroll=false});function L(O,ag){var ac=H.selectpicker.current.elements.length,Z=[],W,N,R,aj,Q=undefined,ae,ai,ad,af=true,U=H.isVirtual();H.selectpicker.view.scrollTop=O;if(U===true){if(H.sizeInfo.hasScrollBar&&H.$menu[0].offsetWidth>H.sizeInfo.totalMenuWidth){H.sizeInfo.menuWidth=H.$menu[0].offsetWidth;H.sizeInfo.totalMenuWidth=H.sizeInfo.menuWidth+H.sizeInfo.scrollBarWidth;H.$menu.css("min-width",H.sizeInfo.menuWidth)}}W=Math.ceil(H.sizeInfo.menuInnerHeight/H.sizeInfo.liHeight*1.5);N=Math.round(ac/W)||1;for(var ah=0;ah<N;ah++){var al=(ah+1)*W;if(ah===N-1){al=ac}Z[ah]=[(ah)*W+(!ah?0:1),al];if(!ac){break}if(Q===undefined&&O<=H.selectpicker.current.data[al-1].position-H.sizeInfo.menuInnerHeight){Q=ah}}if(Q===undefined){Q=0}ae=[H.selectpicker.view.position0,H.selectpicker.view.position1];R=Math.max(0,Q-1);aj=Math.min(N-1,Q+1);H.selectpicker.view.position0=Math.max(0,Z[R][0])||0;H.selectpicker.view.position1=Math.min(ac,Z[aj][1])||0;ai=ae[0]!==H.selectpicker.view.position0||ae[1]!==H.selectpicker.view.position1;if(H.activeIndex!==undefined){J=H.selectpicker.current.elements[H.selectpicker.current.map.newIndex[H.prevActiveIndex]];E=H.selectpicker.current.elements[H.selectpicker.current.map.newIndex[H.activeIndex]];F=H.selectpicker.current.elements[H.selectpicker.current.map.newIndex[H.selectedIndex]];if(ag){if(H.activeIndex!==H.selectedIndex){E.classList.remove("active");if(E.firstChild){E.firstChild.classList.remove("active")}}H.activeIndex=undefined}if(H.activeIndex&&H.activeIndex!==H.selectedIndex&&F&&F.length){F.classList.remove("active");if(F.firstChild){F.firstChild.classList.remove("active")}}}if(H.prevActiveIndex!==undefined&&H.prevActiveIndex!==H.activeIndex&&H.prevActiveIndex!==H.selectedIndex&&J&&J.length){J.classList.remove("active");if(J.firstChild){J.firstChild.classList.remove("active")}}if(ag||ai){ad=H.selectpicker.view.visibleElements?H.selectpicker.view.visibleElements.slice():[];H.selectpicker.view.visibleElements=H.selectpicker.current.elements.slice(H.selectpicker.view.position0,H.selectpicker.view.position1);H.setOptionStatus();if(G||(U===false&&ag)){af=!y(ad,H.selectpicker.view.visibleElements)}if((ag||U===true)&&af){var V=H.$menuInner[0],ab=document.createDocumentFragment(),ak=V.firstChild.cloneNode(false),P,S,aa=U===true?H.selectpicker.view.visibleElements:H.selectpicker.current.elements;V.replaceChild(ak,V.firstChild);for(var ah=0,Y=aa.length;ah<Y;ah++){ab.appendChild(aa[ah])}if(U===true){P=(H.selectpicker.view.position0===0?0:H.selectpicker.current.data[H.selectpicker.view.position0-1].position),S=(H.selectpicker.view.position1>ac-1?0:H.selectpicker.current.data[ac-1].position-H.selectpicker.current.data[H.selectpicker.view.position1-1].position);V.firstChild.style.marginTop=P+"px";V.firstChild.style.marginBottom=S+"px"}V.firstChild.appendChild(ab)}}H.prevActiveIndex=H.activeIndex;if(!H.options.liveSearch){H.$menuInner.focus()}else{if(G&&ag){var T=0,X;if(!H.selectpicker.view.canHighlight[T]){T=1+H.selectpicker.view.canHighlight.slice(1).indexOf(true)}X=H.selectpicker.view.visibleElements[T];if(H.selectpicker.view.currentActive){H.selectpicker.view.currentActive.classList.remove("active");if(H.selectpicker.view.currentActive.firstChild){H.selectpicker.view.currentActive.firstChild.classList.remove("active")}}if(X){X.classList.add("active");if(X.firstChild){X.firstChild.classList.add("active")}}H.activeIndex=H.selectpicker.current.map.originalIndex[T]}}}j(window).off("resize.createView").on("resize.createView",function(){L(H.$menuInner[0].scrollTop)})},createLi:function(){var J=this,U=[],N,H=0,E=0,O=[],R=0,X=0,W=-1;if(!this.selectpicker.view.titleOption){this.selectpicker.view.titleOption=document.createElement("option")}var V={span:document.createElement("span"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("\u00A0")},T=V.span.cloneNode(false),D=document.createDocumentFragment();T.className=J.options.iconBase+" "+J.options.tickIcon+" check-mark";V.a.appendChild(T);V.a.setAttribute("role","option");V.subtext.className="text-muted";V.text=V.span.cloneNode(false);V.text.className="text";var M=function(ac,aa,ab,Z){var Y=V.li.cloneNode(false);if(ac){if(ac.nodeType===1||ac.nodeType===11){Y.appendChild(ac)}else{Y.innerHTML=ac}}if(typeof ab!=="undefined"&&""!==ab){Y.className=ab}if(typeof Z!=="undefined"&&null!==Z){Y.classList.add("optgroup-"+Z)}return Y};var P=function(ab,Z,aa){var Y=V.a.cloneNode(true);if(ab){if(ab.nodeType===11){Y.appendChild(ab)}else{Y.insertAdjacentHTML("beforeend",ab)}}if(typeof Z!=="undefined"&""!==Z){Y.className=Z}if(i.major==="4"){Y.classList.add("dropdown-item")}if(aa){Y.setAttribute("style",aa)}return Y};var S=function(ab){var Z=V.text.cloneNode(false),ac,Y;if(ab.optionContent){Z.innerHTML=ab.optionContent}else{Z.textContent=ab.text;if(ab.optionIcon){var aa=V.whitespace.cloneNode(false);Y=V.span.cloneNode(false);Y.className=J.options.iconBase+" "+ab.optionIcon;D.appendChild(Y);D.appendChild(aa)}if(ab.optionSubtext){ac=V.subtext.cloneNode(false);ac.innerHTML=ab.optionSubtext;Z.appendChild(ac)}}D.appendChild(Z);return D};var I=function(aa){var ab=V.text.cloneNode(false),Y,ac;ab.innerHTML=aa.labelEscaped;if(aa.labelIcon){var Z=V.whitespace.cloneNode(false);ac=V.span.cloneNode(false);ac.className=J.options.iconBase+" "+aa.labelIcon;D.appendChild(ac);D.appendChild(Z)}if(aa.labelSubtext){Y=V.subtext.cloneNode(false);Y.textContent=aa.labelSubtext;ab.appendChild(Y)}D.appendChild(ab);return D};if(this.options.title&&!this.multiple){W--;var F=this.$element[0],K=false,G=!this.selectpicker.view.titleOption.parentNode;if(G){this.selectpicker.view.titleOption.className="bs-title-option";this.selectpicker.view.titleOption.value="";var L=j(F.options[F.selectedIndex]);K=L.attr("selected")===undefined&&this.$element.data("selected")===undefined}if(G||this.selectpicker.view.titleOption.index!==0){F.insertBefore(this.selectpicker.view.titleOption,F.firstChild)}if(K){F.selectedIndex=0}}var Q=this.$element.find("option");Q.each(function(ad){var ac=j(this);W++;if(ac.hasClass("bs-title-option")){return}var av=ac.data();var ah=this.className||"",ab=s(this.style.cssText),au=av.content,ai=this.textContent,ak=av.tokens,aB=av.subtext,ax=av.icon,am=ac.parent(),af=am[0],aa=af.tagName==="OPTGROUP",at=aa&&af.disabled,aj=this.disabled||at,Z,an=this.previousElementSibling&&this.previousElementSibling.tagName==="OPTGROUP",az;var ar=am.data();if(av.hidden===true||J.options.hideDisabled&&(aj&&!aa||at)){Z=av.prevHiddenIndex;ac.next().data("prevHiddenIndex",(Z!==undefined?Z:ad));W--;if(!an){if(Z!==undefined){var aq=Q[Z].previousElementSibling;if(aq&&aq.tagName==="OPTGROUP"&&!aq.disabled){an=true}}}if(an&&O[O.length-1].type!=="divider"){W++;U.push(M(false,null,A.DIVIDER,R+"div"));O.push({type:"divider",optID:R})}return}if(aa&&av.divider!==true){if(J.options.hideDisabled&&aj){if(ar.allOptionsDisabled===undefined){var ap=am.children();am.data("allOptionsDisabled",ap.filter(":disabled").length===ap.length)}if(am.data("allOptionsDisabled")){W--;return}}var ay=" "+af.className||"";if(!this.previousElementSibling){R+=1;var ae=af.label,aw=s(ae),aA=ar.subtext,ao=ar.icon;if(ad!==0&&U.length>0){W++;U.push(M(false,null,A.DIVIDER,R+"div"));O.push({type:"divider",optID:R})}W++;var Y=I({labelEscaped:aw,labelSubtext:aA,labelIcon:ao});U.push(M(Y,null,"dropdown-header"+ay,R));O.push({content:aw,subtext:aA,type:"optgroup-label",optID:R});X=W-1}if(J.options.hideDisabled&&aj||av.hidden===true){W--;return}az=S({text:ai,optionContent:au,optionSubtext:aB,optionIcon:ax});U.push(M(P(az,"opt "+ah+ay,ab),ad,"",R));O.push({content:au||ai,subtext:aB,tokens:ak,type:"option",optID:R,headerIndex:X,lastIndex:X+af.childElementCount,originalIndex:ad,data:av});H++}else{if(av.divider===true){U.push(M(false,ad,A.DIVIDER));O.push({type:"divider",originalIndex:ad,data:av})}else{if(!an&&J.options.hideDisabled){Z=av.prevHiddenIndex;if(Z!==undefined){var aq=Q[Z].previousElementSibling;if(aq&&aq.tagName==="OPTGROUP"&&!aq.disabled){an=true}}}if(an&&O[O.length-1].type!=="divider"){W++;U.push(M(false,null,A.DIVIDER,R+"div"));O.push({type:"divider",optID:R})}az=S({text:ai,optionContent:au,optionSubtext:aB,optionIcon:ax});U.push(M(P(az,ah,ab),ad));O.push({content:au||ai,subtext:aB,tokens:ak,type:"option",originalIndex:ad,data:av});H++}}J.selectpicker.main.map.newIndex[ad]=W;J.selectpicker.main.map.originalIndex[W]=ad;var al=O[O.length-1];al.disabled=aj;var ag=0;if(al.content){ag+=al.content.length}if(al.subtext){ag+=al.subtext.length}if(ax){ag+=1}if(ag>E){E=ag;N=U[U.length-1]}});this.selectpicker.main.elements=U;this.selectpicker.main.data=O;this.selectpicker.current=this.selectpicker.main;this.selectpicker.view.widestOption=N;this.selectpicker.view.availableOptionsCount=H},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var K=this,F=this.$element.find("option"),G=[],E=[];this.togglePlaceholder();this.tabIndex();for(var H=0,M=this.selectpicker.main.elements.length;H<M;H++){var L=this.selectpicker.main.map.originalIndex[H],I=F[L];if(I&&I.selected){G.push(I);if(E.length<100&&K.options.selectedTextFormat!=="count"||G.length===1){if(K.options.hideDisabled&&(I.disabled||I.parentNode.tagName==="OPTGROUP"&&I.parentNode.disabled)){return}var J=this.selectpicker.main.data[H].data,O=J.icon&&K.options.showIcon?'<i class="'+K.options.iconBase+" "+J.icon+'"></i> ':"",Q,D;if(K.options.showSubtext&&J.subtext&&!K.multiple){Q=' <small class="text-muted">'+J.subtext+"</small>"}else{Q=""}if(I.title){D=I.title}else{if(J.content&&K.options.showContent){D=J.content.toString()}else{D=O+I.innerHTML.trim()+Q}}E.push(D)}}}var P=!this.multiple?E[0]:E.join(this.options.multipleSeparator);if(G.length>50){P+="..."}if(this.multiple&&this.options.selectedTextFormat.indexOf("count")!==-1){var N=this.options.selectedTextFormat.split(">");if((N.length>1&&G.length>N[1])||(N.length===1&&G.length>=2)){var R=this.selectpicker.view.availableOptionsCount,S=(typeof this.options.countSelectedText==="function")?this.options.countSelectedText(G.length,R):this.options.countSelectedText;P=S.replace("{0}",G.length.toString()).replace("{1}",R.toString())}}if(this.options.title==undefined){this.options.title=this.$element.attr("title")}if(this.options.selectedTextFormat=="static"){P=this.options.title}if(!P){P=typeof this.options.title!=="undefined"?this.options.title:this.options.noneSelectedText}this.$button[0].title=g(P.replace(/<[^>]*>?/g,"").trim());this.$button.find(".filter-option-inner-inner")[0].innerHTML=P;this.$element.trigger("rendered.bs.select")},setStyle:function(F,E){if(this.$element.attr("class")){this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""))}var D=F?F:this.options.style;if(E=="add"){this.$button.addClass(D)}else{if(E=="remove"){this.$button.removeClass(D)}else{this.$button.removeClass(this.options.style);this.$button.addClass(D)}}},liHeight:function(K){if(!K&&(this.options.size===false||this.sizeInfo)){return}if(!this.sizeInfo){this.sizeInfo={}}var I=document.createElement("div"),E=document.createElement("div"),P=document.createElement("div"),ab=document.createElement("ul"),X=document.createElement("li"),L=document.createElement("li"),W=document.createElement("li"),ae=document.createElement("a"),V=document.createElement("span"),aa=this.options.header&&this.$menu.find("."+A.POPOVERHEADER).length>0?this.$menu.find("."+A.POPOVERHEADER)[0].cloneNode(true):null,Q=this.options.liveSearch?document.createElement("div"):null,R=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(true):null,H=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(true):null;this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth;V.className="text";ae.className="dropdown-item "+this.$element.find("option")[0].className;I.className=this.$menu[0].parentNode.className+" "+A.SHOW;I.style.width=this.sizeInfo.selectWidth+"px";if(this.options.width==="auto"){E.style.minWidth=0}E.className=A.MENU+" "+A.SHOW;P.className="inner "+A.SHOW;ab.className=A.MENU+" inner "+(i.major==="4"?A.SHOW:"");X.className=A.DIVIDER;L.className="dropdown-header";V.appendChild(document.createTextNode("Inner text"));ae.appendChild(V);W.appendChild(ae);L.appendChild(V.cloneNode(true));if(this.selectpicker.view.widestOption){ab.appendChild(this.selectpicker.view.widestOption.cloneNode(true))}ab.appendChild(W);ab.appendChild(X);ab.appendChild(L);if(aa){E.appendChild(aa)}if(Q){var T=document.createElement("input");Q.className="bs-searchbox";T.className="form-control";Q.appendChild(T);E.appendChild(Q)}if(R){E.appendChild(R)}P.appendChild(ab);E.appendChild(P);if(H){E.appendChild(H)}I.appendChild(E);document.body.appendChild(I);var G=ae.offsetHeight,ac=L?L.offsetHeight:0,Z=aa?aa.offsetHeight:0,S=Q?Q.offsetHeight:0,O=R?R.offsetHeight:0,J=H?H.offsetHeight:0,U=j(X).outerHeight(true),F=window.getComputedStyle?window.getComputedStyle(E):false,D=E.offsetWidth,M=F?null:j(E),Y={vert:t(F?F.paddingTop:M.css("paddingTop"))+t(F?F.paddingBottom:M.css("paddingBottom"))+t(F?F.borderTopWidth:M.css("borderTopWidth"))+t(F?F.borderBottomWidth:M.css("borderBottomWidth")),horiz:t(F?F.paddingLeft:M.css("paddingLeft"))+t(F?F.paddingRight:M.css("paddingRight"))+t(F?F.borderLeftWidth:M.css("borderLeftWidth"))+t(F?F.borderRightWidth:M.css("borderRightWidth"))},N={vert:Y.vert+t(F?F.marginTop:M.css("marginTop"))+t(F?F.marginBottom:M.css("marginBottom"))+2,horiz:Y.horiz+t(F?F.marginLeft:M.css("marginLeft"))+t(F?F.marginRight:M.css("marginRight"))+2},ad;P.style.overflowY="scroll";ad=E.offsetWidth-D;document.body.removeChild(I);this.sizeInfo.liHeight=G;this.sizeInfo.dropdownHeaderHeight=ac;this.sizeInfo.headerHeight=Z;this.sizeInfo.searchHeight=S;this.sizeInfo.actionsHeight=O;this.sizeInfo.doneButtonHeight=J;this.sizeInfo.dividerHeight=U;this.sizeInfo.menuPadding=Y;this.sizeInfo.menuExtras=N;this.sizeInfo.menuWidth=D;this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth;this.sizeInfo.scrollBarWidth=ad;this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight;this.setPositionData()},getSelectPosition:function(){var E=this,G=j(window),I=E.$newElement.offset(),F=j(E.options.container),H;if(E.options.container&&!F.is("body")){H=F.offset();H.top+=parseInt(F.css("borderTopWidth"));H.left+=parseInt(F.css("borderLeftWidth"))}else{H={top:0,left:0}}var D=E.options.windowPadding;this.sizeInfo.selectOffsetTop=I.top-H.top-G.scrollTop();this.sizeInfo.selectOffsetBot=G.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-H.top-D[2];this.sizeInfo.selectOffsetLeft=I.left-H.left-G.scrollLeft();this.sizeInfo.selectOffsetRight=G.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-H.left-D[1];this.sizeInfo.selectOffsetTop-=D[0];this.sizeInfo.selectOffsetLeft-=D[3]},setMenuSize:function(J){this.getSelectPosition();var U=this.sizeInfo.selectWidth,F=this.sizeInfo.liHeight,R=this.sizeInfo.headerHeight,N=this.sizeInfo.searchHeight,K=this.sizeInfo.actionsHeight,H=this.sizeInfo.doneButtonHeight,M=this.sizeInfo.dividerHeight,Q=this.sizeInfo.menuPadding,L,O,D=0,I,E,P,G,T;if(this.options.dropupAuto){T=F*this.selectpicker.current.elements.length+Q.vert;this.$newElement.toggleClass(A.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&T+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)}if(this.options.size==="auto"){E=this.selectpicker.current.elements.length>3?this.sizeInfo.liHeight*3+this.sizeInfo.menuExtras.vert-2:0;O=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert;I=E+R+N+K+H;G=Math.max(E-Q.vert,0);if(this.$newElement.hasClass(A.DROPUP)){O=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert}P=O;L=O-R-N-K-H-Q.vert}else{if(this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size){for(var S=0;S<this.options.size;S++){if(this.selectpicker.current.data[S].type==="divider"){D++}}O=F*this.options.size+D*M+Q.vert;L=O-Q.vert;P=O+R+N+K+H;I=G=""}}if(this.options.dropdownAlignRight==="auto"){this.$menu.toggleClass(A.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<(this.$menu[0].offsetWidth-U))}this.$menu.css({"max-height":P+"px",overflow:"hidden","min-height":I+"px"});this.$menuInner.css({"max-height":L+"px","overflow-y":"auto","min-height":G+"px"});this.sizeInfo.menuInnerHeight=L;if(this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight){this.sizeInfo.hasScrollBar=true;this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth;this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)}if(this.dropdown&&this.dropdown._popper){this.dropdown._popper.update()}},setSize:function(E){this.liHeight(E);if(this.options.header){this.$menu.css("padding-top",0)}if(this.options.size===false){return}var F=this,H=j(window),D,G=0;this.setMenuSize();if(this.options.size==="auto"){this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return F.setMenuSize()});H.off("resize.setMenuSize scroll.setMenuSize").on("resize.setMenuSize scroll.setMenuSize",function(){return F.setMenuSize()})}else{if(this.options.size&&this.options.size!="auto"&&this.selectpicker.current.elements.length>this.options.size){this.$searchbox.off("input.setMenuSize propertychange.setMenuSize");H.off("resize.setMenuSize scroll.setMenuSize")}}if(E){G=this.$menuInner[0].scrollTop}else{if(!F.multiple){D=F.selectpicker.main.map.newIndex[F.$element[0].selectedIndex];if(typeof D==="number"&&F.options.size!==false){G=F.sizeInfo.liHeight*D;G=G-(F.sizeInfo.menuInnerHeight/2)+(F.sizeInfo.liHeight/2)}}}F.createView(false,G)},setWidth:function(){var D=this;if(this.options.width==="auto"){requestAnimationFrame(function(){D.$menu.css("min-width","0");D.liHeight();D.setMenuSize();var E=D.$newElement.clone().appendTo("body"),F=E.css("width","auto").children("button").outerWidth();E.remove();D.sizeInfo.selectWidth=Math.max(D.sizeInfo.totalMenuWidth,F);D.$newElement.css("width",D.sizeInfo.selectWidth+"px")})}else{if(this.options.width==="fit"){this.$menu.css("min-width","");this.$newElement.css("width","").addClass("fit-width")}else{if(this.options.width){this.$menu.css("min-width","");this.$newElement.css("width",this.options.width)}else{this.$menu.css("min-width","");this.$newElement.css("width","")}}}if(this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"){this.$newElement.removeClass("fit-width")}},selectPosition:function(){this.$bsContainer=j('<div class="bs-container" />');var E=this,F=j(this.options.container),I,H,G,D=function(K){var J={},L=E.options.display||j.fn.dropdown.Constructor.Default.display;E.$bsContainer.addClass(K.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(A.DROPUP,K.hasClass(A.DROPUP));I=K.offset();if(!F.is("body")){H=F.offset();H.top+=parseInt(F.css("borderTopWidth"))-F.scrollTop();H.left+=parseInt(F.css("borderLeftWidth"))-F.scrollLeft()}else{H={top:0,left:0}}G=K.hasClass(A.DROPUP)?0:K[0].offsetHeight;if(i.major<4||L==="static"){J.top=I.top-H.top+G;J.left=I.left-H.left}J.width=K[0].offsetWidth;E.$bsContainer.css(J)};this.$button.on("click.bs.dropdown.data-api",function(){if(E.isDisabled()){return}D(E.$newElement);E.$bsContainer.appendTo(E.options.container).toggleClass(A.SHOW,!E.$button.hasClass(A.SHOW)).append(E.$menu)});j(window).on("resize scroll",function(){D(E.$newElement)});this.$element.on("hide.bs.select",function(){E.$menu.data("height",E.$menu.height());E.$bsContainer.detach()})},setOptionStatus:function(){var I=this,J=this.$element.find("option");I.noScroll=false;if(I.selectpicker.view.visibleElements&&I.selectpicker.view.visibleElements.length){for(var G=0;G<I.selectpicker.view.visibleElements.length;G++){var F=I.selectpicker.current.map.originalIndex[G+I.selectpicker.view.position0],H=J[F];if(H){var E=this.selectpicker.main.map.newIndex[F],D=this.selectpicker.main.elements[E];I.setDisabled(F,H.disabled||H.parentNode.tagName==="OPTGROUP"&&H.parentNode.disabled,E,D);I.setSelected(F,H.selected,E,D)}}}},setSelected:function(G,F,E,L){var M=this.activeIndex!==undefined,D=this.activeIndex===G,J,H,K,I=D||F&&!this.multiple&&!M;if(!E){E=this.selectpicker.main.map.newIndex[G]}if(!L){L=this.selectpicker.main.elements[E]}K=L.firstChild;if(F){this.selectedIndex=G}L.classList.toggle("selected",F);L.classList.toggle("active",I);if(I){this.selectpicker.view.currentActive=L;this.activeIndex=G}if(K){K.classList.toggle("selected",F);K.classList.toggle("active",I);K.setAttribute("aria-selected",F)}if(!I){if(!M&&F&&this.prevActiveIndex!==undefined){J=this.selectpicker.main.map.newIndex[this.prevActiveIndex];H=this.selectpicker.main.elements[J];H.classList.toggle("selected",F);H.classList.remove("active");if(H.firstChild){H.firstChild.classList.toggle("selected",F);H.firstChild.classList.remove("active")}}}},setDisabled:function(G,H,F,D){var E;if(!F){F=this.selectpicker.main.map.newIndex[G]}if(!D){D=this.selectpicker.main.elements[F]}E=D.firstChild;D.classList.toggle(A.DISABLED,H);if(E){if(i.major==="4"){E.classList.toggle(A.DISABLED,H)}E.setAttribute("aria-disabled",H);if(H){E.setAttribute("tabindex",-1)}else{E.setAttribute("tabindex",0)}}},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var D=this;if(this.isDisabled()){this.$newElement.addClass(A.DISABLED);this.$button.addClass(A.DISABLED).attr("tabindex",-1).attr("aria-disabled",true)}else{if(this.$button.hasClass(A.DISABLED)){this.$newElement.removeClass(A.DISABLED);this.$button.removeClass(A.DISABLED).attr("aria-disabled",false)}if(this.$button.attr("tabindex")==-1&&!this.$element.data("tabindex")){this.$button.removeAttr("tabindex")}}this.$button.click(function(){return !D.isDisabled()})},togglePlaceholder:function(){var F=this.$element[0],D=F.selectedIndex,E=D===-1;if(!E&&!F.options[D].value){E=true}this.$button.toggleClass("bs-placeholder",E)},tabIndex:function(){if(this.$element.data("tabindex")!==this.$element.attr("tabindex")&&(this.$element.attr("tabindex")!==-98&&this.$element.attr("tabindex")!=="-98")){this.$element.data("tabindex",this.$element.attr("tabindex"));this.$button.attr("tabindex",this.$element.data("tabindex"))}this.$element.attr("tabindex",-98)},clickListener:function(){var E=this,G=j(document);G.data("spaceSelect",false);this.$button.on("keyup",function(H){if(/(32)/.test(H.keyCode.toString(10))&&G.data("spaceSelect")){H.preventDefault();G.data("spaceSelect",false)}});this.$newElement.on("show.bs.dropdown",function(){if(i.major>3&&!E.dropdown){E.dropdown=E.$button.data("bs.dropdown");E.dropdown._menu=E.$menu[0]}});this.$button.on("click.bs.dropdown.data-api",function(){if(!E.$newElement.hasClass(A.SHOW)){E.setSize()}});function D(){if(E.options.liveSearch){E.$searchbox.focus()}else{E.$menuInner.focus()}}function F(){if(E.dropdown&&E.dropdown._popper&&E.dropdown._popper.state.isCreated){D()}else{requestAnimationFrame(F)}}this.$element.on("shown.bs.select",function(){if(E.$menuInner[0].scrollTop!==E.selectpicker.view.scrollTop){E.$menuInner[0].scrollTop=E.selectpicker.view.scrollTop}if(i.major>3){requestAnimationFrame(F)}else{D()}});this.$menuInner.on("click","li a",function(ab,W){var N=j(this),aa=E.isVirtual()?E.selectpicker.view.position0:0,I=E.selectpicker.current.map.originalIndex[N.parent().index()+aa],Y=p(E.$element[0]),P=E.$element.prop("selectedIndex"),Q=true;if(E.multiple&&E.options.maxOptions!==1){ab.stopPropagation()}ab.preventDefault();if(!E.isDisabled()&&!N.parent().hasClass(A.DISABLED)){var V=E.$element.find("option"),X=V.eq(I),K=X.prop("selected"),U=X.parent("optgroup"),ac=U.find("option"),ae=E.options.maxOptions,S=U.data("maxOptions")||false;if(I===E.activeIndex){W=true}if(!W){E.prevActiveIndex=E.activeIndex;E.activeIndex=undefined}if(!E.multiple){V.prop("selected",false);X.prop("selected",true);E.setSelected(I,true)}else{X.prop("selected",!K);E.setSelected(I,!K);N.blur();if(ae!==false||S!==false){var J=ae<V.filter(":selected").length,M=S<U.find("option:selected").length;if((ae&&J)||(S&&M)){if(ae&&ae==1){V.prop("selected",false);X.prop("selected",true);for(var Z=0;Z<V.length;Z++){E.setSelected(Z,false)}E.setSelected(I,true)}else{if(S&&S==1){U.find("option:selected").prop("selected",false);X.prop("selected",true);for(var Z=0;Z<ac.length;Z++){var R=ac[Z];E.setSelected(V.index(R),false)}E.setSelected(I,true)}else{var H=typeof E.options.maxOptionsText==="string"?[E.options.maxOptionsText,E.options.maxOptionsText]:E.options.maxOptionsText,L=typeof H==="function"?H(ae,S):H,ad=L[0].replace("{n}",ae),O=L[1].replace("{n}",S),T=j('<div class="notify"></div>');if(L[2]){ad=ad.replace("{var}",L[2][ae>1?0:1]);O=O.replace("{var}",L[2][S>1?0:1])}X.prop("selected",false);E.$menu.append(T);if(ae&&J){T.append(j("<div>"+ad+"</div>"));Q=false;E.$element.trigger("maxReached.bs.select")}if(S&&M){T.append(j("<div>"+O+"</div>"));Q=false;E.$element.trigger("maxReachedGrp.bs.select")}setTimeout(function(){E.setSelected(I,false)},10);T.delay(750).fadeOut(300,function(){j(this).remove()})}}}}}if(!E.multiple||(E.multiple&&E.options.maxOptions===1)){E.$button.focus()}else{if(E.options.liveSearch){E.$searchbox.focus()}}if(Q){if((Y!=p(E.$element[0])&&E.multiple)||(P!=E.$element.prop("selectedIndex")&&!E.multiple)){r=[I,X.prop("selected"),Y];E.$element.triggerNative("change")}}}});this.$menu.on("click","li."+A.DISABLED+" a, ."+A.POPOVERHEADER+", ."+A.POPOVERHEADER+" :not(.close)",function(H){if(H.currentTarget==this){H.preventDefault();H.stopPropagation();if(E.options.liveSearch&&!j(H.target).hasClass("close")){E.$searchbox.focus()}else{E.$button.focus()}}});this.$menuInner.on("click",".divider, .dropdown-header",function(H){H.preventDefault();H.stopPropagation();if(E.options.liveSearch){E.$searchbox.focus()}else{E.$button.focus()}});this.$menu.on("click","."+A.POPOVERHEADER+" .close",function(){E.$button.click()});this.$searchbox.on("click",function(H){H.stopPropagation()});this.$menu.on("click",".actions-btn",function(H){if(E.options.liveSearch){E.$searchbox.focus()}else{E.$button.focus()}H.preventDefault();H.stopPropagation();if(j(this).hasClass("bs-select-all")){E.selectAll()}else{E.deselectAll()}});this.$element.on({change:function(){E.render();E.$element.trigger("changed.bs.select",r);r=null},focus:function(){E.$button.focus()}})},liveSearchListener:function(){var E=this,D=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){if(!!E.$searchbox.val()){E.$searchbox.val("")}});this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(F){F.stopPropagation()});this.$searchbox.on("input propertychange",function(){var F=E.$searchbox.val();E.selectpicker.search.map.newIndex={};E.selectpicker.search.map.originalIndex={};E.selectpicker.search.elements=[];E.selectpicker.search.data=[];if(F){var M,P=[],H=F.toUpperCase(),G={},I=[],K=E._searchStyle(),Q=E.options.liveSearchNormalize;E._$lisSelected=E.$menuInner.find(".selected");for(var M=0;M<E.selectpicker.main.data.length;M++){var R=E.selectpicker.main.data[M];if(!G[M]){G[M]=h(R,H,K,Q)}if(G[M]&&R.headerIndex!==undefined&&I.indexOf(R.headerIndex)===-1){if(R.headerIndex>0){G[R.headerIndex-1]=true;I.push(R.headerIndex-1)}G[R.headerIndex]=true;I.push(R.headerIndex);G[R.lastIndex+1]=true}if(G[M]&&R.type!=="optgroup-label"){I.push(M)}}for(var M=0,L=I.length;M<L;M++){var N=I[M],J=I[M-1],R=E.selectpicker.main.data[N],O=E.selectpicker.main.data[J];if(R.type!=="divider"||(R.type==="divider"&&O&&O.type!=="divider"&&L-1!==M)){E.selectpicker.search.data.push(R);P.push(E.selectpicker.main.elements[N]);if(R.hasOwnProperty("originalIndex")){E.selectpicker.search.map.newIndex[R.originalIndex]=P.length-1;E.selectpicker.search.map.originalIndex[P.length-1]=R.originalIndex}}}E.activeIndex=undefined;E.noScroll=true;E.$menuInner.scrollTop(0);E.selectpicker.search.elements=P;E.createView(true);if(!P.length){D.className="no-results";D.innerHTML=E.options.noneResultsText.replace("{0}",'"'+s(F)+'"');E.$menuInner[0].firstChild.appendChild(D)}}else{E.$menuInner.scrollTop(0);E.createView(false)}})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(D){if(typeof D!=="undefined"){this.$element.val(D).triggerNative("change");return this.$element}else{return this.$element.val()}},changeAll:function(F){if(!this.multiple){return}if(typeof F==="undefined"){F=true}var D=this.$element.find("option"),G=0,E=0,J=p(this.$element[0]);this.$element.addClass("bs-select-hidden");for(var H=0;H<this.selectpicker.current.elements.length;H++){var L=this.selectpicker.current.data[H],K=this.selectpicker.current.map.originalIndex[H],I=D[K];if(I&&!I.disabled&&L.type!=="divider"){if(I.selected){G++}I.selected=F;if(I.selected){E++}}}this.$element.removeClass("bs-select-hidden");if(G===E){return}this.setOptionStatus();this.togglePlaceholder();r=[null,null,J];this.$element.triggerNative("change")},selectAll:function(){return this.changeAll(true)},deselectAll:function(){return this.changeAll(false)},toggle:function(D){D=D||window.event;if(D){D.stopPropagation()}this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(X){var J=j(this),G=J.hasClass("dropdown-toggle"),R=G?J.closest(".dropdown"):J.closest(z.MENU),N=R.data("this"),H=N.findLis(),K,V,O,T,I,P=false,Z=X.which===B.TAB&&!G&&!N.options.selectOnTab,Y=f.test(X.which)||Z,E=N.$menuInner[0].scrollTop,L=N.isVirtual(),W=L===true?N.selectpicker.view.position0:0;V=N.$newElement.hasClass(A.SHOW);if(!V&&(Y||X.which>=48&&X.which<=57||X.which>=96&&X.which<=105||X.which>=65&&X.which<=90)){N.$button.trigger("click.bs.dropdown.data-api")}if(X.which===B.ESCAPE&&V){X.preventDefault();N.$button.trigger("click.bs.dropdown.data-api").focus()}if(Y){if(!H.length){return}K=L===true?H.index(H.filter(".active")):N.selectpicker.current.map.newIndex[N.activeIndex];if(K===undefined){K=-1}if(K!==-1){O=N.selectpicker.current.elements[K+W];O.classList.remove("active");if(O.firstChild){O.firstChild.classList.remove("active")}}if(X.which===B.ARROW_UP){if(K!==-1){K--}if(K+W<0){K+=H.length}if(!N.selectpicker.view.canHighlight[K+W]){K=N.selectpicker.view.canHighlight.slice(0,K+W).lastIndexOf(true)-W;if(K===-1){K=H.length-1}}}else{if(X.which===B.ARROW_DOWN||Z){K++;if(K+W>=N.selectpicker.view.canHighlight.length){K=0}if(!N.selectpicker.view.canHighlight[K+W]){K=K+1+N.selectpicker.view.canHighlight.slice(K+W+1).indexOf(true)}}}X.preventDefault();var S=W+K;if(X.which===B.ARROW_UP){if(W===0&&K===H.length-1){N.$menuInner[0].scrollTop=N.$menuInner[0].scrollHeight;S=N.selectpicker.current.elements.length-1}else{T=N.selectpicker.current.data[S];I=T.position-T.height;P=I<E}}else{if(X.which===B.ARROW_DOWN||Z){if(K===0){N.$menuInner[0].scrollTop=0;S=0}else{T=N.selectpicker.current.data[S];I=T.position-N.sizeInfo.menuInnerHeight;P=I>E}}}O=N.selectpicker.current.elements[S];if(O){O.classList.add("active");if(O.firstChild){O.firstChild.classList.add("active")}}N.activeIndex=N.selectpicker.current.map.originalIndex[S];N.selectpicker.view.currentActive=O;if(P){N.$menuInner[0].scrollTop=I}if(N.options.liveSearch){N.$searchbox.focus()}else{J.focus()}}else{if(!J.is("input")&&!x.test(X.which)||(X.which===B.SPACE&&N.selectpicker.keydown.keyHistory)){var ab,D=[],M;X.preventDefault();N.selectpicker.keydown.keyHistory+=u[X.which];if(N.selectpicker.keydown.resetKeyHistory.cancel){clearTimeout(N.selectpicker.keydown.resetKeyHistory.cancel)}N.selectpicker.keydown.resetKeyHistory.cancel=N.selectpicker.keydown.resetKeyHistory.start();M=N.selectpicker.keydown.keyHistory;if(/^(.)\1+$/.test(M)){M=M.charAt(0)}for(var U=0;U<N.selectpicker.current.data.length;U++){var Q=N.selectpicker.current.data[U],aa;aa=h(Q,M,"startsWith",true);if(aa&&N.selectpicker.view.canHighlight[U]){Q.index=U;D.push(Q.originalIndex)}}if(D.length){var F=0;H.removeClass("active").find("a").removeClass("active");if(M.length===1){F=D.indexOf(N.activeIndex);if(F===-1||F===D.length-1){F=0}else{F++}}ab=N.selectpicker.current.map.newIndex[D[F]];T=N.selectpicker.current.data[ab];if(E-T.position>0){I=T.position-T.height;P=true}else{I=T.position-N.sizeInfo.menuInnerHeight;P=T.position>E+N.sizeInfo.menuInnerHeight}O=N.selectpicker.current.elements[ab];O.classList.add("active");if(O.firstChild){O.firstChild.classList.add("active")}N.activeIndex=D[F];O.firstChild.focus();if(P){N.$menuInner[0].scrollTop=I}J.focus()}}}if(V&&((X.which===B.SPACE&&!N.selectpicker.keydown.keyHistory)||X.which===B.ENTER||(X.which===B.TAB&&N.options.selectOnTab))){if(X.which!==B.SPACE){X.preventDefault()}if(!N.options.liveSearch||X.which!==B.SPACE){N.$menuInner.find(".active a").trigger("click",true);J.focus();if(!N.options.liveSearch){X.preventDefault();j(document).data("spaceSelect",true)}}}},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){var D=j.extend({},this.options,this.$element.data());this.options=D;this.selectpicker.main.map.newIndex={};this.selectpicker.main.map.originalIndex={};this.createLi();this.checkDisabled();this.render();this.setStyle();this.setWidth();this.setSize(true);this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove();if(this.$bsContainer){this.$bsContainer.remove()}else{this.$menu.remove()}this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};function e(F){var D=arguments;var I=F;[].shift.apply(D);if(!i.success){try{i.full=(j.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(G){i.full=C.BootstrapVersion.split(" ")[0].split(".")}i.major=i.full[0];i.success=true;if(i.major==="4"){A.DIVIDER="dropdown-divider";A.SHOW="show";A.BUTTONCLASS="btn-light";C.DEFAULTS.style=A.BUTTONCLASS="btn-light";A.POPOVERHEADER="popover-header"}}var H;var E=this.each(function(){var N=j(this);if(N.is("select")){var M=N.data("selectpicker"),K=typeof I=="object"&&I;if(!M){var J=j.extend({},C.DEFAULTS,j.fn.selectpicker.defaults||{},N.data(),K);J.template=j.extend({},C.DEFAULTS.template,(j.fn.selectpicker.defaults?j.fn.selectpicker.defaults.template:{}),N.data().template,K.template);N.data("selectpicker",(M=new C(this,J)))}else{if(K){for(var L in K){if(K.hasOwnProperty(L)){M.options[L]=K[L]}}}}if(typeof I=="string"){if(M[I] instanceof Function){H=M[I].apply(M,D)}else{H=M.options[I]}}}});if(typeof H!=="undefined"){return H}else{return E}}var b=j.fn.selectpicker;j.fn.selectpicker=e;j.fn.selectpicker.Constructor=C;j.fn.selectpicker.noConflict=function(){j.fn.selectpicker=b;return this};j(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',C.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',function(D){D.stopPropagation()});j(window).on("load.bs.select.data-api",function(){j(".selectpicker").each(function(){var D=j(this);e.call(D,D.data())})})})(a)}));